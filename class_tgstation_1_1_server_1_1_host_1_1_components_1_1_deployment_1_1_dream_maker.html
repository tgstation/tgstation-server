<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.Deployment.DreamMaker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.19.0</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment.html">Deployment</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.Deployment.DreamMaker Class Reference<span class="mlabels"><span class="mlabel">sealed</span></span></div></div>
</div><!--header-->
<div class="contents">

<p> 
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.Deployment.DreamMaker:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_inherit__map">
<area shape="rect" title=" " alt="" coords="5,79,232,120"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker.html" title="For managing the compiler." alt="" coords="69,5,168,31"/>
<area shape="poly" title=" " alt="" coords="121,46,121,79,116,79,116,46"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.Deployment.DreamMaker:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_coll__map" id="a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_coll__map">
<area shape="rect" title=" " alt="" coords="903,627,1129,668"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker.html" title="For managing the compiler." alt="" coords="473,21,572,47"/>
<area shape="poly" title=" " alt="" coords="587,16,654,6,732,4,772,9,811,19,848,35,881,58,897,76,913,101,939,166,961,247,979,336,1004,509,1016,627,1011,627,999,510,974,337,956,248,934,168,908,103,893,79,877,62,845,40,809,24,771,15,732,10,655,11,588,21"/>
<area shape="rect" title=" " alt="" coords="478,71,567,96"/>
<area shape="poly" title=" " alt="" coords="582,78,660,76,748,79,827,89,858,98,881,111,896,127,910,150,935,209,957,281,975,361,1002,518,1015,626,1010,627,997,518,970,362,952,283,930,210,905,152,892,131,877,115,856,103,826,94,747,84,660,82,582,83"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html" title="For managing the engine installations." alt="" coords="409,186,636,227"/>
<area shape="poly" title=" " alt="" coords="651,207,719,213,785,222,842,235,881,253,921,295,952,344,976,397,993,452,1005,505,1012,554,1017,627,1012,627,1007,555,1000,506,988,454,971,399,948,347,917,298,877,258,840,240,784,227,718,218,651,213"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="188,184,323,210"/>
<area shape="poly" title=" " alt="" coords="338,197,409,200,409,205,338,202"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html" title="For managing connected chat services." alt="" coords="409,121,636,161"/>
<area shape="poly" title=" " alt="" coords="334,178,422,159,423,164,336,183"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,184,117,210"/>
<area shape="poly" title=" " alt="" coords="132,194,187,194,187,200,132,200"/>
<area shape="rect" href="class_i_disposable.html" title=" " alt="" coords="211,241,300,267"/>
<area shape="poly" title=" " alt="" coords="315,241,408,224,409,229,316,246"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html" title="Factory for creating and loading IRepositorys." alt="" coords="409,251,636,292"/>
<area shape="poly" title=" " alt="" coords="315,255,409,262,409,267,315,261"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="439,317,606,357"/>
<area shape="poly" title=" " alt="" coords="622,332,695,333,769,338,835,348,861,356,880,365,913,393,939,426,961,462,979,500,1003,572,1014,626,1009,627,998,573,974,502,957,464,935,429,909,396,878,370,859,361,834,353,769,343,694,339,622,337"/>
<area shape="rect" title=" " alt="" coords="481,381,564,407"/>
<area shape="poly" title=" " alt="" coords="579,386,645,384,723,389,804,406,844,421,880,440,906,459,929,482,967,534,994,585,1010,626,1005,628,989,588,962,537,925,486,903,463,878,444,842,425,803,411,722,394,645,389,580,391"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html" title="Factory for ISessionControllers." alt="" coords="409,431,636,472"/>
<area shape="poly" title=" " alt="" coords="651,454,707,462,766,474,825,491,880,515,918,539,952,569,1002,625,998,629,949,573,915,543,878,519,823,496,764,479,706,467,651,460"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="409,497,636,537"/>
<area shape="poly" title=" " alt="" coords="651,529,764,549,880,580,933,601,980,624,977,629,931,606,878,585,762,554,650,534"/>
<area shape="poly" title=" " alt="" coords="651,125,710,128,771,137,829,158,856,172,881,191,905,214,926,240,960,298,985,361,1001,426,1012,488,1017,545,1018,627,1013,627,1012,545,1006,489,996,427,980,363,955,301,922,244,901,218,877,195,853,177,827,163,769,143,709,133,651,130"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="193,125,318,151"/>
<area shape="poly" title=" " alt="" coords="333,136,409,137,409,142,333,142"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html" title="For launching IProcess&#39;." alt="" coords="424,562,621,603"/>
<area shape="poly" title=" " alt="" coords="637,593,879,625,903,628,902,633,879,630,636,599"/>
<area shape="poly" title=" " alt="" coords="651,271,719,276,785,284,842,296,880,313,916,348,945,388,968,432,986,478,1007,564,1016,627,1011,627,1002,565,980,480,963,434,941,391,912,351,878,318,840,301,784,289,718,281,651,277"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html" title="Sink for CompileJobs." alt="" coords="409,627,636,668"/>
<area shape="poly" title=" " alt="" coords="651,645,902,645,902,650,651,650"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html" title="Provides the most recently deployed CompileJob." alt="" coords="166,635,344,660"/>
<area shape="poly" title=" " alt="" coords="360,645,409,645,409,650,360,650"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html" title="Factory for creating IRemoteDeploymentManagers." alt="" coords="394,692,651,747"/>
<area shape="poly" title=" " alt="" coords="666,696,879,665,902,662,903,667,879,671,667,702"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html" title="For waiting asynchronously." alt="" coords="432,771,613,812"/>
<area shape="poly" title=" " alt="" coords="628,775,749,752,815,736,878,716,933,692,980,666,983,671,935,697,880,721,816,741,750,758,629,781"/>
<area shape="rect" title=" " alt="" coords="440,837,605,877"/>
<area shape="poly" title=" " alt="" coords="620,852,681,846,747,834,814,816,878,788,917,761,951,728,999,667,1004,670,955,732,920,765,880,793,816,821,748,840,681,851,621,857"/>
<area shape="rect" title=" " alt="" coords="402,901,643,957"/>
<area shape="poly" title=" " alt="" coords="657,930,713,924,770,913,826,894,878,867,903,846,926,821,964,766,990,711,1006,668,1011,669,995,713,968,768,931,825,907,850,880,871,828,899,771,918,714,929,658,935"/>
<area shape="rect" title=" " alt="" coords="502,981,543,1007"/>
<area shape="poly" title=" " alt="" coords="558,992,634,990,729,984,818,971,853,962,877,950,910,920,937,884,959,845,977,804,999,726,1010,668,1015,669,1005,727,982,806,964,847,942,887,914,923,881,954,855,967,819,977,730,990,635,995,558,997"/>
<area shape="rect" title=" " alt="" coords="464,1031,581,1056"/>
<area shape="poly" title=" " alt="" coords="597,1050,673,1057,756,1060,829,1055,857,1049,878,1040,919,1001,951,953,975,901,992,846,1003,792,1009,742,1013,668,1018,668,1014,743,1008,793,997,847,980,903,956,956,923,1004,880,1044,859,1054,830,1061,756,1065,673,1062,596,1055"/>
<area shape="rect" title=" " alt="" coords="469,1080,576,1106"/>
<area shape="poly" title=" " alt="" coords="592,1098,669,1103,753,1105,828,1099,857,1092,877,1082,902,1053,925,1007,946,950,964,886,993,759,1009,668,1014,669,998,760,969,887,951,951,930,1009,906,1056,881,1086,859,1097,829,1104,753,1110,668,1108,591,1103"/>
<area shape="rect" title=" " alt="" coords="451,1130,594,1171"/>
<area shape="poly" title=" " alt="" coords="610,1168,674,1176,745,1175,781,1170,815,1161,848,1147,877,1127,904,1094,927,1043,949,978,967,907,995,767,1010,668,1015,669,1000,768,972,908,954,980,932,1045,908,1097,881,1131,850,1151,817,1166,782,1175,746,1180,674,1181,609,1173"/>
<area shape="rect" title=" " alt="" coords="492,1195,553,1220"/>
<area shape="poly" title=" " alt="" coords="568,1210,646,1218,738,1221,822,1216,855,1209,877,1198,893,1182,907,1160,933,1100,955,1025,973,942,998,780,1010,668,1016,668,1003,780,978,943,960,1026,938,1101,912,1162,897,1185,881,1202,857,1214,823,1222,738,1227,645,1223,568,1216"/>
<area shape="rect" title=" " alt="" coords="500,1244,545,1270"/>
<area shape="poly" title=" " alt="" coords="561,1266,627,1281,711,1290,756,1288,800,1280,841,1265,877,1242,893,1224,909,1200,935,1134,957,1053,975,963,1000,788,1011,668,1016,669,1005,789,981,964,963,1054,940,1136,913,1202,898,1228,881,1246,843,1270,801,1285,756,1293,711,1295,626,1286,559,1271"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aea0efa31485ae25647b7a25d402ec5ed" id="r_aea0efa31485ae25647b7a25d402ec5ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aea0efa31485ae25647b7a25d402ec5ed">DreamMaker</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html">IEngineManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html">StaticFiles.IConfiguration</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html">IProcessExecutor</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html">ICompileJobSink</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html">IRepositoryManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a>, IMetricFactory metricFactory, IOptionsMonitor&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html">SessionConfiguration</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad55bd2d971c2be8939b0ab344f843abc">sessionConfigurationOptions</a>, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>)</td></tr>
<tr class="memdesc:aea0efa31485ae25647b7a25d402ec5ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the DreamMaker class.  <br /></td></tr>
<tr class="separator:aea0efa31485ae25647b7a25d402ec5ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ea1632011a37a072e9d1c9e3d04c13" id="r_a38ea1632011a37a072e9d1c9e3d04c13"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13">DeploymentProcess</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Models.Job</a> job, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> databaseContextFactory, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a38ea1632011a37a072e9d1c9e3d04c13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and a compile job and insert it into the database. Meant to be called by a IJobManager.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The running Job.</td></tr>
    <tr><td class="paramname">databaseContextFactory</td><td>The IDatabaseContextFactory for the operation.</td></tr>
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter to report compilation progress.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:a38ea1632011a37a072e9d1c9e3d04c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4d28d2170dd121e9e09135a02ec05b51" id="r_a4d28d2170dd121e9e09135a02ec05b51"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; TimeSpan?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51">CalculateExpectedDeploymentTime</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a4d28d2170dd121e9e09135a02ec05b51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the average length of a deployment using a given <em>databaseContext</em> .  <br /></td></tr>
<tr class="separator:a4d28d2170dd121e9e09135a02ec05b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06dba3c351744dea4044270664675ed9" id="r_a06dba3c351744dea4044270664675ed9"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9">Compile</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Models.Job</a> job, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>? oldCompileJob, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">Models.RevisionInformation</a> revisionInformation, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html">Api.Models.Internal.DreamMakerSettings</a> dreamMakerSettings, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a> repository, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a> remoteDeploymentManager, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, TimeSpan? estimatedDuration, bool localCommitExistsOnRemote, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a06dba3c351744dea4044270664675ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the compile implementation.  <br /></td></tr>
<tr class="separator:a06dba3c351744dea4044270664675ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2394e942cf255412fe358bef742b580c" id="r_a2394e942cf255412fe358bef742b580c"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c">RunCompileJob</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html">Api.Models.Internal.DreamMakerSettings</a> dreamMakerSettings, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a> engineLock, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a> repository, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a> remoteDeploymentManager, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2394e942cf255412fe358bef742b580c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes and populate a given <em>job</em> .  <br /></td></tr>
<tr class="separator:a2394e942cf255412fe358bef742b580c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143fbc68ad876ca7e7ce4145d97d9278" id="r_a143fbc68ad876ca7e7ce4145d97d9278"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278">ProgressTask</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, TimeSpan? estimatedDuration, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a143fbc68ad876ca7e7ce4145d97d9278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gradually triggers a given <em>progressReporter</em>  over a given <em>estimatedDuration</em> .  <br /></td></tr>
<tr class="separator:a143fbc68ad876ca7e7ce4145d97d9278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a188d9b663c305c1ed438b5ca1494652c" id="r_a188d9b663c305c1ed438b5ca1494652c"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a188d9b663c305c1ed438b5ca1494652c">VerifyApi</a> (uint timeout, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a> securityLevel, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a> engineLock, ushort portToUse, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ae758c5cd6d61f61a7dc4b6f3c7000b52">DMApiValidationMode</a> validationMode, bool logOutput, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a188d9b663c305c1ed438b5ca1494652c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a quick DD instance to test the DMAPI is installed on the target code.  <br /></td></tr>
<tr class="separator:a188d9b663c305c1ed438b5ca1494652c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf43fc4a80b8b41e1d3030ba446971c6" id="r_adf43fc4a80b8b41e1d3030ba446971c6"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6">RunDreamMaker</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a> engineLock, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, string? additionalCompilerArguments, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:adf43fc4a80b8b41e1d3030ba446971c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compiles a .dme with DreamMaker.  <br /></td></tr>
<tr class="separator:adf43fc4a80b8b41e1d3030ba446971c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd0b61739ab535d67d9081d8071b8f0b" id="r_acd0b61739ab535d67d9081d8071b8f0b"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b">ModifyDme</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:acd0b61739ab535d67d9081d8071b8f0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds server side includes to the .dme being compiled.  <br /></td></tr>
<tr class="separator:acd0b61739ab535d67d9081d8071b8f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10266c7acfc715ffec0cb0189d39c6a4" id="r_a10266c7acfc715ffec0cb0189d39c6a4"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">CleanupFailedCompile</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a> remoteDeploymentManager, <a class="el" href="class_exception.html">Exception</a> exception)</td></tr>
<tr class="memdesc:a10266c7acfc715ffec0cb0189d39c6a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up a failed compile <em>job</em> .  <br /></td></tr>
<tr class="separator:a10266c7acfc715ffec0cb0189d39c6a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a8cdce0ecb73a635564b1eafc0fc0372f" id="r_a8cdce0ecb73a635564b1eafc0fc0372f"><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">FormatExceptionForUsers</a> (<a class="el" href="class_exception.html">Exception</a> exception)</td></tr>
<tr class="memdesc:a8cdce0ecb73a635564b1eafc0fc0372f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format a given <a class="el" href="class_exception.html">Exception</a> for display to users.  <br /></td></tr>
<tr class="separator:a8cdce0ecb73a635564b1eafc0fc0372f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa71af19173e2a9edb56655c7eeb75968" id="r_aa71af19173e2a9edb56655c7eeb75968"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html">IEngineManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a></td></tr>
<tr class="memdesc:aa71af19173e2a9edb56655c7eeb75968"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IEngineManager for DreamMaker.  <br /></td></tr>
<tr class="separator:aa71af19173e2a9edb56655c7eeb75968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f0da2a044d1b9df7e85492cb58c076c" id="r_a5f0da2a044d1b9df7e85492cb58c076c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a></td></tr>
<tr class="memdesc:a5f0da2a044d1b9df7e85492cb58c076c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager for DreamMaker.  <br /></td></tr>
<tr class="separator:a5f0da2a044d1b9df7e85492cb58c076c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe7ecccab0b5b1be9fdda8cbf097d9b" id="r_a2fe7ecccab0b5b1be9fdda8cbf097d9b"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html">StaticFiles.IConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a></td></tr>
<tr class="memdesc:a2fe7ecccab0b5b1be9fdda8cbf097d9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The StaticFiles.IConfiguration for DreamMaker.  <br /></td></tr>
<tr class="separator:a2fe7ecccab0b5b1be9fdda8cbf097d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8322a848923985ee4e06d792dccb8643" id="r_a8322a848923985ee4e06d792dccb8643"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a></td></tr>
<tr class="memdesc:a8322a848923985ee4e06d792dccb8643"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionControllerFactory for DreamMaker.  <br /></td></tr>
<tr class="separator:a8322a848923985ee4e06d792dccb8643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfcbd4e2f809faa445f7ea56fe4e5f0e" id="r_abfcbd4e2f809faa445f7ea56fe4e5f0e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a></td></tr>
<tr class="memdesc:abfcbd4e2f809faa445f7ea56fe4e5f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IEventConsumer for DreamMaker.  <br /></td></tr>
<tr class="separator:abfcbd4e2f809faa445f7ea56fe4e5f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f8e86f9e52a3f5e027b9570c5f32df" id="r_ad8f8e86f9e52a3f5e027b9570c5f32df"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a></td></tr>
<tr class="memdesc:ad8f8e86f9e52a3f5e027b9570c5f32df"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IChatManager for DreamMaker.  <br /></td></tr>
<tr class="separator:ad8f8e86f9e52a3f5e027b9570c5f32df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d40fb1d02610364e59b9feedb4e75d9" id="r_a8d40fb1d02610364e59b9feedb4e75d9"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html">IProcessExecutor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a></td></tr>
<tr class="memdesc:a8d40fb1d02610364e59b9feedb4e75d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IProcessExecutor for DreamMaker.  <br /></td></tr>
<tr class="separator:a8d40fb1d02610364e59b9feedb4e75d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cfc680dd4fa5908a6ae164d14530f39" id="r_a0cfc680dd4fa5908a6ae164d14530f39"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html">IRepositoryManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a></td></tr>
<tr class="memdesc:a0cfc680dd4fa5908a6ae164d14530f39"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRepositoryManager for DreamMaker.  <br /></td></tr>
<tr class="separator:a0cfc680dd4fa5908a6ae164d14530f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab01d9cb0fcd270eea9ec47a4e0684f4a" id="r_ab01d9cb0fcd270eea9ec47a4e0684f4a"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html">ICompileJobSink</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a></td></tr>
<tr class="memdesc:ab01d9cb0fcd270eea9ec47a4e0684f4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ICompileJobSink for DreamMaker.  <br /></td></tr>
<tr class="separator:ab01d9cb0fcd270eea9ec47a4e0684f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a753ddaadb407331cf9d140c96fe5374b" id="r_a753ddaadb407331cf9d140c96fe5374b"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a></td></tr>
<tr class="memdesc:a753ddaadb407331cf9d140c96fe5374b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRemoteDeploymentManagerFactory for DreamMaker.  <br /></td></tr>
<tr class="separator:a753ddaadb407331cf9d140c96fe5374b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af28269cbf6ac69ab9cde83fe1f117fde" id="r_af28269cbf6ac69ab9cde83fe1f117fde"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a></td></tr>
<tr class="memdesc:af28269cbf6ac69ab9cde83fe1f117fde"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for DreamMaker.  <br /></td></tr>
<tr class="separator:af28269cbf6ac69ab9cde83fe1f117fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad55bd2d971c2be8939b0ab344f843abc" id="r_ad55bd2d971c2be8939b0ab344f843abc"><td class="memItemLeft" align="right" valign="top">readonly IOptionsMonitor&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html">SessionConfiguration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad55bd2d971c2be8939b0ab344f843abc">sessionConfigurationOptions</a></td></tr>
<tr class="memdesc:ad55bd2d971c2be8939b0ab344f843abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IOptionsMonitor&lt;TOptions&gt; of SessionConfiguration for DreamMaker.  <br /></td></tr>
<tr class="separator:ad55bd2d971c2be8939b0ab344f843abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d5a133d669af1e14db0104b67103ccf" id="r_a1d5a133d669af1e14db0104b67103ccf"><td class="memItemLeft" align="right" valign="top">readonly ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a></td></tr>
<tr class="memdesc:a1d5a133d669af1e14db0104b67103ccf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for DreamMaker.  <br /></td></tr>
<tr class="separator:a1d5a133d669af1e14db0104b67103ccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b667aa89c476c9cb0cf71cb5add8a6" id="r_ac5b667aa89c476c9cb0cf71cb5add8a6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a></td></tr>
<tr class="memdesc:ac5b667aa89c476c9cb0cf71cb5add8a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Instance DreamMaker belongs to.  <br /></td></tr>
<tr class="separator:ac5b667aa89c476c9cb0cf71cb5add8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d851b19e54c63b2298a7510cdbe25dc" id="r_a7d851b19e54c63b2298a7510cdbe25dc"><td class="memItemLeft" align="right" valign="top">readonly Counter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a7d851b19e54c63b2298a7510cdbe25dc">attemptedDeployments</a></td></tr>
<tr class="memdesc:a7d851b19e54c63b2298a7510cdbe25dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of attempted deployments.  <br /></td></tr>
<tr class="separator:a7d851b19e54c63b2298a7510cdbe25dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc8863bee957edada2da93870ce86f4" id="r_a7bc8863bee957edada2da93870ce86f4"><td class="memItemLeft" align="right" valign="top">readonly Counter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a7bc8863bee957edada2da93870ce86f4">successfulDeployments</a></td></tr>
<tr class="memdesc:a7bc8863bee957edada2da93870ce86f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of successful deployments.  <br /></td></tr>
<tr class="separator:a7bc8863bee957edada2da93870ce86f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a870ada202174ecaef325583cd626f3df" id="r_a870ada202174ecaef325583cd626f3df"><td class="memItemLeft" align="right" valign="top">readonly Counter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a870ada202174ecaef325583cd626f3df">failedDeployments</a></td></tr>
<tr class="memdesc:a870ada202174ecaef325583cd626f3df"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of failed deployments.  <br /></td></tr>
<tr class="separator:a870ada202174ecaef325583cd626f3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7ed5b30d84ba3a1f88262ccd524f280" id="r_ae7ed5b30d84ba3a1f88262ccd524f280"><td class="memItemLeft" align="right" valign="top">readonly object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">deploymentLock</a></td></tr>
<tr class="memdesc:ae7ed5b30d84ba3a1f88262ccd524f280"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>lock</code> object for deploying.  <br /></td></tr>
<tr class="separator:ae7ed5b30d84ba3a1f88262ccd524f280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0585a8e7178f4b9fd4e82bba4e0aba96" id="r_a0585a8e7178f4b9fd4e82bba4e0aba96"><td class="memItemLeft" align="right" valign="top">Func&lt; string?, string, Action&lt; bool &gt; &gt;?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a></td></tr>
<tr class="memdesc:a0585a8e7178f4b9fd4e82bba4e0aba96"><td class="mdescLeft">&#160;</td><td class="mdescRight">The active callback from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af57dca6c1e1af2dc810e731ce106c719" title="Send the message for a deployment to configured deployment channels.">IChatManager.QueueDeploymentMessage</a>.  <br /></td></tr>
<tr class="separator:a0585a8e7178f4b9fd4e82bba4e0aba96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f7e6c6cababdc46b11bfab6e53ab9a5" id="r_a3f7e6c6cababdc46b11bfab6e53ab9a5"><td class="memItemLeft" align="right" valign="top">string?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">currentDreamMakerOutput</a></td></tr>
<tr class="memdesc:a3f7e6c6cababdc46b11bfab6e53ab9a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cached for currentChatCallback.  <br /></td></tr>
<tr class="separator:a3f7e6c6cababdc46b11bfab6e53ab9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95745246c0a960bdec751c0e7f9559c8" id="r_a95745246c0a960bdec751c0e7f9559c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">deploying</a></td></tr>
<tr class="memdesc:a95745246c0a960bdec751c0e7f9559c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a compile job is running.  <br /></td></tr>
<tr class="separator:a95745246c0a960bdec751c0e7f9559c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a373e2cd0c56f6826367b9aebf150040f" id="r_a373e2cd0c56f6826367b9aebf150040f"><td class="memItemLeft" align="right" valign="top">const string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a> = &quot;dme&quot;</td></tr>
<tr class="memdesc:a373e2cd0c56f6826367b9aebf150040f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extension for .dmes.  <br /></td></tr>
<tr class="separator:a373e2cd0c56f6826367b9aebf150040f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00035">35</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aea0efa31485ae25647b7a25d402ec5ed" name="aea0efa31485ae25647b7a25d402ec5ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea0efa31485ae25647b7a25d402ec5ed">&#9670;&#160;</a></span>DreamMaker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html">IEngineManager</a>&#160;</td>
          <td class="paramname"><em>engineManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>ioManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html">StaticFiles::IConfiguration</a>&#160;</td>
          <td class="paramname"><em>configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td>
          <td class="paramname"><em>sessionControllerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td>
          <td class="paramname"><em>eventConsumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td>
          <td class="paramname"><em>chatManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html">IProcessExecutor</a>&#160;</td>
          <td class="paramname"><em>processExecutor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html">ICompileJobSink</a>&#160;</td>
          <td class="paramname"><em>compileJobConsumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html">IRepositoryManager</a>&#160;</td>
          <td class="paramname"><em>repositoryManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManagerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMetricFactory&#160;</td>
          <td class="paramname"><em>metricFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptionsMonitor&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html">SessionConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>sessionConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api::Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new instance of the DreamMaker class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">engineManager</td><td>The value of engineManager.</td></tr>
    <tr><td class="paramname">ioManager</td><td>The value of ioManager.</td></tr>
    <tr><td class="paramname">configuration</td><td>The value of configuration.</td></tr>
    <tr><td class="paramname">sessionControllerFactory</td><td>The value of sessionControllerFactory.</td></tr>
    <tr><td class="paramname">eventConsumer</td><td>The value of eventConsumer.</td></tr>
    <tr><td class="paramname">chatManager</td><td>The value of chatManager.</td></tr>
    <tr><td class="paramname">processExecutor</td><td>The value of processExecutor.</td></tr>
    <tr><td class="paramname">compileJobConsumer</td><td>The value of compileJobConsumer.</td></tr>
    <tr><td class="paramname">repositoryManager</td><td>The value of repositoryManager.</td></tr>
    <tr><td class="paramname">remoteDeploymentManagerFactory</td><td>The value of remoteDeploymentManagerFactory.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The value of asyncDelayer.</td></tr>
    <tr><td class="paramname">metricFactory</td><td>The IMetricFactory to use.</td></tr>
    <tr><td class="paramname">sessionConfigurationOptions</td><td>The value of sessionConfigurationOptions.</td></tr>
    <tr><td class="paramname">logger</td><td>The value of logger.</td></tr>
    <tr><td class="paramname">metadata</td><td>The value of metadata.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00176">176</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  192</span>        {</div>
<div class="line"><span class="lineno">  193</span>            this.engineManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a>));</div>
<div class="line"><span class="lineno">  194</span>            this.ioManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>));</div>
<div class="line"><span class="lineno">  195</span>            this.configuration = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a>));</div>
<div class="line"><span class="lineno">  196</span>            this.sessionControllerFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a>));</div>
<div class="line"><span class="lineno">  197</span>            this.eventConsumer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>));</div>
<div class="line"><span class="lineno">  198</span>            this.chatManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a>));</div>
<div class="line"><span class="lineno">  199</span>            this.processExecutor = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a>));</div>
<div class="line"><span class="lineno">  200</span>            this.compileJobConsumer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a>));</div>
<div class="line"><span class="lineno">  201</span>            this.repositoryManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a>));</div>
<div class="line"><span class="lineno">  202</span>            this.remoteDeploymentManagerFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a>));</div>
<div class="line"><span class="lineno">  203</span>            this.asyncDelayer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a>));</div>
<div class="line"><span class="lineno">  204</span>            ArgumentNullException.ThrowIfNull(metricFactory);</div>
<div class="line"><span class="lineno">  205</span>            this.sessionConfigurationOptions = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad55bd2d971c2be8939b0ab344f843abc">sessionConfigurationOptions</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad55bd2d971c2be8939b0ab344f843abc">sessionConfigurationOptions</a>));</div>
<div class="line"><span class="lineno">  206</span>            this.logger = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>));</div>
<div class="line"><span class="lineno">  207</span>            this.metadata = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>));</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a7bc8863bee957edada2da93870ce86f4">successfulDeployments</a> = metricFactory.CreateCounter(<span class="stringliteral">&quot;tgs_successful_deployments&quot;</span>, <span class="stringliteral">&quot;The number of deployments that have completed successfully&quot;</span>);</div>
<div class="line"><span class="lineno">  210</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a870ada202174ecaef325583cd626f3df">failedDeployments</a> = metricFactory.CreateCounter(<span class="stringliteral">&quot;tgs_failed_deployments&quot;</span>, <span class="stringliteral">&quot;The number of deployments that have failed&quot;</span>);</div>
<div class="line"><span class="lineno">  211</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a7d851b19e54c63b2298a7510cdbe25dc">attemptedDeployments</a> = metricFactory.CreateCounter(<span class="stringliteral">&quot;tgs_total_deployments&quot;</span>, <span class="stringliteral">&quot;The number of deployments that have been attempted&quot;</span>);</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">deploymentLock</a> = <span class="keyword">new</span> object();</div>
<div class="line"><span class="lineno">  214</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a0cfc680dd4fa5908a6ae164d14530f39"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">Tgstation.Server.Host.Components.Deployment.DreamMaker.repositoryManager</a></div><div class="ttdeci">readonly IRepositoryManager repositoryManager</div><div class="ttdoc">The IRepositoryManager for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00081">DreamMaker.cs:81</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a1d5a133d669af1e14db0104b67103ccf"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a></div><div class="ttdeci">readonly ILogger&lt; DreamMaker &gt; logger</div><div class="ttdoc">The ILogger for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00106">DreamMaker.cs:106</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a2fe7ecccab0b5b1be9fdda8cbf097d9b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">Tgstation.Server.Host.Components.Deployment.DreamMaker.configuration</a></div><div class="ttdeci">readonly StaticFiles.IConfiguration configuration</div><div class="ttdoc">The StaticFiles.IConfiguration for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00056">DreamMaker.cs:56</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a5f0da2a044d1b9df7e85492cb58c076c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">Tgstation.Server.Host.Components.Deployment.DreamMaker.ioManager</a></div><div class="ttdeci">readonly IIOManager ioManager</div><div class="ttdoc">The IIOManager for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00051">DreamMaker.cs:51</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a753ddaadb407331cf9d140c96fe5374b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">Tgstation.Server.Host.Components.Deployment.DreamMaker.remoteDeploymentManagerFactory</a></div><div class="ttdeci">readonly IRemoteDeploymentManagerFactory remoteDeploymentManagerFactory</div><div class="ttdoc">The IRemoteDeploymentManagerFactory for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00091">DreamMaker.cs:91</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a7bc8863bee957edada2da93870ce86f4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a7bc8863bee957edada2da93870ce86f4">Tgstation.Server.Host.Components.Deployment.DreamMaker.successfulDeployments</a></div><div class="ttdeci">readonly Counter successfulDeployments</div><div class="ttdoc">The number of successful deployments.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00121">DreamMaker.cs:121</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a7d851b19e54c63b2298a7510cdbe25dc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a7d851b19e54c63b2298a7510cdbe25dc">Tgstation.Server.Host.Components.Deployment.DreamMaker.attemptedDeployments</a></div><div class="ttdeci">readonly Counter attemptedDeployments</div><div class="ttdoc">The number of attempted deployments.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00116">DreamMaker.cs:116</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a8322a848923985ee4e06d792dccb8643"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionControllerFactory</a></div><div class="ttdeci">readonly ISessionControllerFactory sessionControllerFactory</div><div class="ttdoc">The ISessionControllerFactory for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00061">DreamMaker.cs:61</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a870ada202174ecaef325583cd626f3df"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a870ada202174ecaef325583cd626f3df">Tgstation.Server.Host.Components.Deployment.DreamMaker.failedDeployments</a></div><div class="ttdeci">readonly Counter failedDeployments</div><div class="ttdoc">The number of failed deployments.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00126">DreamMaker.cs:126</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a8d40fb1d02610364e59b9feedb4e75d9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">Tgstation.Server.Host.Components.Deployment.DreamMaker.processExecutor</a></div><div class="ttdeci">readonly IProcessExecutor processExecutor</div><div class="ttdoc">The IProcessExecutor for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00076">DreamMaker.cs:76</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_aa71af19173e2a9edb56655c7eeb75968"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">Tgstation.Server.Host.Components.Deployment.DreamMaker.engineManager</a></div><div class="ttdeci">readonly IEngineManager engineManager</div><div class="ttdoc">The IEngineManager for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00046">DreamMaker.cs:46</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ab01d9cb0fcd270eea9ec47a4e0684f4a"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">Tgstation.Server.Host.Components.Deployment.DreamMaker.compileJobConsumer</a></div><div class="ttdeci">readonly ICompileJobSink compileJobConsumer</div><div class="ttdoc">The ICompileJobSink for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00086">DreamMaker.cs:86</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_abfcbd4e2f809faa445f7ea56fe4e5f0e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a></div><div class="ttdeci">readonly IEventConsumer eventConsumer</div><div class="ttdoc">The IEventConsumer for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00066">DreamMaker.cs:66</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ac5b667aa89c476c9cb0cf71cb5add8a6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</a></div><div class="ttdeci">readonly Api.Models.Instance metadata</div><div class="ttdoc">The Instance DreamMaker belongs to.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00111">DreamMaker.cs:111</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ad55bd2d971c2be8939b0ab344f843abc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad55bd2d971c2be8939b0ab344f843abc">Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionConfigurationOptions</a></div><div class="ttdeci">readonly IOptionsMonitor&lt; SessionConfiguration &gt; sessionConfigurationOptions</div><div class="ttdoc">The IOptionsMonitor&lt;TOptions&gt; of SessionConfiguration for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00101">DreamMaker.cs:101</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ad8f8e86f9e52a3f5e027b9570c5f32df"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">Tgstation.Server.Host.Components.Deployment.DreamMaker.chatManager</a></div><div class="ttdeci">readonly IChatManager chatManager</div><div class="ttdoc">The IChatManager for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00071">DreamMaker.cs:71</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ae7ed5b30d84ba3a1f88262ccd524f280"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploymentLock</a></div><div class="ttdeci">readonly object deploymentLock</div><div class="ttdoc">lock object for deploying.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00131">DreamMaker.cs:131</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_af28269cbf6ac69ab9cde83fe1f117fde"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">Tgstation.Server.Host.Components.Deployment.DreamMaker.asyncDelayer</a></div><div class="ttdeci">readonly IAsyncDelayer asyncDelayer</div><div class="ttdoc">The IAsyncDelayer for DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00096">DreamMaker.cs:96</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_dream_maker_8cs_source.html#l00096">Tgstation.Server.Host.Components.Deployment.DreamMaker.asyncDelayer</a>, <a class="el" href="_dream_maker_8cs_source.html#l00116">Tgstation.Server.Host.Components.Deployment.DreamMaker.attemptedDeployments</a>, <a class="el" href="_dream_maker_8cs_source.html#l00071">Tgstation.Server.Host.Components.Deployment.DreamMaker.chatManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00086">Tgstation.Server.Host.Components.Deployment.DreamMaker.compileJobConsumer</a>, <a class="el" href="_dream_maker_8cs_source.html#l00056">Tgstation.Server.Host.Components.Deployment.DreamMaker.configuration</a>, <a class="el" href="_dream_maker_8cs_source.html#l00131">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploymentLock</a>, <a class="el" href="_dream_maker_8cs_source.html#l00046">Tgstation.Server.Host.Components.Deployment.DreamMaker.engineManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00066">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a>, <a class="el" href="_dream_maker_8cs_source.html#l00126">Tgstation.Server.Host.Components.Deployment.DreamMaker.failedDeployments</a>, <a class="el" href="_dream_maker_8cs_source.html#l00051">Tgstation.Server.Host.Components.Deployment.DreamMaker.ioManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00106">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a>, <a class="el" href="_dream_maker_8cs_source.html#l00111">Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</a>, <a class="el" href="_dream_maker_8cs_source.html#l00076">Tgstation.Server.Host.Components.Deployment.DreamMaker.processExecutor</a>, <a class="el" href="_dream_maker_8cs_source.html#l00091">Tgstation.Server.Host.Components.Deployment.DreamMaker.remoteDeploymentManagerFactory</a>, <a class="el" href="_dream_maker_8cs_source.html#l00081">Tgstation.Server.Host.Components.Deployment.DreamMaker.repositoryManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00101">Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionConfigurationOptions</a>, <a class="el" href="_dream_maker_8cs_source.html#l00061">Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionControllerFactory</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00121">Tgstation.Server.Host.Components.Deployment.DreamMaker.successfulDeployments</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4d28d2170dd121e9e09135a02ec05b51" name="a4d28d2170dd121e9e09135a02ec05b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d28d2170dd121e9e09135a02ec05b51">&#9670;&#160;</a></span>CalculateExpectedDeploymentTime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; TimeSpan?&gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.CalculateExpectedDeploymentTime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td>
          <td class="paramname"><em>databaseContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the average length of a deployment using a given <em>databaseContext</em> . </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">databaseContext</td><td>The IDatabaseContext to retrieve previous deployment Jobs from.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the average TimeSpan of the 10 previous deployments or <code>null</code> if there are none.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00454">454</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  455</span>        {</div>
<div class="line"><span class="lineno">  456</span>            var previousCompileJobs = await databaseContext</div>
<div class="line"><span class="lineno">  457</span>                .<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#a9f93949abe42bddbbf9134946c7f5be5">CompileJobs</a></div>
<div class="line"><span class="lineno">  458</span>                .Where(x =&gt; x.Job.Instance!.Id == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  459</span>                .OrderByDescending(x =&gt; x.Job.StoppedAt)</div>
<div class="line"><span class="lineno">  460</span>                .Take(10)</div>
<div class="line"><span class="lineno">  461</span>                .Select(x =&gt; <span class="keyword">new</span></div>
<div class="line"><span class="lineno">  462</span>                {</div>
<div class="line"><span class="lineno">  463</span>                    StoppedAt = x.Job.StoppedAt!.Value,</div>
<div class="line"><span class="lineno">  464</span>                    StartedAt = x.Job.StartedAt!.Value,</div>
<div class="line"><span class="lineno">  465</span>                })</div>
<div class="line"><span class="lineno">  466</span>                .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>            TimeSpan? averageSpan = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  469</span>            <span class="keywordflow">if</span> (previousCompileJobs.Count != 0)</div>
<div class="line"><span class="lineno">  470</span>            {</div>
<div class="line"><span class="lineno">  471</span>                var totalSpan = TimeSpan.Zero;</div>
<div class="line"><span class="lineno">  472</span>                <span class="keywordflow">foreach</span> (var previousCompileJob <span class="keywordflow">in</span> previousCompileJobs)</div>
<div class="line"><span class="lineno">  473</span>                    totalSpan += previousCompileJob.StoppedAt - previousCompileJob.StartedAt;</div>
<div class="line"><span class="lineno">  474</span>                averageSpan = totalSpan / previousCompileJobs.Count;</div>
<div class="line"><span class="lineno">  475</span>            }</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>            <span class="keywordflow">return</span> averageSpan;</div>
<div class="line"><span class="lineno">  478</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_html_a9f93949abe42bddbbf9134946c7f5be5"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#a9f93949abe42bddbbf9134946c7f5be5">Tgstation.Server.Host.Database.IDatabaseContext.CompileJobs</a></div><div class="ttdeci">IDatabaseCollection&lt; CompileJob &gt; CompileJobs</div><div class="ttdoc">The CompileJobs in the IDatabaseContext.</div><div class="ttdef"><b>Definition</b> <a href="_i_database_context_8cs_source.html#l00041">IDatabaseContext.cs:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_database_context_8cs_source.html#l00041">Tgstation.Server.Host.Database.IDatabaseContext.CompileJobs</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00111">Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a4d28d2170dd121e9e09135a02ec05b51_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a4d28d2170dd121e9e09135a02ec05b51_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a4d28d2170dd121e9e09135a02ec05b51_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a4d28d2170dd121e9e09135a02ec05b51_icgraph">
<area shape="rect" title="Calculate the average length of a deployment using a given databaseContext ." alt="" coords="1162,31,1438,87"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="a10266c7acfc715ffec0cb0189d39c6a4" name="a10266c7acfc715ffec0cb0189d39c6a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10266c7acfc715ffec0cb0189d39c6a4">&#9670;&#160;</a></span>CleanupFailedCompile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.CleanupFailedCompile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models::CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_exception.html">Exception</a>&#160;</td>
          <td class="paramname"><em>exception</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleans up a failed compile <em>job</em> . </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The running CompileJob.</td></tr>
    <tr><td class="paramname">remoteDeploymentManager</td><td>The IRemoteDeploymentManager associated with the <em>job</em> .</td></tr>
    <tr><td class="paramname">exception</td><td>The <a class="el" href="class_exception.html">Exception</a> that was thrown.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l01015">1015</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1016</span>        {</div>
<div class="line"><span class="lineno"> 1017</span>            async ValueTask CleanDir()</div>
<div class="line"><span class="lineno"> 1018</span>            {</div>
<div class="line"><span class="lineno"> 1019</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad55bd2d971c2be8939b0ab344f843abc">sessionConfigurationOptions</a>.CurrentValue.DelayCleaningFailedDeployments)</div>
<div class="line"><span class="lineno"> 1020</span>                {</div>
<div class="line"><span class="lineno"> 1021</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Not cleaning up errored deployment directory {guid} due to config.&quot;</span>, job.DirectoryName);</div>
<div class="line"><span class="lineno"> 1022</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1023</span>                }</div>
<div class="line"><span class="lineno"> 1024</span> </div>
<div class="line"><span class="lineno"> 1025</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Cleaning compile directory...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1026</span>                var jobPath = job.DirectoryName!.Value.ToString();</div>
<div class="line"><span class="lineno"> 1027</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1028</span>                {</div>
<div class="line"><span class="lineno"> 1029</span>                    <span class="comment">// DCT: None available</span></div>
<div class="line"><span class="lineno"> 1030</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.DeploymentCleanup, <span class="keyword">new</span> List&lt;string&gt; { jobPath }, <span class="keyword">true</span>, CancellationToken.None);</div>
<div class="line"><span class="lineno"> 1031</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">DeleteDirectory</a>(jobPath, CancellationToken.None);</div>
<div class="line"><span class="lineno"> 1032</span>                }</div>
<div class="line"><span class="lineno"> 1033</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e)</div>
<div class="line"><span class="lineno"> 1034</span>                {</div>
<div class="line"><span class="lineno"> 1035</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogWarning(e, <span class="stringliteral">&quot;Error cleaning up compile directory {path}!&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(jobPath));</div>
<div class="line"><span class="lineno"> 1036</span>                }</div>
<div class="line"><span class="lineno"> 1037</span>            }</div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span>            var dirCleanTask = CleanDir();</div>
<div class="line"><span class="lineno"> 1040</span> </div>
<div class="line"><span class="lineno"> 1041</span>            var failRemoteDeployTask = remoteDeploymentManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044">FailDeployment</a>(</div>
<div class="line"><span class="lineno"> 1042</span>                job,</div>
<div class="line"><span class="lineno"> 1043</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">FormatExceptionForUsers</a>(exception),</div>
<div class="line"><span class="lineno"> 1044</span>                CancellationToken.None); <span class="comment">// DCT: None available</span></div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>            <span class="keywordflow">return</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(</div>
<div class="line"><span class="lineno"> 1047</span>                dirCleanTask,</div>
<div class="line"><span class="lineno"> 1048</span>                failRemoteDeployTask);</div>
<div class="line"><span class="lineno"> 1049</span>        }</div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">Tgstation.Server.Common.Extensions.ValueTaskExtensions</a></div><div class="ttdoc">Extension methods for the ValueTask and ValueTask&lt;TResult&gt; classes.</div><div class="ttdef"><b>Definition</b> <a href="_value_task_extensions_8cs_source.html#l00011">ValueTaskExtensions.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html_a58adbd94d764754bd3e6c566a5fe7fe3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll</a></div><div class="ttdeci">static async ValueTask WhenAll(IEnumerable&lt; ValueTask &gt; tasks)</div><div class="ttdoc">Fully await a given list of tasks .</div><div class="ttdef"><b>Definition</b> <a href="_value_task_extensions_8cs_source.html#l00099">ValueTaskExtensions.cs:99</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a8cdce0ecb73a635564b1eafc0fc0372f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">Tgstation.Server.Host.Components.Deployment.DreamMaker.FormatExceptionForUsers</a></div><div class="ttdeci">static string FormatExceptionForUsers(Exception exception)</div><div class="ttdoc">Format a given Exception for display to users.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html_a8708c84547cd4960182ff067c36bc044"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.FailDeployment</a></div><div class="ttdeci">ValueTask FailDeployment(CompileJob compileJob, string errorMessage, CancellationToken cancellationToken)</div><div class="ttdoc">Fail a deployment for a given compileJob .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer_html_a564f82eb43566dabd77e37191b4e3d37"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent</a></div><div class="ttdeci">ValueTask HandleEvent(EventType eventType, IEnumerable&lt; string?&gt; parameters, bool deploymentPipeline, CancellationToken cancellationToken)</div><div class="ttdoc">Handle a given eventType .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a18a442b5dff16f5e7a730ec354e81d78"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath</a></div><div class="ttdeci">string ResolvePath()</div><div class="ttdoc">Retrieve the full path of the current working directory.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad3e0dda4b7fbad4c77f48ba3b2681dc7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">Tgstation.Server.Host.IO.IIOManager.DeleteDirectory</a></div><div class="ttdeci">Task DeleteDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Recursively delete a directory, removes and does not enter any symlinks encounterd.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_html_ac30c818717e92c8fb65f389adec739b7"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">Tgstation.Server.Host.Components.Events.EventType</a></div><div class="ttdeci">EventType</div><div class="ttdoc">Types of events. Mirror in tgs.dm. Prefer last listed name for script.</div><div class="ttdef"><b>Definition</b> <a href="_event_type_8cs_source.html#l00006">EventType.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.FailDeployment()</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_cgraph">
<area shape="rect" title="Cleans up a failed compile job ." alt="" coords="5,45,257,101"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044" title="Fail a deployment for a given compileJob ." alt="" coords="305,5,562,61"/>
<area shape="poly" title=" " alt="" coords="257,54,289,50,290,55,258,59"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="326,85,541,141"/>
<area shape="poly" title=" " alt="" coords="258,87,311,94,310,100,257,92"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_icgraph">
<area shape="rect" title="Cleans up a failed compile job ." alt="" coords="1162,31,1413,87"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="a06dba3c351744dea4044270664675ed9" name="a06dba3c351744dea4044270664675ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06dba3c351744dea4044270664675ed9">&#9670;&#160;</a></span>Compile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> &gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Models::Job</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models::CompileJob</a>?&#160;</td>
          <td class="paramname"><em>oldCompileJob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">Models::RevisionInformation</a>&#160;</td>
          <td class="paramname"><em>revisionInformation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html">Api::Models::Internal::DreamMakerSettings</a>&#160;</td>
          <td class="paramname"><em>dreamMakerSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>launchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a>&#160;</td>
          <td class="paramname"><em>repository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TimeSpan?&#160;</td>
          <td class="paramname"><em>estimatedDuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>localCommitExistsOnRemote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the compile implementation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The currently running Job.</td></tr>
    <tr><td class="paramname">oldCompileJob</td><td>The optional CompileJob of the previous deployment.</td></tr>
    <tr><td class="paramname">revisionInformation</td><td>The RevisionInformation.</td></tr>
    <tr><td class="paramname">dreamMakerSettings</td><td>The Api.Models.Internal.DreamMakerSettings.</td></tr>
    <tr><td class="paramname">launchParameters</td><td>The DreamDaemonLaunchParameters.</td></tr>
    <tr><td class="paramname">repository</td><td>The IRepository.</td></tr>
    <tr><td class="paramname">remoteDeploymentManager</td><td>The IRemoteDeploymentManager.</td></tr>
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter to report progress of the operation.</td></tr>
    <tr><td class="paramname">estimatedDuration</td><td>The optional estimated TimeSpan of the compilation.</td></tr>
    <tr><td class="paramname">localCommitExistsOnRemote</td><td>Whether or not the <em>repository</em> 's current commit exists on the remote repository.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the completed CompileJob.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00495">495</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  507</span>        {</div>
<div class="line"><span class="lineno">  508</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Begin Compile&quot;</span>);</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>            <span class="keyword">using </span>var progressCts = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken);</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>            progressReporter.StageName = <span class="stringliteral">&quot;Reserving BYOND version&quot;</span>;</div>
<div class="line"><span class="lineno">  513</span>            var progressTask = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278">ProgressTask</a>(progressReporter, estimatedDuration, progressCts.Token);</div>
<div class="line"><span class="lineno">  514</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  515</span>            {</div>
<div class="line"><span class="lineno">  516</span>                <span class="keyword">using </span>var engineLock = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66">UseExecutables</a>(<span class="keyword">null</span>, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  517</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af57dca6c1e1af2dc810e731ce106c719">QueueDeploymentMessage</a>(</div>
<div class="line"><span class="lineno">  518</span>                    revisionInformation,</div>
<div class="line"><span class="lineno">  519</span>                    oldCompileJob?.<a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_revision_information.html">RevisionInformation</a>,</div>
<div class="line"><span class="lineno">  520</span>                    engineLock.Version,</div>
<div class="line"><span class="lineno">  521</span>                    DateTimeOffset.UtcNow + estimatedDuration,</div>
<div class="line"><span class="lineno">  522</span>                    repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a337342e3a22ef245c1744c32ef313ec0">RemoteRepositoryOwner</a>,</div>
<div class="line"><span class="lineno">  523</span>                    repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a16b1a16989886b7fe3beab0a46b83a4b">RemoteRepositoryName</a>,</div>
<div class="line"><span class="lineno">  524</span>                    localCommitExistsOnRemote);</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>                var compileJob = <span class="keyword">new</span> Models.CompileJob(job, revisionInformation, engineLock.Version.ToString())</div>
<div class="line"><span class="lineno">  527</span>                {</div>
<div class="line"><span class="lineno">  528</span>                    DirectoryName = Guid.NewGuid(),</div>
<div class="line"><span class="lineno">  529</span>                    DmeName = dreamMakerSettings.ProjectName,</div>
<div class="line"><span class="lineno">  530</span>                    RepositoryOrigin = repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#ae8ac73c5a625a5c20ee4b25dcb3b04ba">Origin</a>.ToString(),</div>
<div class="line"><span class="lineno">  531</span>                };</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>                progressReporter.StageName = <span class="stringliteral">&quot;Creating remote deployment notification&quot;</span>;</div>
<div class="line"><span class="lineno">  534</span>                await remoteDeploymentManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3">StartDeployment</a>(</div>
<div class="line"><span class="lineno">  535</span>                    repository,</div>
<div class="line"><span class="lineno">  536</span>                    compileJob,</div>
<div class="line"><span class="lineno">  537</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Deployment will timeout at {timeoutTime}&quot;</span>, DateTimeOffset.UtcNow + dreamMakerSettings.Timeout!.Value);</div>
<div class="line"><span class="lineno">  540</span>                <span class="keyword">using </span>var timeoutTokenSource = <span class="keyword">new</span> CancellationTokenSource(dreamMakerSettings.Timeout.Value);</div>
<div class="line"><span class="lineno">  541</span>                var timeoutToken = timeoutTokenSource.Token;</div>
<div class="line"><span class="lineno">  542</span>                <span class="keyword">using</span> (timeoutToken.Register(() =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogWarning(<span class="stringliteral">&quot;Deployment timed out!&quot;</span>)))</div>
<div class="line"><span class="lineno">  543</span>                {</div>
<div class="line"><span class="lineno">  544</span>                    <span class="keyword">using </span>var combinedTokenSource = CancellationTokenSource.CreateLinkedTokenSource(timeoutToken, cancellationToken);</div>
<div class="line"><span class="lineno">  545</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  546</span>                    {</div>
<div class="line"><span class="lineno">  547</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c">RunCompileJob</a>(</div>
<div class="line"><span class="lineno">  548</span>                            progressReporter,</div>
<div class="line"><span class="lineno">  549</span>                            compileJob,</div>
<div class="line"><span class="lineno">  550</span>                            dreamMakerSettings,</div>
<div class="line"><span class="lineno">  551</span>                            launchParameters,</div>
<div class="line"><span class="lineno">  552</span>                            engineLock,</div>
<div class="line"><span class="lineno">  553</span>                            repository,</div>
<div class="line"><span class="lineno">  554</span>                            remoteDeploymentManager,</div>
<div class="line"><span class="lineno">  555</span>                            combinedTokenSource.Token);</div>
<div class="line"><span class="lineno">  556</span>                    }</div>
<div class="line"><span class="lineno">  557</span>                    <span class="keywordflow">catch</span> (OperationCanceledException) when (timeoutToken.IsCancellationRequested)</div>
<div class="line"><span class="lineno">  558</span>                    {</div>
<div class="line"><span class="lineno">  559</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentTimeout);</div>
<div class="line"><span class="lineno">  560</span>                    }</div>
<div class="line"><span class="lineno">  561</span>                }</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>                <span class="keywordflow">return</span> compileJob;</div>
<div class="line"><span class="lineno">  564</span>            }</div>
<div class="line"><span class="lineno">  565</span>            <span class="keywordflow">catch</span> (OperationCanceledException)</div>
<div class="line"><span class="lineno">  566</span>            {</div>
<div class="line"><span class="lineno">  567</span>                <span class="comment">// DCT: Cancellation token is for job, delaying here is fine</span></div>
<div class="line"><span class="lineno">  568</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running CompileCancelled event&quot;</span>;</div>
<div class="line"><span class="lineno">  569</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.CompileCancelled, Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(), <span class="keyword">true</span>, CancellationToken.None);</div>
<div class="line"><span class="lineno">  570</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  571</span>            }</div>
<div class="line"><span class="lineno">  572</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  573</span>            {</div>
<div class="line"><span class="lineno">  574</span>                progressCts.Cancel();</div>
<div class="line"><span class="lineno">  575</span>                await progressTask;</div>
<div class="line"><span class="lineno">  576</span>            }</div>
<div class="line"><span class="lineno">  577</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_revision_information_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_revision_information.html">Tgstation.Server.Api.Models.Internal.RevisionInformation</a></div><div class="ttdoc">Represents information about a current git revison.</div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_api_2_models_2_internal_2_revision_information_8cs_source.html#l00009">RevisionInformation.cs:10</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a0585a8e7178f4b9fd4e82bba4e0aba96"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentChatCallback</a></div><div class="ttdeci">Func&lt; string?, string, Action&lt; bool &gt; &gt;? currentChatCallback</div><div class="ttdoc">The active callback from IChatManager.QueueDeploymentMessage.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00136">DreamMaker.cs:136</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a143fbc68ad876ca7e7ce4145d97d9278"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278">Tgstation.Server.Host.Components.Deployment.DreamMaker.ProgressTask</a></div><div class="ttdeci">async ValueTask ProgressTask(JobProgressReporter progressReporter, TimeSpan? estimatedDuration, CancellationToken cancellationToken)</div><div class="ttdoc">Gradually triggers a given progressReporter  over a given estimatedDuration .</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00750">DreamMaker.cs:750</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a2394e942cf255412fe358bef742b580c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob</a></div><div class="ttdeci">async ValueTask RunCompileJob(JobProgressReporter progressReporter, Models.CompileJob job, Api.Models.Internal.DreamMakerSettings dreamMakerSettings, DreamDaemonLaunchParameters launchParameters, IEngineExecutableLock engineLock, IRepository repository, IRemoteDeploymentManager remoteDeploymentManager, CancellationToken cancellationToken)</div><div class="ttdoc">Executes and populate a given job .</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00591">DreamMaker.cs:591</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">Tgstation.Server.Host.Jobs.JobException</a></div><div class="ttdoc">Operation exceptions thrown from the context of a Models.Job.</div><div class="ttdef"><b>Definition</b> <a href="_job_exception_8cs_source.html#l00010">JobException.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information_html_a16b1a16989886b7fe3beab0a46b83a4b"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a16b1a16989886b7fe3beab0a46b83a4b">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryName</a></div><div class="ttdeci">string? RemoteRepositoryName</div><div class="ttdoc">If RemoteGitProvider is not RemoteGitProvider.Unknown this will be set with the name of the repositor...</div><div class="ttdef"><b>Definition</b> <a href="_i_git_remote_information_8cs_source.html#l00021">IGitRemoteInformation.cs:21</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information_html_a337342e3a22ef245c1744c32ef313ec0"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a337342e3a22ef245c1744c32ef313ec0">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryOwner</a></div><div class="ttdeci">string? RemoteRepositoryOwner</div><div class="ttdoc">If RemoteGitProvider is not RemoteGitProvider.Unknown this will be set with the owner of the reposito...</div><div class="ttdef"><b>Definition</b> <a href="_i_git_remote_information_8cs_source.html#l00016">IGitRemoteInformation.cs:16</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_af57dca6c1e1af2dc810e731ce106c719"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af57dca6c1e1af2dc810e731ce106c719">Tgstation.Server.Host.Components.Chat.IChatManager.QueueDeploymentMessage</a></div><div class="ttdeci">Func&lt; string?, string, Action&lt; bool &gt; &gt; QueueDeploymentMessage(Models.RevisionInformation revisionInformation, Models.RevisionInformation? previousRevisionInformation, Api.Models.EngineVersion engineVersion, DateTimeOffset? estimatedCompletionTime, string? gitHubOwner, string? gitHubRepo, bool localCommitPushed)</div><div class="ttdoc">Send the message for a deployment to configured deployment channels.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html_a8029ccdc07f945286c14972dfd4ae3a3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.StartDeployment</a></div><div class="ttdeci">ValueTask StartDeployment(Api.Models.Internal.IGitRemoteInformation remoteInformation, CompileJob compileJob, CancellationToken cancellationToken)</div><div class="ttdoc">Start a deployment for a given compileJob .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager_html_ac21fb8c8df8b40c14944282d86c32a66"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66">Tgstation.Server.Host.Components.Engine.IEngineManager.UseExecutables</a></div><div class="ttdeci">ValueTask&lt; IEngineExecutableLock &gt; UseExecutables(EngineVersion? requiredVersion, string? trustDmbFullPath, CancellationToken cancellationToken)</div><div class="ttdoc">Lock the current installation's location and return a IEngineExecutableLock.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_ae8ac73c5a625a5c20ee4b25dcb3b04ba"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#ae8ac73c5a625a5c20ee4b25dcb3b04ba">Tgstation.Server.Host.Components.Repository.IRepository.Origin</a></div><div class="ttdeci">Uri Origin</div><div class="ttdoc">The current origin remote the IRepository is using.</div><div class="ttdef"><b>Definition</b> <a href="_i_repository_8cs_source.html#l00033">IRepository.cs:33</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a1a6adb59dd51244efabf4e548e7075c8"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">Tgstation.Server.Api.Models.ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Types of Response.ErrorMessageResponses that the API may return.</div><div class="ttdef"><b>Definition</b> <a href="_error_code_8cs_source.html#l00011">ErrorCode.cs:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_dream_maker_8cs_source.html#l00071">Tgstation.Server.Host.Components.Deployment.DreamMaker.chatManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00136">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentChatCallback</a>, <a class="el" href="_dream_maker_8cs_source.html#l00046">Tgstation.Server.Host.Components.Deployment.DreamMaker.engineManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00066">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00106">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a>, <a class="el" href="_i_repository_8cs_source.html#l00033">Tgstation.Server.Host.Components.Repository.IRepository.Origin</a>, <a class="el" href="_dream_maker_8cs_source.html#l00750">Tgstation.Server.Host.Components.Deployment.DreamMaker.ProgressTask()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af57dca6c1e1af2dc810e731ce106c719">Tgstation.Server.Host.Components.Chat.IChatManager.QueueDeploymentMessage()</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00021">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryName</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00016">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryOwner</a>, <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.StartDeployment()</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66">Tgstation.Server.Host.Components.Engine.IEngineManager.UseExecutables()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a06dba3c351744dea4044270664675ed9_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a06dba3c351744dea4044270664675ed9_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a06dba3c351744dea4044270664675ed9_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a06dba3c351744dea4044270664675ed9_cgraph">
<area shape="rect" title="Run the compile implementation." alt="" coords="5,324,232,365"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="637,71,874,111"/>
<area shape="poly" title=" " alt="" coords="160,321,356,228,487,172,621,122,648,113,649,118,623,127,489,177,358,233,162,326"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278" title="Gradually triggers a given progressReporter &#160;over a given estimatedDuration ." alt="" coords="302,51,552,91"/>
<area shape="poly" title=" " alt="" coords="131,322,190,243,232,195,278,152,321,121,364,96,367,101,323,126,281,156,236,199,194,246,135,326"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af57dca6c1e1af2dc810e731ce106c719" title="Send the message for a deployment to configured deployment channels." alt="" coords="280,291,574,331"/>
<area shape="poly" title=" " alt="" coords="232,329,264,326,264,331,232,335"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="297,356,557,397"/>
<area shape="poly" title=" " alt="" coords="232,353,281,359,281,364,232,359"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3" title="Start a deployment for a given compileJob ." alt="" coords="298,421,556,476"/>
<area shape="poly" title=" " alt="" coords="169,363,281,406,303,413,301,418,279,411,167,368"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66" title="Lock the current installation&#39;s location and return a IEngineExecutableLock." alt="" coords="300,500,554,541"/>
<area shape="poly" title=" " alt="" coords="139,363,197,425,237,458,281,486,293,491,290,496,278,491,234,463,194,429,135,367"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1" title="Report progress." alt="" coords="637,5,873,46"/>
<area shape="poly" title=" " alt="" coords="552,51,621,41,622,47,553,56"/>
<area shape="poly" title=" " alt="" coords="556,354,572,341,591,315,599,289,599,262,596,234,592,206,593,178,601,150,620,123,624,119,627,123,624,126,605,152,598,179,598,206,601,234,604,261,604,289,596,317,576,345,559,358"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="672,291,839,331"/>
<area shape="poly" title=" " alt="" coords="532,353,656,328,657,333,533,358"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e" title="Copies the current working directory to a given path ." alt="" coords="642,356,868,397"/>
<area shape="poly" title=" " alt="" coords="557,374,627,374,627,379,557,379"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62" title="Check that the file at path &#160;exists." alt="" coords="672,421,839,462"/>
<area shape="poly" title=" " alt="" coords="533,395,657,420,656,425,532,400"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5" title="Gets a list of files in path &#160;with the given extension ." alt="" coords="644,487,867,527"/>
<area shape="poly" title=" " alt="" coords="554,395,576,406,592,422,601,440,608,456,624,472,633,477,630,482,620,476,604,459,596,442,588,426,572,410,552,400"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b" title="Adds server side includes to the .dme being compiled." alt="" coords="638,552,872,593"/>
<area shape="poly" title=" " alt="" coords="559,395,576,406,590,422,597,439,601,473,604,506,611,522,624,537,628,541,625,545,620,541,606,525,599,508,596,474,592,441,585,425,572,410,556,399"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994" title="Check if a given parentPath &#160;is a parent of a given parentPath ." alt="" coords="669,617,842,658"/>
<area shape="poly" title=" " alt="" coords="559,393,576,406,594,431,602,456,603,481,601,506,599,531,600,555,607,579,624,602,638,614,655,623,653,627,635,618,620,606,602,581,594,556,593,531,596,506,598,481,597,457,590,433,572,410,556,398"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="672,683,839,723"/>
<area shape="poly" title=" " alt="" coords="559,393,576,407,599,439,607,473,607,506,601,539,596,572,595,604,603,636,624,668,639,681,658,690,655,695,636,685,620,671,598,638,589,605,590,571,596,538,601,505,602,473,594,442,572,410,555,397"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6" title="Compiles a .dme with DreamMaker." alt="" coords="622,748,888,789"/>
<area shape="poly" title=" " alt="" coords="559,393,576,406,592,427,603,448,613,489,610,531,601,572,593,612,590,653,598,693,609,713,624,733,627,736,623,740,620,737,604,716,593,695,584,653,587,612,596,571,605,530,607,490,598,450,588,430,572,410,556,397"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2" title=" " alt="" coords="662,160,848,201"/>
<area shape="poly" title=" " alt="" coords="555,353,572,341,585,326,592,311,596,278,599,245,606,228,620,212,646,195,649,199,624,216,611,231,604,246,601,279,597,312,590,329,576,345,558,358"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a188d9b663c305c1ed438b5ca1494652c" title="Run a quick DD instance to test the DMAPI is installed on the target code." alt="" coords="642,225,868,266"/>
<area shape="poly" title=" " alt="" coords="549,353,572,341,588,326,596,310,604,293,620,277,630,271,633,276,624,281,608,296,600,312,592,329,576,345,551,358"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668" title="Return the command line arguments for compiling a given dmePath &#160;if compilation is necessary." alt="" coords="936,705,1201,760"/>
<area shape="poly" title=" " alt="" coords="888,750,921,747,921,752,889,756"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8" title="Loads the environment settings for either the server or compiler." alt="" coords="955,784,1182,825"/>
<area shape="poly" title=" " alt="" coords="889,781,940,787,939,792,888,786"/>
<area shape="poly" title=" " alt="" coords="697,160,694,150,704,141,724,135,755,133,789,136,809,142,807,147,788,141,755,139,725,141,706,145,699,151,702,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a06dba3c351744dea4044270664675ed9_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a06dba3c351744dea4044270664675ed9_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a06dba3c351744dea4044270664675ed9_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a06dba3c351744dea4044270664675ed9_icgraph">
<area shape="rect" title="Run the compile implementation." alt="" coords="1162,39,1388,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="a38ea1632011a37a072e9d1c9e3d04c13" name="a38ea1632011a37a072e9d1c9e3d04c13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38ea1632011a37a072e9d1c9e3d04c13">&#9670;&#160;</a></span>DeploymentProcess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Models::Job</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a>&#160;</td>
          <td class="paramname"><em>databaseContextFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and a compile job and insert it into the database. Meant to be called by a IJobManager.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The running Job.</td></tr>
    <tr><td class="paramname">databaseContextFactory</td><td>The IDatabaseContextFactory for the operation.</td></tr>
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter to report compilation progress.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker.html#acb2260b3be70d34554fb91e92ddf21aa">Tgstation.Server.Host.Components.Deployment.IDreamMaker</a>.</p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00218">218</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>        {</div>
<div class="line"><span class="lineno">  224</span>            ArgumentNullException.ThrowIfNull(job);</div>
<div class="line"><span class="lineno">  225</span>            ArgumentNullException.ThrowIfNull(databaseContextFactory);</div>
<div class="line"><span class="lineno">  226</span>            ArgumentNullException.ThrowIfNull(progressReporter);</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">deploymentLock</a>)</div>
<div class="line"><span class="lineno">  229</span>            {</div>
<div class="line"><span class="lineno">  230</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">deploying</a>)</div>
<div class="line"><span class="lineno">  231</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentInProgress);</div>
<div class="line"><span class="lineno">  232</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">deploying</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  233</span>            }</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a7d851b19e54c63b2298a7510cdbe25dc">attemptedDeployments</a>.Inc();</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  238</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">currentDreamMakerOutput</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  239</span>            Models.CompileJob? compileJob = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  240</span>            <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  241</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  242</span>            {</div>
<div class="line"><span class="lineno">  243</span>                <span class="keywordtype">string</span>? repoOwner = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  244</span>                <span class="keywordtype">string</span>? repoName = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  245</span>                TimeSpan? averageSpan = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  246</span>                Models.RepositorySettings? repositorySettings = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  247</span>                Models.DreamDaemonSettings? ddSettings = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  248</span>                Models.DreamMakerSettings? dreamMakerSettings = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  249</span>                <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a>? repo = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  250</span>                <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a>? remoteDeploymentManager = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  251</span>                Models.RevisionInformation? revInfo = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  252</span>                await databaseContextFactory.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(</div>
<div class="line"><span class="lineno">  253</span>                    async databaseContext =&gt;</div>
<div class="line"><span class="lineno">  254</span>                    {</div>
<div class="line"><span class="lineno">  255</span>                        averageSpan = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51">CalculateExpectedDeploymentTime</a>(databaseContext, cancellationToken);</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>                        ddSettings = await databaseContext</div>
<div class="line"><span class="lineno">  258</span>                            .DreamDaemonSettings</div>
<div class="line"><span class="lineno">  259</span>                            .Where(x =&gt; x.InstanceId == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  260</span>                            .Select(x =&gt; <span class="keyword">new</span> Models.DreamDaemonSettings</div>
<div class="line"><span class="lineno">  261</span>                            {</div>
<div class="line"><span class="lineno">  262</span>                                StartupTimeout = x.StartupTimeout,</div>
<div class="line"><span class="lineno">  263</span>                                LogOutput = x.LogOutput,</div>
<div class="line"><span class="lineno">  264</span>                            })</div>
<div class="line"><span class="lineno">  265</span>                            .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  266</span>                        <span class="keywordflow">if</span> (ddSettings == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  267</span>                            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceMissingDreamDaemonSettings);</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>                        dreamMakerSettings = await databaseContext</div>
<div class="line"><span class="lineno">  270</span>                            .DreamMakerSettings</div>
<div class="line"><span class="lineno">  271</span>                            .Where(x =&gt; x.InstanceId == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  272</span>                            .FirstAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  273</span>                        <span class="keywordflow">if</span> (dreamMakerSettings == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  274</span>                            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceMissingDreamMakerSettings);</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>                        repositorySettings = await databaseContext</div>
<div class="line"><span class="lineno">  277</span>                            .RepositorySettings</div>
<div class="line"><span class="lineno">  278</span>                            .Where(x =&gt; x.InstanceId == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  279</span>                            .Select(x =&gt; <span class="keyword">new</span> Models.RepositorySettings</div>
<div class="line"><span class="lineno">  280</span>                            {</div>
<div class="line"><span class="lineno">  281</span>                                AccessToken = x.AccessToken,</div>
<div class="line"><span class="lineno">  282</span>                                AccessUser = x.AccessUser,</div>
<div class="line"><span class="lineno">  283</span>                                ShowTestMergeCommitters = x.ShowTestMergeCommitters,</div>
<div class="line"><span class="lineno">  284</span>                                PushTestMergeCommits = x.PushTestMergeCommits,</div>
<div class="line"><span class="lineno">  285</span>                                PostTestMergeComment = x.PostTestMergeComment,</div>
<div class="line"><span class="lineno">  286</span>                            })</div>
<div class="line"><span class="lineno">  287</span>                            .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  288</span>                        <span class="keywordflow">if</span> (repositorySettings == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  289</span>                            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceMissingRepositorySettings);</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>                        repo = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html#a5e58009c7d92a55634a7ddd80ca60b1b">LoadRepository</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  292</span>                        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  293</span>                        {</div>
<div class="line"><span class="lineno">  294</span>                            <span class="keywordflow">if</span> (repo == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  295</span>                                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.RepoMissing);</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>                            remoteDeploymentManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a></div>
<div class="line"><span class="lineno">  298</span>                                .<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">CreateRemoteDeploymentManager</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>, repo.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a32fb980a5c8ad960b2674e62a06f8724">RemoteGitProvider</a>!.Value);</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>                            var repoSha = repo.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#aaf4a631e6d2aa45a1b6887152f1d13f0">Head</a>;</div>
<div class="line"><span class="lineno">  301</span>                            repoOwner = repo.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a337342e3a22ef245c1744c32ef313ec0">RemoteRepositoryOwner</a>;</div>
<div class="line"><span class="lineno">  302</span>                            repoName = repo.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a16b1a16989886b7fe3beab0a46b83a4b">RemoteRepositoryName</a>;</div>
<div class="line"><span class="lineno">  303</span>                            revInfo = await databaseContext</div>
<div class="line"><span class="lineno">  304</span>                                .RevisionInformations</div>
<div class="line"><span class="lineno">  305</span>                                .Where(x =&gt; x.CommitSha == repoSha &amp;&amp; x.InstanceId == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  306</span>                                .Include(x =&gt; x.ActiveTestMerges!)</div>
<div class="line"><span class="lineno">  307</span>                                    .ThenInclude(x =&gt; x.TestMerge!)</div>
<div class="line"><span class="lineno">  308</span>                                        .ThenInclude(x =&gt; x.MergedBy)</div>
<div class="line"><span class="lineno">  309</span>                                .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>                            <span class="keywordflow">if</span> (revInfo == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  312</span>                            {</div>
<div class="line"><span class="lineno">  313</span>                                revInfo = <span class="keyword">new</span> Models.RevisionInformation</div>
<div class="line"><span class="lineno">  314</span>                                {</div>
<div class="line"><span class="lineno">  315</span>                                    CommitSha = repoSha,</div>
<div class="line"><span class="lineno">  316</span>                                    Timestamp = await repo.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a242e53e0f353e3ca1597acec0441c05a">TimestampCommit</a>(repoSha, cancellationToken),</div>
<div class="line"><span class="lineno">  317</span>                                    OriginCommitSha = repoSha,</div>
<div class="line"><span class="lineno">  318</span>                                    <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Instance</a> = <span class="keyword">new</span> Models.Instance</div>
<div class="line"><span class="lineno">  319</span>                                    {</div>
<div class="line"><span class="lineno">  320</span>                                        <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Id</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id,</div>
<div class="line"><span class="lineno">  321</span>                                    },</div>
<div class="line"><span class="lineno">  322</span>                                    ActiveTestMerges = <span class="keyword">new</span> List&lt;RevInfoTestMerge&gt;(),</div>
<div class="line"><span class="lineno">  323</span>                                };</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>                                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogInformation(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html">Repository</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html#a29c6da1254fba9de583975a67d36ebad">Repository</a>.OriginTrackingErrorTemplate, repoSha);</div>
<div class="line"><span class="lineno">  326</span>                                databaseContext.RevisionInformations.Add(revInfo);</div>
<div class="line"><span class="lineno">  327</span>                                databaseContext.Instances.Attach(revInfo.Instance);</div>
<div class="line"><span class="lineno">  328</span>                                await databaseContext.Save(cancellationToken);</div>
<div class="line"><span class="lineno">  329</span>                            }</div>
<div class="line"><span class="lineno">  330</span>                        }</div>
<div class="line"><span class="lineno">  331</span>                        <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  332</span>                        {</div>
<div class="line"><span class="lineno">  333</span>                            repo?.Dispose();</div>
<div class="line"><span class="lineno">  334</span>                            <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  335</span>                        }</div>
<div class="line"><span class="lineno">  336</span>                    });</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>                Models.CompileJob? oldCompileJob;</div>
<div class="line"><span class="lineno">  339</span>                <span class="keyword">using</span> (repo)</div>
<div class="line"><span class="lineno">  340</span>                {</div>
<div class="line"><span class="lineno">  341</span>                    var likelyPushedTestMergeCommit =</div>
<div class="line"><span class="lineno">  342</span>                        repositorySettings!.PushTestMergeCommits!.Value</div>
<div class="line"><span class="lineno">  343</span>                        &amp;&amp; repositorySettings.AccessToken != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  344</span>                        &amp;&amp; repositorySettings.AccessUser != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  345</span>                    oldCompileJob = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html#aaaa6e44e65fa8c56c8d163976fbbc14e">LatestCompileJob</a>();</div>
<div class="line"><span class="lineno">  346</span>                    compileJob = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9">Compile</a>(</div>
<div class="line"><span class="lineno">  347</span>                        job,</div>
<div class="line"><span class="lineno">  348</span>                        oldCompileJob,</div>
<div class="line"><span class="lineno">  349</span>                        revInfo!,</div>
<div class="line"><span class="lineno">  350</span>                        dreamMakerSettings!,</div>
<div class="line"><span class="lineno">  351</span>                        ddSettings!,</div>
<div class="line"><span class="lineno">  352</span>                        repo!,</div>
<div class="line"><span class="lineno">  353</span>                        remoteDeploymentManager!,</div>
<div class="line"><span class="lineno">  354</span>                        progressReporter,</div>
<div class="line"><span class="lineno">  355</span>                        averageSpan,</div>
<div class="line"><span class="lineno">  356</span>                        likelyPushedTestMergeCommit,</div>
<div class="line"><span class="lineno">  357</span>                        cancellationToken);</div>
<div class="line"><span class="lineno">  358</span>                }</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  361</span>                {</div>
<div class="line"><span class="lineno">  362</span>                    await databaseContextFactory.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(</div>
<div class="line"><span class="lineno">  363</span>                        async databaseContext =&gt;</div>
<div class="line"><span class="lineno">  364</span>                        {</div>
<div class="line"><span class="lineno">  365</span>                            var fullJob = compileJob.Job;</div>
<div class="line"><span class="lineno">  366</span>                            compileJob.Job = <span class="keyword">new</span> Models.Job(job.Require(x =&gt; x.Id));</div>
<div class="line"><span class="lineno">  367</span>                            var fullRevInfo = compileJob.RevisionInformation;</div>
<div class="line"><span class="lineno">  368</span>                            compileJob.RevisionInformation = <span class="keyword">new</span> Models.RevisionInformation</div>
<div class="line"><span class="lineno">  369</span>                            {</div>
<div class="line"><span class="lineno">  370</span>                                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Id</a> = revInfo!.Id,</div>
<div class="line"><span class="lineno">  371</span>                            };</div>
<div class="line"><span class="lineno">  372</span> </div>
<div class="line"><span class="lineno">  373</span>                            databaseContext.Jobs.Attach(compileJob.Job);</div>
<div class="line"><span class="lineno">  374</span>                            databaseContext.RevisionInformations.Attach(compileJob.RevisionInformation);</div>
<div class="line"><span class="lineno">  375</span>                            databaseContext.CompileJobs.Add(compileJob);</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>                            <span class="comment">// The difficulty with compile jobs is they have a two part commit</span></div>
<div class="line"><span class="lineno">  378</span>                            await databaseContext.Save(cancellationToken);</div>
<div class="line"><span class="lineno">  379</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Created CompileJob {compileJobId}&quot;</span>, compileJob.Id);</div>
<div class="line"><span class="lineno">  380</span>                            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  381</span>                            {</div>
<div class="line"><span class="lineno">  382</span>                                var chatNotificationAction = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a>!(<span class="keyword">null</span>, compileJob.Output!);</div>
<div class="line"><span class="lineno">  383</span>                                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html#a8de753bacca634eab0b0c7f506472a97">LoadCompileJob</a>(compileJob, chatNotificationAction, cancellationToken);</div>
<div class="line"><span class="lineno">  384</span>                                success = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  385</span>                            }</div>
<div class="line"><span class="lineno">  386</span>                            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  387</span>                            {</div>
<div class="line"><span class="lineno">  388</span>                                <span class="comment">// So we need to un-commit the compile job if the above throws</span></div>
<div class="line"><span class="lineno">  389</span>                                databaseContext.CompileJobs.Remove(compileJob);</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>                                <span class="comment">// DCT: Cancellation token is for job, operation must run regardless</span></div>
<div class="line"><span class="lineno">  392</span>                                await databaseContext.Save(CancellationToken.None);</div>
<div class="line"><span class="lineno">  393</span>                                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  394</span>                            }</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>                            compileJob.Job = fullJob;</div>
<div class="line"><span class="lineno">  397</span>                            compileJob.RevisionInformation = fullRevInfo;</div>
<div class="line"><span class="lineno">  398</span>                        });</div>
<div class="line"><span class="lineno">  399</span>                }</div>
<div class="line"><span class="lineno">  400</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  401</span>                {</div>
<div class="line"><span class="lineno">  402</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">CleanupFailedCompile</a>(compileJob, remoteDeploymentManager!, ex);</div>
<div class="line"><span class="lineno">  403</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  404</span>                }</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>                var commentsTask = remoteDeploymentManager!.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a647f962a385f1ea126bb9c2a842fd4eb">PostDeploymentComments</a>(</div>
<div class="line"><span class="lineno">  407</span>                    compileJob,</div>
<div class="line"><span class="lineno">  408</span>                    oldCompileJob?.<a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_revision_information.html">RevisionInformation</a>,</div>
<div class="line"><span class="lineno">  409</span>                    repositorySettings,</div>
<div class="line"><span class="lineno">  410</span>                    repoOwner,</div>
<div class="line"><span class="lineno">  411</span>                    repoName,</div>
<div class="line"><span class="lineno">  412</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>                var eventTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.DeploymentComplete, Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(), <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  417</span>                {</div>
<div class="line"><span class="lineno">  418</span>                    await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(commentsTask, eventTask);</div>
<div class="line"><span class="lineno">  419</span>                }</div>
<div class="line"><span class="lineno">  420</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  421</span>                {</div>
<div class="line"><span class="lineno">  422</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.PostDeployFailure, ex);</div>
<div class="line"><span class="lineno">  423</span>                }</div>
<div class="line"><span class="lineno">  424</span>                <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  425</span>                {</div>
<div class="line"><span class="lineno">  426</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  427</span>                }</div>
<div class="line"><span class="lineno">  428</span>            }</div>
<div class="line"><span class="lineno">  429</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  430</span>            {</div>
<div class="line"><span class="lineno">  431</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a>?.Invoke(</div>
<div class="line"><span class="lineno">  432</span>                    <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">FormatExceptionForUsers</a>(ex),</div>
<div class="line"><span class="lineno">  433</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">currentDreamMakerOutput</a>!);</div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  436</span>            }</div>
<div class="line"><span class="lineno">  437</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  438</span>            {</div>
<div class="line"><span class="lineno">  439</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">deploying</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  440</span>                <span class="keywordflow">if</span> (success)</div>
<div class="line"><span class="lineno">  441</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a7bc8863bee957edada2da93870ce86f4">successfulDeployments</a>.Inc();</div>
<div class="line"><span class="lineno">  442</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  443</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a870ada202174ecaef325583cd626f3df">failedDeployments</a>.Inc();</div>
<div class="line"><span class="lineno">  444</span>            }</div>
<div class="line"><span class="lineno">  445</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Tgstation.Server.Api.Models.Instance</a></div><div class="ttdoc">Metadata about a server instance.</div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00008">Instance.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a06dba3c351744dea4044270664675ed9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile</a></div><div class="ttdeci">async ValueTask&lt; Models.CompileJob &gt; Compile(Models.Job job, Models.CompileJob? oldCompileJob, Models.RevisionInformation revisionInformation, Api.Models.Internal.DreamMakerSettings dreamMakerSettings, DreamDaemonLaunchParameters launchParameters, IRepository repository, IRemoteDeploymentManager remoteDeploymentManager, JobProgressReporter progressReporter, TimeSpan? estimatedDuration, bool localCommitExistsOnRemote, CancellationToken cancellationToken)</div><div class="ttdoc">Run the compile implementation.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00495">DreamMaker.cs:495</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a10266c7acfc715ffec0cb0189d39c6a4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">Tgstation.Server.Host.Components.Deployment.DreamMaker.CleanupFailedCompile</a></div><div class="ttdeci">ValueTask CleanupFailedCompile(Models.CompileJob job, IRemoteDeploymentManager remoteDeploymentManager, Exception exception)</div><div class="ttdoc">Cleans up a failed compile job .</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l01015">DreamMaker.cs:1015</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a3f7e6c6cababdc46b11bfab6e53ab9a5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentDreamMakerOutput</a></div><div class="ttdeci">string? currentDreamMakerOutput</div><div class="ttdoc">Cached for currentChatCallback.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00141">DreamMaker.cs:141</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a4d28d2170dd121e9e09135a02ec05b51"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51">Tgstation.Server.Host.Components.Deployment.DreamMaker.CalculateExpectedDeploymentTime</a></div><div class="ttdeci">async ValueTask&lt; TimeSpan?&gt; CalculateExpectedDeploymentTime(IDatabaseContext databaseContext, CancellationToken cancellationToken)</div><div class="ttdoc">Calculate the average length of a deployment using a given databaseContext .</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00454">DreamMaker.cs:454</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a95745246c0a960bdec751c0e7f9559c8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploying</a></div><div class="ttdeci">bool deploying</div><div class="ttdoc">If a compile job is running.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00146">DreamMaker.cs:146</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html">Tgstation.Server.Host.Components.Repository.Repository</a></div><div class="ttdef"><b>Definition</b> <a href="_repository_8cs_source.html#l00026">Repository.cs:27</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository_html_a29c6da1254fba9de583975a67d36ebad"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html#a29c6da1254fba9de583975a67d36ebad">Tgstation.Server.Host.Components.Repository.Repository.Repository</a></div><div class="ttdeci">Repository(LibGit2Sharp.IRepository libGitRepo, ILibGit2Commands commands, IIOManager ioManager, IEventConsumer eventConsumer, ICredentialsProvider credentialsProvider, IPostWriteHandler postWriteHandler, IGitRemoteFeaturesFactory gitRemoteFeaturesFactory, ILibGit2RepositoryFactory submoduleFactory, IOptionsMonitor&lt; GeneralConfiguration &gt; generalConfigurationOptions, ILogger&lt; Repository &gt; logger, Action disposeAction)</div><div class="ttdoc">Initializes a new instance of the Repository class.</div><div class="ttdef"><b>Definition</b> <a href="_repository_8cs_source.html#l00143">Repository.cs:143</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information_html_a32fb980a5c8ad960b2674e62a06f8724"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a32fb980a5c8ad960b2674e62a06f8724">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteGitProvider</a></div><div class="ttdeci">RemoteGitProvider? RemoteGitProvider</div><div class="ttdoc">The Models.RemoteGitProvider in use by the repository.</div><div class="ttdef"><b>Definition</b> <a href="_i_git_remote_information_8cs_source.html#l00011">IGitRemoteInformation.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink_html_a8de753bacca634eab0b0c7f506472a97"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html#a8de753bacca634eab0b0c7f506472a97">Tgstation.Server.Host.Components.Deployment.ICompileJobSink.LoadCompileJob</a></div><div class="ttdeci">ValueTask LoadCompileJob(CompileJob job, Action&lt; bool &gt;? activationAction, CancellationToken cancellationToken)</div><div class="ttdoc">Load a new job  into the ICompileJobSink.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider_html_aaaa6e44e65fa8c56c8d163976fbbc14e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html#aaaa6e44e65fa8c56c8d163976fbbc14e">Tgstation.Server.Host.Components.Deployment.ILatestCompileJobProvider.LatestCompileJob</a></div><div class="ttdeci">ValueTask&lt; CompileJob?&gt; LatestCompileJob()</div><div class="ttdoc">Gets the latest CompileJob.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory_html_a4115cea1f220c4fdaede74566aa848d3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager</a></div><div class="ttdeci">IRemoteDeploymentManager CreateRemoteDeploymentManager(Api.Models.Instance metadata, RemoteGitProvider remoteGitProvider)</div><div class="ttdoc">Creates a IRemoteDeploymentManager for a given remoteGitProvider .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager</a></div><div class="ttdoc">Creates and updates remote deployments.</div><div class="ttdef"><b>Definition</b> <a href="_i_remote_deployment_manager_8cs_source.html#l00014">IRemoteDeploymentManager.cs:15</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html_a647f962a385f1ea126bb9c2a842fd4eb"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a647f962a385f1ea126bb9c2a842fd4eb">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.PostDeploymentComments</a></div><div class="ttdeci">ValueTask PostDeploymentComments(CompileJob compileJob, RevisionInformation? previousRevisionInformation, RepositorySettings repositorySettings, string? repoOwner, string? repoName, CancellationToken cancellationToken)</div><div class="ttdoc">Post deployment comments to the test merge ticket.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">Tgstation.Server.Host.Components.Repository.IRepository</a></div><div class="ttdoc">Represents an on-disk git repository.</div><div class="ttdef"><b>Definition</b> <a href="_i_repository_8cs_source.html#l00013">IRepository.cs:14</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_a242e53e0f353e3ca1597acec0441c05a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a242e53e0f353e3ca1597acec0441c05a">Tgstation.Server.Host.Components.Repository.IRepository.TimestampCommit</a></div><div class="ttdeci">Task&lt; DateTimeOffset &gt; TimestampCommit(string sha, CancellationToken cancellationToken)</div><div class="ttdoc">Gets the DateTimeOffset a given sha  was created on.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_aaf4a631e6d2aa45a1b6887152f1d13f0"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#aaf4a631e6d2aa45a1b6887152f1d13f0">Tgstation.Server.Host.Components.Repository.IRepository.Head</a></div><div class="ttdeci">string Head</div><div class="ttdoc">The SHA of the IRepository HEAD.</div><div class="ttdef"><b>Definition</b> <a href="_i_repository_8cs_source.html#l00023">IRepository.cs:23</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager_html_a5e58009c7d92a55634a7ddd80ca60b1b"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html#a5e58009c7d92a55634a7ddd80ca60b1b">Tgstation.Server.Host.Components.Repository.IRepositoryManager.LoadRepository</a></div><div class="ttdeci">ValueTask&lt; IRepository?&gt; LoadRepository(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to load the IRepository from the default location.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory_html_a1da664d7237dbec5a6cb9ce04b79ccc1"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext</a></div><div class="ttdeci">ValueTask UseContext(Func&lt; IDatabaseContext, ValueTask &gt; operation)</div><div class="ttdoc">Run an operation  in the scope of an IDatabaseContext.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_authority_html_a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Tgstation.Server.Host.Authority.PermissionSetLookupType.Id</a></div><div class="ttdeci">@ Id</div><div class="ttdoc">Lookup the Api.Models.EntityId.Id of the Models.PermissionSet.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_dream_maker_8cs_source.html#l00116">Tgstation.Server.Host.Components.Deployment.DreamMaker.attemptedDeployments</a>, <a class="el" href="_dream_maker_8cs_source.html#l00454">Tgstation.Server.Host.Components.Deployment.DreamMaker.CalculateExpectedDeploymentTime()</a>, <a class="el" href="_dream_maker_8cs_source.html#l01015">Tgstation.Server.Host.Components.Deployment.DreamMaker.CleanupFailedCompile()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00495">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00086">Tgstation.Server.Host.Components.Deployment.DreamMaker.compileJobConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00136">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentChatCallback</a>, <a class="el" href="_dream_maker_8cs_source.html#l00141">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentDreamMakerOutput</a>, <a class="el" href="_dream_maker_8cs_source.html#l00146">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploying</a>, <a class="el" href="_dream_maker_8cs_source.html#l00131">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploymentLock</a>, <a class="el" href="_dream_maker_8cs_source.html#l00066">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a>, <a class="el" href="_dream_maker_8cs_source.html#l00126">Tgstation.Server.Host.Components.Deployment.DreamMaker.failedDeployments</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">Tgstation.Server.Host.Components.Deployment.DreamMaker.FormatExceptionForUsers()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, <a class="el" href="_i_repository_8cs_source.html#l00023">Tgstation.Server.Host.Components.Repository.IRepository.Head</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html#aaaa6e44e65fa8c56c8d163976fbbc14e">Tgstation.Server.Host.Components.Deployment.ILatestCompileJobProvider.LatestCompileJob()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html#a8de753bacca634eab0b0c7f506472a97">Tgstation.Server.Host.Components.Deployment.ICompileJobSink.LoadCompileJob()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html#a5e58009c7d92a55634a7ddd80ca60b1b">Tgstation.Server.Host.Components.Repository.IRepositoryManager.LoadRepository()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00106">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a>, <a class="el" href="_dream_maker_8cs_source.html#l00111">Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a647f962a385f1ea126bb9c2a842fd4eb">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.PostDeploymentComments()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00091">Tgstation.Server.Host.Components.Deployment.DreamMaker.remoteDeploymentManagerFactory</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00011">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteGitProvider</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00021">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryName</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00016">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryOwner</a>, <a class="el" href="_repository_8cs_source.html#l00143">Tgstation.Server.Host.Components.Repository.Repository.Repository()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00081">Tgstation.Server.Host.Components.Deployment.DreamMaker.repositoryManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00121">Tgstation.Server.Host.Components.Deployment.DreamMaker.successfulDeployments</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a242e53e0f353e3ca1597acec0441c05a">Tgstation.Server.Host.Components.Repository.IRepository.TimestampCommit()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext()</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tgstation_8_server_8_host_2_components_2_instance_8cs_source.html#l00654">Tgstation.Server.Host.Components.Instance.AutoUpdateAction()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_cgraph">
<area shape="rect" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="5,484,291,524"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51" title="Calculate the average length of a deployment using a given databaseContext ." alt="" coords="360,5,636,61"/>
<area shape="poly" title=" " alt="" coords="149,482,164,405,196,294,221,233,252,174,291,119,337,71,345,65,348,69,340,75,295,122,257,177,226,235,201,295,169,406,155,483"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4" title="Cleans up a failed compile job ." alt="" coords="372,85,624,141"/>
<area shape="poly" title=" " alt="" coords="152,482,172,419,209,332,233,285,263,238,297,195,337,158,357,145,360,149,340,162,301,199,267,241,238,287,213,334,177,421,157,484"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="745,136,960,192"/>
<area shape="poly" title=" " alt="" coords="153,482,174,425,211,349,236,309,265,271,299,237,337,208,367,195,407,184,508,170,622,163,729,160,729,166,622,168,509,175,409,190,369,200,340,213,302,241,269,274,241,312,216,351,179,427,158,484"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9" title="Run the compile implementation." alt="" coords="385,292,611,332"/>
<area shape="poly" title=" " alt="" coords="166,481,236,411,284,373,337,341,369,329,371,334,340,346,287,378,239,415,169,485"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="1062,24,1299,64"/>
<area shape="poly" title=" " alt="" coords="158,482,183,437,223,381,275,323,305,298,337,277,365,266,399,258,480,249,574,246,674,247,773,247,865,242,942,228,973,216,998,202,1011,188,1018,173,1022,141,1025,108,1032,91,1045,75,1051,71,1054,75,1049,79,1037,94,1030,109,1027,142,1023,175,1015,191,1001,206,975,221,944,233,866,247,773,252,674,252,574,252,481,254,400,263,367,271,340,282,308,303,278,327,227,384,188,440,162,484"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3" title="Creates a IRemoteDeploymentManager for a given remoteGitProvider ." alt="" coords="339,356,657,412"/>
<area shape="poly" title=" " alt="" coords="192,481,260,451,338,421,361,414,363,419,340,426,262,456,194,485"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f" title="Format a given Exception for display to users." alt="" coords="365,436,631,492"/>
<area shape="poly" title=" " alt="" coords="291,485,349,478,350,483,291,490"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html#aaaa6e44e65fa8c56c8d163976fbbc14e" title="Gets the latest CompileJob." alt="" coords="372,516,624,572"/>
<area shape="poly" title=" " alt="" coords="291,518,357,525,356,530,291,523"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html#a8de753bacca634eab0b0c7f506472a97" title="Load a new job &#160;into the ICompileJobSink." alt="" coords="353,596,643,636"/>
<area shape="poly" title=" " alt="" coords="193,522,261,553,339,581,366,589,364,594,338,586,259,557,191,527"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html#a5e58009c7d92a55634a7ddd80ca60b1b" title="Attempt to load the IRepository from the default location." alt="" coords="351,661,645,702"/>
<area shape="poly" title=" " alt="" coords="172,523,242,584,289,618,340,645,358,653,356,658,338,650,287,622,239,588,168,527"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a647f962a385f1ea126bb9c2a842fd4eb" title="Post deployment comments to the test merge ticket." alt="" coords="369,725,627,781"/>
<area shape="poly" title=" " alt="" coords="164,523,192,564,232,615,282,667,340,711,357,720,354,724,337,715,278,671,228,618,187,567,160,526"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html#a29c6da1254fba9de583975a67d36ebad" title="Initializes a new instance of the Repository class." alt="" coords="385,805,611,846"/>
<area shape="poly" title=" " alt="" coords="159,524,181,579,219,652,243,690,272,728,304,762,340,791,371,807,369,811,337,795,300,766,268,731,239,693,214,654,176,581,154,526"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a242e53e0f353e3ca1597acec0441c05a" title="Gets the DateTimeOffset a given sha &#160;was created on." alt="" coords="366,870,630,911"/>
<area shape="poly" title=" " alt="" coords="157,524,175,589,210,680,235,728,264,775,300,818,340,855,354,864,351,868,337,859,296,822,260,778,230,731,205,682,170,591,151,525"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="379,936,617,976"/>
<area shape="poly" title=" " alt="" coords="155,524,169,600,202,708,226,767,257,823,295,876,340,920,366,936,363,941,337,925,291,879,252,826,221,769,197,710,164,602,150,525"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044" title="Fail a deployment for a given compileJob ." alt="" coords="724,56,981,112"/>
<area shape="poly" title=" " alt="" coords="624,100,708,93,709,98,624,105"/>
<area shape="poly" title=" " alt="" coords="625,129,730,144,729,149,624,134"/>
<area shape="poly" title=" " alt="" coords="611,301,846,279,945,263,979,254,998,246,1014,227,1021,207,1023,186,1022,164,1022,119,1029,97,1045,75,1050,71,1053,75,1049,79,1034,99,1027,120,1027,164,1029,186,1027,208,1019,229,1001,250,981,259,947,268,847,284,612,307"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278" title="Gradually triggers a given progressReporter &#160;over a given estimatedDuration ." alt="" coords="727,382,977,423"/>
<area shape="poly" title=" " alt="" coords="612,328,658,341,682,354,706,367,731,375,729,380,704,372,680,359,656,346,611,333"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af57dca6c1e1af2dc810e731ce106c719" title="Send the message for a deployment to configured deployment channels." alt="" coords="705,448,999,488"/>
<area shape="poly" title=" " alt="" coords="612,319,636,328,659,342,670,353,677,365,684,388,690,411,696,422,707,432,714,437,711,442,703,437,692,425,685,413,679,390,672,367,666,356,655,346,634,333,610,324"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="722,317,982,358"/>
<area shape="poly" title=" " alt="" coords="612,317,707,324,707,329,611,323"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3" title="Start a deployment for a given compileJob ." alt="" coords="724,512,981,568"/>
<area shape="poly" title=" " alt="" coords="613,317,637,327,659,342,675,361,682,381,684,421,686,460,693,479,707,498,713,503,709,507,703,502,688,482,680,462,679,421,677,382,670,364,655,346,634,331,611,322"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66" title="Lock the current installation&#39;s location and return a IEngineExecutableLock." alt="" coords="726,592,979,632"/>
<area shape="poly" title=" " alt="" coords="612,315,637,326,659,342,680,371,689,402,688,432,684,462,679,492,679,521,687,550,707,578,714,585,711,589,703,582,682,552,674,522,674,491,679,461,683,431,683,402,675,374,655,346,635,330,610,320"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1" title="Report progress." alt="" coords="1062,766,1299,807"/>
<area shape="poly" title=" " alt="" coords="979,417,1001,434,1017,454,1028,474,1037,514,1035,555,1026,595,1018,634,1016,674,1024,713,1034,732,1049,751,1052,754,1048,758,1045,755,1030,735,1019,714,1010,674,1013,634,1021,594,1029,554,1032,515,1023,476,1013,457,997,438,976,421"/>
<area shape="poly" title=" " alt="" coords="974,314,997,297,1016,270,1024,243,1024,216,1021,188,1017,160,1017,132,1026,103,1045,75,1049,72,1053,76,1049,79,1030,106,1023,132,1022,160,1026,187,1029,215,1029,244,1021,272,1001,300,978,318"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="1097,89,1264,130"/>
<area shape="poly" title=" " alt="" coords="973,314,997,297,1012,278,1019,259,1021,220,1022,180,1030,160,1045,141,1062,128,1081,119,1083,124,1065,133,1049,144,1035,163,1028,181,1026,221,1024,260,1017,281,1001,300,976,318"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e" title="Copies the current working directory to a given path ." alt="" coords="1067,154,1294,195"/>
<area shape="poly" title=" " alt="" coords="968,314,998,296,1014,275,1021,252,1027,229,1045,206,1053,201,1056,205,1049,210,1032,231,1026,254,1019,278,1001,301,971,319"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62" title="Check that the file at path &#160;exists." alt="" coords="1097,220,1264,260"/>
<area shape="poly" title=" " alt="" coords="944,314,998,296,1022,283,1046,271,1081,259,1082,264,1048,276,1025,288,1000,301,946,319"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5" title="Gets a list of files in path &#160;with the given extension ." alt="" coords="1069,285,1292,326"/>
<area shape="poly" title=" " alt="" coords="982,322,1053,315,1054,320,983,327"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b" title="Adds server side includes to the .dme being compiled." alt="" coords="1063,350,1298,391"/>
<area shape="poly" title=" " alt="" coords="983,348,1048,354,1048,360,982,353"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994" title="Check if a given parentPath &#160;is a parent of a given parentPath ." alt="" coords="1094,416,1267,456"/>
<area shape="poly" title=" " alt="" coords="966,356,1001,368,1025,384,1049,400,1080,412,1078,417,1046,405,1022,389,998,373,964,361"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="1097,481,1264,522"/>
<area shape="poly" title=" " alt="" coords="981,356,1001,368,1013,380,1020,393,1026,418,1032,443,1038,455,1049,466,1083,485,1081,489,1046,470,1034,458,1027,445,1021,420,1015,395,1009,384,998,373,978,360"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6" title="Compiles a .dme with DreamMaker." alt="" coords="1047,546,1314,587"/>
<area shape="poly" title=" " alt="" coords="984,356,1001,369,1017,389,1025,410,1026,452,1027,492,1034,512,1049,531,1053,535,1050,539,1045,535,1030,515,1022,493,1021,452,1020,411,1013,391,997,372,981,360"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2" title=" " alt="" coords="1087,636,1274,676"/>
<area shape="poly" title=" " alt="" coords="984,355,1001,369,1022,397,1031,426,1032,454,1029,482,1025,511,1025,539,1032,568,1049,597,1066,613,1087,626,1084,631,1063,617,1045,600,1027,570,1020,540,1020,510,1023,482,1027,454,1026,426,1017,399,997,372,981,359"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a188d9b663c305c1ed438b5ca1494652c" title="Run a quick DD instance to test the DMAPI is installed on the target code." alt="" coords="1067,701,1294,742"/>
<area shape="poly" title=" " alt="" coords="984,355,1001,369,1017,389,1028,409,1037,449,1035,489,1026,529,1018,569,1016,608,1024,647,1034,667,1049,686,1057,693,1053,697,1045,690,1030,669,1019,649,1010,609,1013,568,1021,528,1029,489,1032,450,1023,411,1013,392,997,372,981,359"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668" title="Return the command line arguments for compiling a given dmePath &#160;if compilation is necessary." alt="" coords="1362,503,1626,558"/>
<area shape="poly" title=" " alt="" coords="1314,549,1346,545,1347,550,1314,554"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8" title="Loads the environment settings for either the server or compiler." alt="" coords="1381,582,1607,623"/>
<area shape="poly" title=" " alt="" coords="1314,579,1365,585,1364,590,1314,584"/>
<area shape="poly" title=" " alt="" coords="1122,636,1119,625,1129,616,1149,611,1181,609,1214,611,1234,617,1232,622,1213,616,1180,614,1150,616,1132,621,1125,627,1128,634"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_git_remote_features_factory.html#ac68dccad767316b6c071ca0687bf3b9f" title="Create the IGitRemoteFeatures for a given repository ." alt="" coords="728,797,976,853"/>
<area shape="poly" title=" " alt="" coords="611,823,712,823,712,828,611,828"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_icgraph">
<area shape="rect" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="a8cdce0ecb73a635564b1eafc0fc0372f" name="a8cdce0ecb73a635564b1eafc0fc0372f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cdce0ecb73a635564b1eafc0fc0372f">&#9670;&#160;</a></span>FormatExceptionForUsers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static string Tgstation.Server.Host.Components.Deployment.DreamMaker.FormatExceptionForUsers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_exception.html">Exception</a>&#160;</td>
          <td class="paramname"><em>exception</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Format a given <a class="el" href="class_exception.html">Exception</a> for display to users. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exception</td><td>The <a class="el" href="class_exception.html">Exception</a> to format.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An error string for end users.</dd></dl>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8cdce0ecb73a635564b1eafc0fc0372f_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8cdce0ecb73a635564b1eafc0fc0372f_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8cdce0ecb73a635564b1eafc0fc0372f_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8cdce0ecb73a635564b1eafc0fc0372f_icgraph">
<area shape="rect" title="Format a given Exception for display to users." alt="" coords="1162,31,1428,87"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="acd0b61739ab535d67d9081d8071b8f0b" name="acd0b61739ab535d67d9081d8071b8f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd0b61739ab535d67d9081d8071b8f0b">&#9670;&#160;</a></span>ModifyDme()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.ModifyDme </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models::CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds server side includes to the .dme being compiled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The CompileJob for the operation.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00950">950</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  951</span>        {</div>
<div class="line"><span class="lineno">  952</span>            var dmeFileName = String.Join(<span class="charliteral">&#39;.&#39;</span>, job.DmeName, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a>);</div>
<div class="line"><span class="lineno">  953</span>            var stringDirectoryName = job.DirectoryName!.Value.ToString();</div>
<div class="line"><span class="lineno">  954</span>            var dmePath = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(stringDirectoryName, dmeFileName);</div>
<div class="line"><span class="lineno">  955</span>            var dmeReadTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a267b549fab5803c199a7d37100650e85">ReadAllBytes</a>(dmePath, cancellationToken);</div>
<div class="line"><span class="lineno">  956</span> </div>
<div class="line"><span class="lineno">  957</span>            var dmeModificationsTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a>.CopyDMFilesTo(</div>
<div class="line"><span class="lineno">  958</span>                dmeFileName,</div>
<div class="line"><span class="lineno">  959</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(</div>
<div class="line"><span class="lineno">  960</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(</div>
<div class="line"><span class="lineno">  961</span>                        stringDirectoryName,</div>
<div class="line"><span class="lineno">  962</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a691970cc91e5576b06ed9ce14e51d9b8">GetDirectoryName</a>(dmeFileName))),</div>
<div class="line"><span class="lineno">  963</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  964</span> </div>
<div class="line"><span class="lineno">  965</span>            var dmeBytes = await dmeReadTask;</div>
<div class="line"><span class="lineno">  966</span>            var dme = Encoding.UTF8.GetString(dmeBytes);</div>
<div class="line"><span class="lineno">  967</span> </div>
<div class="line"><span class="lineno">  968</span>            var dmeModifications = await dmeModificationsTask;</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>            <span class="keywordflow">if</span> (dmeModifications == <span class="keyword">null</span> || dmeModifications.TotalDmeOverwrite)</div>
<div class="line"><span class="lineno">  971</span>            {</div>
<div class="line"><span class="lineno">  972</span>                <span class="keywordflow">if</span> (dmeModifications != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  973</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;.dme replacement configured!&quot;</span>);</div>
<div class="line"><span class="lineno">  974</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  975</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;No .dme modifications required.&quot;</span>);</div>
<div class="line"><span class="lineno">  976</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  977</span>            }</div>
<div class="line"><span class="lineno">  978</span> </div>
<div class="line"><span class="lineno">  979</span>            var dmeLines = <span class="keyword">new</span> List&lt;string&gt;(dme.Split(<span class="charliteral">&#39;\n&#39;</span>, StringSplitOptions.None));</div>
<div class="line"><span class="lineno">  980</span>            <span class="keywordflow">for</span> (var dmeLineIndex = 0; dmeLineIndex &lt; dmeLines.Count; ++dmeLineIndex)</div>
<div class="line"><span class="lineno">  981</span>            {</div>
<div class="line"><span class="lineno">  982</span>                var line = dmeLines[dmeLineIndex];</div>
<div class="line"><span class="lineno">  983</span>                <span class="keywordflow">if</span> (line.Contains(<span class="stringliteral">&quot;BEGIN_INCLUDE&quot;</span>, StringComparison.Ordinal) &amp;&amp; dmeModifications.HeadIncludeLine != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  984</span>                {</div>
<div class="line"><span class="lineno">  985</span>                    var headIncludeLineNumber = dmeLineIndex + 1;</div>
<div class="line"><span class="lineno">  986</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(</div>
<div class="line"><span class="lineno">  987</span>                        <span class="stringliteral">&quot;Inserting HeadInclude.dm at line {lineNumber}: {includeLine}&quot;</span>,</div>
<div class="line"><span class="lineno">  988</span>                        headIncludeLineNumber,</div>
<div class="line"><span class="lineno">  989</span>                        dmeModifications.HeadIncludeLine);</div>
<div class="line"><span class="lineno">  990</span>                    dmeLines.Insert(headIncludeLineNumber, dmeModifications.HeadIncludeLine);</div>
<div class="line"><span class="lineno">  991</span>                    ++dmeLineIndex;</div>
<div class="line"><span class="lineno">  992</span>                }</div>
<div class="line"><span class="lineno">  993</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line.Contains(<span class="stringliteral">&quot;END_INCLUDE&quot;</span>, StringComparison.Ordinal) &amp;&amp; dmeModifications.TailIncludeLine != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  994</span>                {</div>
<div class="line"><span class="lineno">  995</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(</div>
<div class="line"><span class="lineno">  996</span>                        <span class="stringliteral">&quot;Inserting TailInclude.dm at line {lineNumber}: {includeLine}&quot;</span>,</div>
<div class="line"><span class="lineno">  997</span>                        dmeLineIndex,</div>
<div class="line"><span class="lineno">  998</span>                        dmeModifications.TailIncludeLine);</div>
<div class="line"><span class="lineno">  999</span>                    dmeLines.Insert(dmeLineIndex, dmeModifications.TailIncludeLine);</div>
<div class="line"><span class="lineno"> 1000</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1001</span>                }</div>
<div class="line"><span class="lineno"> 1002</span>            }</div>
<div class="line"><span class="lineno"> 1003</span> </div>
<div class="line"><span class="lineno"> 1004</span>            dmeBytes = Encoding.UTF8.GetBytes(String.Join(<span class="charliteral">&#39;\n&#39;</span>, dmeLines));</div>
<div class="line"><span class="lineno"> 1005</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">WriteAllBytes</a>(dmePath, dmeBytes, cancellationToken);</div>
<div class="line"><span class="lineno"> 1006</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a373e2cd0c56f6826367b9aebf150040f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">Tgstation.Server.Host.Components.Deployment.DreamMaker.DmeExtension</a></div><div class="ttdeci">const string DmeExtension</div><div class="ttdoc">Extension for .dmes.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00041">DreamMaker.cs:41</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a267b549fab5803c199a7d37100650e85"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a267b549fab5803c199a7d37100650e85">Tgstation.Server.Host.IO.IIOManager.ReadAllBytes</a></div><div class="ttdeci">ValueTask&lt; byte[]&gt; ReadAllBytes(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Returns all the contents of a file at path  as a byte array.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a691970cc91e5576b06ed9ce14e51d9b8"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a691970cc91e5576b06ed9ce14e51d9b8">Tgstation.Server.Host.IO.IIOManager.GetDirectoryName</a></div><div class="ttdeci">string GetDirectoryName(string path)</div><div class="ttdoc">Gets the directory portion of a given path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a9aeb8b83ea3f4b13a183b6ac55b35a70"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes</a></div><div class="ttdeci">ValueTask WriteAllBytes(string path, byte[] contents, CancellationToken cancellationToken)</div><div class="ttdoc">Writes some contents  to a file at path  overwriting previous content.</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_acd0b61739ab535d67d9081d8071b8f0b_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_acd0b61739ab535d67d9081d8071b8f0b_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_acd0b61739ab535d67d9081d8071b8f0b_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_acd0b61739ab535d67d9081d8071b8f0b_icgraph">
<area shape="rect" title="Adds server side includes to the .dme being compiled." alt="" coords="1744,39,1979,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="1436,39,1696,79"/>
<area shape="poly" title=" " alt="" coords="1729,62,1697,62,1697,56,1729,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9" title="Run the compile implementation." alt="" coords="1162,39,1388,79"/>
<area shape="poly" title=" " alt="" coords="1421,62,1388,62,1388,56,1421,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="a143fbc68ad876ca7e7ce4145d97d9278" name="a143fbc68ad876ca7e7ce4145d97d9278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a143fbc68ad876ca7e7ce4145d97d9278">&#9670;&#160;</a></span>ProgressTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.ProgressTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TimeSpan?&#160;</td>
          <td class="paramname"><em>estimatedDuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gradually triggers a given <em>progressReporter</em>  over a given <em>estimatedDuration</em> . </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter to report progress of the operation.</td></tr>
    <tr><td class="paramname">estimatedDuration</td><td>A TimeSpan representing the duration to give progress over if any.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00750">750</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  751</span>        {</div>
<div class="line"><span class="lineno">  752</span>            <span class="keywordtype">double</span>? lastReport = estimatedDuration.HasValue ? 0 : <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  753</span>            progressReporter.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1">ReportProgress</a>(lastReport);</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>            var minimumSleepInterval = TimeSpan.FromMilliseconds(250);</div>
<div class="line"><span class="lineno">  756</span>            var sleepInterval = estimatedDuration.HasValue ? estimatedDuration.Value / 100 : minimumSleepInterval;</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span>            <span class="keywordflow">if</span> (estimatedDuration.HasValue)</div>
<div class="line"><span class="lineno">  759</span>            {</div>
<div class="line"><span class="lineno">  760</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Compile is expected to take: {estimatedDuration}&quot;</span>, estimatedDuration);</div>
<div class="line"><span class="lineno">  761</span>            }</div>
<div class="line"><span class="lineno">  762</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  763</span>            {</div>
<div class="line"><span class="lineno">  764</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;No metric to estimate compile time.&quot;</span>);</div>
<div class="line"><span class="lineno">  765</span>            }</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  768</span>            {</div>
<div class="line"><span class="lineno">  769</span>                <span class="keywordflow">for</span> (var iteration = 0; iteration &lt; (estimatedDuration.HasValue ? 99 : Int32.MaxValue); ++iteration)</div>
<div class="line"><span class="lineno">  770</span>                {</div>
<div class="line"><span class="lineno">  771</span>                    <span class="keywordflow">if</span> (estimatedDuration.HasValue)</div>
<div class="line"><span class="lineno">  772</span>                    {</div>
<div class="line"><span class="lineno">  773</span>                        var nextInterval = DateTimeOffset.UtcNow + sleepInterval;</div>
<div class="line"><span class="lineno">  774</span>                        <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  775</span>                        {</div>
<div class="line"><span class="lineno">  776</span>                            var remainingSleepThisInterval = nextInterval - DateTimeOffset.UtcNow;</div>
<div class="line"><span class="lineno">  777</span>                            var nextSleepSpan = remainingSleepThisInterval &lt; minimumSleepInterval ? minimumSleepInterval : remainingSleepThisInterval;</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>                            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Delay</a>(nextSleepSpan, cancellationToken);</div>
<div class="line"><span class="lineno">  780</span>                            progressReporter.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1">ReportProgress</a>(lastReport);</div>
<div class="line"><span class="lineno">  781</span>                        }</div>
<div class="line"><span class="lineno">  782</span>                        <span class="keywordflow">while</span> (DateTimeOffset.UtcNow &lt; nextInterval);</div>
<div class="line"><span class="lineno">  783</span>                    }</div>
<div class="line"><span class="lineno">  784</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  785</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Delay</a>(minimumSleepInterval, cancellationToken);</div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span>                    lastReport = estimatedDuration.HasValue ? sleepInterval * (iteration + 1) / estimatedDuration.Value : null;</div>
<div class="line"><span class="lineno">  788</span>                    progressReporter.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1">ReportProgress</a>(lastReport);</div>
<div class="line"><span class="lineno">  789</span>                }</div>
<div class="line"><span class="lineno">  790</span>            }</div>
<div class="line"><span class="lineno">  791</span>            <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  792</span>            {</div>
<div class="line"><span class="lineno">  793</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(ex, <span class="stringliteral">&quot;ProgressTask aborted.&quot;</span>);</div>
<div class="line"><span class="lineno">  794</span>            }</div>
<div class="line"><span class="lineno">  795</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  796</span>            {</div>
<div class="line"><span class="lineno">  797</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogError(ex, <span class="stringliteral">&quot;ProgressTask crashed!&quot;</span>);</div>
<div class="line"><span class="lineno">  798</span>            }</div>
<div class="line"><span class="lineno">  799</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter_html_ac736a80d9d56a20711468d9b8e27e3c1"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1">Tgstation.Server.Host.Jobs.JobProgressReporter.ReportProgress</a></div><div class="ttdeci">void ReportProgress(double? progress)</div><div class="ttdoc">Report progress.</div><div class="ttdef"><b>Definition</b> <a href="_job_progress_reporter_8cs_source.html#l00137">JobProgressReporter.cs:137</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer_html_a588b00b42267c8d23088bde28d3f7fce"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay</a></div><div class="ttdeci">ValueTask Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_job_progress_reporter_8cs_source.html#l00137">Tgstation.Server.Host.Jobs.JobProgressReporter.ReportProgress()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00495">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_cgraph">
<area shape="rect" title="Gradually triggers a given progressReporter &#160;over a given estimatedDuration ." alt="" coords="5,5,256,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1" title="Report progress." alt="" coords="304,5,540,46"/>
<area shape="poly" title=" " alt="" coords="256,23,288,23,288,28,256,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_icgraph">
<area shape="rect" title="Gradually triggers a given progressReporter &#160;over a given estimatedDuration ." alt="" coords="1436,39,1686,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9" title="Run the compile implementation." alt="" coords="1162,39,1388,79"/>
<area shape="poly" title=" " alt="" coords="1420,62,1388,62,1388,56,1420,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="a2394e942cf255412fe358bef742b580c" name="a2394e942cf255412fe358bef742b580c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2394e942cf255412fe358bef742b580c">&#9670;&#160;</a></span>RunCompileJob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models::CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html">Api::Models::Internal::DreamMakerSettings</a>&#160;</td>
          <td class="paramname"><em>dreamMakerSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>launchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a>&#160;</td>
          <td class="paramname"><em>engineLock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a>&#160;</td>
          <td class="paramname"><em>repository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes and populate a given <em>job</em> . </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter for the operation.</td></tr>
    <tr><td class="paramname">job</td><td>The CompileJob to run and populate.</td></tr>
    <tr><td class="paramname">dreamMakerSettings</td><td>The Api.Models.Internal.DreamMakerSettings to use.</td></tr>
    <tr><td class="paramname">launchParameters</td><td>The DreamDaemonLaunchParameters to use.</td></tr>
    <tr><td class="paramname">engineLock</td><td>The IEngineExecutableLock to use.</td></tr>
    <tr><td class="paramname">repository</td><td>The IRepository to use.</td></tr>
    <tr><td class="paramname">remoteDeploymentManager</td><td>The IRemoteDeploymentManager to use.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00591">591</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  600</span>        {</div>
<div class="line"><span class="lineno">  601</span>            var outputDirectory = job.DirectoryName!.Value.ToString();</div>
<div class="line"><span class="lineno">  602</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Compile output GUID: {dirGuid}&quot;</span>, outputDirectory);</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  605</span>            {</div>
<div class="line"><span class="lineno">  606</span>                <span class="comment">// copy the repository</span></div>
<div class="line"><span class="lineno">  607</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Copying repository to game directory&quot;</span>);</div>
<div class="line"><span class="lineno">  608</span>                progressReporter.StageName = <span class="stringliteral">&quot;Copying repository&quot;</span>;</div>
<div class="line"><span class="lineno">  609</span>                var resolvedOutputDirectory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(outputDirectory);</div>
<div class="line"><span class="lineno">  610</span>                var repoOrigin = repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#ae8ac73c5a625a5c20ee4b25dcb3b04ba">Origin</a>;</div>
<div class="line"><span class="lineno">  611</span>                var repoReference = repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a36f1520633eca12a57b6ed52c60c5257">Reference</a>;</div>
<div class="line"><span class="lineno">  612</span>                <span class="keyword">using</span> (repository)</div>
<div class="line"><span class="lineno">  613</span>                    await repository.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e">CopyTo</a>(resolvedOutputDirectory, cancellationToken);</div>
<div class="line"><span class="lineno">  614</span> </div>
<div class="line"><span class="lineno">  615</span>                <span class="comment">// repository closed now</span></div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>                <span class="comment">// run precompile scripts</span></div>
<div class="line"><span class="lineno">  618</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running PreCompile event&quot;</span>;</div>
<div class="line"><span class="lineno">  619</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  620</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.CompileStart,</div>
<div class="line"><span class="lineno">  621</span>                    <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><span class="lineno">  622</span>                    {</div>
<div class="line"><span class="lineno">  623</span>                        resolvedOutputDirectory,</div>
<div class="line"><span class="lineno">  624</span>                        repoOrigin.ToString(),</div>
<div class="line"><span class="lineno">  625</span>                        engineLock.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#abbb2a923bbadea5d57d2d6420c4a15d3">Version</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2">ToString</a>(),</div>
<div class="line"><span class="lineno">  626</span>                        repoReference,</div>
<div class="line"><span class="lineno">  627</span>                    },</div>
<div class="line"><span class="lineno">  628</span>                    <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  629</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  630</span> </div>
<div class="line"><span class="lineno">  631</span>                <span class="comment">// determine the dme</span></div>
<div class="line"><span class="lineno">  632</span>                progressReporter.StageName = <span class="stringliteral">&quot;Determining .dme&quot;</span>;</div>
<div class="line"><span class="lineno">  633</span>                <span class="keywordflow">if</span> (job.DmeName == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  634</span>                {</div>
<div class="line"><span class="lineno">  635</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Searching for available .dmes&quot;</span>);</div>
<div class="line"><span class="lineno">  636</span>                    var foundPaths = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5">GetFilesWithExtension</a>(resolvedOutputDirectory, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a>, <span class="keyword">true</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  637</span>                    var foundPath = foundPaths.FirstOrDefault();</div>
<div class="line"><span class="lineno">  638</span>                    <span class="keywordflow">if</span> (foundPath == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  639</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentNoDme);</div>
<div class="line"><span class="lineno">  640</span>                    job.DmeName = foundPath.Substring(</div>
<div class="line"><span class="lineno">  641</span>                        resolvedOutputDirectory.Length + 1,</div>
<div class="line"><span class="lineno">  642</span>                        foundPath.Length - resolvedOutputDirectory.Length - <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a>.Length - 2); <span class="comment">// +1 for . in extension</span></div>
<div class="line"><span class="lineno">  643</span>                }</div>
<div class="line"><span class="lineno">  644</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  645</span>                {</div>
<div class="line"><span class="lineno">  646</span>                    var targetDme = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(outputDirectory, String.Join(<span class="charliteral">&#39;.&#39;</span>, job.DmeName, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a>));</div>
<div class="line"><span class="lineno">  647</span>                    <span class="keywordflow">if</span> (!await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">PathIsChildOf</a>(outputDirectory, targetDme, cancellationToken))</div>
<div class="line"><span class="lineno">  648</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentWrongDme);</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>                    var targetDmeExists = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">FileExists</a>(targetDme, cancellationToken);</div>
<div class="line"><span class="lineno">  651</span>                    <span class="keywordflow">if</span> (!targetDmeExists)</div>
<div class="line"><span class="lineno">  652</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentMissingDme);</div>
<div class="line"><span class="lineno">  653</span>                }</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Selected \&quot;{dmeName}.dme\&quot; for compilation!&quot;</span>, job.DmeName);</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>                progressReporter.StageName = <span class="stringliteral">&quot;Modifying .dme&quot;</span>;</div>
<div class="line"><span class="lineno">  658</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b">ModifyDme</a>(job, cancellationToken);</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>                <span class="comment">// run precompile scripts</span></div>
<div class="line"><span class="lineno">  661</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running PreDreamMaker event&quot;</span>;</div>
<div class="line"><span class="lineno">  662</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  663</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.PreDreamMaker,</div>
<div class="line"><span class="lineno">  664</span>                    <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><span class="lineno">  665</span>                    {</div>
<div class="line"><span class="lineno">  666</span>                        resolvedOutputDirectory,</div>
<div class="line"><span class="lineno">  667</span>                        repoOrigin.ToString(),</div>
<div class="line"><span class="lineno">  668</span>                        engineLock.Version.ToString(),</div>
<div class="line"><span class="lineno">  669</span>                    },</div>
<div class="line"><span class="lineno">  670</span>                    <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  671</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  672</span> </div>
<div class="line"><span class="lineno">  673</span>                <span class="comment">// run compiler</span></div>
<div class="line"><span class="lineno">  674</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running Compiler&quot;</span>;</div>
<div class="line"><span class="lineno">  675</span>                var compileSuceeded = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6">RunDreamMaker</a>(engineLock, job, dreamMakerSettings.CompilerAdditionalArguments, cancellationToken);</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span>                <span class="comment">// Session takes ownership of the lock and Disposes it so save this for later</span></div>
<div class="line"><span class="lineno">  678</span>                var engineVersion = engineLock.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#abbb2a923bbadea5d57d2d6420c4a15d3">Version</a>;</div>
<div class="line"><span class="lineno">  679</span> </div>
<div class="line"><span class="lineno">  680</span>                <span class="comment">// verify api</span></div>
<div class="line"><span class="lineno">  681</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  682</span>                {</div>
<div class="line"><span class="lineno">  683</span>                    <span class="keywordflow">if</span> (!compileSuceeded)</div>
<div class="line"><span class="lineno">  684</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(</div>
<div class="line"><span class="lineno">  685</span>                            <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentExitCode,</div>
<div class="line"><span class="lineno">  686</span>                            <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>($<span class="stringliteral">&quot;Compilation failed:{Environment.NewLine}{Environment.NewLine}{job.Output}&quot;</span>));</div>
<div class="line"><span class="lineno">  687</span> </div>
<div class="line"><span class="lineno">  688</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a188d9b663c305c1ed438b5ca1494652c">VerifyApi</a>(</div>
<div class="line"><span class="lineno">  689</span>                        launchParameters.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#aa3ac63088b89bf67dd5fdbe67970b03d">StartupTimeout</a>!.Value,</div>
<div class="line"><span class="lineno">  690</span>                        dreamMakerSettings.ApiValidationSecurityLevel!.Value,</div>
<div class="line"><span class="lineno">  691</span>                        job,</div>
<div class="line"><span class="lineno">  692</span>                        progressReporter,</div>
<div class="line"><span class="lineno">  693</span>                        engineLock,</div>
<div class="line"><span class="lineno">  694</span>                        dreamMakerSettings.ApiValidationPort!.Value,</div>
<div class="line"><span class="lineno">  695</span>                        dreamMakerSettings.DMApiValidationMode!.Value,</div>
<div class="line"><span class="lineno">  696</span>                        launchParameters.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a3dbd92d8284bf7837808be9499105682">LogOutput</a>!.Value,</div>
<div class="line"><span class="lineno">  697</span>                        cancellationToken);</div>
<div class="line"><span class="lineno">  698</span>                }</div>
<div class="line"><span class="lineno">  699</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>)</div>
<div class="line"><span class="lineno">  700</span>                {</div>
<div class="line"><span class="lineno">  701</span>                    <span class="comment">// DD never validated or compile failed</span></div>
<div class="line"><span class="lineno">  702</span>                    progressReporter.StageName = <span class="stringliteral">&quot;Running CompileFailure event&quot;</span>;</div>
<div class="line"><span class="lineno">  703</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  704</span>                        <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.CompileFailure,</div>
<div class="line"><span class="lineno">  705</span>                        <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><span class="lineno">  706</span>                        {</div>
<div class="line"><span class="lineno">  707</span>                            resolvedOutputDirectory,</div>
<div class="line"><span class="lineno">  708</span>                            compileSuceeded ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>,</div>
<div class="line"><span class="lineno">  709</span>                            engineVersion.ToString(),</div>
<div class="line"><span class="lineno">  710</span>                        },</div>
<div class="line"><span class="lineno">  711</span>                        <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  712</span>                        cancellationToken);</div>
<div class="line"><span class="lineno">  713</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  714</span>                }</div>
<div class="line"><span class="lineno">  715</span> </div>
<div class="line"><span class="lineno">  716</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running CompileComplete event&quot;</span>;</div>
<div class="line"><span class="lineno">  717</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  718</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.CompileComplete,</div>
<div class="line"><span class="lineno">  719</span>                    <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><span class="lineno">  720</span>                    {</div>
<div class="line"><span class="lineno">  721</span>                        resolvedOutputDirectory,</div>
<div class="line"><span class="lineno">  722</span>                        engineVersion.ToString(),</div>
<div class="line"><span class="lineno">  723</span>                    },</div>
<div class="line"><span class="lineno">  724</span>                    <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  725</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Applying static game file symlinks...&quot;</span>);</div>
<div class="line"><span class="lineno">  728</span>                progressReporter.StageName = <span class="stringliteral">&quot;Symlinking GameStaticFiles&quot;</span>;</div>
<div class="line"><span class="lineno">  729</span> </div>
<div class="line"><span class="lineno">  730</span>                <span class="comment">// symlink in the static data</span></div>
<div class="line"><span class="lineno">  731</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a>.SymlinkStaticFilesTo(resolvedOutputDirectory, cancellationToken);</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Compile complete!&quot;</span>);</div>
<div class="line"><span class="lineno">  734</span>            }</div>
<div class="line"><span class="lineno">  735</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  736</span>            {</div>
<div class="line"><span class="lineno">  737</span>                progressReporter.StageName = <span class="stringliteral">&quot;Cleaning output directory&quot;</span>;</div>
<div class="line"><span class="lineno">  738</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">CleanupFailedCompile</a>(job, remoteDeploymentManager, ex);</div>
<div class="line"><span class="lineno">  739</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  740</span>            }</div>
<div class="line"><span class="lineno">  741</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version_html_a5576a2503f8e4371139e9abe80df44d2"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2">Tgstation.Server.Api.Models.EngineVersion.ToString</a></div><div class="ttdeci">override string ToString()</div><div class="ttdef"><b>Definition</b> <a href="_engine_version_8cs_source.html#l00179">EngineVersion.cs:179</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_a3dbd92d8284bf7837808be9499105682"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a3dbd92d8284bf7837808be9499105682">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.LogOutput</a></div><div class="ttdeci">bool? LogOutput</div><div class="ttdoc">If process output/error text should be logged.</div><div class="ttdef"><b>Definition</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00107">DreamDaemonLaunchParameters.cs:107</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_aa3ac63088b89bf67dd5fdbe67970b03d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#aa3ac63088b89bf67dd5fdbe67970b03d">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.StartupTimeout</a></div><div class="ttdeci">uint? StartupTimeout</div><div class="ttdoc">The DreamDaemon startup timeout in seconds.</div><div class="ttdef"><b>Definition</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00068">DreamDaemonLaunchParameters.cs:68</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a188d9b663c305c1ed438b5ca1494652c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a188d9b663c305c1ed438b5ca1494652c">Tgstation.Server.Host.Components.Deployment.DreamMaker.VerifyApi</a></div><div class="ttdeci">async ValueTask VerifyApi(uint timeout, DreamDaemonSecurity securityLevel, Models.CompileJob job, JobProgressReporter progressReporter, IEngineExecutableLock engineLock, ushort portToUse, DMApiValidationMode validationMode, bool logOutput, CancellationToken cancellationToken)</div><div class="ttdoc">Run a quick DD instance to test the DMAPI is installed on the target code.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00814">DreamMaker.cs:814</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_acd0b61739ab535d67d9081d8071b8f0b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b">Tgstation.Server.Host.Components.Deployment.DreamMaker.ModifyDme</a></div><div class="ttdeci">async ValueTask ModifyDme(Models.CompileJob job, CancellationToken cancellationToken)</div><div class="ttdoc">Adds server side includes to the .dme being compiled.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00950">DreamMaker.cs:950</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_adf43fc4a80b8b41e1d3030ba446971c6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunDreamMaker</a></div><div class="ttdeci">async ValueTask&lt; bool &gt; RunDreamMaker(IEngineExecutableLock engineLock, Models.CompileJob job, string? additionalCompilerArguments, CancellationToken cancellationToken)</div><div class="ttdoc">Compiles a .dme with DreamMaker.</div><div class="ttdef"><b>Definition</b> <a href="_dream_maker_8cs_source.html#l00909">DreamMaker.cs:909</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation_html_abbb2a923bbadea5d57d2d6420c4a15d3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#abbb2a923bbadea5d57d2d6420c4a15d3">Tgstation.Server.Host.Components.Engine.IEngineInstallation.Version</a></div><div class="ttdeci">EngineVersion Version</div><div class="ttdoc">The EngineVersion of the IEngineInstallation.</div><div class="ttdef"><b>Definition</b> <a href="_i_engine_installation_8cs_source.html#l00022">IEngineInstallation.cs:22</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_a36f1520633eca12a57b6ed52c60c5257"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a36f1520633eca12a57b6ed52c60c5257">Tgstation.Server.Host.Components.Repository.IRepository.Reference</a></div><div class="ttdeci">string Reference</div><div class="ttdoc">The current reference the IRepository HEAD is using. This can be a branch or tag.</div><div class="ttdef"><b>Definition</b> <a href="_i_repository_8cs_source.html#l00028">IRepository.cs:28</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_a551ace4a402d31944fbd16eabdcf0d7e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e">Tgstation.Server.Host.Components.Repository.IRepository.CopyTo</a></div><div class="ttdeci">ValueTask CopyTo(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Copies the current working directory to a given path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a0d9526a8d840f2c00cb203bdebdcb994"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">Tgstation.Server.Host.IO.IIOManager.PathIsChildOf</a></div><div class="ttdeci">Task&lt; bool &gt; PathIsChildOf(string parentPath, string childPath, CancellationToken cancellationToken)</div><div class="ttdoc">Check if a given parentPath  is a parent of a given parentPath .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad4de873180481f7afa206b6282158d62"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">Tgstation.Server.Host.IO.IIOManager.FileExists</a></div><div class="ttdeci">Task&lt; bool &gt; FileExists(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Check that the file at path  exists.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad71a483a00641af2838418f677801df5"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5">Tgstation.Server.Host.IO.IIOManager.GetFilesWithExtension</a></div><div class="ttdeci">Task&lt; List&lt; string &gt; &gt; GetFilesWithExtension(string path, string extension, bool recursive, CancellationToken cancellationToken)</div><div class="ttdoc">Gets a list of files in path  with the given extension .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00056">Tgstation.Server.Host.Components.Deployment.DreamMaker.configuration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e">Tgstation.Server.Host.Components.Repository.IRepository.CopyTo()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00041">Tgstation.Server.Host.Components.Deployment.DreamMaker.DmeExtension</a>, <a class="el" href="_dream_maker_8cs_source.html#l00066">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">Tgstation.Server.Host.IO.IIOManager.FileExists()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5">Tgstation.Server.Host.IO.IIOManager.GetFilesWithExtension()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00051">Tgstation.Server.Host.Components.Deployment.DreamMaker.ioManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00106">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00107">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.LogOutput</a>, <a class="el" href="_dream_maker_8cs_source.html#l00950">Tgstation.Server.Host.Components.Deployment.DreamMaker.ModifyDme()</a>, <a class="el" href="_i_repository_8cs_source.html#l00033">Tgstation.Server.Host.Components.Repository.IRepository.Origin</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">Tgstation.Server.Host.IO.IIOManager.PathIsChildOf()</a>, <a class="el" href="_i_repository_8cs_source.html#l00028">Tgstation.Server.Host.Components.Repository.IRepository.Reference</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00909">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunDreamMaker()</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00068">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.StartupTimeout</a>, <a class="el" href="_engine_version_8cs_source.html#l00179">Tgstation.Server.Api.Models.EngineVersion.ToString()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00814">Tgstation.Server.Host.Components.Deployment.DreamMaker.VerifyApi()</a>, and <a class="el" href="_i_engine_installation_8cs_source.html#l00022">Tgstation.Server.Host.Components.Engine.IEngineInstallation.Version</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00495">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_cgraph">
<area shape="rect" title="Executes and populate a given job ." alt="" coords="5,332,266,373"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="363,5,531,46"/>
<area shape="poly" title=" " alt="" coords="141,331,161,275,196,201,219,162,246,123,277,88,312,57,347,39,349,43,315,61,281,91,250,126,223,164,200,204,166,277,146,332"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e" title="Copies the current working directory to a given path ." alt="" coords="334,71,560,111"/>
<area shape="poly" title=" " alt="" coords="144,330,169,286,205,230,254,172,282,145,312,122,322,116,325,121,315,127,285,149,258,175,210,233,173,289,149,333"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62" title="Check that the file at path &#160;exists." alt="" coords="363,136,531,177"/>
<area shape="poly" title=" " alt="" coords="152,330,217,259,262,220,312,187,347,173,349,178,315,192,265,225,221,263,155,333"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5" title="Gets a list of files in path &#160;with the given extension ." alt="" coords="335,201,559,242"/>
<area shape="poly" title=" " alt="" coords="167,329,233,291,313,253,335,245,337,250,315,257,236,295,170,334"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="328,267,566,307"/>
<area shape="poly" title=" " alt="" coords="235,329,331,308,332,314,236,334"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b" title="Adds server side includes to the .dme being compiled." alt="" coords="330,332,564,373"/>
<area shape="poly" title=" " alt="" coords="266,350,314,350,314,355,266,355"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994" title="Check if a given parentPath &#160;is a parent of a given parentPath ." alt="" coords="360,397,534,438"/>
<area shape="poly" title=" " alt="" coords="236,371,345,394,344,399,235,376"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="363,463,531,503"/>
<area shape="poly" title=" " alt="" coords="170,371,236,409,315,447,349,459,347,464,313,452,233,414,167,376"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6" title="Compiles a .dme with DreamMaker." alt="" coords="314,528,580,569"/>
<area shape="poly" title=" " alt="" coords="155,372,221,441,265,480,315,513,329,519,327,524,312,517,262,484,217,445,152,375"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2" title=" " alt="" coords="354,617,540,658"/>
<area shape="poly" title=" " alt="" coords="150,371,175,414,213,468,260,527,315,578,367,608,365,613,312,582,256,530,208,472,171,416,146,374"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a188d9b663c305c1ed438b5ca1494652c" title="Run a quick DD instance to test the DMAPI is installed on the target code." alt="" coords="334,683,560,723"/>
<area shape="poly" title=" " alt="" coords="145,372,163,431,197,512,220,554,247,596,279,634,315,668,323,673,320,677,312,672,275,638,243,599,216,557,192,514,158,433,140,374"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668" title="Return the command line arguments for compiling a given dmePath &#160;if compilation is necessary." alt="" coords="628,485,892,540"/>
<area shape="poly" title=" " alt="" coords="580,530,612,527,613,532,581,536"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8" title="Loads the environment settings for either the server or compiler." alt="" coords="647,564,873,605"/>
<area shape="poly" title=" " alt="" coords="581,561,631,567,631,572,580,566"/>
<area shape="poly" title=" " alt="" coords="389,618,386,607,396,598,416,593,447,591,480,593,500,599,498,604,479,598,447,596,417,598,398,603,391,609,394,616"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_icgraph">
<area shape="rect" title="Executes and populate a given job ." alt="" coords="1436,39,1696,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9" title="Run the compile implementation." alt="" coords="1162,39,1388,79"/>
<area shape="poly" title=" " alt="" coords="1421,62,1388,62,1388,56,1421,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="adf43fc4a80b8b41e1d3030ba446971c6" name="adf43fc4a80b8b41e1d3030ba446971c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf43fc4a80b8b41e1d3030ba446971c6">&#9670;&#160;</a></span>RunDreamMaker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; bool &gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.RunDreamMaker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a>&#160;</td>
          <td class="paramname"><em>engineLock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models::CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string?&#160;</td>
          <td class="paramname"><em>additionalCompilerArguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compiles a .dme with DreamMaker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">engineLock</td><td>The IEngineExecutableLock to use.</td></tr>
    <tr><td class="paramname">job</td><td>The CompileJob for the operation.</td></tr>
    <tr><td class="paramname">additionalCompilerArguments</td><td>Additional arguments to be added to the compiler.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in <code>true</code> if compilation succeeded, <code>false</code> otherwise.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00909">909</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  914</span>        {</div>
<div class="line"><span class="lineno">  915</span>            var environment = await engineLock.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8">LoadEnv</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>, <span class="keyword">true</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  916</span>            var arguments = engineLock.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668">FormatCompilerArguments</a>($<span class="stringliteral">&quot;{job.DmeName}.{DmeExtension}&quot;</span>, additionalCompilerArguments);</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span>            await <span class="keyword">using </span>var dm = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html#a17aa8c090377d70ebf0a93f3eb0a0243">LaunchProcess</a>(</div>
<div class="line"><span class="lineno">  919</span>                engineLock.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#ae9f4dcfec0f9392282f9065f72dfafdd">CompilerExePath</a>,</div>
<div class="line"><span class="lineno">  920</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(</div>
<div class="line"><span class="lineno">  921</span>                    job.DirectoryName!.Value.ToString()),</div>
<div class="line"><span class="lineno">  922</span>                arguments,</div>
<div class="line"><span class="lineno">  923</span>                cancellationToken,</div>
<div class="line"><span class="lineno">  924</span>                environment,</div>
<div class="line"><span class="lineno">  925</span>                readStandardHandles: true,</div>
<div class="line"><span class="lineno">  926</span>                noShellExecute: true);</div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad55bd2d971c2be8939b0ab344f843abc">sessionConfigurationOptions</a>.CurrentValue.LowPriorityDeploymentProcesses)</div>
<div class="line"><span class="lineno">  929</span>                dm.AdjustPriority(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span>            <span class="keywordtype">int</span> exitCode;</div>
<div class="line"><span class="lineno">  932</span>            <span class="keyword">using</span> (cancellationToken.Register(() =&gt; dm.Terminate()))</div>
<div class="line"><span class="lineno">  933</span>                exitCode = (await dm.Lifetime).Value;</div>
<div class="line"><span class="lineno">  934</span>            cancellationToken.ThrowIfCancellationRequested();</div>
<div class="line"><span class="lineno">  935</span> </div>
<div class="line"><span class="lineno">  936</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;DreamMaker exit code: {exitCode}&quot;</span>, exitCode);</div>
<div class="line"><span class="lineno">  937</span>            job.Output = $<span class="stringliteral">&quot;{await dm.GetCombinedOutput(cancellationToken)}{Environment.NewLine}{Environment.NewLine}Exit Code: {exitCode}&quot;</span>;</div>
<div class="line"><span class="lineno">  938</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;DreamMaker output: {newLine}{output}&quot;</span>, Environment.NewLine, job.Output);</div>
<div class="line"><span class="lineno">  939</span> </div>
<div class="line"><span class="lineno">  940</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">currentDreamMakerOutput</a> = job.Output;</div>
<div class="line"><span class="lineno">  941</span>            <span class="keywordflow">return</span> exitCode == 0;</div>
<div class="line"><span class="lineno">  942</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation_html_a18af4979c4f16687cb4891d0cbb9b668"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668">Tgstation.Server.Host.Components.Engine.IEngineInstallation.FormatCompilerArguments</a></div><div class="ttdeci">string FormatCompilerArguments(string dmePath, string? additionalArguments)</div><div class="ttdoc">Return the command line arguments for compiling a given dmePath  if compilation is necessary.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation_html_a1f08236db634210e10291a4ffddd0df8"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8">Tgstation.Server.Host.Components.Engine.IEngineInstallation.LoadEnv</a></div><div class="ttdeci">ValueTask&lt; Dictionary&lt; string, string &gt;?&gt; LoadEnv(ILogger logger, bool forCompiler, CancellationToken cancellationToken)</div><div class="ttdoc">Loads the environment settings for either the server or compiler.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation_html_ae9f4dcfec0f9392282f9065f72dfafdd"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#ae9f4dcfec0f9392282f9065f72dfafdd">Tgstation.Server.Host.Components.Engine.IEngineInstallation.CompilerExePath</a></div><div class="ttdeci">string CompilerExePath</div><div class="ttdoc">The full path to the dm/DreamMaker executable.</div><div class="ttdef"><b>Definition</b> <a href="_i_engine_installation_8cs_source.html#l00032">IEngineInstallation.cs:32</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor_html_a17aa8c090377d70ebf0a93f3eb0a0243"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html#a17aa8c090377d70ebf0a93f3eb0a0243">Tgstation.Server.Host.System.IProcessExecutor.LaunchProcess</a></div><div class="ttdeci">ValueTask&lt; IProcess &gt; LaunchProcess(string fileName, string workingDirectory, string arguments, CancellationToken cancellationToken, IReadOnlyDictionary&lt; string, string &gt;? environment=null, string? fileRedirect=null, bool readStandardHandles=false, bool noShellExecute=false)</div><div class="ttdoc">Launch a IProcess.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_engine_installation_8cs_source.html#l00032">Tgstation.Server.Host.Components.Engine.IEngineInstallation.CompilerExePath</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668">Tgstation.Server.Host.Components.Engine.IEngineInstallation.FormatCompilerArguments()</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8">Tgstation.Server.Host.Components.Engine.IEngineInstallation.LoadEnv()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_cgraph">
<area shape="rect" title="Compiles a .dme with DreamMaker." alt="" coords="5,49,272,90"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668" title="Return the command line arguments for compiling a given dmePath &#160;if compilation is necessary." alt="" coords="320,5,584,61"/>
<area shape="poly" title=" " alt="" coords="272,51,304,47,305,53,272,56"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8" title="Loads the environment settings for either the server or compiler." alt="" coords="339,85,565,126"/>
<area shape="poly" title=" " alt="" coords="272,82,323,88,322,93,272,87"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_icgraph">
<area shape="rect" title="Compiles a .dme with DreamMaker." alt="" coords="1744,39,2011,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="1436,39,1696,79"/>
<area shape="poly" title=" " alt="" coords="1729,62,1697,62,1697,56,1729,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9" title="Run the compile implementation." alt="" coords="1162,39,1388,79"/>
<area shape="poly" title=" " alt="" coords="1421,62,1388,62,1388,56,1421,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<a id="a188d9b663c305c1ed438b5ca1494652c" name="a188d9b663c305c1ed438b5ca1494652c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a188d9b663c305c1ed438b5ca1494652c">&#9670;&#160;</a></span>VerifyApi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.VerifyApi </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>&#160;</td>
          <td class="paramname"><em>securityLevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models::CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a>&#160;</td>
          <td class="paramname"><em>engineLock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>portToUse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ae758c5cd6d61f61a7dc4b6f3c7000b52">DMApiValidationMode</a>&#160;</td>
          <td class="paramname"><em>validationMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>logOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run a quick DD instance to test the DMAPI is installed on the target code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>The timeout in seconds for validation.</td></tr>
    <tr><td class="paramname">securityLevel</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5" title="DreamDaemon&#39;s security level.">DreamDaemonSecurity</a> level to use to validate the API.</td></tr>
    <tr><td class="paramname">job</td><td>The CompileJob for the operation.</td></tr>
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter.</td></tr>
    <tr><td class="paramname">engineLock</td><td>The current IEngineExecutableLock.</td></tr>
    <tr><td class="paramname">portToUse</td><td>The port to use for API validation.</td></tr>
    <tr><td class="paramname">validationMode</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ae758c5cd6d61f61a7dc4b6f3c7000b52" title="The DMAPI validation setting for deployments.">DMApiValidationMode</a>.</td></tr>
    <tr><td class="paramname">logOutput</td><td>If output should be logged to the DreamDaemon Diagnostics folder.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00814">814</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  824</span>        {</div>
<div class="line"><span class="lineno">  825</span>            <span class="keywordflow">if</span> (validationMode == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ae758c5cd6d61f61a7dc4b6f3c7000b52">DMApiValidationMode</a>.Skipped)</div>
<div class="line"><span class="lineno">  826</span>            {</div>
<div class="line"><span class="lineno">  827</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Skipping DMAPI validation&quot;</span>);</div>
<div class="line"><span class="lineno">  828</span>                job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Ultrasafe;</div>
<div class="line"><span class="lineno">  829</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  830</span>            }</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>            progressReporter.StageName = <span class="stringliteral">&quot;Validating DMAPI&quot;</span>;</div>
<div class="line"><span class="lineno">  833</span> </div>
<div class="line"><span class="lineno">  834</span>            var requireValidate = validationMode == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ae758c5cd6d61f61a7dc4b6f3c7000b52">DMApiValidationMode</a>.Required;</div>
<div class="line"><span class="lineno">  835</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Verifying {possiblyRequired}DMAPI...&quot;</span>, requireValidate ? <span class="stringliteral">&quot;required &quot;</span> : String.Empty);</div>
<div class="line"><span class="lineno">  836</span>            var launchParameters = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a></div>
<div class="line"><span class="lineno">  837</span>            {</div>
<div class="line"><span class="lineno">  838</span>                AllowWebClient = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  839</span>                Port = portToUse,</div>
<div class="line"><span class="lineno">  840</span>                OpenDreamTopicPort = 0,</div>
<div class="line"><span class="lineno">  841</span>                SecurityLevel = securityLevel,</div>
<div class="line"><span class="lineno">  842</span>                Visibility = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a2ca30004669a0f022b39b67d21ac976c">DreamDaemonVisibility</a>.Invisible,</div>
<div class="line"><span class="lineno">  843</span>                StartupTimeout = timeout,</div>
<div class="line"><span class="lineno">  844</span>                TopicRequestTimeout = 0, <span class="comment">// not used</span></div>
<div class="line"><span class="lineno">  845</span>                HealthCheckSeconds = 0, <span class="comment">// not used</span></div>
<div class="line"><span class="lineno">  846</span>                StartProfiler = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  847</span>                LogOutput = logOutput,</div>
<div class="line"><span class="lineno">  848</span>                MapThreads = 1, <span class="comment">// lowest possible amount</span></div>
<div class="line"><span class="lineno">  849</span>            };</div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span>            job.MinimumSecurityLevel = securityLevel; <span class="comment">// needed for the TempDmbProvider</span></div>
<div class="line"><span class="lineno">  852</span> </div>
<div class="line"><span class="lineno">  853</span>            <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a> validationStatus;</div>
<div class="line"><span class="lineno">  854</span>            await <span class="keyword">using</span> (var provider = <span class="keyword">new</span> TemporaryDmbProvider(</div>
<div class="line"><span class="lineno">  855</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(job.DirectoryName!.Value.ToString()),</div>
<div class="line"><span class="lineno">  856</span>                job,</div>
<div class="line"><span class="lineno">  857</span>                engineLock.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#abbb2a923bbadea5d57d2d6420c4a15d3">Version</a>))</div>
<div class="line"><span class="lineno">  858</span>            await <span class="keyword">using</span> (var controller = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html#a1ed439b268b2fae3ff0075c7698d6932">LaunchNew</a>(provider, engineLock, launchParameters, <span class="keyword">true</span>, cancellationToken))</div>
<div class="line"><span class="lineno">  859</span>            {</div>
<div class="line"><span class="lineno">  860</span>                var launchResult = await controller.LaunchResult.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>                <span class="keywordflow">if</span> (launchResult.StartupTime.HasValue)</div>
<div class="line"><span class="lineno">  863</span>                    await controller.Lifetime.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  864</span> </div>
<div class="line"><span class="lineno">  865</span>                <span class="keywordflow">if</span> (!controller.Lifetime.IsCompleted)</div>
<div class="line"><span class="lineno">  866</span>                    await controller.DisposeAsync();</div>
<div class="line"><span class="lineno">  867</span> </div>
<div class="line"><span class="lineno">  868</span>                validationStatus = controller.ApiValidationStatus;</div>
<div class="line"><span class="lineno">  869</span> </div>
<div class="line"><span class="lineno">  870</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;API validation status: {validationStatus}&quot;</span>, validationStatus);</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>                job.DMApiVersion = controller.DMApiVersion;</div>
<div class="line"><span class="lineno">  873</span>            }</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>            <span class="keywordflow">switch</span> (validationStatus)</div>
<div class="line"><span class="lineno">  876</span>            {</div>
<div class="line"><span class="lineno">  877</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.RequiresUltrasafe:</div>
<div class="line"><span class="lineno">  878</span>                    job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Ultrasafe;</div>
<div class="line"><span class="lineno">  879</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  880</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.RequiresSafe:</div>
<div class="line"><span class="lineno">  881</span>                    job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Safe;</div>
<div class="line"><span class="lineno">  882</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  883</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.RequiresTrusted:</div>
<div class="line"><span class="lineno">  884</span>                    job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Trusted;</div>
<div class="line"><span class="lineno">  885</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  886</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.NeverValidated:</div>
<div class="line"><span class="lineno">  887</span>                    <span class="keywordflow">if</span> (requireValidate)</div>
<div class="line"><span class="lineno">  888</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentNeverValidated);</div>
<div class="line"><span class="lineno">  889</span>                    job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Ultrasafe;</div>
<div class="line"><span class="lineno">  890</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  891</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.BadValidationRequest:</div>
<div class="line"><span class="lineno">  892</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.Incompatible:</div>
<div class="line"><span class="lineno">  893</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentInvalidValidation);</div>
<div class="line"><span class="lineno">  894</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.UnaskedValidationRequest:</div>
<div class="line"><span class="lineno">  895</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  896</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(</div>
<div class="line"><span class="lineno">  897</span>                        $<span class="stringliteral">&quot;Session controller returned unexpected ApiValidationStatus: {validationStatus}&quot;</span>);</div>
<div class="line"><span class="lineno">  898</span>            }</div>
<div class="line"><span class="lineno">  899</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters</a></div><div class="ttdoc">Launch settings for DreamDaemon.</div><div class="ttdef"><b>Definition</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00009">DreamDaemonLaunchParameters.cs:10</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory_html_a1ed439b268b2fae3ff0075c7698d6932"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html#a1ed439b268b2fae3ff0075c7698d6932">Tgstation.Server.Host.Components.Session.ISessionControllerFactory.LaunchNew</a></div><div class="ttdeci">ValueTask&lt; ISessionController &gt; LaunchNew(IDmbProvider dmbProvider, IEngineExecutableLock? currentByondLock, DreamDaemonLaunchParameters launchParameters, bool apiValidate, CancellationToken cancellationToken)</div><div class="ttdoc">Create a ISessionController from a freshly launch DreamDaemon instance.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a2ca30004669a0f022b39b67d21ac976c"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a2ca30004669a0f022b39b67d21ac976c">Tgstation.Server.Api.Models.DreamDaemonVisibility</a></div><div class="ttdeci">DreamDaemonVisibility</div><div class="ttdoc">The visibility setting for DreamDaemon.</div><div class="ttdef"><b>Definition</b> <a href="_dream_daemon_visibility_8cs_source.html#l00006">DreamDaemonVisibility.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_ad4850e6b78816679602b13d63d2869b5"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">Tgstation.Server.Api.Models.DreamDaemonSecurity</a></div><div class="ttdeci">DreamDaemonSecurity</div><div class="ttdoc">DreamDaemon's security level.</div><div class="ttdef"><b>Definition</b> <a href="_dream_daemon_security_8cs_source.html#l00006">DreamDaemonSecurity.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_ae758c5cd6d61f61a7dc4b6f3c7000b52"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ae758c5cd6d61f61a7dc4b6f3c7000b52">Tgstation.Server.Api.Models.DMApiValidationMode</a></div><div class="ttdeci">DMApiValidationMode</div><div class="ttdoc">The DMAPI validation setting for deployments.</div><div class="ttdef"><b>Definition</b> <a href="_d_m_api_validation_mode_8cs_source.html#l00006">DMApiValidationMode.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_html_a9dd0e3dfc87080e8c7a91665b79891b3"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">Tgstation.Server.Host.Components.Session.ApiValidationStatus</a></div><div class="ttdeci">ApiValidationStatus</div><div class="ttdoc">Status of DMAPI validation.</div><div class="ttdef"><b>Definition</b> <a href="_api_validation_status_8cs_source.html#l00006">ApiValidationStatus.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_engine_installation_8cs_source.html#l00022">Tgstation.Server.Host.Components.Engine.IEngineInstallation.Version</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a188d9b663c305c1ed438b5ca1494652c_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a188d9b663c305c1ed438b5ca1494652c_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a188d9b663c305c1ed438b5ca1494652c_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a188d9b663c305c1ed438b5ca1494652c_icgraph">
<area shape="rect" title="Run a quick DD instance to test the DMAPI is installed on the target code." alt="" coords="1744,39,1971,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="1436,39,1696,79"/>
<area shape="poly" title=" " alt="" coords="1728,62,1697,62,1697,56,1728,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a06dba3c351744dea4044270664675ed9" title="Run the compile implementation." alt="" coords="1162,39,1388,79"/>
<area shape="poly" title=" " alt="" coords="1421,62,1388,62,1388,56,1421,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title="Create and a compile job and insert it into the database. Meant to be called by a IJobManager...." alt="" coords="828,39,1114,79"/>
<area shape="poly" title=" " alt="" coords="1146,62,1114,62,1114,56,1146,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a9ab4ae1f451c0feaf8845768bfb461c2" title="Pulls the repository and compiles." alt="" coords="554,39,780,79"/>
<area shape="poly" title=" " alt="" coords="813,62,781,62,781,56,813,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore.A ValueTask representing the running operation." alt="" coords="280,39,506,79"/>
<area shape="poly" title=" " alt="" coords="538,62,507,62,507,56,538,56"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,46,232,42,233,37,264,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,71,232,111"/>
<area shape="poly" title=" " alt="" coords="264,77,233,80,232,75,264,71"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af28269cbf6ac69ab9cde83fe1f117fde" name="af28269cbf6ac69ab9cde83fe1f117fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af28269cbf6ac69ab9cde83fe1f117fde">&#9670;&#160;</a></span>asyncDelayer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.asyncDelayer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAsyncDelayer for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00096">96</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a7d851b19e54c63b2298a7510cdbe25dc" name="a7d851b19e54c63b2298a7510cdbe25dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d851b19e54c63b2298a7510cdbe25dc">&#9670;&#160;</a></span>attemptedDeployments</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Counter Tgstation.Server.Host.Components.Deployment.DreamMaker.attemptedDeployments</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of attempted deployments. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00116">116</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="ad8f8e86f9e52a3f5e027b9570c5f32df" name="ad8f8e86f9e52a3f5e027b9570c5f32df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f8e86f9e52a3f5e027b9570c5f32df">&#9670;&#160;</a></span>chatManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.chatManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IChatManager for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00071">71</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00495">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="ab01d9cb0fcd270eea9ec47a4e0684f4a" name="ab01d9cb0fcd270eea9ec47a4e0684f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab01d9cb0fcd270eea9ec47a4e0684f4a">&#9670;&#160;</a></span>compileJobConsumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html">ICompileJobSink</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.compileJobConsumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ICompileJobSink for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00086">86</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a2fe7ecccab0b5b1be9fdda8cbf097d9b" name="a2fe7ecccab0b5b1be9fdda8cbf097d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe7ecccab0b5b1be9fdda8cbf097d9b">&#9670;&#160;</a></span>configuration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html">StaticFiles.IConfiguration</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.configuration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The StaticFiles.IConfiguration for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00056">56</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="a0585a8e7178f4b9fd4e82bba4e0aba96" name="a0585a8e7178f4b9fd4e82bba4e0aba96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0585a8e7178f4b9fd4e82bba4e0aba96">&#9670;&#160;</a></span>currentChatCallback</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Func&lt;string?, string, Action&lt;bool&gt; &gt;? Tgstation.Server.Host.Components.Deployment.DreamMaker.currentChatCallback</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The active callback from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af57dca6c1e1af2dc810e731ce106c719" title="Send the message for a deployment to configured deployment channels.">IChatManager.QueueDeploymentMessage</a>. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00136">136</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00495">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>

</div>
</div>
<a id="a3f7e6c6cababdc46b11bfab6e53ab9a5" name="a3f7e6c6cababdc46b11bfab6e53ab9a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f7e6c6cababdc46b11bfab6e53ab9a5">&#9670;&#160;</a></span>currentDreamMakerOutput</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string? Tgstation.Server.Host.Components.Deployment.DreamMaker.currentDreamMakerOutput</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cached for currentChatCallback. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00141">141</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>

</div>
</div>
<a id="a95745246c0a960bdec751c0e7f9559c8" name="a95745246c0a960bdec751c0e7f9559c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95745246c0a960bdec751c0e7f9559c8">&#9670;&#160;</a></span>deploying</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Deployment.DreamMaker.deploying</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If a compile job is running. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00146">146</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>

</div>
</div>
<a id="ae7ed5b30d84ba3a1f88262ccd524f280" name="ae7ed5b30d84ba3a1f88262ccd524f280"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7ed5b30d84ba3a1f88262ccd524f280">&#9670;&#160;</a></span>deploymentLock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly object Tgstation.Server.Host.Components.Deployment.DreamMaker.deploymentLock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>lock</code> object for deploying. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00131">131</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a373e2cd0c56f6826367b9aebf150040f" name="a373e2cd0c56f6826367b9aebf150040f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a373e2cd0c56f6826367b9aebf150040f">&#9670;&#160;</a></span>DmeExtension</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const string Tgstation.Server.Host.Components.Deployment.DreamMaker.DmeExtension = &quot;dme&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extension for .dmes. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00041">41</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="aa71af19173e2a9edb56655c7eeb75968" name="aa71af19173e2a9edb56655c7eeb75968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa71af19173e2a9edb56655c7eeb75968">&#9670;&#160;</a></span>engineManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html">IEngineManager</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.engineManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IEngineManager for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00046">46</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00495">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="abfcbd4e2f809faa445f7ea56fe4e5f0e" name="abfcbd4e2f809faa445f7ea56fe4e5f0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfcbd4e2f809faa445f7ea56fe4e5f0e">&#9670;&#160;</a></span>eventConsumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IEventConsumer for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00066">66</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00495">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="a870ada202174ecaef325583cd626f3df" name="a870ada202174ecaef325583cd626f3df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a870ada202174ecaef325583cd626f3df">&#9670;&#160;</a></span>failedDeployments</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Counter Tgstation.Server.Host.Components.Deployment.DreamMaker.failedDeployments</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of failed deployments. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00126">126</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a5f0da2a044d1b9df7e85492cb58c076c" name="a5f0da2a044d1b9df7e85492cb58c076c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f0da2a044d1b9df7e85492cb58c076c">&#9670;&#160;</a></span>ioManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.ioManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00051">51</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="a1d5a133d669af1e14db0104b67103ccf" name="a1d5a133d669af1e14db0104b67103ccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d5a133d669af1e14db0104b67103ccf">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ILogger&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>&gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ILogger for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00106">106</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00495">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00591">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="ac5b667aa89c476c9cb0cf71cb5add8a6" name="ac5b667aa89c476c9cb0cf71cb5add8a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5b667aa89c476c9cb0cf71cb5add8a6">&#9670;&#160;</a></span>metadata</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Instance DreamMaker belongs to. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00111">111</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00454">Tgstation.Server.Host.Components.Deployment.DreamMaker.CalculateExpectedDeploymentTime()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a8d40fb1d02610364e59b9feedb4e75d9" name="a8d40fb1d02610364e59b9feedb4e75d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d40fb1d02610364e59b9feedb4e75d9">&#9670;&#160;</a></span>processExecutor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html">IProcessExecutor</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.processExecutor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IProcessExecutor for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00076">76</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a753ddaadb407331cf9d140c96fe5374b" name="a753ddaadb407331cf9d140c96fe5374b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a753ddaadb407331cf9d140c96fe5374b">&#9670;&#160;</a></span>remoteDeploymentManagerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.remoteDeploymentManagerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRemoteDeploymentManagerFactory for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00091">91</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a0cfc680dd4fa5908a6ae164d14530f39" name="a0cfc680dd4fa5908a6ae164d14530f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cfc680dd4fa5908a6ae164d14530f39">&#9670;&#160;</a></span>repositoryManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html">IRepositoryManager</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.repositoryManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRepositoryManager for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00081">81</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="ad55bd2d971c2be8939b0ab344f843abc" name="ad55bd2d971c2be8939b0ab344f843abc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad55bd2d971c2be8939b0ab344f843abc">&#9670;&#160;</a></span>sessionConfigurationOptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IOptionsMonitor&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html">SessionConfiguration</a>&gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionConfigurationOptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IOptionsMonitor&lt;TOptions&gt; of SessionConfiguration for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00101">101</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a8322a848923985ee4e06d792dccb8643" name="a8322a848923985ee4e06d792dccb8643"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8322a848923985ee4e06d792dccb8643">&#9670;&#160;</a></span>sessionControllerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionControllerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionControllerFactory for DreamMaker. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00061">61</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a7bc8863bee957edada2da93870ce86f4" name="a7bc8863bee957edada2da93870ce86f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bc8863bee957edada2da93870ce86f4">&#9670;&#160;</a></span>successfulDeployments</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Counter Tgstation.Server.Host.Components.Deployment.DreamMaker.successfulDeployments</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of successful deployments. </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00121">121</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00218">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00176">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/Deployment/<a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
