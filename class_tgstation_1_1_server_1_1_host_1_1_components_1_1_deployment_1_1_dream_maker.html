<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.Deployment.DreamMaker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.9.1</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment.html">Deployment</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.Deployment.DreamMaker Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p> 
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.Deployment.DreamMaker:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_inherit__map">
<area shape="rect" title=" " alt="" coords="5,79,232,119"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker.html" title="For managing the compiler." alt="" coords="69,5,169,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.Deployment.DreamMaker:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_coll__map" id="a_tgstation_8_server_8_host_8_components_8_deployment_8_dream_maker_coll__map">
<area shape="rect" title=" " alt="" coords="1080,607,1307,647"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker.html" title="For managing the compiler." alt="" coords="647,17,747,42"/>
<area shape="rect" title=" " alt="" coords="211,86,301,112"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html" title="Configuration options for the game sessions." alt="" coords="583,142,812,182"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html" title="For managing the engine installations." alt="" coords="584,332,811,372"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="188,320,324,345"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html" title="For managing connected chat services." alt="" coords="584,268,811,308"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,320,117,345"/>
<area shape="rect" href="class_i_disposable.html" title=" " alt="" coords="211,386,301,412"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html" title="Factory for creating and loading IRepositorys." alt="" coords="584,396,811,436"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="613,460,781,500"/>
<area shape="rect" title=" " alt="" coords="655,525,739,550"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html" title="Factory for ISessionControllers." alt="" coords="584,575,811,615"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="584,639,811,679"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="193,270,319,296"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html" title="For launching IProcess&#39;." alt="" coords="598,703,797,743"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html" title="Sink for CompileJobs." alt="" coords="584,767,811,807"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html" title="Provides the most recently deployed CompileJob." alt="" coords="167,774,345,800"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html" title="Factory for creating IRemoteDeploymentManagers." alt="" coords="568,832,827,886"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html" title="For waiting asynchronously." alt="" coords="607,911,788,951"/>
<area shape="rect" title=" " alt="" coords="577,976,818,1030"/>
<area shape="rect" title=" " alt="" coords="233,185,279,210"/>
<area shape="rect" title=" " alt="" coords="677,1054,718,1080"/>
<area shape="rect" title=" " alt="" coords="643,1104,751,1129"/>
<area shape="rect" title=" " alt="" coords="625,1154,769,1194"/>
<area shape="rect" title=" " alt="" coords="667,1218,728,1244"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad8fe024d105f0db0d2d7deaf2a87aa7d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8fe024d105f0db0d2d7deaf2a87aa7d">DreamMaker</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html">IEngineManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html">StaticFiles.IConfiguration</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html">IProcessExecutor</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html">ICompileJobSink</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html">IRepositoryManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a>, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html">SessionConfiguration</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b">sessionConfiguration</a>, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>)</td></tr>
<tr class="memdesc:ad8fe024d105f0db0d2d7deaf2a87aa7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> class.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8fe024d105f0db0d2d7deaf2a87aa7d">More...</a><br /></td></tr>
<tr class="separator:ad8fe024d105f0db0d2d7deaf2a87aa7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ea1632011a37a072e9d1c9e3d04c13"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13">DeploymentProcess</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Models.Job</a> job, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> databaseContextFactory, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, CancellationToken cancellationToken)</td></tr>
<tr class="separator:a38ea1632011a37a072e9d1c9e3d04c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker.html">Tgstation.Server.Host.Components.Deployment.IDreamMaker</a></td></tr>
<tr class="memitem:acb2260b3be70d34554fb91e92ddf21aa inherit pub_methods_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker.html#acb2260b3be70d34554fb91e92ddf21aa">DeploymentProcess</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Job</a> job, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> databaseContextFactory, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:acb2260b3be70d34554fb91e92ddf21aa inherit pub_methods_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and a compile job and insert it into the database. Meant to be called by a IJobManager.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker.html#acb2260b3be70d34554fb91e92ddf21aa">More...</a><br /></td></tr>
<tr class="separator:acb2260b3be70d34554fb91e92ddf21aa inherit pub_methods_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dream_maker"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4d28d2170dd121e9e09135a02ec05b51"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; TimeSpan?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51">CalculateExpectedDeploymentTime</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a4d28d2170dd121e9e09135a02ec05b51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the average length of a deployment using a given <em>databaseContext</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51">More...</a><br /></td></tr>
<tr class="separator:a4d28d2170dd121e9e09135a02ec05b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad489ef5c91d097ff3366d5bc63d8277e"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e">Compile</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Models.Job</a> job, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">Models.RevisionInformation</a> revisionInformation, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html">Api.Models.Internal.DreamMakerSettings</a> dreamMakerSettings, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a> repository, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a> remoteDeploymentManager, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, TimeSpan? estimatedDuration, bool localCommitExistsOnRemote, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad489ef5c91d097ff3366d5bc63d8277e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the compile implementation.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e">More...</a><br /></td></tr>
<tr class="separator:ad489ef5c91d097ff3366d5bc63d8277e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2394e942cf255412fe358bef742b580c"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c">RunCompileJob</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html">Api.Models.Internal.DreamMakerSettings</a> dreamMakerSettings, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a> engineLock, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a> repository, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a> remoteDeploymentManager, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2394e942cf255412fe358bef742b580c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes and populate a given <em>job</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c">More...</a><br /></td></tr>
<tr class="separator:a2394e942cf255412fe358bef742b580c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143fbc68ad876ca7e7ce4145d97d9278"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278">ProgressTask</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a> progressReporter, TimeSpan? estimatedDuration, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a143fbc68ad876ca7e7ce4145d97d9278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gradually triggers a given <em>progressReporter</em>  over a given <em>estimatedDuration</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278">More...</a><br /></td></tr>
<tr class="separator:a143fbc68ad876ca7e7ce4145d97d9278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e48d885b68d66ad74f17d0d192e86c0"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8e48d885b68d66ad74f17d0d192e86c0">VerifyApi</a> (uint timeout, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a> securityLevel, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a> engineLock, ushort portToUse, bool requireValidate, bool logOutput, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a8e48d885b68d66ad74f17d0d192e86c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a quick DD instance to test the DMAPI is installed on the target code.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8e48d885b68d66ad74f17d0d192e86c0">More...</a><br /></td></tr>
<tr class="separator:a8e48d885b68d66ad74f17d0d192e86c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf43fc4a80b8b41e1d3030ba446971c6"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6">RunDreamMaker</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a> engineLock, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, string? additionalCompilerArguments, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:adf43fc4a80b8b41e1d3030ba446971c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compiles a .dme with <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6">More...</a><br /></td></tr>
<tr class="separator:adf43fc4a80b8b41e1d3030ba446971c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd0b61739ab535d67d9081d8071b8f0b"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b">ModifyDme</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:acd0b61739ab535d67d9081d8071b8f0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds server side includes to the .dme being compiled.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b">More...</a><br /></td></tr>
<tr class="separator:acd0b61739ab535d67d9081d8071b8f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10266c7acfc715ffec0cb0189d39c6a4"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">CleanupFailedCompile</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> job, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a> remoteDeploymentManager, <a class="el" href="class_exception.html">Exception</a> exception)</td></tr>
<tr class="memdesc:a10266c7acfc715ffec0cb0189d39c6a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up a failed compile <em>job</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">More...</a><br /></td></tr>
<tr class="separator:a10266c7acfc715ffec0cb0189d39c6a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a8cdce0ecb73a635564b1eafc0fc0372f"><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">FormatExceptionForUsers</a> (<a class="el" href="class_exception.html">Exception</a> exception)</td></tr>
<tr class="memdesc:a8cdce0ecb73a635564b1eafc0fc0372f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format a given <a class="el" href="class_exception.html">Exception</a> for display to users.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">More...</a><br /></td></tr>
<tr class="separator:a8cdce0ecb73a635564b1eafc0fc0372f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa71af19173e2a9edb56655c7eeb75968"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html">IEngineManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a></td></tr>
<tr class="memdesc:aa71af19173e2a9edb56655c7eeb75968"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IEngineManager for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">More...</a><br /></td></tr>
<tr class="separator:aa71af19173e2a9edb56655c7eeb75968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f0da2a044d1b9df7e85492cb58c076c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a></td></tr>
<tr class="memdesc:a5f0da2a044d1b9df7e85492cb58c076c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">More...</a><br /></td></tr>
<tr class="separator:a5f0da2a044d1b9df7e85492cb58c076c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe7ecccab0b5b1be9fdda8cbf097d9b"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html">StaticFiles.IConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a></td></tr>
<tr class="memdesc:a2fe7ecccab0b5b1be9fdda8cbf097d9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html" title="For managing the Configuration directory.">StaticFiles.IConfiguration</a> for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">More...</a><br /></td></tr>
<tr class="separator:a2fe7ecccab0b5b1be9fdda8cbf097d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8322a848923985ee4e06d792dccb8643"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a></td></tr>
<tr class="memdesc:a8322a848923985ee4e06d792dccb8643"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionControllerFactory for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">More...</a><br /></td></tr>
<tr class="separator:a8322a848923985ee4e06d792dccb8643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfcbd4e2f809faa445f7ea56fe4e5f0e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a></td></tr>
<tr class="memdesc:abfcbd4e2f809faa445f7ea56fe4e5f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IEventConsumer for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">More...</a><br /></td></tr>
<tr class="separator:abfcbd4e2f809faa445f7ea56fe4e5f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f8e86f9e52a3f5e027b9570c5f32df"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a></td></tr>
<tr class="memdesc:ad8f8e86f9e52a3f5e027b9570c5f32df"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IChatManager for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">More...</a><br /></td></tr>
<tr class="separator:ad8f8e86f9e52a3f5e027b9570c5f32df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d40fb1d02610364e59b9feedb4e75d9"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html">IProcessExecutor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a></td></tr>
<tr class="memdesc:a8d40fb1d02610364e59b9feedb4e75d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IProcessExecutor for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">More...</a><br /></td></tr>
<tr class="separator:a8d40fb1d02610364e59b9feedb4e75d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cfc680dd4fa5908a6ae164d14530f39"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html">IRepositoryManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a></td></tr>
<tr class="memdesc:a0cfc680dd4fa5908a6ae164d14530f39"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRepositoryManager for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">More...</a><br /></td></tr>
<tr class="separator:a0cfc680dd4fa5908a6ae164d14530f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab01d9cb0fcd270eea9ec47a4e0684f4a"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html">ICompileJobSink</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a></td></tr>
<tr class="memdesc:ab01d9cb0fcd270eea9ec47a4e0684f4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html" title="Sink for CompileJobs.">ICompileJobSink</a> for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">More...</a><br /></td></tr>
<tr class="separator:ab01d9cb0fcd270eea9ec47a4e0684f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a753ddaadb407331cf9d140c96fe5374b"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a></td></tr>
<tr class="memdesc:a753ddaadb407331cf9d140c96fe5374b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRemoteDeploymentManagerFactory for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">More...</a><br /></td></tr>
<tr class="separator:a753ddaadb407331cf9d140c96fe5374b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af28269cbf6ac69ab9cde83fe1f117fde"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a></td></tr>
<tr class="memdesc:af28269cbf6ac69ab9cde83fe1f117fde"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">More...</a><br /></td></tr>
<tr class="separator:af28269cbf6ac69ab9cde83fe1f117fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d5a133d669af1e14db0104b67103ccf"><td class="memItemLeft" align="right" valign="top">readonly ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a></td></tr>
<tr class="memdesc:a1d5a133d669af1e14db0104b67103ccf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">More...</a><br /></td></tr>
<tr class="separator:a1d5a133d669af1e14db0104b67103ccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a687a3355ff5f788593e33f8e7399b"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html">SessionConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b">sessionConfiguration</a></td></tr>
<tr class="memdesc:a21a687a3355ff5f788593e33f8e7399b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SessionConfiguration for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b">More...</a><br /></td></tr>
<tr class="separator:a21a687a3355ff5f788593e33f8e7399b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b667aa89c476c9cb0cf71cb5add8a6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a></td></tr>
<tr class="memdesc:ac5b667aa89c476c9cb0cf71cb5add8a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> belongs to.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">More...</a><br /></td></tr>
<tr class="separator:ac5b667aa89c476c9cb0cf71cb5add8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7ed5b30d84ba3a1f88262ccd524f280"><td class="memItemLeft" align="right" valign="top">readonly object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">deploymentLock</a></td></tr>
<tr class="memdesc:ae7ed5b30d84ba3a1f88262ccd524f280"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>lock</code> object for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8" title="If a compile job is running.">deploying</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">More...</a><br /></td></tr>
<tr class="separator:ae7ed5b30d84ba3a1f88262ccd524f280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0585a8e7178f4b9fd4e82bba4e0aba96"><td class="memItemLeft" align="right" valign="top">Func&lt; string?, string, Action&lt; bool &gt; &gt;?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a></td></tr>
<tr class="memdesc:a0585a8e7178f4b9fd4e82bba4e0aba96"><td class="mdescLeft">&#160;</td><td class="mdescRight">The active callback from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#aa2527a9fe8d1392b909018d6ed745fed" title="Send the message for a deployment to configured deployment channels.">IChatManager.QueueDeploymentMessage</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">More...</a><br /></td></tr>
<tr class="separator:a0585a8e7178f4b9fd4e82bba4e0aba96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f7e6c6cababdc46b11bfab6e53ab9a5"><td class="memItemLeft" align="right" valign="top">string?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">currentDreamMakerOutput</a></td></tr>
<tr class="memdesc:a3f7e6c6cababdc46b11bfab6e53ab9a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cached for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96" title="The active callback from IChatManager.QueueDeploymentMessage.">currentChatCallback</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">More...</a><br /></td></tr>
<tr class="separator:a3f7e6c6cababdc46b11bfab6e53ab9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95745246c0a960bdec751c0e7f9559c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">deploying</a></td></tr>
<tr class="memdesc:a95745246c0a960bdec751c0e7f9559c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a compile job is running.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">More...</a><br /></td></tr>
<tr class="separator:a95745246c0a960bdec751c0e7f9559c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a373e2cd0c56f6826367b9aebf150040f"><td class="memItemLeft" align="right" valign="top">const string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a> = &quot;dme&quot;</td></tr>
<tr class="memdesc:a373e2cd0c56f6826367b9aebf150040f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extension for .dmes.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">More...</a><br /></td></tr>
<tr class="separator:a373e2cd0c56f6826367b9aebf150040f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00031">31</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad8fe024d105f0db0d2d7deaf2a87aa7d" name="ad8fe024d105f0db0d2d7deaf2a87aa7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8fe024d105f0db0d2d7deaf2a87aa7d">&#9670;&#160;</a></span>DreamMaker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html">IEngineManager</a>&#160;</td>
          <td class="paramname"><em>engineManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>ioManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html">StaticFiles.IConfiguration</a>&#160;</td>
          <td class="paramname"><em>configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td>
          <td class="paramname"><em>sessionControllerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td>
          <td class="paramname"><em>eventConsumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td>
          <td class="paramname"><em>chatManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html">IProcessExecutor</a>&#160;</td>
          <td class="paramname"><em>processExecutor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html">ICompileJobSink</a>&#160;</td>
          <td class="paramname"><em>compileJobConsumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html">IRepositoryManager</a>&#160;</td>
          <td class="paramname"><em>repositoryManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManagerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html">SessionConfiguration</a>&#160;</td>
          <td class="paramname"><em>sessionConfiguration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> class.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">engineManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968" title="The IEngineManager for DreamMaker.">engineManager</a>.</td></tr>
    <tr><td class="paramname">ioManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c" title="The IIOManager for DreamMaker.">ioManager</a>.</td></tr>
    <tr><td class="paramname">configuration</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b" title="The StaticFiles.IConfiguration for DreamMaker.">configuration</a>.</td></tr>
    <tr><td class="paramname">sessionControllerFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643" title="The ISessionControllerFactory for DreamMaker.">sessionControllerFactory</a>.</td></tr>
    <tr><td class="paramname">eventConsumer</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e" title="The IEventConsumer for DreamMaker.">eventConsumer</a>.</td></tr>
    <tr><td class="paramname">chatManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df" title="The IChatManager for DreamMaker.">chatManager</a>.</td></tr>
    <tr><td class="paramname">processExecutor</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9" title="The IProcessExecutor for DreamMaker.">processExecutor</a>.</td></tr>
    <tr><td class="paramname">compileJobConsumer</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a" title="The ICompileJobSink for DreamMaker.">compileJobConsumer</a>.</td></tr>
    <tr><td class="paramname">repositoryManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39" title="The IRepositoryManager for DreamMaker.">repositoryManager</a>.</td></tr>
    <tr><td class="paramname">remoteDeploymentManagerFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b" title="The IRemoteDeploymentManagerFactory for DreamMaker.">remoteDeploymentManagerFactory</a>.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde" title="The IAsyncDelayer for DreamMaker.">asyncDelayer</a>.</td></tr>
    <tr><td class="paramname">logger</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf" title="The ILogger for DreamMaker.">logger</a>.</td></tr>
    <tr><td class="paramname">sessionConfiguration</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b" title="The SessionConfiguration for DreamMaker.">sessionConfiguration</a>.</td></tr>
    <tr><td class="paramname">metadata</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6" title="The Instance DreamMaker belongs to.">metadata</a>.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00155">155</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  170</span>        {</div>
<div class="line"><span class="lineno">  171</span>            this.engineManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a>));</div>
<div class="line"><span class="lineno">  172</span>            this.ioManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>));</div>
<div class="line"><span class="lineno">  173</span>            this.configuration = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a>));</div>
<div class="line"><span class="lineno">  174</span>            this.sessionControllerFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a>));</div>
<div class="line"><span class="lineno">  175</span>            this.eventConsumer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>));</div>
<div class="line"><span class="lineno">  176</span>            this.chatManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a>));</div>
<div class="line"><span class="lineno">  177</span>            this.processExecutor = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a>));</div>
<div class="line"><span class="lineno">  178</span>            this.compileJobConsumer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a>));</div>
<div class="line"><span class="lineno">  179</span>            this.repositoryManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a>));</div>
<div class="line"><span class="lineno">  180</span>            this.asyncDelayer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a>));</div>
<div class="line"><span class="lineno">  181</span>            this.remoteDeploymentManagerFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a>));</div>
<div class="line"><span class="lineno">  182</span>            this.logger = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>));</div>
<div class="line"><span class="lineno">  183</span>            this.sessionConfiguration = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b">sessionConfiguration</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b">sessionConfiguration</a>));</div>
<div class="line"><span class="lineno">  184</span>            this.metadata = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>));</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">deploymentLock</a> = <span class="keyword">new</span> object();</div>
<div class="line"><span class="lineno">  187</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a0cfc680dd4fa5908a6ae164d14530f39"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">Tgstation.Server.Host.Components.Deployment.DreamMaker.repositoryManager</a></div><div class="ttdeci">readonly IRepositoryManager repositoryManager</div><div class="ttdoc">The IRepositoryManager for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00076">DreamMaker.cs:76</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a1d5a133d669af1e14db0104b67103ccf"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a></div><div class="ttdeci">readonly ILogger&lt; DreamMaker &gt; logger</div><div class="ttdoc">The ILogger for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00096">DreamMaker.cs:96</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a21a687a3355ff5f788593e33f8e7399b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b">Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionConfiguration</a></div><div class="ttdeci">readonly SessionConfiguration sessionConfiguration</div><div class="ttdoc">The SessionConfiguration for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00101">DreamMaker.cs:101</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a2fe7ecccab0b5b1be9fdda8cbf097d9b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">Tgstation.Server.Host.Components.Deployment.DreamMaker.configuration</a></div><div class="ttdeci">readonly StaticFiles.IConfiguration configuration</div><div class="ttdoc">The StaticFiles.IConfiguration for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00051">DreamMaker.cs:51</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a5f0da2a044d1b9df7e85492cb58c076c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">Tgstation.Server.Host.Components.Deployment.DreamMaker.ioManager</a></div><div class="ttdeci">readonly IIOManager ioManager</div><div class="ttdoc">The IIOManager for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00046">DreamMaker.cs:46</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a753ddaadb407331cf9d140c96fe5374b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">Tgstation.Server.Host.Components.Deployment.DreamMaker.remoteDeploymentManagerFactory</a></div><div class="ttdeci">readonly IRemoteDeploymentManagerFactory remoteDeploymentManagerFactory</div><div class="ttdoc">The IRemoteDeploymentManagerFactory for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00086">DreamMaker.cs:86</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a8322a848923985ee4e06d792dccb8643"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionControllerFactory</a></div><div class="ttdeci">readonly ISessionControllerFactory sessionControllerFactory</div><div class="ttdoc">The ISessionControllerFactory for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00056">DreamMaker.cs:56</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a8d40fb1d02610364e59b9feedb4e75d9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">Tgstation.Server.Host.Components.Deployment.DreamMaker.processExecutor</a></div><div class="ttdeci">readonly IProcessExecutor processExecutor</div><div class="ttdoc">The IProcessExecutor for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00071">DreamMaker.cs:71</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_aa71af19173e2a9edb56655c7eeb75968"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">Tgstation.Server.Host.Components.Deployment.DreamMaker.engineManager</a></div><div class="ttdeci">readonly IEngineManager engineManager</div><div class="ttdoc">The IEngineManager for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00041">DreamMaker.cs:41</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ab01d9cb0fcd270eea9ec47a4e0684f4a"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">Tgstation.Server.Host.Components.Deployment.DreamMaker.compileJobConsumer</a></div><div class="ttdeci">readonly ICompileJobSink compileJobConsumer</div><div class="ttdoc">The ICompileJobSink for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00081">DreamMaker.cs:81</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_abfcbd4e2f809faa445f7ea56fe4e5f0e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a></div><div class="ttdeci">readonly IEventConsumer eventConsumer</div><div class="ttdoc">The IEventConsumer for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00061">DreamMaker.cs:61</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ac5b667aa89c476c9cb0cf71cb5add8a6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</a></div><div class="ttdeci">readonly Api.Models.Instance metadata</div><div class="ttdoc">The Instance DreamMaker belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00106">DreamMaker.cs:106</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ad8f8e86f9e52a3f5e027b9570c5f32df"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">Tgstation.Server.Host.Components.Deployment.DreamMaker.chatManager</a></div><div class="ttdeci">readonly IChatManager chatManager</div><div class="ttdoc">The IChatManager for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00066">DreamMaker.cs:66</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ae7ed5b30d84ba3a1f88262ccd524f280"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploymentLock</a></div><div class="ttdeci">readonly object deploymentLock</div><div class="ttdoc">lock object for deploying.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00111">DreamMaker.cs:111</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_af28269cbf6ac69ab9cde83fe1f117fde"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">Tgstation.Server.Host.Components.Deployment.DreamMaker.asyncDelayer</a></div><div class="ttdeci">readonly IAsyncDelayer asyncDelayer</div><div class="ttdoc">The IAsyncDelayer for DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00091">DreamMaker.cs:91</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_dream_maker_8cs_source.html#l00091">Tgstation.Server.Host.Components.Deployment.DreamMaker.asyncDelayer</a>, <a class="el" href="_dream_maker_8cs_source.html#l00066">Tgstation.Server.Host.Components.Deployment.DreamMaker.chatManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00081">Tgstation.Server.Host.Components.Deployment.DreamMaker.compileJobConsumer</a>, <a class="el" href="_dream_maker_8cs_source.html#l00051">Tgstation.Server.Host.Components.Deployment.DreamMaker.configuration</a>, <a class="el" href="_dream_maker_8cs_source.html#l00111">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploymentLock</a>, <a class="el" href="_dream_maker_8cs_source.html#l00041">Tgstation.Server.Host.Components.Deployment.DreamMaker.engineManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00061">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a>, <a class="el" href="_dream_maker_8cs_source.html#l00046">Tgstation.Server.Host.Components.Deployment.DreamMaker.ioManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00096">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a>, <a class="el" href="_dream_maker_8cs_source.html#l00106">Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</a>, <a class="el" href="_dream_maker_8cs_source.html#l00071">Tgstation.Server.Host.Components.Deployment.DreamMaker.processExecutor</a>, <a class="el" href="_dream_maker_8cs_source.html#l00086">Tgstation.Server.Host.Components.Deployment.DreamMaker.remoteDeploymentManagerFactory</a>, <a class="el" href="_dream_maker_8cs_source.html#l00076">Tgstation.Server.Host.Components.Deployment.DreamMaker.repositoryManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00101">Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionConfiguration</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00056">Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionControllerFactory</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4d28d2170dd121e9e09135a02ec05b51" name="a4d28d2170dd121e9e09135a02ec05b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d28d2170dd121e9e09135a02ec05b51">&#9670;&#160;</a></span>CalculateExpectedDeploymentTime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; TimeSpan?&gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.CalculateExpectedDeploymentTime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td>
          <td class="paramname"><em>databaseContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the average length of a deployment using a given <em>databaseContext</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">databaseContext</td><td>The IDatabaseContext to retrieve previous deployment Jobs from.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the average TimeSpan of the 10 previous deployments or <code>null</code> if there are none.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00419">419</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>        {</div>
<div class="line"><span class="lineno">  421</span>            var previousCompileJobs = await databaseContext</div>
<div class="line"><span class="lineno">  422</span>                .<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#a9f93949abe42bddbbf9134946c7f5be5">CompileJobs</a></div>
<div class="line"><span class="lineno">  423</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  424</span>                .Where(x =&gt; x.Job.Instance!.Id == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  425</span>                .OrderByDescending(x =&gt; x.Job.StoppedAt)</div>
<div class="line"><span class="lineno">  426</span>                .Take(10)</div>
<div class="line"><span class="lineno">  427</span>                .Select(x =&gt; <span class="keyword">new</span></div>
<div class="line"><span class="lineno">  428</span>                {</div>
<div class="line"><span class="lineno">  429</span>                    StoppedAt = x.Job.StoppedAt!.Value,</div>
<div class="line"><span class="lineno">  430</span>                    StartedAt = x.Job.StartedAt!.Value,</div>
<div class="line"><span class="lineno">  431</span>                })</div>
<div class="line"><span class="lineno">  432</span>                .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>            TimeSpan? averageSpan = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  435</span>            <span class="keywordflow">if</span> (previousCompileJobs.Count != 0)</div>
<div class="line"><span class="lineno">  436</span>            {</div>
<div class="line"><span class="lineno">  437</span>                var totalSpan = TimeSpan.Zero;</div>
<div class="line"><span class="lineno">  438</span>                <span class="keywordflow">foreach</span> (var previousCompileJob <span class="keywordflow">in</span> previousCompileJobs)</div>
<div class="line"><span class="lineno">  439</span>                    totalSpan += previousCompileJob.StoppedAt - previousCompileJob.StartedAt;</div>
<div class="line"><span class="lineno">  440</span>                averageSpan = totalSpan / previousCompileJobs.Count;</div>
<div class="line"><span class="lineno">  441</span>            }</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>            <span class="keywordflow">return</span> averageSpan;</div>
<div class="line"><span class="lineno">  444</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_html_a9f93949abe42bddbbf9134946c7f5be5"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#a9f93949abe42bddbbf9134946c7f5be5">Tgstation.Server.Host.Database.IDatabaseContext.CompileJobs</a></div><div class="ttdeci">IDatabaseCollection&lt; CompileJob &gt; CompileJobs</div><div class="ttdoc">The CompileJobs in the IDatabaseContext.</div><div class="ttdef"><b>Definition:</b> <a href="_i_database_context_8cs_source.html#l00041">IDatabaseContext.cs:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_database_context_8cs_source.html#l00041">Tgstation.Server.Host.Database.IDatabaseContext.CompileJobs</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00106">Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a4d28d2170dd121e9e09135a02ec05b51_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a4d28d2170dd121e9e09135a02ec05b51_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a4d28d2170dd121e9e09135a02ec05b51_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a4d28d2170dd121e9e09135a02ec05b51_icgraph">
<area shape="rect" title="Calculate the average length of a deployment using a given databaseContext ." alt="" coords="1164,30,1441,85"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="a10266c7acfc715ffec0cb0189d39c6a4" name="a10266c7acfc715ffec0cb0189d39c6a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10266c7acfc715ffec0cb0189d39c6a4">&#9670;&#160;</a></span>CleanupFailedCompile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.CleanupFailedCompile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_exception.html">Exception</a>&#160;</td>
          <td class="paramname"><em>exception</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleans up a failed compile <em>job</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The running CompileJob.</td></tr>
    <tr><td class="paramname">remoteDeploymentManager</td><td>The IRemoteDeploymentManager associated with the <em>job</em> .</td></tr>
    <tr><td class="paramname">exception</td><td>The <a class="el" href="class_exception.html">Exception</a> that was thrown.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00966">966</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  967</span>        {</div>
<div class="line"><span class="lineno">  968</span>            async ValueTask CleanDir()</div>
<div class="line"><span class="lineno">  969</span>            {</div>
<div class="line"><span class="lineno">  970</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b">sessionConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html#af3cf4b1712e07bd81be256e7344fba88">DelayCleaningFailedDeployments</a>)</div>
<div class="line"><span class="lineno">  971</span>                {</div>
<div class="line"><span class="lineno">  972</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Not cleaning up errored deployment directory {guid} due to config.&quot;</span>, job.DirectoryName);</div>
<div class="line"><span class="lineno">  973</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  974</span>                }</div>
<div class="line"><span class="lineno">  975</span> </div>
<div class="line"><span class="lineno">  976</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Cleaning compile directory...&quot;</span>);</div>
<div class="line"><span class="lineno">  977</span>                var jobPath = job.DirectoryName!.Value.ToString();</div>
<div class="line"><span class="lineno">  978</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  979</span>                {</div>
<div class="line"><span class="lineno">  980</span>                    <span class="comment">// DCT: None available</span></div>
<div class="line"><span class="lineno">  981</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.DeploymentCleanup, <span class="keyword">new</span> List&lt;string&gt; { jobPath }, <span class="keyword">true</span>, CancellationToken.None);</div>
<div class="line"><span class="lineno">  982</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">DeleteDirectory</a>(jobPath, CancellationToken.None);</div>
<div class="line"><span class="lineno">  983</span>                }</div>
<div class="line"><span class="lineno">  984</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e)</div>
<div class="line"><span class="lineno">  985</span>                {</div>
<div class="line"><span class="lineno">  986</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogWarning(e, <span class="stringliteral">&quot;Error cleaning up compile directory {path}!&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(jobPath));</div>
<div class="line"><span class="lineno">  987</span>                }</div>
<div class="line"><span class="lineno">  988</span>            }</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>            var dirCleanTask = CleanDir();</div>
<div class="line"><span class="lineno">  991</span> </div>
<div class="line"><span class="lineno">  992</span>            var failRemoteDeployTask = remoteDeploymentManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044">FailDeployment</a>(</div>
<div class="line"><span class="lineno">  993</span>                job,</div>
<div class="line"><span class="lineno">  994</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">FormatExceptionForUsers</a>(exception),</div>
<div class="line"><span class="lineno">  995</span>                CancellationToken.None); <span class="comment">// DCT: None available</span></div>
<div class="line"><span class="lineno">  996</span> </div>
<div class="line"><span class="lineno">  997</span>            <span class="keywordflow">return</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(</div>
<div class="line"><span class="lineno">  998</span>                dirCleanTask,</div>
<div class="line"><span class="lineno">  999</span>                failRemoteDeployTask);</div>
<div class="line"><span class="lineno"> 1000</span>        }</div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">Tgstation.Server.Common.Extensions.ValueTaskExtensions</a></div><div class="ttdoc">Extension methods for the ValueTask and ValueTask&lt;TResult&gt; classes.</div><div class="ttdef"><b>Definition:</b> <a href="_value_task_extensions_8cs_source.html#l00011">ValueTaskExtensions.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html_a58adbd94d764754bd3e6c566a5fe7fe3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll</a></div><div class="ttdeci">static async ValueTask WhenAll(IEnumerable&lt; ValueTask &gt; tasks)</div><div class="ttdoc">Fully await a given list of tasks .</div><div class="ttdef"><b>Definition:</b> <a href="_value_task_extensions_8cs_source.html#l00099">ValueTaskExtensions.cs:99</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a8cdce0ecb73a635564b1eafc0fc0372f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">Tgstation.Server.Host.Components.Deployment.DreamMaker.FormatExceptionForUsers</a></div><div class="ttdeci">static string FormatExceptionForUsers(Exception exception)</div><div class="ttdoc">Format a given Exception for display to users.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration_html_af3cf4b1712e07bd81be256e7344fba88"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html#af3cf4b1712e07bd81be256e7344fba88">Tgstation.Server.Host.Configuration.SessionConfiguration.DelayCleaningFailedDeployments</a></div><div class="ttdeci">bool DelayCleaningFailedDeployments</div><div class="ttdoc">If true, deployments that fail will not be immediately cleaned up. They will be cleaned up the next t...</div><div class="ttdef"><b>Definition:</b> <a href="_session_configuration_8cs_source.html#l00031">SessionConfiguration.cs:31</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html_a8708c84547cd4960182ff067c36bc044"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.FailDeployment</a></div><div class="ttdeci">ValueTask FailDeployment(CompileJob compileJob, string errorMessage, CancellationToken cancellationToken)</div><div class="ttdoc">Fail a deployment for a given compileJob .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer_html_a564f82eb43566dabd77e37191b4e3d37"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent</a></div><div class="ttdeci">ValueTask HandleEvent(EventType eventType, IEnumerable&lt; string?&gt; parameters, bool deploymentPipeline, CancellationToken cancellationToken)</div><div class="ttdoc">Handle a given eventType .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a18a442b5dff16f5e7a730ec354e81d78"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath</a></div><div class="ttdeci">string ResolvePath()</div><div class="ttdoc">Retrieve the full path of the current working directory.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad3e0dda4b7fbad4c77f48ba3b2681dc7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">Tgstation.Server.Host.IO.IIOManager.DeleteDirectory</a></div><div class="ttdeci">Task DeleteDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Recursively delete a directory, removes and does not enter any symlinks encounterd.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_html_ac30c818717e92c8fb65f389adec739b7"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">Tgstation.Server.Host.Components.Events.EventType</a></div><div class="ttdeci">EventType</div><div class="ttdoc">Types of events. Mirror in tgs.dm. Prefer last listed name for script.</div><div class="ttdef"><b>Definition:</b> <a href="_event_type_8cs_source.html#l00006">EventType.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.FailDeployment()</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_cgraph">
<area shape="rect" title="Cleans up a failed compile job ." alt="" coords="5,45,257,100"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044" title="Fail a deployment for a given compileJob ." alt="" coords="305,5,564,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="327,84,543,139"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a10266c7acfc715ffec0cb0189d39c6a4_icgraph">
<area shape="rect" title="Cleans up a failed compile job ." alt="" coords="1164,30,1416,85"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="ad489ef5c91d097ff3366d5bc63d8277e" name="ad489ef5c91d097ff3366d5bc63d8277e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad489ef5c91d097ff3366d5bc63d8277e">&#9670;&#160;</a></span>Compile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> &gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Models.Job</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">Models.RevisionInformation</a>&#160;</td>
          <td class="paramname"><em>revisionInformation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html">Api.Models.Internal.DreamMakerSettings</a>&#160;</td>
          <td class="paramname"><em>dreamMakerSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>launchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a>&#160;</td>
          <td class="paramname"><em>repository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TimeSpan?&#160;</td>
          <td class="paramname"><em>estimatedDuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>localCommitExistsOnRemote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the compile implementation.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The currently running Job.</td></tr>
    <tr><td class="paramname">revisionInformation</td><td>The RevisionInformation.</td></tr>
    <tr><td class="paramname">dreamMakerSettings</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html" title="Represents the state of the DreamMaker compiler. Create action starts a new compile....">Api.Models.Internal.DreamMakerSettings</a>.</td></tr>
    <tr><td class="paramname">launchParameters</td><td>The DreamDaemonLaunchParameters.</td></tr>
    <tr><td class="paramname">repository</td><td>The IRepository.</td></tr>
    <tr><td class="paramname">remoteDeploymentManager</td><td>The IRemoteDeploymentManager.</td></tr>
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter to report progress of the operation.</td></tr>
    <tr><td class="paramname">estimatedDuration</td><td>The optional estimated TimeSpan of the compilation.</td></tr>
    <tr><td class="paramname">localCommitExistsOnRemote</td><td>Whether or not the <em>repository</em> 's current commit exists on the remote repository.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the completed CompileJob.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00460">460</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  471</span>        {</div>
<div class="line"><span class="lineno">  472</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Begin Compile&quot;</span>);</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>            <span class="keyword">using </span>var progressCts = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken);</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>            progressReporter.StageName = <span class="stringliteral">&quot;Reserving BYOND version&quot;</span>;</div>
<div class="line"><span class="lineno">  477</span>            var progressTask = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278">ProgressTask</a>(progressReporter, estimatedDuration, progressCts.Token);</div>
<div class="line"><span class="lineno">  478</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  479</span>            {</div>
<div class="line"><span class="lineno">  480</span>                <span class="keyword">using </span>var engineLock = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#aa71af19173e2a9edb56655c7eeb75968">engineManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66">UseExecutables</a>(<span class="keyword">null</span>, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  481</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad8f8e86f9e52a3f5e027b9570c5f32df">chatManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#aa2527a9fe8d1392b909018d6ed745fed">QueueDeploymentMessage</a>(</div>
<div class="line"><span class="lineno">  482</span>                    revisionInformation,</div>
<div class="line"><span class="lineno">  483</span>                    engineLock.Version,</div>
<div class="line"><span class="lineno">  484</span>                    DateTimeOffset.UtcNow + estimatedDuration,</div>
<div class="line"><span class="lineno">  485</span>                    repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a337342e3a22ef245c1744c32ef313ec0">RemoteRepositoryOwner</a>,</div>
<div class="line"><span class="lineno">  486</span>                    repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a16b1a16989886b7fe3beab0a46b83a4b">RemoteRepositoryName</a>,</div>
<div class="line"><span class="lineno">  487</span>                    localCommitExistsOnRemote);</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>                var compileJob = <span class="keyword">new</span> Models.CompileJob(job, revisionInformation, engineLock.Version.ToString())</div>
<div class="line"><span class="lineno">  490</span>                {</div>
<div class="line"><span class="lineno">  491</span>                    DirectoryName = Guid.NewGuid(),</div>
<div class="line"><span class="lineno">  492</span>                    DmeName = dreamMakerSettings.ProjectName,</div>
<div class="line"><span class="lineno">  493</span>                    RepositoryOrigin = repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#ae8ac73c5a625a5c20ee4b25dcb3b04ba">Origin</a>.ToString(),</div>
<div class="line"><span class="lineno">  494</span>                };</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>                progressReporter.StageName = <span class="stringliteral">&quot;Creating remote deployment notification&quot;</span>;</div>
<div class="line"><span class="lineno">  497</span>                await remoteDeploymentManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3">StartDeployment</a>(</div>
<div class="line"><span class="lineno">  498</span>                    repository,</div>
<div class="line"><span class="lineno">  499</span>                    compileJob,</div>
<div class="line"><span class="lineno">  500</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Deployment will timeout at {timeoutTime}&quot;</span>, DateTimeOffset.UtcNow + dreamMakerSettings.Timeout!.Value);</div>
<div class="line"><span class="lineno">  503</span>                <span class="keyword">using </span>var timeoutTokenSource = <span class="keyword">new</span> CancellationTokenSource(dreamMakerSettings.Timeout.Value);</div>
<div class="line"><span class="lineno">  504</span>                var timeoutToken = timeoutTokenSource.Token;</div>
<div class="line"><span class="lineno">  505</span>                <span class="keyword">using</span> (timeoutToken.Register(() =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogWarning(<span class="stringliteral">&quot;Deployment timed out!&quot;</span>)))</div>
<div class="line"><span class="lineno">  506</span>                {</div>
<div class="line"><span class="lineno">  507</span>                    <span class="keyword">using </span>var combinedTokenSource = CancellationTokenSource.CreateLinkedTokenSource(timeoutToken, cancellationToken);</div>
<div class="line"><span class="lineno">  508</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  509</span>                    {</div>
<div class="line"><span class="lineno">  510</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c">RunCompileJob</a>(</div>
<div class="line"><span class="lineno">  511</span>                            progressReporter,</div>
<div class="line"><span class="lineno">  512</span>                            compileJob,</div>
<div class="line"><span class="lineno">  513</span>                            dreamMakerSettings,</div>
<div class="line"><span class="lineno">  514</span>                            launchParameters,</div>
<div class="line"><span class="lineno">  515</span>                            engineLock,</div>
<div class="line"><span class="lineno">  516</span>                            repository,</div>
<div class="line"><span class="lineno">  517</span>                            remoteDeploymentManager,</div>
<div class="line"><span class="lineno">  518</span>                            combinedTokenSource.Token);</div>
<div class="line"><span class="lineno">  519</span>                    }</div>
<div class="line"><span class="lineno">  520</span>                    <span class="keywordflow">catch</span> (OperationCanceledException) when (timeoutToken.IsCancellationRequested)</div>
<div class="line"><span class="lineno">  521</span>                    {</div>
<div class="line"><span class="lineno">  522</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentTimeout);</div>
<div class="line"><span class="lineno">  523</span>                    }</div>
<div class="line"><span class="lineno">  524</span>                }</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>                <span class="keywordflow">return</span> compileJob;</div>
<div class="line"><span class="lineno">  527</span>            }</div>
<div class="line"><span class="lineno">  528</span>            <span class="keywordflow">catch</span> (OperationCanceledException)</div>
<div class="line"><span class="lineno">  529</span>            {</div>
<div class="line"><span class="lineno">  530</span>                <span class="comment">// DCT: Cancellation token is for job, delaying here is fine</span></div>
<div class="line"><span class="lineno">  531</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running CompileCancelled event&quot;</span>;</div>
<div class="line"><span class="lineno">  532</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.CompileCancelled, Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(), <span class="keyword">true</span>, CancellationToken.None);</div>
<div class="line"><span class="lineno">  533</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  534</span>            }</div>
<div class="line"><span class="lineno">  535</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  536</span>            {</div>
<div class="line"><span class="lineno">  537</span>                progressCts.Cancel();</div>
<div class="line"><span class="lineno">  538</span>                await progressTask;</div>
<div class="line"><span class="lineno">  539</span>            }</div>
<div class="line"><span class="lineno">  540</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a0585a8e7178f4b9fd4e82bba4e0aba96"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentChatCallback</a></div><div class="ttdeci">Func&lt; string?, string, Action&lt; bool &gt; &gt;? currentChatCallback</div><div class="ttdoc">The active callback from IChatManager.QueueDeploymentMessage.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00116">DreamMaker.cs:116</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a143fbc68ad876ca7e7ce4145d97d9278"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278">Tgstation.Server.Host.Components.Deployment.DreamMaker.ProgressTask</a></div><div class="ttdeci">async ValueTask ProgressTask(JobProgressReporter progressReporter, TimeSpan? estimatedDuration, CancellationToken cancellationToken)</div><div class="ttdoc">Gradually triggers a given progressReporter  over a given estimatedDuration .</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00713">DreamMaker.cs:713</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a2394e942cf255412fe358bef742b580c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob</a></div><div class="ttdeci">async ValueTask RunCompileJob(JobProgressReporter progressReporter, Models.CompileJob job, Api.Models.Internal.DreamMakerSettings dreamMakerSettings, DreamDaemonLaunchParameters launchParameters, IEngineExecutableLock engineLock, IRepository repository, IRemoteDeploymentManager remoteDeploymentManager, CancellationToken cancellationToken)</div><div class="ttdoc">Executes and populate a given job .</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00554">DreamMaker.cs:554</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">Tgstation.Server.Host.Jobs.JobException</a></div><div class="ttdoc">Operation exceptions thrown from the context of a Models.Job.</div><div class="ttdef"><b>Definition:</b> <a href="_job_exception_8cs_source.html#l00010">JobException.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information_html_a16b1a16989886b7fe3beab0a46b83a4b"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a16b1a16989886b7fe3beab0a46b83a4b">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryName</a></div><div class="ttdeci">string? RemoteRepositoryName</div><div class="ttdoc">If RemoteGitProvider is not RemoteGitProvider.Unknown this will be set with the name of the repositor...</div><div class="ttdef"><b>Definition:</b> <a href="_i_git_remote_information_8cs_source.html#l00021">IGitRemoteInformation.cs:21</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information_html_a337342e3a22ef245c1744c32ef313ec0"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a337342e3a22ef245c1744c32ef313ec0">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryOwner</a></div><div class="ttdeci">string? RemoteRepositoryOwner</div><div class="ttdoc">If RemoteGitProvider is not RemoteGitProvider.Unknown this will be set with the owner of the reposito...</div><div class="ttdef"><b>Definition:</b> <a href="_i_git_remote_information_8cs_source.html#l00016">IGitRemoteInformation.cs:16</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_aa2527a9fe8d1392b909018d6ed745fed"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#aa2527a9fe8d1392b909018d6ed745fed">Tgstation.Server.Host.Components.Chat.IChatManager.QueueDeploymentMessage</a></div><div class="ttdeci">Func&lt; string?, string, Action&lt; bool &gt; &gt; QueueDeploymentMessage(Models.RevisionInformation revisionInformation, Api.Models.EngineVersion engineVersion, DateTimeOffset? estimatedCompletionTime, string? gitHubOwner, string? gitHubRepo, bool localCommitPushed)</div><div class="ttdoc">Send the message for a deployment to configured deployment channels.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html_a8029ccdc07f945286c14972dfd4ae3a3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.StartDeployment</a></div><div class="ttdeci">ValueTask StartDeployment(Api.Models.Internal.IGitRemoteInformation remoteInformation, CompileJob compileJob, CancellationToken cancellationToken)</div><div class="ttdoc">Start a deployment for a given compileJob .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager_html_ac21fb8c8df8b40c14944282d86c32a66"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66">Tgstation.Server.Host.Components.Engine.IEngineManager.UseExecutables</a></div><div class="ttdeci">ValueTask&lt; IEngineExecutableLock &gt; UseExecutables(EngineVersion? requiredVersion, string? trustDmbFullPath, CancellationToken cancellationToken)</div><div class="ttdoc">Lock the current installation's location and return a IEngineExecutableLock.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_ae8ac73c5a625a5c20ee4b25dcb3b04ba"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#ae8ac73c5a625a5c20ee4b25dcb3b04ba">Tgstation.Server.Host.Components.Repository.IRepository.Origin</a></div><div class="ttdeci">Uri Origin</div><div class="ttdoc">The current origin remote the IRepository is using.</div><div class="ttdef"><b>Definition:</b> <a href="_i_repository_8cs_source.html#l00033">IRepository.cs:33</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a1a6adb59dd51244efabf4e548e7075c8"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">Tgstation.Server.Api.Models.ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Types of Response.ErrorMessageResponses that the API may return.</div><div class="ttdef"><b>Definition:</b> <a href="_error_code_8cs_source.html#l00011">ErrorCode.cs:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_dream_maker_8cs_source.html#l00066">Tgstation.Server.Host.Components.Deployment.DreamMaker.chatManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00116">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentChatCallback</a>, <a class="el" href="_dream_maker_8cs_source.html#l00041">Tgstation.Server.Host.Components.Deployment.DreamMaker.engineManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00061">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00096">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a>, <a class="el" href="_i_repository_8cs_source.html#l00033">Tgstation.Server.Host.Components.Repository.IRepository.Origin</a>, <a class="el" href="_dream_maker_8cs_source.html#l00713">Tgstation.Server.Host.Components.Deployment.DreamMaker.ProgressTask()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#aa2527a9fe8d1392b909018d6ed745fed">Tgstation.Server.Host.Components.Chat.IChatManager.QueueDeploymentMessage()</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00021">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryName</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00016">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryOwner</a>, <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.StartDeployment()</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66">Tgstation.Server.Host.Components.Engine.IEngineManager.UseExecutables()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_ad489ef5c91d097ff3366d5bc63d8277e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_ad489ef5c91d097ff3366d5bc63d8277e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_ad489ef5c91d097ff3366d5bc63d8277e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_ad489ef5c91d097ff3366d5bc63d8277e_cgraph">
<area shape="rect" title="Run the compile implementation." alt="" coords="5,317,232,357"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="637,69,875,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278" title="Gradually triggers a given progressReporter &#160;over a given estimatedDuration ." alt="" coords="302,49,553,89"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#aa2527a9fe8d1392b909018d6ed745fed" title="Send the message for a deployment to configured deployment channels." alt="" coords="280,285,575,325"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="297,349,558,389"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3" title="Start a deployment for a given compileJob ." alt="" coords="298,414,557,469"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66" title="Lock the current installation&#39;s location and return a IEngineExecutableLock." alt="" coords="300,493,555,533"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1" title="Report progress." alt="" coords="637,5,875,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="672,285,840,325"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e" title="Copies the current working directory to a given path ." alt="" coords="643,349,869,389"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62" title="Check that the file at path &#160;exists." alt="" coords="672,413,840,453"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5" title="Gets a list of files in path &#160;with the given extension ." alt="" coords="644,477,868,517"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b" title="Adds server side includes to the .dme being compiled." alt="" coords="639,541,873,581"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994" title="Check if a given parentPath &#160;is a parent of a given parentPath ." alt="" coords="669,605,843,645"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="672,669,840,709"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6" title="Compiles a .dme with DreamMaker." alt="" coords="623,733,889,773"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2" title=" " alt="" coords="663,157,849,197"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8e48d885b68d66ad74f17d0d192e86c0" title="Run a quick DD instance to test the DMAPI is installed on the target code." alt="" coords="643,221,869,261"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668" title="Return the command line arguments for compiling a given dmePath &#160;if compilation is necessary." alt="" coords="937,690,1203,745"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8" title="Loads the environment settings for either the server or compiler." alt="" coords="957,769,1183,809"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_ad489ef5c91d097ff3366d5bc63d8277e_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_ad489ef5c91d097ff3366d5bc63d8277e_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_ad489ef5c91d097ff3366d5bc63d8277e_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_ad489ef5c91d097ff3366d5bc63d8277e_icgraph">
<area shape="rect" title="Run the compile implementation." alt="" coords="1164,37,1391,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="a38ea1632011a37a072e9d1c9e3d04c13" name="a38ea1632011a37a072e9d1c9e3d04c13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38ea1632011a37a072e9d1c9e3d04c13">&#9670;&#160;</a></span>DeploymentProcess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Models.Job</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a>&#160;</td>
          <td class="paramname"><em>databaseContextFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00191">191</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  196</span>        {</div>
<div class="line"><span class="lineno">  197</span>            ArgumentNullException.ThrowIfNull(job);</div>
<div class="line"><span class="lineno">  198</span>            ArgumentNullException.ThrowIfNull(databaseContextFactory);</div>
<div class="line"><span class="lineno">  199</span>            ArgumentNullException.ThrowIfNull(progressReporter);</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ae7ed5b30d84ba3a1f88262ccd524f280">deploymentLock</a>)</div>
<div class="line"><span class="lineno">  202</span>            {</div>
<div class="line"><span class="lineno">  203</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">deploying</a>)</div>
<div class="line"><span class="lineno">  204</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentInProgress);</div>
<div class="line"><span class="lineno">  205</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">deploying</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  206</span>            }</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  209</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">currentDreamMakerOutput</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  210</span>            Models.CompileJob? compileJob = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  211</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  212</span>            {</div>
<div class="line"><span class="lineno">  213</span>                <span class="keywordtype">string</span>? repoOwner = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  214</span>                <span class="keywordtype">string</span>? repoName = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  215</span>                TimeSpan? averageSpan = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  216</span>                Models.RepositorySettings? repositorySettings = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  217</span>                Models.DreamDaemonSettings? ddSettings = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  218</span>                Models.DreamMakerSettings? dreamMakerSettings = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  219</span>                <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a>? repo = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  220</span>                <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a>? remoteDeploymentManager = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  221</span>                Models.RevisionInformation? revInfo = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  222</span>                await databaseContextFactory.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(</div>
<div class="line"><span class="lineno">  223</span>                    async databaseContext =&gt;</div>
<div class="line"><span class="lineno">  224</span>                    {</div>
<div class="line"><span class="lineno">  225</span>                        averageSpan = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51">CalculateExpectedDeploymentTime</a>(databaseContext, cancellationToken);</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>                        ddSettings = await databaseContext</div>
<div class="line"><span class="lineno">  228</span>                            .DreamDaemonSettings</div>
<div class="line"><span class="lineno">  229</span>                            .AsQueryable()</div>
<div class="line"><span class="lineno">  230</span>                            .Where(x =&gt; x.InstanceId == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  231</span>                            .Select(x =&gt; <span class="keyword">new</span> Models.DreamDaemonSettings</div>
<div class="line"><span class="lineno">  232</span>                            {</div>
<div class="line"><span class="lineno">  233</span>                                StartupTimeout = x.StartupTimeout,</div>
<div class="line"><span class="lineno">  234</span>                                LogOutput = x.LogOutput,</div>
<div class="line"><span class="lineno">  235</span>                            })</div>
<div class="line"><span class="lineno">  236</span>                            .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  237</span>                        <span class="keywordflow">if</span> (ddSettings == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  238</span>                            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceMissingDreamDaemonSettings);</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>                        dreamMakerSettings = await databaseContext</div>
<div class="line"><span class="lineno">  241</span>                            .DreamMakerSettings</div>
<div class="line"><span class="lineno">  242</span>                            .AsQueryable()</div>
<div class="line"><span class="lineno">  243</span>                            .Where(x =&gt; x.InstanceId == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  244</span>                            .FirstAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  245</span>                        <span class="keywordflow">if</span> (dreamMakerSettings == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  246</span>                            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceMissingDreamMakerSettings);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>                        repositorySettings = await databaseContext</div>
<div class="line"><span class="lineno">  249</span>                            .RepositorySettings</div>
<div class="line"><span class="lineno">  250</span>                            .AsQueryable()</div>
<div class="line"><span class="lineno">  251</span>                            .Where(x =&gt; x.InstanceId == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  252</span>                            .Select(x =&gt; <span class="keyword">new</span> Models.RepositorySettings</div>
<div class="line"><span class="lineno">  253</span>                            {</div>
<div class="line"><span class="lineno">  254</span>                                AccessToken = x.AccessToken,</div>
<div class="line"><span class="lineno">  255</span>                                AccessUser = x.AccessUser,</div>
<div class="line"><span class="lineno">  256</span>                                ShowTestMergeCommitters = x.ShowTestMergeCommitters,</div>
<div class="line"><span class="lineno">  257</span>                                PushTestMergeCommits = x.PushTestMergeCommits,</div>
<div class="line"><span class="lineno">  258</span>                                PostTestMergeComment = x.PostTestMergeComment,</div>
<div class="line"><span class="lineno">  259</span>                            })</div>
<div class="line"><span class="lineno">  260</span>                            .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  261</span>                        <span class="keywordflow">if</span> (repositorySettings == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  262</span>                            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceMissingRepositorySettings);</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>                        repo = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0cfc680dd4fa5908a6ae164d14530f39">repositoryManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html#a5e58009c7d92a55634a7ddd80ca60b1b">LoadRepository</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  265</span>                        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  266</span>                        {</div>
<div class="line"><span class="lineno">  267</span>                            <span class="keywordflow">if</span> (repo == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  268</span>                                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.RepoMissing);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>                            remoteDeploymentManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a753ddaadb407331cf9d140c96fe5374b">remoteDeploymentManagerFactory</a></div>
<div class="line"><span class="lineno">  271</span>                                .<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">CreateRemoteDeploymentManager</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>, repo.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a32fb980a5c8ad960b2674e62a06f8724">RemoteGitProvider</a>!.Value);</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>                            var repoSha = repo.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#aaf4a631e6d2aa45a1b6887152f1d13f0">Head</a>;</div>
<div class="line"><span class="lineno">  274</span>                            repoOwner = repo.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a337342e3a22ef245c1744c32ef313ec0">RemoteRepositoryOwner</a>;</div>
<div class="line"><span class="lineno">  275</span>                            repoName = repo.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a16b1a16989886b7fe3beab0a46b83a4b">RemoteRepositoryName</a>;</div>
<div class="line"><span class="lineno">  276</span>                            revInfo = await databaseContext</div>
<div class="line"><span class="lineno">  277</span>                                .RevisionInformations</div>
<div class="line"><span class="lineno">  278</span>                                .AsQueryable()</div>
<div class="line"><span class="lineno">  279</span>                                .Where(x =&gt; x.CommitSha == repoSha &amp;&amp; x.InstanceId == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id)</div>
<div class="line"><span class="lineno">  280</span>                                .Include(x =&gt; x.ActiveTestMerges!)</div>
<div class="line"><span class="lineno">  281</span>                                    .ThenInclude(x =&gt; x.TestMerge!)</div>
<div class="line"><span class="lineno">  282</span>                                        .ThenInclude(x =&gt; x.MergedBy)</div>
<div class="line"><span class="lineno">  283</span>                                .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>                            <span class="keywordflow">if</span> (revInfo == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  286</span>                            {</div>
<div class="line"><span class="lineno">  287</span>                                revInfo = <span class="keyword">new</span> Models.RevisionInformation</div>
<div class="line"><span class="lineno">  288</span>                                {</div>
<div class="line"><span class="lineno">  289</span>                                    CommitSha = repoSha,</div>
<div class="line"><span class="lineno">  290</span>                                    Timestamp = await repo.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a242e53e0f353e3ca1597acec0441c05a">TimestampCommit</a>(repoSha, cancellationToken),</div>
<div class="line"><span class="lineno">  291</span>                                    OriginCommitSha = repoSha,</div>
<div class="line"><span class="lineno">  292</span>                                    <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Instance</a> = <span class="keyword">new</span> Models.Instance</div>
<div class="line"><span class="lineno">  293</span>                                    {</div>
<div class="line"><span class="lineno">  294</span>                                        Id = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ac5b667aa89c476c9cb0cf71cb5add8a6">metadata</a>.Id,</div>
<div class="line"><span class="lineno">  295</span>                                    },</div>
<div class="line"><span class="lineno">  296</span>                                    ActiveTestMerges = <span class="keyword">new</span> List&lt;RevInfoTestMerge&gt;(),</div>
<div class="line"><span class="lineno">  297</span>                                };</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span>                                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogInformation(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html">Repository</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html#ade7f7da8e9b448bd2a9b1b7eb0ecbe75">Repository</a>.OriginTrackingErrorTemplate, repoSha);</div>
<div class="line"><span class="lineno">  300</span>                                databaseContext.RevisionInformations.Add(revInfo);</div>
<div class="line"><span class="lineno">  301</span>                                databaseContext.Instances.Attach(revInfo.Instance);</div>
<div class="line"><span class="lineno">  302</span>                                await databaseContext.Save(cancellationToken);</div>
<div class="line"><span class="lineno">  303</span>                            }</div>
<div class="line"><span class="lineno">  304</span>                        }</div>
<div class="line"><span class="lineno">  305</span>                        <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  306</span>                        {</div>
<div class="line"><span class="lineno">  307</span>                            repo?.Dispose();</div>
<div class="line"><span class="lineno">  308</span>                            <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  309</span>                        }</div>
<div class="line"><span class="lineno">  310</span>                    });</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>                var likelyPushedTestMergeCommit =</div>
<div class="line"><span class="lineno">  313</span>                    repositorySettings!.PushTestMergeCommits!.Value</div>
<div class="line"><span class="lineno">  314</span>                    &amp;&amp; repositorySettings.AccessToken != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  315</span>                    &amp;&amp; repositorySettings.AccessUser != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  316</span>                <span class="keyword">using</span> (repo)</div>
<div class="line"><span class="lineno">  317</span>                    compileJob = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e">Compile</a>(</div>
<div class="line"><span class="lineno">  318</span>                        job,</div>
<div class="line"><span class="lineno">  319</span>                        revInfo!,</div>
<div class="line"><span class="lineno">  320</span>                        dreamMakerSettings!,</div>
<div class="line"><span class="lineno">  321</span>                        ddSettings!,</div>
<div class="line"><span class="lineno">  322</span>                        repo!,</div>
<div class="line"><span class="lineno">  323</span>                        remoteDeploymentManager!,</div>
<div class="line"><span class="lineno">  324</span>                        progressReporter,</div>
<div class="line"><span class="lineno">  325</span>                        averageSpan,</div>
<div class="line"><span class="lineno">  326</span>                        likelyPushedTestMergeCommit,</div>
<div class="line"><span class="lineno">  327</span>                        cancellationToken);</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>                var activeCompileJob = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html#aaaa6e44e65fa8c56c8d163976fbbc14e">LatestCompileJob</a>();</div>
<div class="line"><span class="lineno">  330</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  331</span>                {</div>
<div class="line"><span class="lineno">  332</span>                    await databaseContextFactory.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(</div>
<div class="line"><span class="lineno">  333</span>                        async databaseContext =&gt;</div>
<div class="line"><span class="lineno">  334</span>                        {</div>
<div class="line"><span class="lineno">  335</span>                            var fullJob = compileJob.Job;</div>
<div class="line"><span class="lineno">  336</span>                            compileJob.Job = <span class="keyword">new</span> Models.Job(job.Require(x =&gt; x.Id));</div>
<div class="line"><span class="lineno">  337</span>                            var fullRevInfo = compileJob.RevisionInformation;</div>
<div class="line"><span class="lineno">  338</span>                            compileJob.RevisionInformation = <span class="keyword">new</span> Models.RevisionInformation</div>
<div class="line"><span class="lineno">  339</span>                            {</div>
<div class="line"><span class="lineno">  340</span>                                Id = revInfo!.Id,</div>
<div class="line"><span class="lineno">  341</span>                            };</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>                            databaseContext.Jobs.Attach(compileJob.Job);</div>
<div class="line"><span class="lineno">  344</span>                            databaseContext.RevisionInformations.Attach(compileJob.RevisionInformation);</div>
<div class="line"><span class="lineno">  345</span>                            databaseContext.CompileJobs.Add(compileJob);</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>                            <span class="comment">// The difficulty with compile jobs is they have a two part commit</span></div>
<div class="line"><span class="lineno">  348</span>                            await databaseContext.Save(cancellationToken);</div>
<div class="line"><span class="lineno">  349</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Created CompileJob {compileJobId}&quot;</span>, compileJob.Id);</div>
<div class="line"><span class="lineno">  350</span>                            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  351</span>                            {</div>
<div class="line"><span class="lineno">  352</span>                                var chatNotificationAction = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a>!(<span class="keyword">null</span>, compileJob.Output!);</div>
<div class="line"><span class="lineno">  353</span>                                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ab01d9cb0fcd270eea9ec47a4e0684f4a">compileJobConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html#a8de753bacca634eab0b0c7f506472a97">LoadCompileJob</a>(compileJob, chatNotificationAction, cancellationToken);</div>
<div class="line"><span class="lineno">  354</span>                            }</div>
<div class="line"><span class="lineno">  355</span>                            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  356</span>                            {</div>
<div class="line"><span class="lineno">  357</span>                                <span class="comment">// So we need to un-commit the compile job if the above throws</span></div>
<div class="line"><span class="lineno">  358</span>                                databaseContext.CompileJobs.Remove(compileJob);</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>                                <span class="comment">// DCT: Cancellation token is for job, operation must run regardless</span></div>
<div class="line"><span class="lineno">  361</span>                                await databaseContext.Save(CancellationToken.None);</div>
<div class="line"><span class="lineno">  362</span>                                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  363</span>                            }</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>                            compileJob.Job = fullJob;</div>
<div class="line"><span class="lineno">  366</span>                            compileJob.RevisionInformation = fullRevInfo;</div>
<div class="line"><span class="lineno">  367</span>                        });</div>
<div class="line"><span class="lineno">  368</span>                }</div>
<div class="line"><span class="lineno">  369</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  370</span>                {</div>
<div class="line"><span class="lineno">  371</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">CleanupFailedCompile</a>(compileJob, remoteDeploymentManager!, ex);</div>
<div class="line"><span class="lineno">  372</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  373</span>                }</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>                var commentsTask = remoteDeploymentManager!.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a647f962a385f1ea126bb9c2a842fd4eb">PostDeploymentComments</a>(</div>
<div class="line"><span class="lineno">  376</span>                    compileJob,</div>
<div class="line"><span class="lineno">  377</span>                    activeCompileJob?.<a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_revision_information.html">RevisionInformation</a>,</div>
<div class="line"><span class="lineno">  378</span>                    repositorySettings,</div>
<div class="line"><span class="lineno">  379</span>                    repoOwner,</div>
<div class="line"><span class="lineno">  380</span>                    repoName,</div>
<div class="line"><span class="lineno">  381</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>                var eventTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.DeploymentComplete, Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(), <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  386</span>                {</div>
<div class="line"><span class="lineno">  387</span>                    await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(commentsTask, eventTask);</div>
<div class="line"><span class="lineno">  388</span>                }</div>
<div class="line"><span class="lineno">  389</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  390</span>                {</div>
<div class="line"><span class="lineno">  391</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.PostDeployFailure, ex);</div>
<div class="line"><span class="lineno">  392</span>                }</div>
<div class="line"><span class="lineno">  393</span>                <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  394</span>                {</div>
<div class="line"><span class="lineno">  395</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  396</span>                }</div>
<div class="line"><span class="lineno">  397</span>            }</div>
<div class="line"><span class="lineno">  398</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  399</span>            {</div>
<div class="line"><span class="lineno">  400</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96">currentChatCallback</a>?.Invoke(</div>
<div class="line"><span class="lineno">  401</span>                    <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">FormatExceptionForUsers</a>(ex),</div>
<div class="line"><span class="lineno">  402</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">currentDreamMakerOutput</a>!);</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  405</span>            }</div>
<div class="line"><span class="lineno">  406</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  407</span>            {</div>
<div class="line"><span class="lineno">  408</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">deploying</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  409</span>            }</div>
<div class="line"><span class="lineno">  410</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Tgstation.Server.Api.Models.Instance</a></div><div class="ttdoc">Metadata about a server instance.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00008">Instance.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_revision_information_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_revision_information.html">Tgstation.Server.Api.Models.Internal.RevisionInformation</a></div><div class="ttdoc">Represents information about a current git revison.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_internal_2_revision_information_8cs_source.html#l00009">RevisionInformation.cs:10</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a10266c7acfc715ffec0cb0189d39c6a4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">Tgstation.Server.Host.Components.Deployment.DreamMaker.CleanupFailedCompile</a></div><div class="ttdeci">ValueTask CleanupFailedCompile(Models.CompileJob job, IRemoteDeploymentManager remoteDeploymentManager, Exception exception)</div><div class="ttdoc">Cleans up a failed compile job .</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00966">DreamMaker.cs:966</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a3f7e6c6cababdc46b11bfab6e53ab9a5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentDreamMakerOutput</a></div><div class="ttdeci">string? currentDreamMakerOutput</div><div class="ttdoc">Cached for currentChatCallback.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00121">DreamMaker.cs:121</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a4d28d2170dd121e9e09135a02ec05b51"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51">Tgstation.Server.Host.Components.Deployment.DreamMaker.CalculateExpectedDeploymentTime</a></div><div class="ttdeci">async ValueTask&lt; TimeSpan?&gt; CalculateExpectedDeploymentTime(IDatabaseContext databaseContext, CancellationToken cancellationToken)</div><div class="ttdoc">Calculate the average length of a deployment using a given databaseContext .</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00419">DreamMaker.cs:419</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a95745246c0a960bdec751c0e7f9559c8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploying</a></div><div class="ttdeci">bool deploying</div><div class="ttdoc">If a compile job is running.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00126">DreamMaker.cs:126</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_ad489ef5c91d097ff3366d5bc63d8277e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile</a></div><div class="ttdeci">async ValueTask&lt; Models.CompileJob &gt; Compile(Models.Job job, Models.RevisionInformation revisionInformation, Api.Models.Internal.DreamMakerSettings dreamMakerSettings, DreamDaemonLaunchParameters launchParameters, IRepository repository, IRemoteDeploymentManager remoteDeploymentManager, JobProgressReporter progressReporter, TimeSpan? estimatedDuration, bool localCommitExistsOnRemote, CancellationToken cancellationToken)</div><div class="ttdoc">Run the compile implementation.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00460">DreamMaker.cs:460</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html">Tgstation.Server.Host.Components.Repository.Repository</a></div><div class="ttdef"><b>Definition:</b> <a href="_repository_8cs_source.html#l00027">Repository.cs:28</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository_html_ade7f7da8e9b448bd2a9b1b7eb0ecbe75"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html#ade7f7da8e9b448bd2a9b1b7eb0ecbe75">Tgstation.Server.Host.Components.Repository.Repository.Repository</a></div><div class="ttdeci">Repository(LibGit2Sharp.IRepository libGitRepo, ILibGit2Commands commands, IIOManager ioManager, IEventConsumer eventConsumer, ICredentialsProvider credentialsProvider, IPostWriteHandler postWriteHandler, IGitRemoteFeaturesFactory gitRemoteFeaturesFactory, ILibGit2RepositoryFactory submoduleFactory, ILogger&lt; Repository &gt; logger, GeneralConfiguration generalConfiguration, Action disposeAction)</div><div class="ttdoc">Initializes a new instance of the Repository class.</div><div class="ttdef"><b>Definition:</b> <a href="_repository_8cs_source.html#l00144">Repository.cs:144</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information_html_a32fb980a5c8ad960b2674e62a06f8724"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_i_git_remote_information.html#a32fb980a5c8ad960b2674e62a06f8724">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteGitProvider</a></div><div class="ttdeci">RemoteGitProvider? RemoteGitProvider</div><div class="ttdoc">The Models.RemoteGitProvider in use by the repository.</div><div class="ttdef"><b>Definition:</b> <a href="_i_git_remote_information_8cs_source.html#l00011">IGitRemoteInformation.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink_html_a8de753bacca634eab0b0c7f506472a97"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html#a8de753bacca634eab0b0c7f506472a97">Tgstation.Server.Host.Components.Deployment.ICompileJobSink.LoadCompileJob</a></div><div class="ttdeci">ValueTask LoadCompileJob(CompileJob job, Action&lt; bool &gt;? activationAction, CancellationToken cancellationToken)</div><div class="ttdoc">Load a new job  into the ICompileJobSink.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider_html_aaaa6e44e65fa8c56c8d163976fbbc14e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html#aaaa6e44e65fa8c56c8d163976fbbc14e">Tgstation.Server.Host.Components.Deployment.ILatestCompileJobProvider.LatestCompileJob</a></div><div class="ttdeci">ValueTask&lt; CompileJob?&gt; LatestCompileJob()</div><div class="ttdoc">Gets the latest CompileJob.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory_html_a4115cea1f220c4fdaede74566aa848d3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager</a></div><div class="ttdeci">IRemoteDeploymentManager CreateRemoteDeploymentManager(Api.Models.Instance metadata, RemoteGitProvider remoteGitProvider)</div><div class="ttdoc">Creates a IRemoteDeploymentManager for a given remoteGitProvider .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager</a></div><div class="ttdoc">Creates and updates remote deployments.</div><div class="ttdef"><b>Definition:</b> <a href="_i_remote_deployment_manager_8cs_source.html#l00014">IRemoteDeploymentManager.cs:15</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html_a647f962a385f1ea126bb9c2a842fd4eb"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a647f962a385f1ea126bb9c2a842fd4eb">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.PostDeploymentComments</a></div><div class="ttdeci">ValueTask PostDeploymentComments(CompileJob compileJob, RevisionInformation? previousRevisionInformation, RepositorySettings repositorySettings, string? repoOwner, string? repoName, CancellationToken cancellationToken)</div><div class="ttdoc">Post deployment comments to the test merge ticket.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">Tgstation.Server.Host.Components.Repository.IRepository</a></div><div class="ttdoc">Represents an on-disk git repository.</div><div class="ttdef"><b>Definition:</b> <a href="_i_repository_8cs_source.html#l00013">IRepository.cs:14</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_a242e53e0f353e3ca1597acec0441c05a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a242e53e0f353e3ca1597acec0441c05a">Tgstation.Server.Host.Components.Repository.IRepository.TimestampCommit</a></div><div class="ttdeci">Task&lt; DateTimeOffset &gt; TimestampCommit(string sha, CancellationToken cancellationToken)</div><div class="ttdoc">Gets the DateTimeOffset a given sha  was created on.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_aaf4a631e6d2aa45a1b6887152f1d13f0"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#aaf4a631e6d2aa45a1b6887152f1d13f0">Tgstation.Server.Host.Components.Repository.IRepository.Head</a></div><div class="ttdeci">string Head</div><div class="ttdoc">The SHA of the IRepository HEAD.</div><div class="ttdef"><b>Definition:</b> <a href="_i_repository_8cs_source.html#l00023">IRepository.cs:23</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager_html_a5e58009c7d92a55634a7ddd80ca60b1b"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html#a5e58009c7d92a55634a7ddd80ca60b1b">Tgstation.Server.Host.Components.Repository.IRepositoryManager.LoadRepository</a></div><div class="ttdeci">ValueTask&lt; IRepository?&gt; LoadRepository(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to load the IRepository from the default location.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory_html_a1da664d7237dbec5a6cb9ce04b79ccc1"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext</a></div><div class="ttdeci">ValueTask UseContext(Func&lt; IDatabaseContext, ValueTask &gt; operation)</div><div class="ttdoc">Run an operation  in the scope of an IDatabaseContext.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_dream_maker_8cs_source.html#l00419">Tgstation.Server.Host.Components.Deployment.DreamMaker.CalculateExpectedDeploymentTime()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00966">Tgstation.Server.Host.Components.Deployment.DreamMaker.CleanupFailedCompile()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00460">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00081">Tgstation.Server.Host.Components.Deployment.DreamMaker.compileJobConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00116">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentChatCallback</a>, <a class="el" href="_dream_maker_8cs_source.html#l00121">Tgstation.Server.Host.Components.Deployment.DreamMaker.currentDreamMakerOutput</a>, <a class="el" href="_dream_maker_8cs_source.html#l00126">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploying</a>, <a class="el" href="_dream_maker_8cs_source.html#l00111">Tgstation.Server.Host.Components.Deployment.DreamMaker.deploymentLock</a>, <a class="el" href="_dream_maker_8cs_source.html#l00061">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f">Tgstation.Server.Host.Components.Deployment.DreamMaker.FormatExceptionForUsers()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, <a class="el" href="_i_repository_8cs_source.html#l00023">Tgstation.Server.Host.Components.Repository.IRepository.Head</a>, <a class="el" href="_tgstation_8_server_8_host_2_models_2_revision_information_8cs_source.html#l00014">Tgstation.Server.Host.Models.RevisionInformation.Id</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html#aaaa6e44e65fa8c56c8d163976fbbc14e">Tgstation.Server.Host.Components.Deployment.ILatestCompileJobProvider.LatestCompileJob()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html#a8de753bacca634eab0b0c7f506472a97">Tgstation.Server.Host.Components.Deployment.ICompileJobSink.LoadCompileJob()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html#a5e58009c7d92a55634a7ddd80ca60b1b">Tgstation.Server.Host.Components.Repository.IRepositoryManager.LoadRepository()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00096">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a>, <a class="el" href="_dream_maker_8cs_source.html#l00106">Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a647f962a385f1ea126bb9c2a842fd4eb">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.PostDeploymentComments()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00086">Tgstation.Server.Host.Components.Deployment.DreamMaker.remoteDeploymentManagerFactory</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00011">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteGitProvider</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00021">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryName</a>, <a class="el" href="_i_git_remote_information_8cs_source.html#l00016">Tgstation.Server.Api.Models.Internal.IGitRemoteInformation.RemoteRepositoryOwner</a>, <a class="el" href="_repository_8cs_source.html#l00144">Tgstation.Server.Host.Components.Repository.Repository.Repository()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00076">Tgstation.Server.Host.Components.Deployment.DreamMaker.repositoryManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a242e53e0f353e3ca1597acec0441c05a">Tgstation.Server.Host.Components.Repository.IRepository.TimestampCommit()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext()</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tgstation_8_server_8_host_2_components_2_instance_8cs_source.html#l00496">Tgstation.Server.Host.Components.Instance.TimerLoop()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_cgraph">
<area shape="rect" title=" " alt="" coords="5,481,292,521"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a4d28d2170dd121e9e09135a02ec05b51" title="Calculate the average length of a deployment using a given databaseContext ." alt="" coords="361,5,638,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4" title="Cleans up a failed compile job ." alt="" coords="373,84,625,139"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="746,135,962,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e" title="Run the compile implementation." alt="" coords="386,290,613,330"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="1063,27,1302,67"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3" title="Creates a IRemoteDeploymentManager for a given remoteGitProvider ." alt="" coords="340,355,659,409"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8cdce0ecb73a635564b1eafc0fc0372f" title="Format a given Exception for display to users." alt="" coords="366,433,633,488"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_latest_compile_job_provider.html#aaaa6e44e65fa8c56c8d163976fbbc14e" title="Gets the latest CompileJob." alt="" coords="373,512,626,567"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html#a8de753bacca634eab0b0c7f506472a97" title="Load a new job &#160;into the ICompileJobSink." alt="" coords="354,591,645,631"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html#a5e58009c7d92a55634a7ddd80ca60b1b" title="Attempt to load the IRepository from the default location." alt="" coords="352,655,647,695"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a647f962a385f1ea126bb9c2a842fd4eb" title="Post deployment comments to the test merge ticket." alt="" coords="370,720,629,775"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_repository.html#ade7f7da8e9b448bd2a9b1b7eb0ecbe75" title="Initializes a new instance of the Repository class." alt="" coords="386,799,613,839"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a242e53e0f353e3ca1597acec0441c05a" title="Gets the DateTimeOffset a given sha &#160;was created on." alt="" coords="367,863,631,903"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="380,927,619,967"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8708c84547cd4960182ff067c36bc044" title="Fail a deployment for a given compileJob ." alt="" coords="725,56,983,111"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a143fbc68ad876ca7e7ce4145d97d9278" title="Gradually triggers a given progressReporter &#160;over a given estimatedDuration ." alt="" coords="729,379,979,419"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#aa2527a9fe8d1392b909018d6ed745fed" title="Send the message for a deployment to configured deployment channels." alt="" coords="707,443,1001,483"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="723,315,985,355"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a8029ccdc07f945286c14972dfd4ae3a3" title="Start a deployment for a given compileJob ." alt="" coords="725,508,983,563"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html#ac21fb8c8df8b40c14944282d86c32a66" title="Lock the current installation&#39;s location and return a IEngineExecutableLock." alt="" coords="727,587,981,627"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1" title="Report progress." alt="" coords="1064,755,1301,795"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="1099,91,1267,131"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e" title="Copies the current working directory to a given path ." alt="" coords="1069,155,1296,195"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62" title="Check that the file at path &#160;exists." alt="" coords="1099,219,1267,259"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5" title="Gets a list of files in path &#160;with the given extension ." alt="" coords="1071,283,1295,323"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b" title="Adds server side includes to the .dme being compiled." alt="" coords="1065,347,1300,387"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994" title="Check if a given parentPath &#160;is a parent of a given parentPath ." alt="" coords="1095,411,1270,451"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="1099,475,1267,515"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6" title="Compiles a .dme with DreamMaker." alt="" coords="1049,539,1316,579"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2" title=" " alt="" coords="1089,627,1276,667"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8e48d885b68d66ad74f17d0d192e86c0" title="Run a quick DD instance to test the DMAPI is installed on the target code." alt="" coords="1069,691,1296,731"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668" title="Return the command line arguments for compiling a given dmePath &#160;if compilation is necessary." alt="" coords="1364,496,1629,551"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8" title="Loads the environment settings for either the server or compiler." alt="" coords="1383,575,1610,615"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_git_remote_features_factory.html#ac68dccad767316b6c071ca0687bf3b9f" title="Create the IGitRemoteFeatures for a given repository ." alt="" coords="729,792,979,847"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a38ea1632011a37a072e9d1c9e3d04c13_icgraph">
<area shape="rect" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="a8cdce0ecb73a635564b1eafc0fc0372f" name="a8cdce0ecb73a635564b1eafc0fc0372f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cdce0ecb73a635564b1eafc0fc0372f">&#9670;&#160;</a></span>FormatExceptionForUsers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static string Tgstation.Server.Host.Components.Deployment.DreamMaker.FormatExceptionForUsers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_exception.html">Exception</a>&#160;</td>
          <td class="paramname"><em>exception</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Format a given <a class="el" href="class_exception.html">Exception</a> for display to users.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exception</td><td>The <a class="el" href="class_exception.html">Exception</a> to format.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An error string for end users.</dd></dl>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8cdce0ecb73a635564b1eafc0fc0372f_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8cdce0ecb73a635564b1eafc0fc0372f_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8cdce0ecb73a635564b1eafc0fc0372f_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8cdce0ecb73a635564b1eafc0fc0372f_icgraph">
<area shape="rect" title="Format a given Exception for display to users." alt="" coords="1164,30,1431,85"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="acd0b61739ab535d67d9081d8071b8f0b" name="acd0b61739ab535d67d9081d8071b8f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd0b61739ab535d67d9081d8071b8f0b">&#9670;&#160;</a></span>ModifyDme()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.ModifyDme </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds server side includes to the .dme being compiled.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The CompileJob for the operation.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00901">901</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  902</span>        {</div>
<div class="line"><span class="lineno">  903</span>            var dmeFileName = String.Join(<span class="charliteral">&#39;.&#39;</span>, job.DmeName, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a>);</div>
<div class="line"><span class="lineno">  904</span>            var stringDirectoryName = job.DirectoryName!.Value.ToString();</div>
<div class="line"><span class="lineno">  905</span>            var dmePath = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(stringDirectoryName, dmeFileName);</div>
<div class="line"><span class="lineno">  906</span>            var dmeReadTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a267b549fab5803c199a7d37100650e85">ReadAllBytes</a>(dmePath, cancellationToken);</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>            var dmeModificationsTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a>.CopyDMFilesTo(</div>
<div class="line"><span class="lineno">  909</span>                dmeFileName,</div>
<div class="line"><span class="lineno">  910</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(</div>
<div class="line"><span class="lineno">  911</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(</div>
<div class="line"><span class="lineno">  912</span>                        stringDirectoryName,</div>
<div class="line"><span class="lineno">  913</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a691970cc91e5576b06ed9ce14e51d9b8">GetDirectoryName</a>(dmeFileName))),</div>
<div class="line"><span class="lineno">  914</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>            var dmeBytes = await dmeReadTask;</div>
<div class="line"><span class="lineno">  917</span>            var dme = Encoding.UTF8.GetString(dmeBytes);</div>
<div class="line"><span class="lineno">  918</span> </div>
<div class="line"><span class="lineno">  919</span>            var dmeModifications = await dmeModificationsTask;</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>            <span class="keywordflow">if</span> (dmeModifications == <span class="keyword">null</span> || dmeModifications.TotalDmeOverwrite)</div>
<div class="line"><span class="lineno">  922</span>            {</div>
<div class="line"><span class="lineno">  923</span>                <span class="keywordflow">if</span> (dmeModifications != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  924</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;.dme replacement configured!&quot;</span>);</div>
<div class="line"><span class="lineno">  925</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  926</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;No .dme modifications required.&quot;</span>);</div>
<div class="line"><span class="lineno">  927</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  928</span>            }</div>
<div class="line"><span class="lineno">  929</span> </div>
<div class="line"><span class="lineno">  930</span>            var dmeLines = <span class="keyword">new</span> List&lt;string&gt;(dme.Split(<span class="charliteral">&#39;\n&#39;</span>, StringSplitOptions.None));</div>
<div class="line"><span class="lineno">  931</span>            <span class="keywordflow">for</span> (var dmeLineIndex = 0; dmeLineIndex &lt; dmeLines.Count; ++dmeLineIndex)</div>
<div class="line"><span class="lineno">  932</span>            {</div>
<div class="line"><span class="lineno">  933</span>                var line = dmeLines[dmeLineIndex];</div>
<div class="line"><span class="lineno">  934</span>                <span class="keywordflow">if</span> (line.Contains(<span class="stringliteral">&quot;BEGIN_INCLUDE&quot;</span>, StringComparison.Ordinal) &amp;&amp; dmeModifications.HeadIncludeLine != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  935</span>                {</div>
<div class="line"><span class="lineno">  936</span>                    var headIncludeLineNumber = dmeLineIndex + 1;</div>
<div class="line"><span class="lineno">  937</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(</div>
<div class="line"><span class="lineno">  938</span>                        <span class="stringliteral">&quot;Inserting HeadInclude.dm at line {lineNumber}: {includeLine}&quot;</span>,</div>
<div class="line"><span class="lineno">  939</span>                        headIncludeLineNumber,</div>
<div class="line"><span class="lineno">  940</span>                        dmeModifications.HeadIncludeLine);</div>
<div class="line"><span class="lineno">  941</span>                    dmeLines.Insert(headIncludeLineNumber, dmeModifications.HeadIncludeLine);</div>
<div class="line"><span class="lineno">  942</span>                    ++dmeLineIndex;</div>
<div class="line"><span class="lineno">  943</span>                }</div>
<div class="line"><span class="lineno">  944</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line.Contains(<span class="stringliteral">&quot;END_INCLUDE&quot;</span>, StringComparison.Ordinal) &amp;&amp; dmeModifications.TailIncludeLine != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  945</span>                {</div>
<div class="line"><span class="lineno">  946</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(</div>
<div class="line"><span class="lineno">  947</span>                        <span class="stringliteral">&quot;Inserting TailInclude.dm at line {lineNumber}: {includeLine}&quot;</span>,</div>
<div class="line"><span class="lineno">  948</span>                        dmeLineIndex,</div>
<div class="line"><span class="lineno">  949</span>                        dmeModifications.TailIncludeLine);</div>
<div class="line"><span class="lineno">  950</span>                    dmeLines.Insert(dmeLineIndex, dmeModifications.TailIncludeLine);</div>
<div class="line"><span class="lineno">  951</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  952</span>                }</div>
<div class="line"><span class="lineno">  953</span>            }</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>            dmeBytes = Encoding.UTF8.GetBytes(String.Join(<span class="charliteral">&#39;\n&#39;</span>, dmeLines));</div>
<div class="line"><span class="lineno">  956</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">WriteAllBytes</a>(dmePath, dmeBytes, cancellationToken);</div>
<div class="line"><span class="lineno">  957</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a373e2cd0c56f6826367b9aebf150040f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">Tgstation.Server.Host.Components.Deployment.DreamMaker.DmeExtension</a></div><div class="ttdeci">const string DmeExtension</div><div class="ttdoc">Extension for .dmes.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00036">DreamMaker.cs:36</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a267b549fab5803c199a7d37100650e85"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a267b549fab5803c199a7d37100650e85">Tgstation.Server.Host.IO.IIOManager.ReadAllBytes</a></div><div class="ttdeci">ValueTask&lt; byte[]&gt; ReadAllBytes(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Returns all the contents of a file at path  as a byte array.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a691970cc91e5576b06ed9ce14e51d9b8"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a691970cc91e5576b06ed9ce14e51d9b8">Tgstation.Server.Host.IO.IIOManager.GetDirectoryName</a></div><div class="ttdeci">string GetDirectoryName(string path)</div><div class="ttdoc">Gets the directory portion of a given path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a9aeb8b83ea3f4b13a183b6ac55b35a70"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes</a></div><div class="ttdeci">ValueTask WriteAllBytes(string path, byte[] contents, CancellationToken cancellationToken)</div><div class="ttdoc">Writes some contents  to a file at path  overwriting previous content.</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_acd0b61739ab535d67d9081d8071b8f0b_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_acd0b61739ab535d67d9081d8071b8f0b_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_acd0b61739ab535d67d9081d8071b8f0b_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_acd0b61739ab535d67d9081d8071b8f0b_icgraph">
<area shape="rect" title="Adds server side includes to the .dme being compiled." alt="" coords="1748,37,1983,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="1439,37,1700,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e" title="Run the compile implementation." alt="" coords="1164,37,1391,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="a143fbc68ad876ca7e7ce4145d97d9278" name="a143fbc68ad876ca7e7ce4145d97d9278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a143fbc68ad876ca7e7ce4145d97d9278">&#9670;&#160;</a></span>ProgressTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.ProgressTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TimeSpan?&#160;</td>
          <td class="paramname"><em>estimatedDuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gradually triggers a given <em>progressReporter</em>  over a given <em>estimatedDuration</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter to report progress of the operation.</td></tr>
    <tr><td class="paramname">estimatedDuration</td><td>A TimeSpan representing the duration to give progress over if any.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00713">713</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  714</span>        {</div>
<div class="line"><span class="lineno">  715</span>            <span class="keywordtype">double</span>? lastReport = estimatedDuration.HasValue ? 0 : <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  716</span>            progressReporter.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1">ReportProgress</a>(lastReport);</div>
<div class="line"><span class="lineno">  717</span> </div>
<div class="line"><span class="lineno">  718</span>            var minimumSleepInterval = TimeSpan.FromMilliseconds(250);</div>
<div class="line"><span class="lineno">  719</span>            var sleepInterval = estimatedDuration.HasValue ? estimatedDuration.Value / 100 : minimumSleepInterval;</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>            <span class="keywordflow">if</span> (estimatedDuration.HasValue)</div>
<div class="line"><span class="lineno">  722</span>            {</div>
<div class="line"><span class="lineno">  723</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Compile is expected to take: {estimatedDuration}&quot;</span>, estimatedDuration);</div>
<div class="line"><span class="lineno">  724</span>            }</div>
<div class="line"><span class="lineno">  725</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  726</span>            {</div>
<div class="line"><span class="lineno">  727</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;No metric to estimate compile time.&quot;</span>);</div>
<div class="line"><span class="lineno">  728</span>            }</div>
<div class="line"><span class="lineno">  729</span> </div>
<div class="line"><span class="lineno">  730</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  731</span>            {</div>
<div class="line"><span class="lineno">  732</span>                <span class="keywordflow">for</span> (var iteration = 0; iteration &lt; (estimatedDuration.HasValue ? 99 : Int32.MaxValue); ++iteration)</div>
<div class="line"><span class="lineno">  733</span>                {</div>
<div class="line"><span class="lineno">  734</span>                    <span class="keywordflow">if</span> (estimatedDuration.HasValue)</div>
<div class="line"><span class="lineno">  735</span>                    {</div>
<div class="line"><span class="lineno">  736</span>                        var nextInterval = DateTimeOffset.UtcNow + sleepInterval;</div>
<div class="line"><span class="lineno">  737</span>                        <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  738</span>                        {</div>
<div class="line"><span class="lineno">  739</span>                            var remainingSleepThisInterval = nextInterval - DateTimeOffset.UtcNow;</div>
<div class="line"><span class="lineno">  740</span>                            var nextSleepSpan = remainingSleepThisInterval &lt; minimumSleepInterval ? minimumSleepInterval : remainingSleepThisInterval;</div>
<div class="line"><span class="lineno">  741</span> </div>
<div class="line"><span class="lineno">  742</span>                            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977">Delay</a>(nextSleepSpan, cancellationToken);</div>
<div class="line"><span class="lineno">  743</span>                            progressReporter.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1">ReportProgress</a>(lastReport);</div>
<div class="line"><span class="lineno">  744</span>                        }</div>
<div class="line"><span class="lineno">  745</span>                        <span class="keywordflow">while</span> (DateTimeOffset.UtcNow &lt; nextInterval);</div>
<div class="line"><span class="lineno">  746</span>                    }</div>
<div class="line"><span class="lineno">  747</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  748</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#af28269cbf6ac69ab9cde83fe1f117fde">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977">Delay</a>(minimumSleepInterval, cancellationToken);</div>
<div class="line"><span class="lineno">  749</span> </div>
<div class="line"><span class="lineno">  750</span>                    lastReport = estimatedDuration.HasValue ? sleepInterval * (iteration + 1) / estimatedDuration.Value : <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  751</span>                    progressReporter.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1">ReportProgress</a>(lastReport);</div>
<div class="line"><span class="lineno">  752</span>                }</div>
<div class="line"><span class="lineno">  753</span>            }</div>
<div class="line"><span class="lineno">  754</span>            <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  755</span>            {</div>
<div class="line"><span class="lineno">  756</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(ex, <span class="stringliteral">&quot;ProgressTask aborted.&quot;</span>);</div>
<div class="line"><span class="lineno">  757</span>            }</div>
<div class="line"><span class="lineno">  758</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  759</span>            {</div>
<div class="line"><span class="lineno">  760</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogError(ex, <span class="stringliteral">&quot;ProgressTask crashed!&quot;</span>);</div>
<div class="line"><span class="lineno">  761</span>            }</div>
<div class="line"><span class="lineno">  762</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter_html_ac736a80d9d56a20711468d9b8e27e3c1"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1">Tgstation.Server.Host.Jobs.JobProgressReporter.ReportProgress</a></div><div class="ttdeci">void ReportProgress(double? progress)</div><div class="ttdoc">Report progress.</div><div class="ttdef"><b>Definition:</b> <a href="_job_progress_reporter_8cs_source.html#l00137">JobProgressReporter.cs:137</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer_html_aeb604334bd297d47506dc23e0d115977"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay</a></div><div class="ttdeci">Task Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_job_progress_reporter_8cs_source.html#l00137">Tgstation.Server.Host.Jobs.JobProgressReporter.ReportProgress()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00460">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_cgraph">
<area shape="rect" title="Gradually triggers a given progressReporter &#160;over a given estimatedDuration ." alt="" coords="5,5,256,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html#ac736a80d9d56a20711468d9b8e27e3c1" title="Report progress." alt="" coords="304,5,541,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a143fbc68ad876ca7e7ce4145d97d9278_icgraph">
<area shape="rect" title="Gradually triggers a given progressReporter &#160;over a given estimatedDuration ." alt="" coords="1439,37,1689,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e" title="Run the compile implementation." alt="" coords="1164,37,1391,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="a2394e942cf255412fe358bef742b580c" name="a2394e942cf255412fe358bef742b580c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2394e942cf255412fe358bef742b580c">&#9670;&#160;</a></span>RunCompileJob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_progress_reporter.html">JobProgressReporter</a>&#160;</td>
          <td class="paramname"><em>progressReporter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html">Api.Models.Internal.DreamMakerSettings</a>&#160;</td>
          <td class="paramname"><em>dreamMakerSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>launchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a>&#160;</td>
          <td class="paramname"><em>engineLock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html">IRepository</a>&#160;</td>
          <td class="paramname"><em>repository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html">IRemoteDeploymentManager</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes and populate a given <em>job</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">progressReporter</td><td>The JobProgressReporter for the operation.</td></tr>
    <tr><td class="paramname">job</td><td>The CompileJob to run and populate.</td></tr>
    <tr><td class="paramname">dreamMakerSettings</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_maker_settings.html" title="Represents the state of the DreamMaker compiler. Create action starts a new compile....">Api.Models.Internal.DreamMakerSettings</a> to use.</td></tr>
    <tr><td class="paramname">launchParameters</td><td>The DreamDaemonLaunchParameters to use.</td></tr>
    <tr><td class="paramname">engineLock</td><td>The IEngineExecutableLock to use.</td></tr>
    <tr><td class="paramname">repository</td><td>The IRepository to use.</td></tr>
    <tr><td class="paramname">remoteDeploymentManager</td><td>The IRemoteDeploymentManager to use.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00554">554</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  563</span>        {</div>
<div class="line"><span class="lineno">  564</span>            var outputDirectory = job.DirectoryName!.Value.ToString();</div>
<div class="line"><span class="lineno">  565</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Compile output GUID: {dirGuid}&quot;</span>, outputDirectory);</div>
<div class="line"><span class="lineno">  566</span> </div>
<div class="line"><span class="lineno">  567</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  568</span>            {</div>
<div class="line"><span class="lineno">  569</span>                <span class="comment">// copy the repository</span></div>
<div class="line"><span class="lineno">  570</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Copying repository to game directory&quot;</span>);</div>
<div class="line"><span class="lineno">  571</span>                progressReporter.StageName = <span class="stringliteral">&quot;Copying repository&quot;</span>;</div>
<div class="line"><span class="lineno">  572</span>                var resolvedOutputDirectory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(outputDirectory);</div>
<div class="line"><span class="lineno">  573</span>                var repoOrigin = repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#ae8ac73c5a625a5c20ee4b25dcb3b04ba">Origin</a>;</div>
<div class="line"><span class="lineno">  574</span>                var repoReference = repository.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a36f1520633eca12a57b6ed52c60c5257">Reference</a>;</div>
<div class="line"><span class="lineno">  575</span>                <span class="keyword">using</span> (repository)</div>
<div class="line"><span class="lineno">  576</span>                    await repository.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e">CopyTo</a>(resolvedOutputDirectory, cancellationToken);</div>
<div class="line"><span class="lineno">  577</span> </div>
<div class="line"><span class="lineno">  578</span>                <span class="comment">// repository closed now</span></div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>                <span class="comment">// run precompile scripts</span></div>
<div class="line"><span class="lineno">  581</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running PreCompile event&quot;</span>;</div>
<div class="line"><span class="lineno">  582</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  583</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.CompileStart,</div>
<div class="line"><span class="lineno">  584</span>                    <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><span class="lineno">  585</span>                    {</div>
<div class="line"><span class="lineno">  586</span>                        resolvedOutputDirectory,</div>
<div class="line"><span class="lineno">  587</span>                        repoOrigin.ToString(),</div>
<div class="line"><span class="lineno">  588</span>                        engineLock.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#abbb2a923bbadea5d57d2d6420c4a15d3">Version</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2">ToString</a>(),</div>
<div class="line"><span class="lineno">  589</span>                        repoReference,</div>
<div class="line"><span class="lineno">  590</span>                    },</div>
<div class="line"><span class="lineno">  591</span>                    <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  592</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>                <span class="comment">// determine the dme</span></div>
<div class="line"><span class="lineno">  595</span>                progressReporter.StageName = <span class="stringliteral">&quot;Determining .dme&quot;</span>;</div>
<div class="line"><span class="lineno">  596</span>                <span class="keywordflow">if</span> (job.DmeName == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  597</span>                {</div>
<div class="line"><span class="lineno">  598</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Searching for available .dmes&quot;</span>);</div>
<div class="line"><span class="lineno">  599</span>                    var foundPaths = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5">GetFilesWithExtension</a>(resolvedOutputDirectory, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a>, <span class="keyword">true</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  600</span>                    var foundPath = foundPaths.FirstOrDefault();</div>
<div class="line"><span class="lineno">  601</span>                    <span class="keywordflow">if</span> (foundPath == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  602</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentNoDme);</div>
<div class="line"><span class="lineno">  603</span>                    job.DmeName = foundPath.Substring(</div>
<div class="line"><span class="lineno">  604</span>                        resolvedOutputDirectory.Length + 1,</div>
<div class="line"><span class="lineno">  605</span>                        foundPath.Length - resolvedOutputDirectory.Length - <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a>.Length - 2); <span class="comment">// +1 for . in extension</span></div>
<div class="line"><span class="lineno">  606</span>                }</div>
<div class="line"><span class="lineno">  607</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  608</span>                {</div>
<div class="line"><span class="lineno">  609</span>                    var targetDme = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(outputDirectory, String.Join(<span class="charliteral">&#39;.&#39;</span>, job.DmeName, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a373e2cd0c56f6826367b9aebf150040f">DmeExtension</a>));</div>
<div class="line"><span class="lineno">  610</span>                    <span class="keywordflow">if</span> (!await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">PathIsChildOf</a>(outputDirectory, targetDme, cancellationToken))</div>
<div class="line"><span class="lineno">  611</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentWrongDme);</div>
<div class="line"><span class="lineno">  612</span> </div>
<div class="line"><span class="lineno">  613</span>                    var targetDmeExists = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">FileExists</a>(targetDme, cancellationToken);</div>
<div class="line"><span class="lineno">  614</span>                    <span class="keywordflow">if</span> (!targetDmeExists)</div>
<div class="line"><span class="lineno">  615</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentMissingDme);</div>
<div class="line"><span class="lineno">  616</span>                }</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Selected \&quot;{dmeName}.dme\&quot; for compilation!&quot;</span>, job.DmeName);</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>                progressReporter.StageName = <span class="stringliteral">&quot;Modifying .dme&quot;</span>;</div>
<div class="line"><span class="lineno">  621</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b">ModifyDme</a>(job, cancellationToken);</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>                <span class="comment">// run precompile scripts</span></div>
<div class="line"><span class="lineno">  624</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running PreDreamMaker event&quot;</span>;</div>
<div class="line"><span class="lineno">  625</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  626</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.PreDreamMaker,</div>
<div class="line"><span class="lineno">  627</span>                    <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><span class="lineno">  628</span>                    {</div>
<div class="line"><span class="lineno">  629</span>                        resolvedOutputDirectory,</div>
<div class="line"><span class="lineno">  630</span>                        repoOrigin.ToString(),</div>
<div class="line"><span class="lineno">  631</span>                        engineLock.Version.ToString(),</div>
<div class="line"><span class="lineno">  632</span>                    },</div>
<div class="line"><span class="lineno">  633</span>                    <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  634</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  635</span> </div>
<div class="line"><span class="lineno">  636</span>                <span class="comment">// run compiler</span></div>
<div class="line"><span class="lineno">  637</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running Compiler&quot;</span>;</div>
<div class="line"><span class="lineno">  638</span>                var compileSuceeded = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6">RunDreamMaker</a>(engineLock, job, dreamMakerSettings.CompilerAdditionalArguments, cancellationToken);</div>
<div class="line"><span class="lineno">  639</span> </div>
<div class="line"><span class="lineno">  640</span>                <span class="comment">// Session takes ownership of the lock and Disposes it so save this for later</span></div>
<div class="line"><span class="lineno">  641</span>                var engineVersion = engineLock.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#abbb2a923bbadea5d57d2d6420c4a15d3">Version</a>;</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span>                <span class="comment">// verify api</span></div>
<div class="line"><span class="lineno">  644</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  645</span>                {</div>
<div class="line"><span class="lineno">  646</span>                    <span class="keywordflow">if</span> (!compileSuceeded)</div>
<div class="line"><span class="lineno">  647</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(</div>
<div class="line"><span class="lineno">  648</span>                            <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentExitCode,</div>
<div class="line"><span class="lineno">  649</span>                            <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>($<span class="stringliteral">&quot;Compilation failed:{Environment.NewLine}{Environment.NewLine}{job.Output}&quot;</span>));</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>                    progressReporter.StageName = <span class="stringliteral">&quot;Validating DMAPI&quot;</span>;</div>
<div class="line"><span class="lineno">  652</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8e48d885b68d66ad74f17d0d192e86c0">VerifyApi</a>(</div>
<div class="line"><span class="lineno">  653</span>                        launchParameters.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#aa3ac63088b89bf67dd5fdbe67970b03d">StartupTimeout</a>!.Value,</div>
<div class="line"><span class="lineno">  654</span>                        dreamMakerSettings.ApiValidationSecurityLevel!.Value,</div>
<div class="line"><span class="lineno">  655</span>                        job,</div>
<div class="line"><span class="lineno">  656</span>                        engineLock,</div>
<div class="line"><span class="lineno">  657</span>                        dreamMakerSettings.ApiValidationPort!.Value,</div>
<div class="line"><span class="lineno">  658</span>                        dreamMakerSettings.RequireDMApiValidation!.Value,</div>
<div class="line"><span class="lineno">  659</span>                        launchParameters.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a3dbd92d8284bf7837808be9499105682">LogOutput</a>!.Value,</div>
<div class="line"><span class="lineno">  660</span>                        cancellationToken);</div>
<div class="line"><span class="lineno">  661</span>                }</div>
<div class="line"><span class="lineno">  662</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>)</div>
<div class="line"><span class="lineno">  663</span>                {</div>
<div class="line"><span class="lineno">  664</span>                    <span class="comment">// DD never validated or compile failed</span></div>
<div class="line"><span class="lineno">  665</span>                    progressReporter.StageName = <span class="stringliteral">&quot;Running CompileFailure event&quot;</span>;</div>
<div class="line"><span class="lineno">  666</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  667</span>                        <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.CompileFailure,</div>
<div class="line"><span class="lineno">  668</span>                        <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><span class="lineno">  669</span>                        {</div>
<div class="line"><span class="lineno">  670</span>                            resolvedOutputDirectory,</div>
<div class="line"><span class="lineno">  671</span>                            compileSuceeded ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>,</div>
<div class="line"><span class="lineno">  672</span>                            engineVersion.ToString(),</div>
<div class="line"><span class="lineno">  673</span>                        },</div>
<div class="line"><span class="lineno">  674</span>                        <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  675</span>                        cancellationToken);</div>
<div class="line"><span class="lineno">  676</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  677</span>                }</div>
<div class="line"><span class="lineno">  678</span> </div>
<div class="line"><span class="lineno">  679</span>                progressReporter.StageName = <span class="stringliteral">&quot;Running CompileComplete event&quot;</span>;</div>
<div class="line"><span class="lineno">  680</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#abfcbd4e2f809faa445f7ea56fe4e5f0e">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  681</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.CompileComplete,</div>
<div class="line"><span class="lineno">  682</span>                    <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><span class="lineno">  683</span>                    {</div>
<div class="line"><span class="lineno">  684</span>                        resolvedOutputDirectory,</div>
<div class="line"><span class="lineno">  685</span>                        engineVersion.ToString(),</div>
<div class="line"><span class="lineno">  686</span>                    },</div>
<div class="line"><span class="lineno">  687</span>                    <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  688</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Applying static game file symlinks...&quot;</span>);</div>
<div class="line"><span class="lineno">  691</span>                progressReporter.StageName = <span class="stringliteral">&quot;Symlinking GameStaticFiles&quot;</span>;</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>                <span class="comment">// symlink in the static data</span></div>
<div class="line"><span class="lineno">  694</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2fe7ecccab0b5b1be9fdda8cbf097d9b">configuration</a>.SymlinkStaticFilesTo(resolvedOutputDirectory, cancellationToken);</div>
<div class="line"><span class="lineno">  695</span> </div>
<div class="line"><span class="lineno">  696</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;Compile complete!&quot;</span>);</div>
<div class="line"><span class="lineno">  697</span>            }</div>
<div class="line"><span class="lineno">  698</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  699</span>            {</div>
<div class="line"><span class="lineno">  700</span>                progressReporter.StageName = <span class="stringliteral">&quot;Cleaning output directory&quot;</span>;</div>
<div class="line"><span class="lineno">  701</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a10266c7acfc715ffec0cb0189d39c6a4">CleanupFailedCompile</a>(job, remoteDeploymentManager, ex);</div>
<div class="line"><span class="lineno">  702</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  703</span>            }</div>
<div class="line"><span class="lineno">  704</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version_html_a5576a2503f8e4371139e9abe80df44d2"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2">Tgstation.Server.Api.Models.EngineVersion.ToString</a></div><div class="ttdeci">override string ToString()</div><div class="ttdef"><b>Definition:</b> <a href="_engine_version_8cs_source.html#l00177">EngineVersion.cs:177</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_a3dbd92d8284bf7837808be9499105682"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a3dbd92d8284bf7837808be9499105682">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.LogOutput</a></div><div class="ttdeci">bool? LogOutput</div><div class="ttdoc">If process output/error text should be logged.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00099">DreamDaemonLaunchParameters.cs:99</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_aa3ac63088b89bf67dd5fdbe67970b03d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#aa3ac63088b89bf67dd5fdbe67970b03d">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.StartupTimeout</a></div><div class="ttdeci">uint? StartupTimeout</div><div class="ttdoc">The DreamDaemon startup timeout in seconds.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00062">DreamDaemonLaunchParameters.cs:62</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_a8e48d885b68d66ad74f17d0d192e86c0"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8e48d885b68d66ad74f17d0d192e86c0">Tgstation.Server.Host.Components.Deployment.DreamMaker.VerifyApi</a></div><div class="ttdeci">async ValueTask VerifyApi(uint timeout, DreamDaemonSecurity securityLevel, Models.CompileJob job, IEngineExecutableLock engineLock, ushort portToUse, bool requireValidate, bool logOutput, CancellationToken cancellationToken)</div><div class="ttdoc">Run a quick DD instance to test the DMAPI is installed on the target code.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00776">DreamMaker.cs:776</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_acd0b61739ab535d67d9081d8071b8f0b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b">Tgstation.Server.Host.Components.Deployment.DreamMaker.ModifyDme</a></div><div class="ttdeci">async ValueTask ModifyDme(Models.CompileJob job, CancellationToken cancellationToken)</div><div class="ttdoc">Adds server side includes to the .dme being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00901">DreamMaker.cs:901</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_html_adf43fc4a80b8b41e1d3030ba446971c6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunDreamMaker</a></div><div class="ttdeci">async ValueTask&lt; bool &gt; RunDreamMaker(IEngineExecutableLock engineLock, Models.CompileJob job, string? additionalCompilerArguments, CancellationToken cancellationToken)</div><div class="ttdoc">Compiles a .dme with DreamMaker.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_8cs_source.html#l00860">DreamMaker.cs:860</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation_html_abbb2a923bbadea5d57d2d6420c4a15d3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#abbb2a923bbadea5d57d2d6420c4a15d3">Tgstation.Server.Host.Components.Engine.IEngineInstallation.Version</a></div><div class="ttdeci">EngineVersion Version</div><div class="ttdoc">The EngineVersion of the IEngineInstallation.</div><div class="ttdef"><b>Definition:</b> <a href="_i_engine_installation_8cs_source.html#l00022">IEngineInstallation.cs:22</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_a36f1520633eca12a57b6ed52c60c5257"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a36f1520633eca12a57b6ed52c60c5257">Tgstation.Server.Host.Components.Repository.IRepository.Reference</a></div><div class="ttdeci">string Reference</div><div class="ttdoc">The current reference the IRepository HEAD is using. This can be a branch or tag.</div><div class="ttdef"><b>Definition:</b> <a href="_i_repository_8cs_source.html#l00028">IRepository.cs:28</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_html_a551ace4a402d31944fbd16eabdcf0d7e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e">Tgstation.Server.Host.Components.Repository.IRepository.CopyTo</a></div><div class="ttdeci">ValueTask CopyTo(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Copies the current working directory to a given path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a0d9526a8d840f2c00cb203bdebdcb994"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">Tgstation.Server.Host.IO.IIOManager.PathIsChildOf</a></div><div class="ttdeci">Task&lt; bool &gt; PathIsChildOf(string parentPath, string childPath, CancellationToken cancellationToken)</div><div class="ttdoc">Check if a given parentPath  is a parent of a given parentPath .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad4de873180481f7afa206b6282158d62"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">Tgstation.Server.Host.IO.IIOManager.FileExists</a></div><div class="ttdeci">Task&lt; bool &gt; FileExists(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Check that the file at path  exists.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad71a483a00641af2838418f677801df5"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5">Tgstation.Server.Host.IO.IIOManager.GetFilesWithExtension</a></div><div class="ttdeci">Task&lt; List&lt; string &gt; &gt; GetFilesWithExtension(string path, string extension, bool recursive, CancellationToken cancellationToken)</div><div class="ttdoc">Gets a list of files in path  with the given extension .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00051">Tgstation.Server.Host.Components.Deployment.DreamMaker.configuration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e">Tgstation.Server.Host.Components.Repository.IRepository.CopyTo()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00036">Tgstation.Server.Host.Components.Deployment.DreamMaker.DmeExtension</a>, <a class="el" href="_dream_maker_8cs_source.html#l00061">Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">Tgstation.Server.Host.IO.IIOManager.FileExists()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5">Tgstation.Server.Host.IO.IIOManager.GetFilesWithExtension()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00046">Tgstation.Server.Host.Components.Deployment.DreamMaker.ioManager</a>, <a class="el" href="_dream_maker_8cs_source.html#l00096">Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00099">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.LogOutput</a>, <a class="el" href="_dream_maker_8cs_source.html#l00901">Tgstation.Server.Host.Components.Deployment.DreamMaker.ModifyDme()</a>, <a class="el" href="_i_repository_8cs_source.html#l00033">Tgstation.Server.Host.Components.Repository.IRepository.Origin</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">Tgstation.Server.Host.IO.IIOManager.PathIsChildOf()</a>, <a class="el" href="_i_repository_8cs_source.html#l00028">Tgstation.Server.Host.Components.Repository.IRepository.Reference</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00860">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunDreamMaker()</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00062">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.StartupTimeout</a>, <a class="el" href="_engine_version_8cs_source.html#l00177">Tgstation.Server.Api.Models.EngineVersion.ToString()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00776">Tgstation.Server.Host.Components.Deployment.DreamMaker.VerifyApi()</a>, and <a class="el" href="_i_engine_installation_8cs_source.html#l00022">Tgstation.Server.Host.Components.Engine.IEngineInstallation.Version</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00460">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_cgraph">
<area shape="rect" title="Executes and populate a given job ." alt="" coords="5,325,267,365"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="364,5,532,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository.html#a551ace4a402d31944fbd16eabdcf0d7e" title="Copies the current working directory to a given path ." alt="" coords="335,69,561,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62" title="Check that the file at path &#160;exists." alt="" coords="364,133,532,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad71a483a00641af2838418f677801df5" title="Gets a list of files in path &#160;with the given extension ." alt="" coords="336,197,560,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="329,261,567,301"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#acd0b61739ab535d67d9081d8071b8f0b" title="Adds server side includes to the .dme being compiled." alt="" coords="331,325,565,365"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994" title="Check if a given parentPath &#160;is a parent of a given parentPath ." alt="" coords="361,389,535,429"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="364,453,532,493"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#adf43fc4a80b8b41e1d3030ba446971c6" title="Compiles a .dme with DreamMaker." alt="" coords="315,517,581,557"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_engine_version.html#a5576a2503f8e4371139e9abe80df44d2" title=" " alt="" coords="355,605,541,645"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8e48d885b68d66ad74f17d0d192e86c0" title="Run a quick DD instance to test the DMAPI is installed on the target code." alt="" coords="335,669,561,709"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668" title="Return the command line arguments for compiling a given dmePath &#160;if compilation is necessary." alt="" coords="629,474,895,529"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8" title="Loads the environment settings for either the server or compiler." alt="" coords="649,553,875,593"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a2394e942cf255412fe358bef742b580c_icgraph">
<area shape="rect" title="Executes and populate a given job ." alt="" coords="1439,37,1700,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e" title="Run the compile implementation." alt="" coords="1164,37,1391,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="adf43fc4a80b8b41e1d3030ba446971c6" name="adf43fc4a80b8b41e1d3030ba446971c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf43fc4a80b8b41e1d3030ba446971c6">&#9670;&#160;</a></span>RunDreamMaker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; bool &gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.RunDreamMaker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a>&#160;</td>
          <td class="paramname"><em>engineLock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string?&#160;</td>
          <td class="paramname"><em>additionalCompilerArguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compiles a .dme with <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">engineLock</td><td>The IEngineExecutableLock to use.</td></tr>
    <tr><td class="paramname">job</td><td>The CompileJob for the operation.</td></tr>
    <tr><td class="paramname">additionalCompilerArguments</td><td>Additional arguments to be added to the compiler.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in <code>true</code> if compilation succeeded, <code>false</code> otherwise.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00860">860</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  865</span>        {</div>
<div class="line"><span class="lineno">  866</span>            var environment = await engineLock.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8">LoadEnv</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>, <span class="keyword">true</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  867</span>            var arguments = engineLock.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668">FormatCompilerArguments</a>($<span class="stringliteral">&quot;{job.DmeName}.{DmeExtension}&quot;</span>, additionalCompilerArguments);</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>            await <span class="keyword">using </span>var dm = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8d40fb1d02610364e59b9feedb4e75d9">processExecutor</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html#a17aa8c090377d70ebf0a93f3eb0a0243">LaunchProcess</a>(</div>
<div class="line"><span class="lineno">  870</span>                engineLock.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#ae9f4dcfec0f9392282f9065f72dfafdd">CompilerExePath</a>,</div>
<div class="line"><span class="lineno">  871</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(</div>
<div class="line"><span class="lineno">  872</span>                    job.DirectoryName!.Value.ToString()),</div>
<div class="line"><span class="lineno">  873</span>                arguments,</div>
<div class="line"><span class="lineno">  874</span>                cancellationToken,</div>
<div class="line"><span class="lineno">  875</span>                environment,</div>
<div class="line"><span class="lineno">  876</span>                readStandardHandles: <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  877</span>                noShellExecute: <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a21a687a3355ff5f788593e33f8e7399b">sessionConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html#abc505aa2ec768c997c7559c1ed223504">LowPriorityDeploymentProcesses</a>)</div>
<div class="line"><span class="lineno">  880</span>                dm.AdjustPriority(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>            <span class="keywordtype">int</span> exitCode;</div>
<div class="line"><span class="lineno">  883</span>            <span class="keyword">using</span> (cancellationToken.Register(() =&gt; dm.Terminate()))</div>
<div class="line"><span class="lineno">  884</span>                exitCode = (await dm.Lifetime).Value;</div>
<div class="line"><span class="lineno">  885</span>            cancellationToken.ThrowIfCancellationRequested();</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;DreamMaker exit code: {exitCode}&quot;</span>, exitCode);</div>
<div class="line"><span class="lineno">  888</span>            job.Output = $<span class="stringliteral">&quot;{await dm.GetCombinedOutput(cancellationToken)}{Environment.NewLine}{Environment.NewLine}Exit Code: {exitCode}&quot;</span>;</div>
<div class="line"><span class="lineno">  889</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogDebug(<span class="stringliteral">&quot;DreamMaker output: {newLine}{output}&quot;</span>, Environment.NewLine, job.Output);</div>
<div class="line"><span class="lineno">  890</span> </div>
<div class="line"><span class="lineno">  891</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a3f7e6c6cababdc46b11bfab6e53ab9a5">currentDreamMakerOutput</a> = job.Output;</div>
<div class="line"><span class="lineno">  892</span>            <span class="keywordflow">return</span> exitCode == 0;</div>
<div class="line"><span class="lineno">  893</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration_html_abc505aa2ec768c997c7559c1ed223504"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html#abc505aa2ec768c997c7559c1ed223504">Tgstation.Server.Host.Configuration.SessionConfiguration.LowPriorityDeploymentProcesses</a></div><div class="ttdeci">bool LowPriorityDeploymentProcesses</div><div class="ttdoc">If the deployment DreamMaker and DreamDaemon instances are set to be below normal priority processes.</div><div class="ttdef"><b>Definition:</b> <a href="_session_configuration_8cs_source.html#l00026">SessionConfiguration.cs:26</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation_html_a18af4979c4f16687cb4891d0cbb9b668"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668">Tgstation.Server.Host.Components.Engine.IEngineInstallation.FormatCompilerArguments</a></div><div class="ttdeci">string FormatCompilerArguments(string dmePath, string? additionalArguments)</div><div class="ttdoc">Return the command line arguments for compiling a given dmePath  if compilation is necessary.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation_html_a1f08236db634210e10291a4ffddd0df8"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8">Tgstation.Server.Host.Components.Engine.IEngineInstallation.LoadEnv</a></div><div class="ttdeci">ValueTask&lt; Dictionary&lt; string, string &gt;?&gt; LoadEnv(ILogger logger, bool forCompiler, CancellationToken cancellationToken)</div><div class="ttdoc">Loads the environment settings for either the server or compiler.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation_html_ae9f4dcfec0f9392282f9065f72dfafdd"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#ae9f4dcfec0f9392282f9065f72dfafdd">Tgstation.Server.Host.Components.Engine.IEngineInstallation.CompilerExePath</a></div><div class="ttdeci">string CompilerExePath</div><div class="ttdoc">The full path to the dm/DreamMaker executable.</div><div class="ttdef"><b>Definition:</b> <a href="_i_engine_installation_8cs_source.html#l00032">IEngineInstallation.cs:32</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor_html_a17aa8c090377d70ebf0a93f3eb0a0243"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html#a17aa8c090377d70ebf0a93f3eb0a0243">Tgstation.Server.Host.System.IProcessExecutor.LaunchProcess</a></div><div class="ttdeci">ValueTask&lt; IProcess &gt; LaunchProcess(string fileName, string workingDirectory, string arguments, CancellationToken cancellationToken, IReadOnlyDictionary&lt; string, string &gt;? environment=null, string? fileRedirect=null, bool readStandardHandles=false, bool noShellExecute=false)</div><div class="ttdoc">Launch a IProcess.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_engine_installation_8cs_source.html#l00032">Tgstation.Server.Host.Components.Engine.IEngineInstallation.CompilerExePath</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668">Tgstation.Server.Host.Components.Engine.IEngineInstallation.FormatCompilerArguments()</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8">Tgstation.Server.Host.Components.Engine.IEngineInstallation.LoadEnv()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_cgraph">
<area shape="rect" title="Compiles a .dme with DreamMaker." alt="" coords="5,49,272,89"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a18af4979c4f16687cb4891d0cbb9b668" title="Return the command line arguments for compiling a given dmePath &#160;if compilation is necessary." alt="" coords="320,5,585,60"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#a1f08236db634210e10291a4ffddd0df8" title="Loads the environment settings for either the server or compiler." alt="" coords="339,85,566,125"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_adf43fc4a80b8b41e1d3030ba446971c6_icgraph">
<area shape="rect" title="Compiles a .dme with DreamMaker." alt="" coords="1748,37,2015,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="1439,37,1700,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e" title="Run the compile implementation." alt="" coords="1164,37,1391,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<a id="a8e48d885b68d66ad74f17d0d192e86c0" name="a8e48d885b68d66ad74f17d0d192e86c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e48d885b68d66ad74f17d0d192e86c0">&#9670;&#160;</a></span>VerifyApi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Deployment.DreamMaker.VerifyApi </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>&#160;</td>
          <td class="paramname"><em>securityLevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_executable_lock.html">IEngineExecutableLock</a>&#160;</td>
          <td class="paramname"><em>engineLock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>portToUse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>requireValidate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>logOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run a quick DD instance to test the DMAPI is installed on the target code.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>The timeout in seconds for validation.</td></tr>
    <tr><td class="paramname">securityLevel</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5" title="DreamDaemon&#39;s security level.">DreamDaemonSecurity</a> level to use to validate the API.</td></tr>
    <tr><td class="paramname">job</td><td>The CompileJob for the operation.</td></tr>
    <tr><td class="paramname">engineLock</td><td>The current IEngineExecutableLock.</td></tr>
    <tr><td class="paramname">portToUse</td><td>The port to use for API validation.</td></tr>
    <tr><td class="paramname">requireValidate</td><td>If the API validation is required to complete the deployment.</td></tr>
    <tr><td class="paramname">logOutput</td><td>If output should be logged to the DreamDaemon Diagnostics folder.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00776">776</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  785</span>        {</div>
<div class="line"><span class="lineno">  786</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;Verifying {possiblyRequired}DMAPI...&quot;</span>, requireValidate ? <span class="stringliteral">&quot;required &quot;</span> : String.Empty);</div>
<div class="line"><span class="lineno">  787</span>            var launchParameters = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a></div>
<div class="line"><span class="lineno">  788</span>            {</div>
<div class="line"><span class="lineno">  789</span>                AllowWebClient = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  790</span>                Port = portToUse,</div>
<div class="line"><span class="lineno">  791</span>                OpenDreamTopicPort = 0,</div>
<div class="line"><span class="lineno">  792</span>                SecurityLevel = securityLevel,</div>
<div class="line"><span class="lineno">  793</span>                Visibility = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a2ca30004669a0f022b39b67d21ac976c">DreamDaemonVisibility</a>.Invisible,</div>
<div class="line"><span class="lineno">  794</span>                StartupTimeout = timeout,</div>
<div class="line"><span class="lineno">  795</span>                TopicRequestTimeout = 0, <span class="comment">// not used</span></div>
<div class="line"><span class="lineno">  796</span>                HealthCheckSeconds = 0, <span class="comment">// not used</span></div>
<div class="line"><span class="lineno">  797</span>                StartProfiler = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  798</span>                LogOutput = logOutput,</div>
<div class="line"><span class="lineno">  799</span>                MapThreads = 1, <span class="comment">// lowest possible amount</span></div>
<div class="line"><span class="lineno">  800</span>            };</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>            job.MinimumSecurityLevel = securityLevel; <span class="comment">// needed for the TempDmbProvider</span></div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>            <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a> validationStatus;</div>
<div class="line"><span class="lineno">  805</span>            await <span class="keyword">using</span> (var provider = <span class="keyword">new</span> TemporaryDmbProvider(</div>
<div class="line"><span class="lineno">  806</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a5f0da2a044d1b9df7e85492cb58c076c">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(job.DirectoryName!.Value.ToString()),</div>
<div class="line"><span class="lineno">  807</span>                job,</div>
<div class="line"><span class="lineno">  808</span>                engineLock.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_installation.html#abbb2a923bbadea5d57d2d6420c4a15d3">Version</a>))</div>
<div class="line"><span class="lineno">  809</span>            await <span class="keyword">using</span> (var controller = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a8322a848923985ee4e06d792dccb8643">sessionControllerFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html#a1ed439b268b2fae3ff0075c7698d6932">LaunchNew</a>(provider, engineLock, launchParameters, <span class="keyword">true</span>, cancellationToken))</div>
<div class="line"><span class="lineno">  810</span>            {</div>
<div class="line"><span class="lineno">  811</span>                var launchResult = await controller.LaunchResult.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  812</span> </div>
<div class="line"><span class="lineno">  813</span>                <span class="keywordflow">if</span> (launchResult.StartupTime.HasValue)</div>
<div class="line"><span class="lineno">  814</span>                    await controller.Lifetime.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>                <span class="keywordflow">if</span> (!controller.Lifetime.IsCompleted)</div>
<div class="line"><span class="lineno">  817</span>                    await controller.DisposeAsync();</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>                validationStatus = controller.ApiValidationStatus;</div>
<div class="line"><span class="lineno">  820</span> </div>
<div class="line"><span class="lineno">  821</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a1d5a133d669af1e14db0104b67103ccf">logger</a>.LogTrace(<span class="stringliteral">&quot;API validation status: {validationStatus}&quot;</span>, validationStatus);</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>                job.DMApiVersion = controller.DMApiVersion;</div>
<div class="line"><span class="lineno">  824</span>            }</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>            <span class="keywordflow">switch</span> (validationStatus)</div>
<div class="line"><span class="lineno">  827</span>            {</div>
<div class="line"><span class="lineno">  828</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.RequiresUltrasafe:</div>
<div class="line"><span class="lineno">  829</span>                    job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Ultrasafe;</div>
<div class="line"><span class="lineno">  830</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  831</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.RequiresSafe:</div>
<div class="line"><span class="lineno">  832</span>                    job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Safe;</div>
<div class="line"><span class="lineno">  833</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  834</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.RequiresTrusted:</div>
<div class="line"><span class="lineno">  835</span>                    job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Trusted;</div>
<div class="line"><span class="lineno">  836</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  837</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.NeverValidated:</div>
<div class="line"><span class="lineno">  838</span>                    <span class="keywordflow">if</span> (requireValidate)</div>
<div class="line"><span class="lineno">  839</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentNeverValidated);</div>
<div class="line"><span class="lineno">  840</span>                    job.MinimumSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Ultrasafe;</div>
<div class="line"><span class="lineno">  841</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  842</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.BadValidationRequest:</div>
<div class="line"><span class="lineno">  843</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.Incompatible:</div>
<div class="line"><span class="lineno">  844</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DeploymentInvalidValidation);</div>
<div class="line"><span class="lineno">  845</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">ApiValidationStatus</a>.UnaskedValidationRequest:</div>
<div class="line"><span class="lineno">  846</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  847</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(</div>
<div class="line"><span class="lineno">  848</span>                        $<span class="stringliteral">&quot;Session controller returned unexpected ApiValidationStatus: {validationStatus}&quot;</span>);</div>
<div class="line"><span class="lineno">  849</span>            }</div>
<div class="line"><span class="lineno">  850</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters</a></div><div class="ttdoc">Launch settings for DreamDaemon.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00009">DreamDaemonLaunchParameters.cs:10</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory_html_a1ed439b268b2fae3ff0075c7698d6932"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html#a1ed439b268b2fae3ff0075c7698d6932">Tgstation.Server.Host.Components.Session.ISessionControllerFactory.LaunchNew</a></div><div class="ttdeci">ValueTask&lt; ISessionController &gt; LaunchNew(IDmbProvider dmbProvider, IEngineExecutableLock? currentByondLock, DreamDaemonLaunchParameters launchParameters, bool apiValidate, CancellationToken cancellationToken)</div><div class="ttdoc">Create a ISessionController from a freshly launch DreamDaemon instance.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a2ca30004669a0f022b39b67d21ac976c"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a2ca30004669a0f022b39b67d21ac976c">Tgstation.Server.Api.Models.DreamDaemonVisibility</a></div><div class="ttdeci">DreamDaemonVisibility</div><div class="ttdoc">The visibility setting for DreamDaemon.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_visibility_8cs_source.html#l00006">DreamDaemonVisibility.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_ad4850e6b78816679602b13d63d2869b5"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">Tgstation.Server.Api.Models.DreamDaemonSecurity</a></div><div class="ttdeci">DreamDaemonSecurity</div><div class="ttdoc">DreamDaemon's security level.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_security_8cs_source.html#l00006">DreamDaemonSecurity.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_html_a9dd0e3dfc87080e8c7a91665b79891b3"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a9dd0e3dfc87080e8c7a91665b79891b3">Tgstation.Server.Host.Components.Session.ApiValidationStatus</a></div><div class="ttdeci">ApiValidationStatus</div><div class="ttdoc">Status of DMAPI validation.</div><div class="ttdef"><b>Definition:</b> <a href="_api_validation_status_8cs_source.html#l00006">ApiValidationStatus.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_engine_installation_8cs_source.html#l00022">Tgstation.Server.Host.Components.Engine.IEngineInstallation.Version</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8e48d885b68d66ad74f17d0d192e86c0_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8e48d885b68d66ad74f17d0d192e86c0_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8e48d885b68d66ad74f17d0d192e86c0_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker_a8e48d885b68d66ad74f17d0d192e86c0_icgraph">
<area shape="rect" title="Run a quick DD instance to test the DMAPI is installed on the target code." alt="" coords="1748,37,1975,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a2394e942cf255412fe358bef742b580c" title="Executes and populate a given job ." alt="" coords="1439,37,1700,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#ad489ef5c91d097ff3366d5bc63d8277e" title="Run the compile implementation." alt="" coords="1164,37,1391,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a38ea1632011a37a072e9d1c9e3d04c13" title=" " alt="" coords="829,37,1116,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a12340b0e0ecd2c2ccc812d88f86f7a3c" title="Pull the repository and compile for every set of given minutes ." alt="" coords="555,37,781,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a76b97c61b214295da99e737ab2570b5a" title="Change the auto&#45;update timing for the IInstanceCore. A ValueTask representing the running operation." alt="" coords="280,37,507,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#a11cc04923d2557eefd57ad2ded9eb7f2" title=" " alt="" coords="5,5,232,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html#afc1fd9e8dc3bd57b78dbcbc4e7f449b4" title=" " alt="" coords="5,69,232,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af28269cbf6ac69ab9cde83fe1f117fde" name="af28269cbf6ac69ab9cde83fe1f117fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af28269cbf6ac69ab9cde83fe1f117fde">&#9670;&#160;</a></span>asyncDelayer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.asyncDelayer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAsyncDelayer for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00091">91</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="ad8f8e86f9e52a3f5e027b9570c5f32df" name="ad8f8e86f9e52a3f5e027b9570c5f32df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f8e86f9e52a3f5e027b9570c5f32df">&#9670;&#160;</a></span>chatManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.chatManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IChatManager for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00066">66</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00460">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="ab01d9cb0fcd270eea9ec47a4e0684f4a" name="ab01d9cb0fcd270eea9ec47a4e0684f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab01d9cb0fcd270eea9ec47a4e0684f4a">&#9670;&#160;</a></span>compileJobConsumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html">ICompileJobSink</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.compileJobConsumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_compile_job_sink.html" title="Sink for CompileJobs.">ICompileJobSink</a> for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00081">81</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a2fe7ecccab0b5b1be9fdda8cbf097d9b" name="a2fe7ecccab0b5b1be9fdda8cbf097d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe7ecccab0b5b1be9fdda8cbf097d9b">&#9670;&#160;</a></span>configuration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html">StaticFiles.IConfiguration</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.configuration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_static_files_1_1_i_configuration.html" title="For managing the Configuration directory.">StaticFiles.IConfiguration</a> for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00051">51</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="a0585a8e7178f4b9fd4e82bba4e0aba96" name="a0585a8e7178f4b9fd4e82bba4e0aba96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0585a8e7178f4b9fd4e82bba4e0aba96">&#9670;&#160;</a></span>currentChatCallback</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Func&lt;string?, string, Action&lt;bool&gt; &gt;? Tgstation.Server.Host.Components.Deployment.DreamMaker.currentChatCallback</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The active callback from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#aa2527a9fe8d1392b909018d6ed745fed" title="Send the message for a deployment to configured deployment channels.">IChatManager.QueueDeploymentMessage</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00116">116</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00460">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>

</div>
</div>
<a id="a3f7e6c6cababdc46b11bfab6e53ab9a5" name="a3f7e6c6cababdc46b11bfab6e53ab9a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f7e6c6cababdc46b11bfab6e53ab9a5">&#9670;&#160;</a></span>currentDreamMakerOutput</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string? Tgstation.Server.Host.Components.Deployment.DreamMaker.currentDreamMakerOutput</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cached for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a0585a8e7178f4b9fd4e82bba4e0aba96" title="The active callback from IChatManager.QueueDeploymentMessage.">currentChatCallback</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00121">121</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>

</div>
</div>
<a id="a95745246c0a960bdec751c0e7f9559c8" name="a95745246c0a960bdec751c0e7f9559c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95745246c0a960bdec751c0e7f9559c8">&#9670;&#160;</a></span>deploying</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Deployment.DreamMaker.deploying</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If a compile job is running.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00126">126</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>.</p>

</div>
</div>
<a id="ae7ed5b30d84ba3a1f88262ccd524f280" name="ae7ed5b30d84ba3a1f88262ccd524f280"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7ed5b30d84ba3a1f88262ccd524f280">&#9670;&#160;</a></span>deploymentLock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly object Tgstation.Server.Host.Components.Deployment.DreamMaker.deploymentLock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>lock</code> object for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html#a95745246c0a960bdec751c0e7f9559c8" title="If a compile job is running.">deploying</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00111">111</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a373e2cd0c56f6826367b9aebf150040f" name="a373e2cd0c56f6826367b9aebf150040f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a373e2cd0c56f6826367b9aebf150040f">&#9670;&#160;</a></span>DmeExtension</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const string Tgstation.Server.Host.Components.Deployment.DreamMaker.DmeExtension = &quot;dme&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extension for .dmes.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00036">36</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="aa71af19173e2a9edb56655c7eeb75968" name="aa71af19173e2a9edb56655c7eeb75968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa71af19173e2a9edb56655c7eeb75968">&#9670;&#160;</a></span>engineManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_engine_1_1_i_engine_manager.html">IEngineManager</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.engineManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IEngineManager for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00041">41</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00460">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="abfcbd4e2f809faa445f7ea56fe4e5f0e" name="abfcbd4e2f809faa445f7ea56fe4e5f0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfcbd4e2f809faa445f7ea56fe4e5f0e">&#9670;&#160;</a></span>eventConsumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.eventConsumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IEventConsumer for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00061">61</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00460">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="a5f0da2a044d1b9df7e85492cb58c076c" name="a5f0da2a044d1b9df7e85492cb58c076c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f0da2a044d1b9df7e85492cb58c076c">&#9670;&#160;</a></span>ioManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.ioManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00046">46</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="a1d5a133d669af1e14db0104b67103ccf" name="a1d5a133d669af1e14db0104b67103ccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d5a133d669af1e14db0104b67103ccf">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ILogger&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>&gt; Tgstation.Server.Host.Components.Deployment.DreamMaker.logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ILogger for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00096">96</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00460">Tgstation.Server.Host.Components.Deployment.DreamMaker.Compile()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00554">Tgstation.Server.Host.Components.Deployment.DreamMaker.RunCompileJob()</a>.</p>

</div>
</div>
<a id="ac5b667aa89c476c9cb0cf71cb5add8a6" name="ac5b667aa89c476c9cb0cf71cb5add8a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5b667aa89c476c9cb0cf71cb5add8a6">&#9670;&#160;</a></span>metadata</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.metadata</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a> belongs to.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00106">106</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00419">Tgstation.Server.Host.Components.Deployment.DreamMaker.CalculateExpectedDeploymentTime()</a>, <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a8d40fb1d02610364e59b9feedb4e75d9" name="a8d40fb1d02610364e59b9feedb4e75d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d40fb1d02610364e59b9feedb4e75d9">&#9670;&#160;</a></span>processExecutor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html">IProcessExecutor</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.processExecutor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IProcessExecutor for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00071">71</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a753ddaadb407331cf9d140c96fe5374b" name="a753ddaadb407331cf9d140c96fe5374b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a753ddaadb407331cf9d140c96fe5374b">&#9670;&#160;</a></span>remoteDeploymentManagerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.remoteDeploymentManagerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRemoteDeploymentManagerFactory for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00086">86</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a0cfc680dd4fa5908a6ae164d14530f39" name="a0cfc680dd4fa5908a6ae164d14530f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cfc680dd4fa5908a6ae164d14530f39">&#9670;&#160;</a></span>repositoryManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_repository_1_1_i_repository_manager.html">IRepositoryManager</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.repositoryManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRepositoryManager for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00076">76</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00191">Tgstation.Server.Host.Components.Deployment.DreamMaker.DeploymentProcess()</a>, and <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a21a687a3355ff5f788593e33f8e7399b" name="a21a687a3355ff5f788593e33f8e7399b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a687a3355ff5f788593e33f8e7399b">&#9670;&#160;</a></span>sessionConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_session_configuration.html">SessionConfiguration</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The SessionConfiguration for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00101">101</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<a id="a8322a848923985ee4e06d792dccb8643" name="a8322a848923985ee4e06d792dccb8643"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8322a848923985ee4e06d792dccb8643">&#9670;&#160;</a></span>sessionControllerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> Tgstation.Server.Host.Components.Deployment.DreamMaker.sessionControllerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionControllerFactory for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dream_maker.html">DreamMaker</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_dream_maker_8cs_source.html#l00056">56</a> of file <a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_dream_maker_8cs_source.html#l00155">Tgstation.Server.Host.Components.Deployment.DreamMaker.DreamMaker()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/Deployment/<a class="el" href="_dream_maker_8cs_source.html">DreamMaker.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
