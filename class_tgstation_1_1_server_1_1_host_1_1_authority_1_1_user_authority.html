<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Authority.UserAuthority Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.16.1</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html">Authority</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html">UserAuthority</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Authority.UserAuthority Class Reference<span class="mlabels"><span class="mlabel">sealed</span></span></div></div>
</div><!--header-->
<div class="contents">

<p> 
 <a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Authority.UserAuthority:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_authority_8_user_authority_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_authority_8_user_authority_inherit__map" id="a_tgstation_8_server_8_host_8_authority_8_user_authority_inherit__map">
<area shape="rect" title=" " alt="" coords="18,153,223,193"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html" title="Base implementation of IAuthority." alt="" coords="5,79,108,105"/>
<area shape="poly" title=" " alt="" coords="78,115,107,151,103,154,74,118"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_i_authority.html" title="Business logic for interating with the server." alt="" coords="82,5,159,31"/>
<area shape="poly" title=" " alt="" coords="102,44,69,80,65,77,98,40"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html" title="IAuthority for managing Users." alt="" coords="132,79,237,105"/>
<area shape="poly" title=" " alt="" coords="143,40,176,77,172,80,139,44"/>
<area shape="poly" title=" " alt="" coords="167,118,138,154,134,151,163,115"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Authority.UserAuthority:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_authority_8_user_authority_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_authority_8_user_authority_coll__map" id="a_tgstation_8_server_8_host_8_authority_8_user_authority_coll__map">
<area shape="rect" title=" " alt="" coords="555,318,760,359"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html" title="Base implementation of IAuthority." alt="" coords="180,5,282,31"/>
<area shape="poly" title=" " alt="" coords="298,7,353,6,414,12,477,27,506,40,533,57,563,85,588,119,609,155,625,192,646,264,656,317,651,318,641,265,620,194,604,157,584,121,559,89,530,62,503,45,475,32,414,17,353,11,298,13"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_i_authority.html" title="Business logic for interating with the server." alt="" coords="5,31,82,56"/>
<area shape="poly" title=" " alt="" coords="97,34,179,22,180,28,98,39"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html" title="IAuthority for managing Users." alt="" coords="179,55,283,80"/>
<area shape="poly" title=" " alt="" coords="98,48,179,58,178,63,97,53"/>
<area shape="poly" title=" " alt="" coords="299,55,353,52,414,56,476,70,505,82,533,97,560,120,584,148,619,209,642,270,655,316,650,318,637,271,615,211,579,151,557,124,530,102,503,86,474,75,413,61,353,58,299,60"/>
<area shape="rect" title=" " alt="" coords="142,104,320,130"/>
<area shape="poly" title=" " alt="" coords="336,114,384,119,435,129,486,145,533,168,574,202,607,242,633,283,650,316,645,319,628,286,603,246,570,205,530,172,484,150,434,134,384,124,336,119"/>
<area shape="rect" title=" " alt="" coords="139,154,324,195"/>
<area shape="poly" title=" " alt="" coords="340,184,435,204,485,219,532,238,563,256,592,276,637,315,634,319,588,280,560,260,530,243,483,224,434,209,339,189"/>
<area shape="rect" title=" " alt="" coords="144,219,319,260"/>
<area shape="poly" title=" " alt="" coords="334,252,431,270,532,293,602,315,600,320,531,298,429,275,333,257"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html" title="Factory for ISystemIdentitys." alt="" coords="131,285,331,325"/>
<area shape="poly" title=" " alt="" coords="347,311,555,328,555,333,347,317"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html" title="Receives notifications about permissions updates." alt="" coords="131,350,331,391"/>
<area shape="poly" title=" " alt="" coords="347,360,531,347,554,345,555,350,532,352,347,365"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_cryptography_suite.html" title="Contains various cryptographic functions." alt="" coords="131,415,331,456"/>
<area shape="poly" title=" " alt="" coords="347,417,437,401,531,380,602,357,604,362,532,385,438,406,348,422"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html" title="Handles invalidating user sessions." alt="" coords="131,481,331,521"/>
<area shape="poly" title=" " alt="" coords="346,487,438,469,485,454,530,436,561,419,589,398,635,357,638,361,593,402,564,423,532,441,487,459,440,474,347,492"/>
<area shape="rect" title=" " alt="" coords="140,545,322,571"/>
<area shape="poly" title=" " alt="" coords="338,558,385,553,435,544,484,529,530,507,570,474,603,433,628,392,645,358,650,360,633,394,608,436,574,477,533,511,486,534,436,549,386,558,338,563"/>
<area shape="rect" title=" " alt="" coords="143,595,319,636"/>
<area shape="poly" title=" " alt="" coords="335,623,384,622,435,616,484,601,530,578,557,555,580,528,615,466,637,405,650,358,655,360,643,407,620,468,584,531,560,559,533,582,486,606,436,621,384,628,335,629"/>
<area shape="rect" title=" " alt="" coords="153,661,310,701"/>
<area shape="poly" title=" " alt="" coords="325,691,376,692,430,686,483,672,530,646,562,615,588,579,609,538,625,497,644,417,652,359,657,359,650,418,630,498,614,541,593,581,566,619,533,650,485,677,431,691,377,697,325,697"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a64ee8ced88fbee24dfc1ba1c08ee280c" id="r_a64ee8ced88fbee24dfc1ba1c08ee280c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a64ee8ced88fbee24dfc1ba1c08ee280c">UserAuthority</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a> authenticationContext, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html">UserAuthority</a> &gt; logger, IUsersDataLoader <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae78d9d9f3d1c3fc4f8bc69b46e893f81">usersDataLoader</a>, IOAuthConnectionsDataLoader <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#af8ad1a11f6c999ad5d64b9d61e19e035">oAuthConnectionsDataLoader</a>, IOidcConnectionsDataLoader <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ac48038ebbd25aacaae82e9a54593518b">oidcConnectionsDataLoader</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a81f60af5ad50d8a4c8452adf96f75bd8">systemIdentityFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html">IPermissionsUpdateNotifyee</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a23afb5c24b05bfeb062c18bb7c38a6fd">permissionsUpdateNotifyee</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_cryptography_suite.html">ICryptographySuite</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad57ea79ea07db0081701dc10ffca0e3f">cryptographySuite</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html">ISessionInvalidationTracker</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a04be03772015998cff8d7b8ee6d7e5a6">sessionInvalidationTracker</a>, ITopicEventSender <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a092b316af162758aef6289c84c885efb">topicEventSender</a>, IOptionsSnapshot&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a9000c1eddd40169fecc6cb692ef1a647">generalConfigurationOptions</a>, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_security_configuration.html">SecurityConfiguration</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a>)</td></tr>
<tr class="memdesc:a64ee8ced88fbee24dfc1ba1c08ee280c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the UserAuthority class.  <br /></td></tr>
<tr class="separator:a64ee8ced88fbee24dfc1ba1c08ee280c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6152e7f8018f4d9be6c65521c7a2a9" id="r_aae6152e7f8018f4d9be6c65521c7a2a9"><td class="memItemLeft" align="right" valign="top">ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aae6152e7f8018f4d9be6c65521c7a2a9">Read</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aae6152e7f8018f4d9be6c65521c7a2a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the currently authenticated user.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in a User <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.</dd></dl>
  <br /></td></tr>
<tr class="separator:aae6152e7f8018f4d9be6c65521c7a2a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35ad3c9eb6b23b7d832ed209e604454c" id="r_a35ad3c9eb6b23b7d832ed209e604454c"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a35ad3c9eb6b23b7d832ed209e604454c">GetId</a> (long id, bool includeJoins, bool allowSystemUser, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a35ad3c9eb6b23b7d832ed209e604454c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the User with a given <em>id</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> of the User.</td></tr>
    <tr><td class="paramname">includeJoins</td><td>If related entities should be loaded.</td></tr>
    <tr><td class="paramname">allowSystemUser</td><td>If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a2e68345f5d52c8ba64dca5ec061d029d" title="Username used when creating jobs automatically.">User.TgsSystemUserName</a> may be returned.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in a User <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.</dd></dl>
  <br /></td></tr>
<tr class="separator:a35ad3c9eb6b23b7d832ed209e604454c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92eacd30b3df017b7a45f854849d8368" id="r_a92eacd30b3df017b7a45f854849d8368"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_queryable.html">IQueryable</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a92eacd30b3df017b7a45f854849d8368">Queryable</a> (bool includeJoins)</td></tr>
<tr class="memdesc:a92eacd30b3df017b7a45f854849d8368"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all registered Users.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">includeJoins</td><td>If related entities should be loaded.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IQueryable&lt;T&gt;</a> of Users.</dd></dl>
  <br /></td></tr>
<tr class="separator:a92eacd30b3df017b7a45f854849d8368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56e8c3826bd0907cf7aeb18aa468610b" id="r_a56e8c3826bd0907cf7aeb18aa468610b"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_o_auth_connection.html">GraphQL.Types.OAuth.OAuthConnection</a>[]&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a56e8c3826bd0907cf7aeb18aa468610b">OAuthConnections</a> (long userId, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a56e8c3826bd0907cf7aeb18aa468610b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_o_auth_connection.html" title="Represents a valid OAuth connection.">GraphQL.Types.OAuth.OAuthConnection</a>s for the User with a given <em>userId</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> of the User.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in an global::System.Array of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_o_auth_connection.html" title="Represents a valid OAuth connection.">GraphQL.Types.OAuth.OAuthConnection</a> <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.</dd></dl>
  <br /></td></tr>
<tr class="separator:a56e8c3826bd0907cf7aeb18aa468610b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a473ac45404cca37f783b4575ee401b80" id="r_a473ac45404cca37f783b4575ee401b80"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_oidc_connection.html">GraphQL.Types.OAuth.OidcConnection</a>[]&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a473ac45404cca37f783b4575ee401b80">OidcConnections</a> (long userId, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a473ac45404cca37f783b4575ee401b80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_oidc_connection.html" title="Represents a valid OAuth connection.">GraphQL.Types.OAuth.OidcConnection</a>s for the User with a given <em>userId</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> of the User.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in an global::System.Array of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_oidc_connection.html" title="Represents a valid OAuth connection.">GraphQL.Types.OAuth.OidcConnection</a> <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.</dd></dl>
  <br /></td></tr>
<tr class="separator:a473ac45404cca37f783b4575ee401b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2695069d164dde2b12e4fed8718726b" id="r_ad2695069d164dde2b12e4fed8718726b"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad2695069d164dde2b12e4fed8718726b">Create</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_create_request.html">UserCreateRequest</a> createRequest, bool? needZeroLengthPasswordWithOAuthConnections, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad2695069d164dde2b12e4fed8718726b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a User.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">createRequest</td><td>The UserCreateRequest.</td></tr>
    <tr><td class="paramname">needZeroLengthPasswordWithOAuthConnections</td><td>If a zero-length <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_update_request.html#ac807c256a3a631bd9c4e486a05a85da6" title="Cleartext password of the user.">UserUpdateRequest.Password</a> indicates and OAuth only user.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in am <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a> for the created User.</dd></dl>
  <br /></td></tr>
<tr class="separator:ad2695069d164dde2b12e4fed8718726b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef9a577a9544d2da75672eb17a24b94d" id="r_aef9a577a9544d2da75672eb17a24b94d"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aef9a577a9544d2da75672eb17a24b94d">Update</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_update_request.html">UserUpdateRequest</a> model, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aef9a577a9544d2da75672eb17a24b94d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates a User.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">updateRequest</td><td>The UserUpdateRequest.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in am <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a> for the created User.</dd></dl>
  <br /></td></tr>
<tr class="separator:aef9a577a9544d2da75672eb17a24b94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a380d9c9d59e87ed6ba07d3ca8e92183a" id="r_a380d9c9d59e87ed6ba07d3ca8e92183a"><td class="memItemLeft" align="right" valign="top">static Task&lt; Dictionary&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a380d9c9d59e87ed6ba07d3ca8e92183a">GetUsers</a> (IReadOnlyList&lt; long &gt; ids, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a380d9c9d59e87ed6ba07d3ca8e92183a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the usersDataLoader.  <br /></td></tr>
<tr class="separator:a380d9c9d59e87ed6ba07d3ca8e92183a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab58b4ffe8f04c2a16349e6f9fcf66db2" id="r_ab58b4ffe8f04c2a16349e6f9fcf66db2"><td class="memItemLeft" align="right" valign="top">static async ValueTask&lt; ILookup&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_o_auth_connection.html">GraphQL.Types.OAuth.OAuthConnection</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ab58b4ffe8f04c2a16349e6f9fcf66db2">GetOAuthConnections</a> (IReadOnlyList&lt; long &gt; userIds, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ab58b4ffe8f04c2a16349e6f9fcf66db2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the oAuthConnectionsDataLoader.  <br /></td></tr>
<tr class="separator:ab58b4ffe8f04c2a16349e6f9fcf66db2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf7de52f641b4e634ee5181a8ecd6dd5" id="r_abf7de52f641b4e634ee5181a8ecd6dd5"><td class="memItemLeft" align="right" valign="top">static async ValueTask&lt; ILookup&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_oidc_connection.html">GraphQL.Types.OAuth.OidcConnection</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#abf7de52f641b4e634ee5181a8ecd6dd5">GetOidcConnections</a> (IReadOnlyList&lt; long &gt; userIds, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:abf7de52f641b4e634ee5181a8ecd6dd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the oidcConnectionsDataLoader.  <br /></td></tr>
<tr class="separator:abf7de52f641b4e634ee5181a8ecd6dd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae05b2c5d239ed788911e42c5c8e44663" id="r_ae05b2c5d239ed788911e42c5c8e44663"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae05b2c5d239ed788911e42c5c8e44663">SendUserUpdatedTopics</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> user)</td></tr>
<tr class="memdesc:ae05b2c5d239ed788911e42c5c8e44663"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send topics through the topicEventSender indicating a given <em>user</em>  was created or updated.  <br /></td></tr>
<tr class="separator:ae05b2c5d239ed788911e42c5c8e44663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9815843c51ffc0f2c650e5b13518e697" id="r_a9815843c51ffc0f2c650e5b13518e697"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_queryable.html">IQueryable</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a9815843c51ffc0f2c650e5b13518e697">Queryable</a> (bool includeJoins, bool allowSystemUser)</td></tr>
<tr class="memdesc:a9815843c51ffc0f2c650e5b13518e697"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all registered Users.  <br /></td></tr>
<tr class="separator:a9815843c51ffc0f2c650e5b13518e697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c559b133fca84003ff2a8c78da629d" id="r_aa1c559b133fca84003ff2a8c78da629d"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aa1c559b133fca84003ff2a8c78da629d">CreateNewUserFromModel</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_user_api_base.html">Api.Models.Internal.UserApiBase</a> model, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aa1c559b133fca84003ff2a8c78da629d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new User from a given <em>model</em> .  <br /></td></tr>
<tr class="separator:aa1c559b133fca84003ff2a8c78da629d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21c329441fa97014eb568f13ce0475aa" id="r_a21c329441fa97014eb568f13ce0475aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt;?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a21c329441fa97014eb568f13ce0475aa">TrySetPassword</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> dbUser, string newPassword, bool newUser)</td></tr>
<tr class="memdesc:a21c329441fa97014eb568f13ce0475aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to change the password of a given <em>dbUser</em> .  <br /></td></tr>
<tr class="separator:a21c329441fa97014eb568f13ce0475aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a74520f9973cb772dd5eac7804f86d94a" id="r_a74520f9973cb772dd5eac7804f86d94a"><td class="memItemLeft" align="right" valign="top">static ? <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a74520f9973cb772dd5eac7804f86d94a">CheckValidName</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_update_request.html">UserUpdateRequest</a> model, bool newUser)</td></tr>
<tr class="memdesc:a74520f9973cb772dd5eac7804f86d94a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a given <em>model</em>  has a valid <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_user_name.html#a74805e22cab51569d1d1aa098d62c9d3">UserName.Name</a> specified.  <br /></td></tr>
<tr class="separator:a74520f9973cb772dd5eac7804f86d94a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20a4242dfa680a08602a06dfeb54313" id="r_ab20a4242dfa680a08602a06dfeb54313"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ab20a4242dfa680a08602a06dfeb54313">BadCreateRequestChecks</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_create_request.html">UserCreateRequest</a> createRequest, bool? needZeroLengthPasswordWithOAuthConnections, [NotNullWhen(true)] out <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt;? failResponse)</td></tr>
<tr class="memdesc:ab20a4242dfa680a08602a06dfeb54313"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a <em>createRequest</em>  should return a bad request <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.  <br /></td></tr>
<tr class="separator:ab20a4242dfa680a08602a06dfeb54313"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae78d9d9f3d1c3fc4f8bc69b46e893f81" id="r_ae78d9d9f3d1c3fc4f8bc69b46e893f81"><td class="memItemLeft" align="right" valign="top">readonly IUsersDataLoader&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae78d9d9f3d1c3fc4f8bc69b46e893f81">usersDataLoader</a></td></tr>
<tr class="memdesc:ae78d9d9f3d1c3fc4f8bc69b46e893f81"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IUsersDataLoader</a> for the UserAuthority.  <br /></td></tr>
<tr class="separator:ae78d9d9f3d1c3fc4f8bc69b46e893f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8ad1a11f6c999ad5d64b9d61e19e035" id="r_af8ad1a11f6c999ad5d64b9d61e19e035"><td class="memItemLeft" align="right" valign="top">readonly IOAuthConnectionsDataLoader&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#af8ad1a11f6c999ad5d64b9d61e19e035">oAuthConnectionsDataLoader</a></td></tr>
<tr class="memdesc:af8ad1a11f6c999ad5d64b9d61e19e035"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IOAuthConnectionsDataLoader</a> for the UserAuthority.  <br /></td></tr>
<tr class="separator:af8ad1a11f6c999ad5d64b9d61e19e035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac48038ebbd25aacaae82e9a54593518b" id="r_ac48038ebbd25aacaae82e9a54593518b"><td class="memItemLeft" align="right" valign="top">readonly IOidcConnectionsDataLoader&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ac48038ebbd25aacaae82e9a54593518b">oidcConnectionsDataLoader</a></td></tr>
<tr class="memdesc:ac48038ebbd25aacaae82e9a54593518b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IOidcConnectionsDataLoader</a> for the UserAuthority.  <br /></td></tr>
<tr class="separator:ac48038ebbd25aacaae82e9a54593518b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f60af5ad50d8a4c8452adf96f75bd8" id="r_a81f60af5ad50d8a4c8452adf96f75bd8"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a81f60af5ad50d8a4c8452adf96f75bd8">systemIdentityFactory</a></td></tr>
<tr class="memdesc:a81f60af5ad50d8a4c8452adf96f75bd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISystemIdentityFactory for the UserAuthority.  <br /></td></tr>
<tr class="separator:a81f60af5ad50d8a4c8452adf96f75bd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23afb5c24b05bfeb062c18bb7c38a6fd" id="r_a23afb5c24b05bfeb062c18bb7c38a6fd"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html">IPermissionsUpdateNotifyee</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a23afb5c24b05bfeb062c18bb7c38a6fd">permissionsUpdateNotifyee</a></td></tr>
<tr class="memdesc:a23afb5c24b05bfeb062c18bb7c38a6fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IPermissionsUpdateNotifyee for the UserAuthority.  <br /></td></tr>
<tr class="separator:a23afb5c24b05bfeb062c18bb7c38a6fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad57ea79ea07db0081701dc10ffca0e3f" id="r_ad57ea79ea07db0081701dc10ffca0e3f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_cryptography_suite.html">ICryptographySuite</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad57ea79ea07db0081701dc10ffca0e3f">cryptographySuite</a></td></tr>
<tr class="memdesc:ad57ea79ea07db0081701dc10ffca0e3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ICryptographySuite for the UserAuthority.  <br /></td></tr>
<tr class="separator:ad57ea79ea07db0081701dc10ffca0e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04be03772015998cff8d7b8ee6d7e5a6" id="r_a04be03772015998cff8d7b8ee6d7e5a6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html">ISessionInvalidationTracker</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a04be03772015998cff8d7b8ee6d7e5a6">sessionInvalidationTracker</a></td></tr>
<tr class="memdesc:a04be03772015998cff8d7b8ee6d7e5a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionInvalidationTracker for the UserAuthority.  <br /></td></tr>
<tr class="separator:a04be03772015998cff8d7b8ee6d7e5a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a092b316af162758aef6289c84c885efb" id="r_a092b316af162758aef6289c84c885efb"><td class="memItemLeft" align="right" valign="top">readonly ITopicEventSender&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a092b316af162758aef6289c84c885efb">topicEventSender</a></td></tr>
<tr class="memdesc:a092b316af162758aef6289c84c885efb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ITopicEventSender</a> for the UserAuthority.  <br /></td></tr>
<tr class="separator:a092b316af162758aef6289c84c885efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9000c1eddd40169fecc6cb692ef1a647" id="r_a9000c1eddd40169fecc6cb692ef1a647"><td class="memItemLeft" align="right" valign="top">readonly IOptionsSnapshot&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a9000c1eddd40169fecc6cb692ef1a647">generalConfigurationOptions</a></td></tr>
<tr class="memdesc:a9000c1eddd40169fecc6cb692ef1a647"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IOptionsSnapshot&lt;TOptions&gt;</a> of GeneralConfiguration for the UserAuthority.  <br /></td></tr>
<tr class="separator:a9000c1eddd40169fecc6cb692ef1a647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fe81db41947acd8ccda3c67a41c3eb6" id="r_a8fe81db41947acd8ccda3c67a41c3eb6"><td class="memItemLeft" align="right" valign="top">readonly IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_security_configuration.html">SecurityConfiguration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a></td></tr>
<tr class="memdesc:a8fe81db41947acd8ccda3c67a41c3eb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IOptions&lt;TOptions&gt;</a> of SecurityConfiguration for the UserAuthority.  <br /></td></tr>
<tr class="separator:a8fe81db41947acd8ccda3c67a41c3eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html">Tgstation.Server.Host.Authority.Core.AuthorityBase</a></td></tr>
<tr class="memitem:acda85f107fe84d3ffe348ca3e348eb65 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_acda85f107fe84d3ffe348ca3e348eb65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#acda85f107fe84d3ffe348ca3e348eb65">AuthorityBase</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a> authenticationContext, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html">AuthorityBase</a> &gt; logger)</td></tr>
<tr class="memdesc:acda85f107fe84d3ffe348ca3e348eb65 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the AuthorityBase class.  <br /></td></tr>
<tr class="separator:acda85f107fe84d3ffe348ca3e348eb65 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c6b0d8eab4fc5c07bc5d2a64cb6db3 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_ab9c6b0d8eab4fc5c07bc5d2a64cb6db3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; TResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ab9c6b0d8eab4fc5c07bc5d2a64cb6db3">RateLimit&lt; TResult &gt;</a> (RateLimitExceededException rateLimitException)</td></tr>
<tr class="memdesc:ab9c6b0d8eab4fc5c07bc5d2a64cb6db3 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a HttpFailureResponse.RateLimited type <a class="el" href="class_authority_response.html">AuthorityResponse</a>.  <br /></td></tr>
<tr class="separator:ab9c6b0d8eab4fc5c07bc5d2a64cb6db3 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td colspan="2" onclick="javascript:toggleInherit('pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html">Tgstation.Server.Host.Authority.Core.AuthorityBase</a></td></tr>
<tr class="memitem:ae13097278410832e7ed9f57fb7b7e808 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_ae13097278410832e7ed9f57fb7b7e808"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; TResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ae13097278410832e7ed9f57fb7b7e808">BadRequest&lt; TResult &gt;</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a> errorCode)</td></tr>
<tr class="memdesc:ae13097278410832e7ed9f57fb7b7e808 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a HttpFailureResponse.BadRequest type AuthorityResponse&lt;TResult&gt;.  <br /></td></tr>
<tr class="separator:ae13097278410832e7ed9f57fb7b7e808 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad46c8d84636ee4f88bd8808ed095f75 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_aad46c8d84636ee4f88bd8808ed095f75"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; TResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#aad46c8d84636ee4f88bd8808ed095f75">Unauthorized&lt; TResult &gt;</a> ()</td></tr>
<tr class="memdesc:aad46c8d84636ee4f88bd8808ed095f75 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a HttpFailureResponse.Unauthorized type AuthorityResponse&lt;TResult&gt;.  <br /></td></tr>
<tr class="separator:aad46c8d84636ee4f88bd8808ed095f75 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52214f3e860b82f4b0286c5a14d754b6 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_a52214f3e860b82f4b0286c5a14d754b6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; TResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#a52214f3e860b82f4b0286c5a14d754b6">Gone&lt; TResult &gt;</a> ()</td></tr>
<tr class="memdesc:a52214f3e860b82f4b0286c5a14d754b6 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a HttpFailureResponse.Forbidden type AuthorityResponse&lt;TResult&gt;.  <br /></td></tr>
<tr class="separator:a52214f3e860b82f4b0286c5a14d754b6 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0328cfee7ca898e67b9fddcd7c5991af inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_a0328cfee7ca898e67b9fddcd7c5991af"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; TResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#a0328cfee7ca898e67b9fddcd7c5991af">Forbid&lt; TResult &gt;</a> ()</td></tr>
<tr class="memdesc:a0328cfee7ca898e67b9fddcd7c5991af inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a HttpFailureResponse.Forbidden type AuthorityResponse&lt;TResult&gt;.  <br /></td></tr>
<tr class="separator:a0328cfee7ca898e67b9fddcd7c5991af inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc8819f3ca336e071c7409bf858ead0 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_a7dc8819f3ca336e071c7409bf858ead0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; TResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#a7dc8819f3ca336e071c7409bf858ead0">NotFound&lt; TResult &gt;</a> ()</td></tr>
<tr class="memdesc:a7dc8819f3ca336e071c7409bf858ead0 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a HttpFailureResponse.NotFound type AuthorityResponse&lt;TResult&gt;.  <br /></td></tr>
<tr class="separator:a7dc8819f3ca336e071c7409bf858ead0 inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5930ae4479e9c3fbfb4195b7110b9b inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_ace5930ae4479e9c3fbfb4195b7110b9b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; TResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ace5930ae4479e9c3fbfb4195b7110b9b">Conflict&lt; TResult &gt;</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a> errorCode)</td></tr>
<tr class="memdesc:ace5930ae4479e9c3fbfb4195b7110b9b inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a HttpFailureResponse.Conflict type AuthorityResponse&lt;TResult&gt;.  <br /></td></tr>
<tr class="separator:ace5930ae4479e9c3fbfb4195b7110b9b inherit pro_static_methods_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td colspan="2" onclick="javascript:toggleInherit('properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html">Tgstation.Server.Host.Authority.Core.AuthorityBase</a></td></tr>
<tr class="memitem:a591d2451907ebf5d94444f095df3cd8d inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_a591d2451907ebf5d94444f095df3cd8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#a591d2451907ebf5d94444f095df3cd8d">AuthenticationContext</a><code> [get]</code></td></tr>
<tr class="memdesc:a591d2451907ebf5d94444f095df3cd8d inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the IAuthenticationContext for the AuthorityBase.  <br /></td></tr>
<tr class="separator:a591d2451907ebf5d94444f095df3cd8d inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e451361062ea9f18d4428bf2a578597 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_a6e451361062ea9f18d4428bf2a578597"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#a6e451361062ea9f18d4428bf2a578597">DatabaseContext</a><code> [get]</code></td></tr>
<tr class="memdesc:a6e451361062ea9f18d4428bf2a578597 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the IDatabaseContext for the AuthorityBase.  <br /></td></tr>
<tr class="separator:a6e451361062ea9f18d4428bf2a578597 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac08240a96d7175f7af6966c3922593a3 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base" id="r_ac08240a96d7175f7af6966c3922593a3"><td class="memItemLeft" align="right" valign="top">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html">AuthorityBase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ac08240a96d7175f7af6966c3922593a3">Logger</a><code> [get]</code></td></tr>
<tr class="memdesc:ac08240a96d7175f7af6966c3922593a3 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the ILogger for the AuthorityBase.  <br /></td></tr>
<tr class="separator:ac08240a96d7175f7af6966c3922593a3 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00032">32</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a64ee8ced88fbee24dfc1ba1c08ee280c" name="a64ee8ced88fbee24dfc1ba1c08ee280c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64ee8ced88fbee24dfc1ba1c08ee280c">&#9670;&#160;</a></span>UserAuthority()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a>&#160;</td>
          <td class="paramname"><em>authenticationContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td>
          <td class="paramname"><em>databaseContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html">UserAuthority</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IUsersDataLoader&#160;</td>
          <td class="paramname"><em>usersDataLoader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOAuthConnectionsDataLoader&#160;</td>
          <td class="paramname"><em>oAuthConnectionsDataLoader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOidcConnectionsDataLoader&#160;</td>
          <td class="paramname"><em>oidcConnectionsDataLoader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a>&#160;</td>
          <td class="paramname"><em>systemIdentityFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html">IPermissionsUpdateNotifyee</a>&#160;</td>
          <td class="paramname"><em>permissionsUpdateNotifyee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_cryptography_suite.html">ICryptographySuite</a>&#160;</td>
          <td class="paramname"><em>cryptographySuite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html">ISessionInvalidationTracker</a>&#160;</td>
          <td class="paramname"><em>sessionInvalidationTracker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ITopicEventSender&#160;</td>
          <td class="paramname"><em>topicEventSender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptionsSnapshot&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>generalConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_security_configuration.html">SecurityConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>securityConfigurationOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new instance of the UserAuthority class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">authenticationContext</td><td>The IAuthenticationContext to use.</td></tr>
    <tr><td class="paramname">databaseContext</td><td>The IDatabaseContext to use.</td></tr>
    <tr><td class="paramname">logger</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ILogger</a> to use.</td></tr>
    <tr><td class="paramname">usersDataLoader</td><td>The value of usersDataLoader.</td></tr>
    <tr><td class="paramname">oAuthConnectionsDataLoader</td><td>The value of oAuthConnectionsDataLoader.</td></tr>
    <tr><td class="paramname">oidcConnectionsDataLoader</td><td>The value of oidcConnectionsDataLoader.</td></tr>
    <tr><td class="paramname">systemIdentityFactory</td><td>The value of systemIdentityFactory.</td></tr>
    <tr><td class="paramname">permissionsUpdateNotifyee</td><td>The value of permissionsUpdateNotifyee.</td></tr>
    <tr><td class="paramname">cryptographySuite</td><td>The value of cryptographySuite.</td></tr>
    <tr><td class="paramname">sessionInvalidationTracker</td><td>The value of sessionInvalidationTracker.</td></tr>
    <tr><td class="paramname">topicEventSender</td><td>The value of topicEventSender.</td></tr>
    <tr><td class="paramname">generalConfigurationOptions</td><td>The value of generalConfigurationOptions.</td></tr>
    <tr><td class="paramname">securityConfigurationOptions</td><td>The value of securityConfigurationOptions.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00195">195</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  209</span>            : <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">base</a>(</div>
<div class="line"><span class="lineno">  210</span>                  authenticationContext,</div>
<div class="line"><span class="lineno">  211</span>                  databaseContext,</div>
<div class="line"><span class="lineno">  212</span>                  logger)</div>
<div class="line"><span class="lineno">  213</span>        {</div>
<div class="line"><span class="lineno">  214</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.usersDataLoader</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae78d9d9f3d1c3fc4f8bc69b46e893f81">usersDataLoader</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae78d9d9f3d1c3fc4f8bc69b46e893f81">usersDataLoader</a>));</div>
<div class="line"><span class="lineno">  215</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.oAuthConnectionsDataLoader</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#af8ad1a11f6c999ad5d64b9d61e19e035">oAuthConnectionsDataLoader</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#af8ad1a11f6c999ad5d64b9d61e19e035">oAuthConnectionsDataLoader</a>));</div>
<div class="line"><span class="lineno">  216</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.oidcConnectionsDataLoader</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ac48038ebbd25aacaae82e9a54593518b">oidcConnectionsDataLoader</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ac48038ebbd25aacaae82e9a54593518b">oidcConnectionsDataLoader</a>));</div>
<div class="line"><span class="lineno">  217</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.systemIdentityFactory</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a81f60af5ad50d8a4c8452adf96f75bd8">systemIdentityFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a81f60af5ad50d8a4c8452adf96f75bd8">systemIdentityFactory</a>));</div>
<div class="line"><span class="lineno">  218</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.permissionsUpdateNotifyee</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a23afb5c24b05bfeb062c18bb7c38a6fd">permissionsUpdateNotifyee</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a23afb5c24b05bfeb062c18bb7c38a6fd">permissionsUpdateNotifyee</a>));</div>
<div class="line"><span class="lineno">  219</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.cryptographySuite</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad57ea79ea07db0081701dc10ffca0e3f">cryptographySuite</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad57ea79ea07db0081701dc10ffca0e3f">cryptographySuite</a>));</div>
<div class="line"><span class="lineno">  220</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.sessionInvalidationTracker</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a04be03772015998cff8d7b8ee6d7e5a6">sessionInvalidationTracker</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a04be03772015998cff8d7b8ee6d7e5a6">sessionInvalidationTracker</a>));</div>
<div class="line"><span class="lineno">  221</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.topicEventSender</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a092b316af162758aef6289c84c885efb">topicEventSender</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a092b316af162758aef6289c84c885efb">topicEventSender</a>));</div>
<div class="line"><span class="lineno">  222</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.generalConfigurationOptions</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a9000c1eddd40169fecc6cb692ef1a647">generalConfigurationOptions</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a9000c1eddd40169fecc6cb692ef1a647">generalConfigurationOptions</a>));</div>
<div class="line"><span class="lineno">  223</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">this.securityConfigurationOptions</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">nameof</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a>));</div>
<div class="line"><span class="lineno">  224</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a04be03772015998cff8d7b8ee6d7e5a6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a04be03772015998cff8d7b8ee6d7e5a6">Tgstation.Server.Host.Authority.UserAuthority.sessionInvalidationTracker</a></div><div class="ttdeci">readonly ISessionInvalidationTracker sessionInvalidationTracker</div><div class="ttdoc">The ISessionInvalidationTracker for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00067">UserAuthority.cs:67</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a092b316af162758aef6289c84c885efb"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a092b316af162758aef6289c84c885efb">Tgstation.Server.Host.Authority.UserAuthority.topicEventSender</a></div><div class="ttdeci">readonly ITopicEventSender topicEventSender</div><div class="ttdoc">The ITopicEventSender for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00072">UserAuthority.cs:72</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a23afb5c24b05bfeb062c18bb7c38a6fd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a23afb5c24b05bfeb062c18bb7c38a6fd">Tgstation.Server.Host.Authority.UserAuthority.permissionsUpdateNotifyee</a></div><div class="ttdeci">readonly IPermissionsUpdateNotifyee permissionsUpdateNotifyee</div><div class="ttdoc">The IPermissionsUpdateNotifyee for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00057">UserAuthority.cs:57</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a81f60af5ad50d8a4c8452adf96f75bd8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a81f60af5ad50d8a4c8452adf96f75bd8">Tgstation.Server.Host.Authority.UserAuthority.systemIdentityFactory</a></div><div class="ttdeci">readonly ISystemIdentityFactory systemIdentityFactory</div><div class="ttdoc">The ISystemIdentityFactory for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00052">UserAuthority.cs:52</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a8fe81db41947acd8ccda3c67a41c3eb6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">Tgstation.Server.Host.Authority.UserAuthority.securityConfigurationOptions</a></div><div class="ttdeci">readonly IOptions&lt; SecurityConfiguration &gt; securityConfigurationOptions</div><div class="ttdoc">The IOptions&lt;TOptions&gt; of SecurityConfiguration for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00082">UserAuthority.cs:82</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a9000c1eddd40169fecc6cb692ef1a647"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a9000c1eddd40169fecc6cb692ef1a647">Tgstation.Server.Host.Authority.UserAuthority.generalConfigurationOptions</a></div><div class="ttdeci">readonly IOptionsSnapshot&lt; GeneralConfiguration &gt; generalConfigurationOptions</div><div class="ttdoc">The IOptionsSnapshot&lt;TOptions&gt; of GeneralConfiguration for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00077">UserAuthority.cs:77</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_ac48038ebbd25aacaae82e9a54593518b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ac48038ebbd25aacaae82e9a54593518b">Tgstation.Server.Host.Authority.UserAuthority.oidcConnectionsDataLoader</a></div><div class="ttdeci">readonly IOidcConnectionsDataLoader oidcConnectionsDataLoader</div><div class="ttdoc">The IOidcConnectionsDataLoader for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00047">UserAuthority.cs:47</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_ad57ea79ea07db0081701dc10ffca0e3f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad57ea79ea07db0081701dc10ffca0e3f">Tgstation.Server.Host.Authority.UserAuthority.cryptographySuite</a></div><div class="ttdeci">readonly ICryptographySuite cryptographySuite</div><div class="ttdoc">The ICryptographySuite for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00062">UserAuthority.cs:62</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_ae78d9d9f3d1c3fc4f8bc69b46e893f81"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae78d9d9f3d1c3fc4f8bc69b46e893f81">Tgstation.Server.Host.Authority.UserAuthority.usersDataLoader</a></div><div class="ttdeci">readonly IUsersDataLoader usersDataLoader</div><div class="ttdoc">The IUsersDataLoader for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00037">UserAuthority.cs:37</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_af8ad1a11f6c999ad5d64b9d61e19e035"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#af8ad1a11f6c999ad5d64b9d61e19e035">Tgstation.Server.Host.Authority.UserAuthority.oAuthConnectionsDataLoader</a></div><div class="ttdeci">readonly IOAuthConnectionsDataLoader oAuthConnectionsDataLoader</div><div class="ttdoc">The IOAuthConnectionsDataLoader for the UserAuthority.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00042">UserAuthority.cs:42</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.ConfigurationRights.List</a></div><div class="ttdeci">@ List</div><div class="ttdoc">User may list files if the Models.Instance allows it.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_user_authority_8cs_source.html#l00062">Tgstation.Server.Host.Authority.UserAuthority.cryptographySuite</a>, <a class="el" href="_user_authority_8cs_source.html#l00077">Tgstation.Server.Host.Authority.UserAuthority.generalConfigurationOptions</a>, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, <a class="el" href="_user_authority_8cs_source.html#l00042">Tgstation.Server.Host.Authority.UserAuthority.oAuthConnectionsDataLoader</a>, <a class="el" href="_user_authority_8cs_source.html#l00047">Tgstation.Server.Host.Authority.UserAuthority.oidcConnectionsDataLoader</a>, <a class="el" href="_user_authority_8cs_source.html#l00057">Tgstation.Server.Host.Authority.UserAuthority.permissionsUpdateNotifyee</a>, <a class="el" href="_user_authority_8cs_source.html#l00082">Tgstation.Server.Host.Authority.UserAuthority.securityConfigurationOptions</a>, <a class="el" href="_user_authority_8cs_source.html#l00067">Tgstation.Server.Host.Authority.UserAuthority.sessionInvalidationTracker</a>, <a class="el" href="_user_authority_8cs_source.html#l00052">Tgstation.Server.Host.Authority.UserAuthority.systemIdentityFactory</a>, <a class="el" href="_user_authority_8cs_source.html#l00072">Tgstation.Server.Host.Authority.UserAuthority.topicEventSender</a>, and <a class="el" href="_user_authority_8cs_source.html#l00037">Tgstation.Server.Host.Authority.UserAuthority.usersDataLoader</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab20a4242dfa680a08602a06dfeb54313" name="ab20a4242dfa680a08602a06dfeb54313"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20a4242dfa680a08602a06dfeb54313">&#9670;&#160;</a></span>BadCreateRequestChecks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool Tgstation.Server.Host.Authority.UserAuthority.BadCreateRequestChecks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_create_request.html">UserCreateRequest</a>&#160;</td>
          <td class="paramname"><em>createRequest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool?&#160;</td>
          <td class="paramname"><em>needZeroLengthPasswordWithOAuthConnections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[NotNullWhen(true)] out <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt;?&#160;</td>
          <td class="paramname"><em>failResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if a <em>createRequest</em>  should return a bad request <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">createRequest</td><td>The UserCreateRequest to check.</td></tr>
    <tr><td class="paramname">needZeroLengthPasswordWithOAuthConnections</td><td>If a zero-length <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_update_request.html#ac807c256a3a631bd9c4e486a05a85da6" title="Cleartext password of the user.">UserUpdateRequest.Password</a> indicates and OAuth only user.</td></tr>
    <tr><td class="paramname">failResponse</td><td>The output failing <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>, if any.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">true</a></code> if checks failed and <em>failResponse</em>  was populated, <code>false</code> otherwise.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00233">233</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  237</span>        {</div>
<div class="line"><span class="lineno">  238</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.OAuthConnections?.Any(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> == <span class="keyword">null</span>) == <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  239</span>            {</div>
<div class="line"><span class="lineno">  240</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.ModelValidationFailure);</div>
<div class="line"><span class="lineno">  241</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  242</span>            }</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasNonNullPassword</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest.Password</a> != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  245</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasNonNullSystemIdentifier</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest.SystemIdentifier</a> != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  246</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasOAuthConnections</a> = (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.OAuthConnections?.Count &gt; 0) == <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  247</span>            <span class="keywordflow">if</span> ((<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasNonNullPassword</a> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasNonNullSystemIdentifier</a>)</div>
<div class="line"><span class="lineno">  248</span>                || (!<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasNonNullPassword</a> &amp;&amp; !<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasNonNullSystemIdentifier</a> &amp;&amp; !<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasOAuthConnections</a>))</div>
<div class="line"><span class="lineno">  249</span>            {</div>
<div class="line"><span class="lineno">  250</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserMismatchPasswordSid);</div>
<div class="line"><span class="lineno">  251</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  252</span>            }</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasZeroLengthPassword</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.Password?.Length == 0;</div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">needZeroLengthPasswordWithOAuthConnections</a>.HasValue)</div>
<div class="line"><span class="lineno">  256</span>            {</div>
<div class="line"><span class="lineno">  257</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">needZeroLengthPasswordWithOAuthConnections</a>.Value)</div>
<div class="line"><span class="lineno">  258</span>                {</div>
<div class="line"><span class="lineno">  259</span>                    <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.OAuthConnections == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  260</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">InvalidOperationException</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">$</a><span class="stringliteral">&quot;Expected {nameof(UserCreateRequest.OAuthConnections)} to be set here!&quot;</span>);</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>                    <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.OAuthConnections.Count == 0)</div>
<div class="line"><span class="lineno">  263</span>                    {</div>
<div class="line"><span class="lineno">  264</span>                        <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.ModelValidationFailure);</div>
<div class="line"><span class="lineno">  265</span>                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  266</span>                    }</div>
<div class="line"><span class="lineno">  267</span>                }</div>
<div class="line"><span class="lineno">  268</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasZeroLengthPassword</a>)</div>
<div class="line"><span class="lineno">  269</span>                {</div>
<div class="line"><span class="lineno">  270</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.ModelValidationFailure);</div>
<div class="line"><span class="lineno">  271</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  272</span>                }</div>
<div class="line"><span class="lineno">  273</span>            }</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.Group != <span class="keyword">null</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.PermissionSet != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  276</span>            {</div>
<div class="line"><span class="lineno">  277</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserGroupAndPermissionSet);</div>
<div class="line"><span class="lineno">  278</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  279</span>            }</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest.Name</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.Name?.Trim();</div>
<div class="line"><span class="lineno">  282</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.Name?.Length == 0)</div>
<div class="line"><span class="lineno">  283</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest.Name</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">if</span> (!(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.Name == <span class="keyword">null</span> ^ <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.SystemIdentifier == <span class="keyword">null</span>))</div>
<div class="line"><span class="lineno">  286</span>            {</div>
<div class="line"><span class="lineno">  287</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserMismatchNameSid);</div>
<div class="line"><span class="lineno">  288</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  289</span>            }</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a74520f9973cb772dd5eac7804f86d94a">CheckValidName</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  292</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a> != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  293</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a74520f9973cb772dd5eac7804f86d94a"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a74520f9973cb772dd5eac7804f86d94a">Tgstation.Server.Host.Authority.UserAuthority.CheckValidName</a></div><div class="ttdeci">static ? AuthorityResponse&lt; User &gt; CheckValidName(UserUpdateRequest model, bool newUser)</div><div class="ttdoc">Check if a given model  has a valid UserName.Name specified.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00167">UserAuthority.cs:167</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a1a6adb59dd51244efabf4e548e7075c8"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">Tgstation.Server.Api.Models.ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Types of Response.ErrorMessageResponses that the API may return.</div><div class="ttdef"><b>Definition</b> <a href="_error_code_8cs_source.html#l00011">ErrorCode.cs:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_user_authority_8cs_source.html#l00167">Tgstation.Server.Host.Authority.UserAuthority.CheckValidName()</a>, and <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00341">Tgstation.Server.Host.Authority.UserAuthority.Create()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ab20a4242dfa680a08602a06dfeb54313_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ab20a4242dfa680a08602a06dfeb54313_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ab20a4242dfa680a08602a06dfeb54313_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ab20a4242dfa680a08602a06dfeb54313_cgraph">
<area shape="rect" title="Checks if a createRequest &#160;should return a bad request AuthorityResponse&lt;TResult&gt;." alt="" coords="5,5,262,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a74520f9973cb772dd5eac7804f86d94a" title="Check if a given model &#160;has a valid UserName.Name specified." alt="" coords="310,5,514,46"/>
<area shape="poly" title=" " alt="" coords="262,23,294,23,294,28,262,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ab20a4242dfa680a08602a06dfeb54313_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ab20a4242dfa680a08602a06dfeb54313_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ab20a4242dfa680a08602a06dfeb54313_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ab20a4242dfa680a08602a06dfeb54313_icgraph">
<area shape="rect" title="Checks if a createRequest &#160;should return a bad request AuthorityResponse&lt;TResult&gt;." alt="" coords="258,5,514,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad2695069d164dde2b12e4fed8718726b" title="Creates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,5,210,46"/>
<area shape="poly" title=" " alt="" coords="242,28,210,28,210,23,242,23"/>
</map>
</div>

</div>
</div>
<a id="a74520f9973cb772dd5eac7804f86d94a" name="a74520f9973cb772dd5eac7804f86d94a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74520f9973cb772dd5eac7804f86d94a">&#9670;&#160;</a></span>CheckValidName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ? <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; Tgstation.Server.Host.Authority.UserAuthority.CheckValidName </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_update_request.html">UserUpdateRequest</a>&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>newUser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a given <em>model</em>  has a valid <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_user_name.html#a74805e22cab51569d1d1aa098d62c9d3">UserName.Name</a> specified. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>The UserUpdateRequest to check.</td></tr>
    <tr><td class="paramname">newUser</td><td>If this is a new User.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">null</a></code> if <em>model</em>  is valid, an <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a> errored otherwise.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00167">167</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  168</span>        {</div>
<div class="line"><span class="lineno">  169</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">userInvalidWithNullName</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">newUser</a> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model.Name</a> == <span class="keyword">null</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model.SystemIdentifier</a> == <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  170</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">userInvalidWithNullName</a> || (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name != <span class="keyword">null</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">String</a>.IsNullOrWhiteSpace(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name)))</div>
<div class="line"><span class="lineno">  171</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserMissingName);</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model.Name</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name?.Trim();</div>
<div class="line"><span class="lineno">  174</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name != <span class="keyword">null</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name.Contains(<span class="charliteral">&#39;:&#39;</span>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">StringComparison</a>.InvariantCulture))</div>
<div class="line"><span class="lineno">  175</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserColonInName);</div>
<div class="line"><span class="lineno">  176</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  177</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00233">Tgstation.Server.Host.Authority.UserAuthority.BadCreateRequestChecks()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00408">Tgstation.Server.Host.Authority.UserAuthority.Update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a74520f9973cb772dd5eac7804f86d94a_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a74520f9973cb772dd5eac7804f86d94a_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a74520f9973cb772dd5eac7804f86d94a_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a74520f9973cb772dd5eac7804f86d94a_icgraph">
<area shape="rect" title="Check if a given model &#160;has a valid UserName.Name specified." alt="" coords="562,39,766,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ab20a4242dfa680a08602a06dfeb54313" title="Checks if a createRequest &#160;should return a bad request AuthorityResponse&lt;TResult&gt;." alt="" coords="258,5,514,46"/>
<area shape="poly" title=" " alt="" coords="546,48,514,44,515,38,547,42"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aef9a577a9544d2da75672eb17a24b94d" title="Updates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="284,71,488,111"/>
<area shape="poly" title=" " alt="" coords="546,75,489,82,488,77,546,70"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad2695069d164dde2b12e4fed8718726b" title="Creates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,5,210,46"/>
<area shape="poly" title=" " alt="" coords="242,28,210,28,210,23,242,23"/>
</map>
</div>

</div>
</div>
<a id="ad2695069d164dde2b12e4fed8718726b" name="ad2695069d164dde2b12e4fed8718726b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2695069d164dde2b12e4fed8718726b">&#9670;&#160;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.Create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_create_request.html">UserCreateRequest</a>&#160;</td>
          <td class="paramname"><em>createRequest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool?&#160;</td>
          <td class="paramname"><em>needZeroLengthPasswordWithOAuthConnections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a User.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">createRequest</td><td>The UserCreateRequest.</td></tr>
    <tr><td class="paramname">needZeroLengthPasswordWithOAuthConnections</td><td>If a zero-length <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_update_request.html#ac807c256a3a631bd9c4e486a05a85da6" title="Cleartext password of the user.">UserUpdateRequest.Password</a> indicates and OAuth only user.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in am <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a> for the created User.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html#af2bdce2372512b826b56ecd1a2fad89c">Tgstation.Server.Host.Authority.IUserAuthority</a>.</p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00341">341</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  345</span>        {</div>
<div class="line"><span class="lineno">  346</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>.ThrowIfNull(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>);</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ab20a4242dfa680a08602a06dfeb54313">BadCreateRequestChecks</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">needZeroLengthPasswordWithOAuthConnections</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">out</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a>))</div>
<div class="line"><span class="lineno">  349</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">failResponse</a>;</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">totalUsers</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  352</span>                .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad1c33807b7a75d05d0004e024416e17f">Users</a></div>
<div class="line"><span class="lineno">  353</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  354</span>                .CountAsync(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  355</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">totalUsers</a> &gt;= <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a9000c1eddd40169fecc6cb692ef1a647">generalConfigurationOptions</a>.Value.UserLimit)</div>
<div class="line"><span class="lineno">  356</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Conflict&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserLimitReached);</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aa1c559b133fca84003ff2a8c78da629d">CreateNewUserFromModel</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  359</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  360</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Gone&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.SystemIdentifier != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  363</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  364</span>                {</div>
<div class="line"><span class="lineno">  365</span>                    <span class="keyword">using </span><a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">sysIdentity</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a81f60af5ad50d8a4c8452adf96f75bd8">systemIdentityFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a1484aa5361ad7005e1d53606b17f4e9e">CreateSystemIdentity</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  366</span>                    <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">sysIdentity</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  367</span>                        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Gone&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  368</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser.Name</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">sysIdentity</a>.Username;</div>
<div class="line"><span class="lineno">  369</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser.SystemIdentifier</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">sysIdentity</a>.Uid;</div>
<div class="line"><span class="lineno">  370</span>                }</div>
<div class="line"><span class="lineno">  371</span>                <span class="keywordflow">catch</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">NotImplementedException</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ex</a>)</div>
<div class="line"><span class="lineno">  372</span>                {</div>
<div class="line"><span class="lineno">  373</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ac08240a96d7175f7af6966c3922593a3">Logger</a>.LogTrace(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ex</a>, <span class="stringliteral">&quot;System identities not implemented!&quot;</span>);</div>
<div class="line"><span class="lineno">  374</span>                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">AuthorityResponse&lt;User&gt;</a>(</div>
<div class="line"><span class="lineno">  375</span>                        <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.RequiresPosixSystemIdentity),</div>
<div class="line"><span class="lineno">  376</span>                        <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core.html#a0014d9d38ddef55b17fc52f0e4bd071c">HttpFailureResponse</a>.NotImplemented);</div>
<div class="line"><span class="lineno">  377</span>                }</div>
<div class="line"><span class="lineno">  378</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  379</span>            {</div>
<div class="line"><span class="lineno">  380</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasZeroLengthPassword</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.Password?.Length == 0;</div>
<div class="line"><span class="lineno">  381</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasOAuthConnections</a> = (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.OAuthConnections?.Count &gt; 0) == <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>                <span class="comment">// special case allow PasswordHash to be null by setting Password to &quot;&quot; if OAuthConnections are set</span></div>
<div class="line"><span class="lineno">  384</span>                <span class="keywordflow">if</span> (!(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">needZeroLengthPasswordWithOAuthConnections</a> != <span class="keyword">false</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasZeroLengthPassword</a> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">hasOAuthConnections</a>))</div>
<div class="line"><span class="lineno">  385</span>                {</div>
<div class="line"><span class="lineno">  386</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">result</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a21c329441fa97014eb568f13ce0475aa">TrySetPassword</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">createRequest</a>.Password!, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  387</span>                    <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">result</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  388</span>                        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">result</a>;</div>
<div class="line"><span class="lineno">  389</span>                }</div>
<div class="line"><span class="lineno">  390</span>            }</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser.CanonicalName</a> = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">CanonicalizeName</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>.Name!);</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad1c33807b7a75d05d0004e024416e17f">Users</a>.Add(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>);</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ac08240a96d7175f7af6966c3922593a3">Logger</a>.LogInformation(<span class="stringliteral">&quot;Created new user {name} ({id})&quot;</span>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>.Name, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>.Id);</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae05b2c5d239ed788911e42c5c8e44663">SendUserUpdatedTopics</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>);</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">AuthorityResponse&lt;User&gt;</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core.html#af84b8352b6700778fe097b1b28eb374c">HttpSuccessResponse</a>.Created);</div>
<div class="line"><span class="lineno">  403</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">Tgstation.Server.Api.Models.Response.ErrorMessageResponse</a></div><div class="ttdoc">Represents an error message returned by the server.</div><div class="ttdef"><b>Definition</b> <a href="_error_message_response_8cs_source.html#l00011">ErrorMessageResponse.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base_html_ac08240a96d7175f7af6966c3922593a3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ac08240a96d7175f7af6966c3922593a3">Tgstation.Server.Host.Authority.Core.AuthorityBase.Logger</a></div><div class="ttdeci">ILogger&lt; AuthorityBase &gt; Logger</div><div class="ttdoc">Gets the ILogger for the AuthorityBase.</div><div class="ttdef"><b>Definition</b> <a href="_authority_base_8cs_source.html#l00033">AuthorityBase.cs:33</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a21c329441fa97014eb568f13ce0475aa"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a21c329441fa97014eb568f13ce0475aa">Tgstation.Server.Host.Authority.UserAuthority.TrySetPassword</a></div><div class="ttdeci">AuthorityResponse&lt; User &gt;? TrySetPassword(User dbUser, string newPassword, bool newUser)</div><div class="ttdoc">Attempt to change the password of a given dbUser .</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00712">UserAuthority.cs:712</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_aa1c559b133fca84003ff2a8c78da629d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aa1c559b133fca84003ff2a8c78da629d">Tgstation.Server.Host.Authority.UserAuthority.CreateNewUserFromModel</a></div><div class="ttdeci">async ValueTask&lt; User &gt; CreateNewUserFromModel(Api.Models.Internal.UserApiBase model, CancellationToken cancellationToken)</div><div class="ttdoc">Creates a new User from a given model .</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00657">UserAuthority.cs:657</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_ab20a4242dfa680a08602a06dfeb54313"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ab20a4242dfa680a08602a06dfeb54313">Tgstation.Server.Host.Authority.UserAuthority.BadCreateRequestChecks</a></div><div class="ttdeci">static bool BadCreateRequestChecks(UserCreateRequest createRequest, bool? needZeroLengthPasswordWithOAuthConnections, [NotNullWhen(true)] out AuthorityResponse&lt; User &gt;? failResponse)</div><div class="ttdoc">Checks if a createRequest  should return a bad request AuthorityResponse&lt;TResult&gt;.</div><div class="ttdef"><b>Definition</b> <a href="_user_authority_8cs_source.html#l00233">UserAuthority.cs:233</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_ae05b2c5d239ed788911e42c5c8e44663"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae05b2c5d239ed788911e42c5c8e44663">Tgstation.Server.Host.Authority.UserAuthority.SendUserUpdatedTopics</a></div><div class="ttdeci">ValueTask SendUserUpdatedTopics(User user)</div><div class="ttdoc">Send topics through the topicEventSender indicating a given user  was created or updated.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">Tgstation.Server.Host.Database.DatabaseContext</a></div><div class="ttdoc">Backend abstract implementation of IDatabaseContext.</div><div class="ttdef"><b>Definition</b> <a href="_database_context_8cs_source.html#l00024">DatabaseContext.cs:25</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_ac2e88d53bf1b6ac87d175d83ed39da7c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save</a></div><div class="ttdeci">Task Save(CancellationToken cancellationToken)</div><div class="ttdoc">Saves changes made to the IDatabaseContext.A Task representing the running operation.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_ad1c33807b7a75d05d0004e024416e17f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad1c33807b7a75d05d0004e024416e17f">Tgstation.Server.Host.Database.DatabaseContext.Users</a></div><div class="ttdeci">DbSet&lt; User &gt; Users</div><div class="ttdoc">The Users in the DatabaseContext.</div><div class="ttdef"><b>Definition</b> <a href="_database_context_8cs_source.html#l00029">DatabaseContext.cs:29</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_user_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">Tgstation.Server.Host.Models.User</a></div><div class="ttdef"><b>Definition</b> <a href="_models_2_user_8cs_source.html#l00013">User.cs:17</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_user_html_a4b139051d0d6db501e37590fa1eabf16"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">Tgstation.Server.Host.Models.User.CanonicalizeName</a></div><div class="ttdeci">static string CanonicalizeName(string name)</div><div class="ttdoc">Change a UserName.Name into a CanonicalName.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory_html_a1484aa5361ad7005e1d53606b17f4e9e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a1484aa5361ad7005e1d53606b17f4e9e">Tgstation.Server.Host.Security.ISystemIdentityFactory.CreateSystemIdentity</a></div><div class="ttdeci">Task&lt; ISystemIdentity?&gt; CreateSystemIdentity(User user, CancellationToken cancellationToken)</div><div class="ttdoc">Create a ISystemIdentity for a given user .</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_html_a0014d9d38ddef55b17fc52f0e4bd071c"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core.html#a0014d9d38ddef55b17fc52f0e4bd071c">Tgstation.Server.Host.Authority.Core.HttpFailureResponse</a></div><div class="ttdeci">HttpFailureResponse</div><div class="ttdoc">Indicates the type of HTTP status code an failing AuthorityResponse should generate.</div><div class="ttdef"><b>Definition</b> <a href="_http_failure_response_8cs_source.html#l00006">HttpFailureResponse.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_html_af84b8352b6700778fe097b1b28eb374c"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core.html#af84b8352b6700778fe097b1b28eb374c">Tgstation.Server.Host.Authority.Core.HttpSuccessResponse</a></div><div class="ttdeci">HttpSuccessResponse</div><div class="ttdoc">Indicates the type of HTTP status code a successful AuthorityResponse&lt;TResult&gt; should generate.</div><div class="ttdef"><b>Definition</b> <a href="_http_success_response_8cs_source.html#l00006">HttpSuccessResponse.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_user_authority_8cs_source.html#l00233">Tgstation.Server.Host.Authority.UserAuthority.BadCreateRequestChecks()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">Tgstation.Server.Host.Models.User.CanonicalizeName()</a>, <a class="el" href="_user_authority_8cs_source.html#l00657">Tgstation.Server.Host.Authority.UserAuthority.CreateNewUserFromModel()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a1484aa5361ad7005e1d53606b17f4e9e">Tgstation.Server.Host.Security.ISystemIdentityFactory.CreateSystemIdentity()</a>, <a class="el" href="_user_authority_8cs_source.html#l00077">Tgstation.Server.Host.Authority.UserAuthority.generalConfigurationOptions</a>, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, <a class="el" href="_authority_base_8cs_source.html#l00033">Tgstation.Server.Host.Authority.Core.AuthorityBase.Logger</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae05b2c5d239ed788911e42c5c8e44663">Tgstation.Server.Host.Authority.UserAuthority.SendUserUpdatedTopics()</a>, <a class="el" href="_user_authority_8cs_source.html#l00052">Tgstation.Server.Host.Authority.UserAuthority.systemIdentityFactory</a>, <a class="el" href="_user_authority_8cs_source.html#l00712">Tgstation.Server.Host.Authority.UserAuthority.TrySetPassword()</a>, and <a class="el" href="_database_context_8cs_source.html#l00029">Tgstation.Server.Host.Database.DatabaseContext.Users</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ad2695069d164dde2b12e4fed8718726b_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ad2695069d164dde2b12e4fed8718726b_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ad2695069d164dde2b12e4fed8718726b_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ad2695069d164dde2b12e4fed8718726b_cgraph">
<area shape="rect" title="Creates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,208,210,249"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ab20a4242dfa680a08602a06dfeb54313" title="Checks if a createRequest &#160;should return a bad request AuthorityResponse&lt;TResult&gt;." alt="" coords="260,5,517,46"/>
<area shape="poly" title=" " alt="" coords="119,206,141,173,172,133,211,92,256,57,268,50,270,55,259,61,215,95,176,136,145,176,123,209"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16" title="Change a UserName.Name into a CanonicalName." alt="" coords="291,71,486,111"/>
<area shape="poly" title=" " alt="" coords="131,205,186,163,256,122,275,114,277,119,259,127,189,168,135,209"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aa1c559b133fca84003ff2a8c78da629d" title="Creates a new User from a given model ." alt="" coords="258,136,519,177"/>
<area shape="poly" title=" " alt="" coords="185,205,257,186,286,178,287,184,258,191,186,210"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a1484aa5361ad7005e1d53606b17f4e9e" title="Create a ISystemIdentity for a given user ." alt="" coords="269,201,508,256"/>
<area shape="poly" title=" " alt="" coords="210,226,253,226,253,231,210,231"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c" title="Saves changes made to the IDatabaseContext.A Task representing the running operation." alt="" coords="284,280,493,321"/>
<area shape="poly" title=" " alt="" coords="186,247,258,266,287,273,286,278,257,271,185,252"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae05b2c5d239ed788911e42c5c8e44663" title="Send topics through the topicEventSender indicating a given user &#160;was created or updated." alt="" coords="264,345,513,386"/>
<area shape="poly" title=" " alt="" coords="135,247,189,289,259,330,277,337,275,342,256,335,186,294,131,251"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a21c329441fa97014eb568f13ce0475aa" title="Attempt to change the password of a given dbUser ." alt="" coords="286,411,491,451"/>
<area shape="poly" title=" " alt="" coords="123,248,145,281,176,321,215,361,259,395,273,403,270,408,256,400,211,365,172,324,141,284,119,251"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a74520f9973cb772dd5eac7804f86d94a" title="Check if a given model &#160;has a valid UserName.Name specified." alt="" coords="571,5,775,46"/>
<area shape="poly" title=" " alt="" coords="517,23,555,23,555,28,517,28"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a56e8c3826bd0907cf7aeb18aa468610b" title="Gets the GraphQL.Types.OAuth.OAuthConnections for the User with a given userId .A ValueTask&lt;TResult&gt; ..." alt="" coords="567,104,779,145"/>
<area shape="poly" title=" " alt="" coords="519,139,551,135,552,141,520,144"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a473ac45404cca37f783b4575ee401b80" title="Gets the GraphQL.Types.OAuth.OidcConnections for the User with a given userId .A ValueTask&lt;TResult&gt; r..." alt="" coords="571,169,775,210"/>
<area shape="poly" title=" " alt="" coords="520,169,556,173,555,179,519,174"/>
</map>
</div>

</div>
</div>
<a id="aa1c559b133fca84003ff2a8c78da629d" name="aa1c559b133fca84003ff2a8c78da629d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1c559b133fca84003ff2a8c78da629d">&#9670;&#160;</a></span>CreateNewUserFromModel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; Tgstation.Server.Host.Authority.UserAuthority.CreateNewUserFromModel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_user_api_base.html">Api::Models::Internal::UserApiBase</a>&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new User from a given <em>model</em> . </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>The Api.Models.Internal.UserApiBase to use as a template.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in a new User on success, <code><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">null</a></code> if the requested UserGroup did not exist.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00657">657</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  658</span>        {</div>
<div class="line"><span class="lineno">  659</span>            Models.PermissionSet? permissionSet = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  660</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user_group.html">UserGroup</a>? <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">group</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  661</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Group != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  662</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">group</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  663</span>                    .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#afdbe72c568fb4a8578a1dc965b34c9fa">Groups</a></div>
<div class="line"><span class="lineno">  664</span>                    .AsQueryable()</div>
<div class="line"><span class="lineno">  665</span>                    .Where(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Id == <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Group.Id)</div>
<div class="line"><span class="lineno">  666</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.PermissionSet)</div>
<div class="line"><span class="lineno">  667</span>                    .FirstOrDefaultAsync(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  668</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  669</span>                permissionSet = <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Models.PermissionSet</a></div>
<div class="line"><span class="lineno">  670</span>                {</div>
<div class="line"><span class="lineno">  671</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.PermissionSet?.AdministrationRights ?? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>.None,</div>
<div class="line"><span class="lineno">  672</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.PermissionSet?.InstanceManagerRights ?? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.None,</div>
<div class="line"><span class="lineno">  673</span>                };</div>
<div class="line"><span class="lineno">  674</span> </div>
<div class="line"><span class="lineno">  675</span>            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a></div>
<div class="line"><span class="lineno">  676</span>            {</div>
<div class="line"><span class="lineno">  677</span>                CreatedAt = DateTimeOffset.UtcNow,</div>
<div class="line"><span class="lineno">  678</span>                CreatedBy = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#a0846ac9679599a99923987863edb0d5c">User</a>,</div>
<div class="line"><span class="lineno">  679</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_host.html#a71712cdd4f38be5482e1d08905c0c308a00d23a76e43b46dae9ec7aa9dcbebb32">Enabled</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model.Enabled</a> ?? <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  680</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html">PermissionSet</a> = permissionSet,</div>
<div class="line"><span class="lineno">  681</span>                Group = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">group</a>,</div>
<div class="line"><span class="lineno">  682</span>                Name = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name,</div>
<div class="line"><span class="lineno">  683</span>                SystemIdentifier = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.SystemIdentifier,</div>
<div class="line"><span class="lineno">  684</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a56e8c3826bd0907cf7aeb18aa468610b">OAuthConnections</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a></div>
<div class="line"><span class="lineno">  685</span>                    .OAuthConnections</div>
<div class="line"><span class="lineno">  686</span>                    ?.Select(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <span class="keyword">new</span> Models.OAuthConnection</div>
<div class="line"><span class="lineno">  687</span>                    {</div>
<div class="line"><span class="lineno">  688</span>                        Provider = x.Provider,</div>
<div class="line"><span class="lineno">  689</span>                        ExternalUserId = x.ExternalUserId,</div>
<div class="line"><span class="lineno">  690</span>                    })</div>
<div class="line"><span class="lineno">  691</span>                    .ToList()</div>
<div class="line"><span class="lineno">  692</span>                    ?? <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">List</a>&lt;Models.OAuthConnection&gt;(),</div>
<div class="line"><span class="lineno">  693</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a473ac45404cca37f783b4575ee401b80">OidcConnections</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a></div>
<div class="line"><span class="lineno">  694</span>                    .<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a473ac45404cca37f783b4575ee401b80">OidcConnections</a></div>
<div class="line"><span class="lineno">  695</span>                    ?.<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Select</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <span class="keyword">new</span> Models.OidcConnection</div>
<div class="line"><span class="lineno">  696</span>                    {</div>
<div class="line"><span class="lineno">  697</span>                        SchemeKey = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.SchemeKey,</div>
<div class="line"><span class="lineno">  698</span>                        ExternalUserId = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.ExternalUserId,</div>
<div class="line"><span class="lineno">  699</span>                    })</div>
<div class="line"><span class="lineno">  700</span>                    .<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ToList</a>()</div>
<div class="line"><span class="lineno">  701</span>                    ?? <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">List</a>&lt;Models.OidcConnection&gt;(),</div>
<div class="line"><span class="lineno">  702</span>            };</div>
<div class="line"><span class="lineno">  703</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html">Tgstation.Server.Api.Models.PermissionSet</a></div><div class="ttdoc">Represents a set of server permissions.</div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00010">PermissionSet.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a473ac45404cca37f783b4575ee401b80"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a473ac45404cca37f783b4575ee401b80">Tgstation.Server.Host.Authority.UserAuthority.OidcConnections</a></div><div class="ttdeci">async ValueTask&lt; AuthorityResponse&lt; GraphQL.Types.OAuth.OidcConnection[]&gt; &gt; OidcConnections(long userId, CancellationToken cancellationToken)</div><div class="ttdoc">Gets the GraphQL.Types.OAuth.OidcConnections for the User with a given userId .A ValueTask&lt;TResult&gt; r...</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a56e8c3826bd0907cf7aeb18aa468610b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a56e8c3826bd0907cf7aeb18aa468610b">Tgstation.Server.Host.Authority.UserAuthority.OAuthConnections</a></div><div class="ttdeci">async ValueTask&lt; AuthorityResponse&lt; GraphQL.Types.OAuth.OAuthConnection[]&gt; &gt; OAuthConnections(long userId, CancellationToken cancellationToken)</div><div class="ttdoc">Gets the GraphQL.Types.OAuth.OAuthConnections for the User with a given userId .A ValueTask&lt;TResult&gt; ...</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_afdbe72c568fb4a8578a1dc965b34c9fa"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#afdbe72c568fb4a8578a1dc965b34c9fa">Tgstation.Server.Host.Database.DatabaseContext.Groups</a></div><div class="ttdeci">DbSet&lt; UserGroup &gt; Groups</div><div class="ttdoc">The UserGroups in the DatabaseContext.</div><div class="ttdef"><b>Definition</b> <a href="_database_context_8cs_source.html#l00114">DatabaseContext.cs:114</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_user_group_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user_group.html">Tgstation.Server.Host.Models.UserGroup</a></div><div class="ttdoc">Represents a group of Users.</div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_host_2_models_2_user_group_8cs_source.html#l00015">UserGroup.cs:16</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">Tgstation.Server.Host.Security.AuthenticationContext</a></div><div class="ttdef"><b>Definition</b> <a href="_authentication_context_8cs_source.html#l00010">AuthenticationContext.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context_html_a0846ac9679599a99923987863edb0d5c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#a0846ac9679599a99923987863edb0d5c">Tgstation.Server.Host.Security.AuthenticationContext.User</a></div><div class="ttdeci">User User</div><div class="ttdoc">The authenticated user.</div><div class="ttdef"><b>Definition</b> <a href="_authentication_context_8cs_source.html#l00016">AuthenticationContext.cs:16</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_af199a84ed6fe6ca557db9de91070ad79"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">Tgstation.Server.Api.Rights.InstanceManagerRights</a></div><div class="ttdeci">InstanceManagerRights</div><div class="ttdoc">Rights for managing Models.Instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_rights_8cs_source.html#l00009">InstanceManagerRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_affda1440f9c5e2dfcca65138d2f89a21"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">Tgstation.Server.Api.Rights.AdministrationRights</a></div><div class="ttdeci">AdministrationRights</div><div class="ttdoc">Administration rights for the server.</div><div class="ttdef"><b>Definition</b> <a href="_administration_rights_8cs_source.html#l00009">AdministrationRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_html_a71712cdd4f38be5482e1d08905c0c308a00d23a76e43b46dae9ec7aa9dcbebb32"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host.html#a71712cdd4f38be5482e1d08905c0c308a00d23a76e43b46dae9ec7aa9dcbebb32">Tgstation.Server.Host.OAuthGatewayStatus.Enabled</a></div><div class="ttdeci">@ Enabled</div><div class="ttdoc">The OAuth Gateway is enabled.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00024">Tgstation.Server.Api.Models.PermissionSet.AdministrationRights</a>, <a class="el" href="namespace_tgstation_1_1_server_1_1_api.html#a622da263c0ca2e2060d2daf329c2c2bca72664dc0959f3b0c04891f8c7046a9f3">Tgstation.Server.Api.Api</a>, <a class="el" href="namespace_tgstation_1_1_server_1_1_host.html#a71712cdd4f38be5482e1d08905c0c308a00d23a76e43b46dae9ec7aa9dcbebb32">Tgstation.Server.Host.Enabled</a>, <a class="el" href="_database_context_8cs_source.html#l00114">Tgstation.Server.Host.Database.DatabaseContext.Groups</a>, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a56e8c3826bd0907cf7aeb18aa468610b">Tgstation.Server.Host.Authority.UserAuthority.OAuthConnections()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a473ac45404cca37f783b4575ee401b80">Tgstation.Server.Host.Authority.UserAuthority.OidcConnections()</a>, and <a class="el" href="_authentication_context_8cs_source.html#l00016">Tgstation.Server.Host.Security.AuthenticationContext.User</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00341">Tgstation.Server.Host.Authority.UserAuthority.Create()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aa1c559b133fca84003ff2a8c78da629d_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aa1c559b133fca84003ff2a8c78da629d_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aa1c559b133fca84003ff2a8c78da629d_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aa1c559b133fca84003ff2a8c78da629d_cgraph">
<area shape="rect" title="Creates a new User from a given model ." alt="" coords="5,39,267,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a56e8c3826bd0907cf7aeb18aa468610b" title="Gets the GraphQL.Types.OAuth.OAuthConnections for the User with a given userId .A ValueTask&lt;TResult&gt; ..." alt="" coords="315,5,527,46"/>
<area shape="poly" title=" " alt="" coords="267,41,299,37,300,42,268,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a473ac45404cca37f783b4575ee401b80" title="Gets the GraphQL.Types.OAuth.OidcConnections for the User with a given userId .A ValueTask&lt;TResult&gt; r..." alt="" coords="319,71,523,111"/>
<area shape="poly" title=" " alt="" coords="268,71,304,75,303,80,267,76"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aa1c559b133fca84003ff2a8c78da629d_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aa1c559b133fca84003ff2a8c78da629d_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aa1c559b133fca84003ff2a8c78da629d_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aa1c559b133fca84003ff2a8c78da629d_icgraph">
<area shape="rect" title="Creates a new User from a given model ." alt="" coords="258,5,519,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad2695069d164dde2b12e4fed8718726b" title="Creates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,5,210,46"/>
<area shape="poly" title=" " alt="" coords="242,28,210,28,210,23,242,23"/>
</map>
</div>

</div>
</div>
<a id="a35ad3c9eb6b23b7d832ed209e604454c" name="a35ad3c9eb6b23b7d832ed209e604454c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35ad3c9eb6b23b7d832ed209e604454c">&#9670;&#160;</a></span>GetId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.GetId </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeJoins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowSystemUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the User with a given <em>id</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> of the User.</td></tr>
    <tr><td class="paramname">includeJoins</td><td>If related entities should be loaded.</td></tr>
    <tr><td class="paramname">allowSystemUser</td><td>If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a2e68345f5d52c8ba64dca5ec061d029d" title="Username used when creating jobs automatically.">User.TgsSystemUserName</a> may be returned.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in a User <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html#acbb74735fd8efb00610a25a4d1478272">Tgstation.Server.Host.Authority.IUserAuthority</a>.</p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00300">300</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  301</span>        {</div>
<div class="line"><span class="lineno">  302</span>            <span class="keywordflow">if</span> (<span class="keywordtype">id</span> != <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#a0846ac9679599a99923987863edb0d5c">User</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a> &amp;&amp; !((<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>)<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7">GetRight</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">RightsType</a>.Administration)).HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>.ReadUsers))</div>
<div class="line"><span class="lineno">  303</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Forbid&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>? user;</div>
<div class="line"><span class="lineno">  306</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">includeJoins</a>)</div>
<div class="line"><span class="lineno">  307</span>            {</div>
<div class="line"><span class="lineno">  308</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">queryable</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a92eacd30b3df017b7a45f854849d8368">Queryable</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>                user = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">queryable</a>.FirstOrDefaultAsync(</div>
<div class="line"><span class="lineno">  311</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbModel</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbModel</a>.Id == <span class="keywordtype">id</span>,</div>
<div class="line"><span class="lineno">  312</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  313</span>            }</div>
<div class="line"><span class="lineno">  314</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  315</span>                user = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae78d9d9f3d1c3fc4f8bc69b46e893f81">usersDataLoader</a>.LoadAsync(<span class="keywordtype">id</span>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>            <span class="keywordflow">if</span> (user == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  318</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">NotFound&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>            <span class="keywordflow">if</span> (!<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">allowSystemUser</a> &amp;&amp; user.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#ab9a882e5ee140dae6dff00a241a9c609">CanonicalName</a> == <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">CanonicalizeName</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a2e68345f5d52c8ba64dca5ec061d029d">TgsSystemUserName</a>))</div>
<div class="line"><span class="lineno">  321</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Forbid&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">AuthorityResponse&lt;User&gt;</a>(user);</div>
<div class="line"><span class="lineno">  324</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id_html_ae31e478e1d338b37a14565df6fd58570"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Tgstation.Server.Api.Models.EntityId.Id</a></div><div class="ttdeci">virtual ? long Id</div><div class="ttdoc">The ID of the entity.</div><div class="ttdef"><b>Definition</b> <a href="_entity_id_8cs_source.html#l00014">EntityId.cs:14</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_html_a92eacd30b3df017b7a45f854849d8368"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a92eacd30b3df017b7a45f854849d8368">Tgstation.Server.Host.Authority.UserAuthority.Queryable</a></div><div class="ttdeci">IQueryable&lt; User &gt; Queryable(bool includeJoins)</div><div class="ttdoc">Gets all registered Users.A IQueryable&lt;T&gt; of Users.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_user_html_a2e68345f5d52c8ba64dca5ec061d029d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a2e68345f5d52c8ba64dca5ec061d029d">Tgstation.Server.Host.Models.User.TgsSystemUserName</a></div><div class="ttdeci">const string TgsSystemUserName</div><div class="ttdoc">Username used when creating jobs automatically.</div><div class="ttdef"><b>Definition</b> <a href="_models_2_user_8cs_source.html#l00021">User.cs:21</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_user_html_ab9a882e5ee140dae6dff00a241a9c609"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#ab9a882e5ee140dae6dff00a241a9c609">Tgstation.Server.Host.Models.User.CanonicalName</a></div><div class="ttdeci">string? CanonicalName</div><div class="ttdoc">The uppercase invariant of UserName.Name.</div><div class="ttdef"><b>Definition</b> <a href="_models_2_user_8cs_source.html#l00058">User.cs:58</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context_html_ade8aeb7dd0a0e480f6f89bd5973703c7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7">Tgstation.Server.Host.Security.AuthenticationContext.GetRight</a></div><div class="ttdeci">ulong GetRight(RightsType rightsType)</div><div class="ttdoc">Get the value of a given rightsType .The value of rightsType . Note that if InstancePermissionSet is ...</div><div class="ttdef"><b>Definition</b> <a href="_authentication_context_8cs_source.html#l00103">AuthenticationContext.cs:103</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a7b02c8c3dadd90810a9eaa24712a0a20"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">Tgstation.Server.Api.Rights.RightsType</a></div><div class="ttdeci">RightsType</div><div class="ttdoc">The type of rights a model uses.</div><div class="ttdef"><b>Definition</b> <a href="_rights_type_8cs_source.html#l00006">RightsType.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">Tgstation.Server.Host.Models.User.CanonicalizeName()</a>, <a class="el" href="_models_2_user_8cs_source.html#l00058">Tgstation.Server.Host.Models.User.CanonicalName</a>, <a class="el" href="_authentication_context_8cs_source.html#l00103">Tgstation.Server.Host.Security.AuthenticationContext.GetRight()</a>, <a class="el" href="_entity_id_8cs_source.html#l00014">Tgstation.Server.Api.Models.EntityId.Id</a>, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a92eacd30b3df017b7a45f854849d8368">Tgstation.Server.Host.Authority.UserAuthority.Queryable()</a>, <a class="el" href="_models_2_user_8cs_source.html#l00021">Tgstation.Server.Host.Models.User.TgsSystemUserName</a>, <a class="el" href="_authentication_context_8cs_source.html#l00016">Tgstation.Server.Host.Security.AuthenticationContext.User</a>, and <a class="el" href="_user_authority_8cs_source.html#l00037">Tgstation.Server.Host.Authority.UserAuthority.usersDataLoader</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a35ad3c9eb6b23b7d832ed209e604454c_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a35ad3c9eb6b23b7d832ed209e604454c_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a35ad3c9eb6b23b7d832ed209e604454c_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a35ad3c9eb6b23b7d832ed209e604454c_cgraph">
<area shape="rect" title="Gets the User with a given id .A ValueTask&lt;TResult&gt; resulting in a User AuthorityResponse&lt;TResult&gt;." alt="" coords="5,71,210,111"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16" title="Change a UserName.Name into a CanonicalName." alt="" coords="262,5,458,46"/>
<area shape="poly" title=" " alt="" coords="188,67,263,48,264,53,190,73"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7" title="Get the value of a given rightsType .The value of rightsType . Note that if InstancePermissionSet is ..." alt="" coords="259,71,461,111"/>
<area shape="poly" title=" " alt="" coords="210,88,243,88,243,94,210,94"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a92eacd30b3df017b7a45f854849d8368" title="Gets all registered Users.A IQueryable&lt;T&gt; of Users." alt="" coords="258,136,462,177"/>
<area shape="poly" title=" " alt="" coords="190,109,264,129,263,134,188,115"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html#a40d32838ff902da852c54215bd8e89fb" title="Check if a given rightsType &#160;is meant for an Models.Instance." alt="" coords="510,37,700,78"/>
<area shape="poly" title=" " alt="" coords="461,75,494,70,495,75,462,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html#ab694cd1b9b98a6be7d79f236a71b386c" title="Map a given rightsType &#160;to its respective Enum Type." alt="" coords="515,103,696,143"/>
<area shape="poly" title=" " alt="" coords="462,102,499,107,499,112,461,107"/>
</map>
</div>

</div>
</div>
<a id="ab58b4ffe8f04c2a16349e6f9fcf66db2" name="ab58b4ffe8f04c2a16349e6f9fcf66db2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab58b4ffe8f04c2a16349e6f9fcf66db2">&#9670;&#160;</a></span>GetOAuthConnections()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static async ValueTask&lt; ILookup&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_o_auth_connection.html">GraphQL.Types.OAuth.OAuthConnection</a> &gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.GetOAuthConnections </td>
          <td>(</td>
          <td class="paramtype">IReadOnlyList&lt; long &gt;&#160;</td>
          <td class="paramname"><em>userIds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td>
          <td class="paramname"><em>databaseContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements the oAuthConnectionsDataLoader. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userIds</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IReadOnlyCollection&lt;T&gt;</a> of User <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to load the OAuthConnections for.</td></tr>
    <tr><td class="paramname">databaseContext</td><td>The IDatabaseContext to load from.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in a <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">Dictionary&lt;TKey, TValue&gt;</a> of the requested Users.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00115">115</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  119</span>        {</div>
<div class="line"><span class="lineno">  120</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>.ThrowIfNull(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">userIds</a>);</div>
<div class="line"><span class="lineno">  121</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>.ThrowIfNull(databaseContext);</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">list</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> databaseContext</div>
<div class="line"><span class="lineno">  124</span>                .<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#aa2bd01cbd97bbc1ac974ef2c136576bd">OAuthConnections</a></div>
<div class="line"><span class="lineno">  125</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  126</span>                .Where(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">userIds</a>.Contains(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.User!.Id!.Value))</div>
<div class="line"><span class="lineno">  127</span>                .ToListAsync(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">list</a>.ToLookup(</div>
<div class="line"><span class="lineno">  130</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">oAuthConnection</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">oAuthConnection</a>.UserId,</div>
<div class="line"><span class="lineno">  131</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <span class="keyword">new</span> GraphQL.Types.OAuth.OAuthConnection(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.ExternalUserId!, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Provider));</div>
<div class="line"><span class="lineno">  132</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_html_aa2bd01cbd97bbc1ac974ef2c136576bd"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#aa2bd01cbd97bbc1ac974ef2c136576bd">Tgstation.Server.Host.Database.IDatabaseContext.OAuthConnections</a></div><div class="ttdeci">IDatabaseCollection&lt; OAuthConnection &gt; OAuthConnections</div><div class="ttdoc">The DbSet&lt;TEntity&gt; for OAuthConnections.</div><div class="ttdef"><b>Definition</b> <a href="_i_database_context_8cs_source.html#l00091">IDatabaseContext.cs:91</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, and <a class="el" href="_i_database_context_8cs_source.html#l00091">Tgstation.Server.Host.Database.IDatabaseContext.OAuthConnections</a>.</p>

</div>
</div>
<a id="abf7de52f641b4e634ee5181a8ecd6dd5" name="abf7de52f641b4e634ee5181a8ecd6dd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf7de52f641b4e634ee5181a8ecd6dd5">&#9670;&#160;</a></span>GetOidcConnections()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static async ValueTask&lt; ILookup&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_oidc_connection.html">GraphQL.Types.OAuth.OidcConnection</a> &gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.GetOidcConnections </td>
          <td>(</td>
          <td class="paramtype">IReadOnlyList&lt; long &gt;&#160;</td>
          <td class="paramname"><em>userIds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td>
          <td class="paramname"><em>databaseContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements the oidcConnectionsDataLoader. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userIds</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IReadOnlyCollection&lt;T&gt;</a> of User <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to load the OidcConnections for.</td></tr>
    <tr><td class="paramname">databaseContext</td><td>The IDatabaseContext to load from.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in a <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">Dictionary&lt;TKey, TValue&gt;</a> of the requested Users.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00142">142</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  146</span>        {</div>
<div class="line"><span class="lineno">  147</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>.ThrowIfNull(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">userIds</a>);</div>
<div class="line"><span class="lineno">  148</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>.ThrowIfNull(databaseContext);</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">list</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> databaseContext</div>
<div class="line"><span class="lineno">  151</span>                .<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#a719800c636e9228e8e216af51a7278aa">OidcConnections</a></div>
<div class="line"><span class="lineno">  152</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  153</span>                .Where(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">userIds</a>.Contains(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.User!.Id!.Value))</div>
<div class="line"><span class="lineno">  154</span>                .ToListAsync(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">list</a>.ToLookup(</div>
<div class="line"><span class="lineno">  157</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">oidcConnection</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">oidcConnection</a>.UserId,</div>
<div class="line"><span class="lineno">  158</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <span class="keyword">new</span> GraphQL.Types.OAuth.OidcConnection(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.ExternalUserId!, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.SchemeKey!));</div>
<div class="line"><span class="lineno">  159</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_html_a719800c636e9228e8e216af51a7278aa"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#a719800c636e9228e8e216af51a7278aa">Tgstation.Server.Host.Database.IDatabaseContext.OidcConnections</a></div><div class="ttdeci">IDatabaseCollection&lt; OidcConnection &gt; OidcConnections</div><div class="ttdoc">The DbSet&lt;TEntity&gt; for OidcConnections.</div><div class="ttdef"><b>Definition</b> <a href="_i_database_context_8cs_source.html#l00096">IDatabaseContext.cs:96</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, and <a class="el" href="_i_database_context_8cs_source.html#l00096">Tgstation.Server.Host.Database.IDatabaseContext.OidcConnections</a>.</p>

</div>
</div>
<a id="a380d9c9d59e87ed6ba07d3ca8e92183a" name="a380d9c9d59e87ed6ba07d3ca8e92183a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a380d9c9d59e87ed6ba07d3ca8e92183a">&#9670;&#160;</a></span>GetUsers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Task&lt; Dictionary&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.GetUsers </td>
          <td>(</td>
          <td class="paramtype">IReadOnlyList&lt; long &gt;&#160;</td>
          <td class="paramname"><em>ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td>
          <td class="paramname"><em>databaseContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements the usersDataLoader. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ids</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IReadOnlyList&lt;T&gt;</a> of User <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to load.</td></tr>
    <tr><td class="paramname">databaseContext</td><td>The IDatabaseContext to load from.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in a <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">Dictionary&lt;TKey, TValue&gt;</a> of the requested Users.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00092">92</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   96</span>        {</div>
<div class="line"><span class="lineno">   97</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>.ThrowIfNull(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ids</a>);</div>
<div class="line"><span class="lineno">   98</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>.ThrowIfNull(databaseContext);</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>            <span class="keywordflow">return</span> databaseContext</div>
<div class="line"><span class="lineno">  101</span>                .<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#a9b6cb85c0616ae3076d4837f50a34d95">Users</a></div>
<div class="line"><span class="lineno">  102</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  103</span>                .Where(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ids</a>.Contains(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Id!.Value))</div>
<div class="line"><span class="lineno">  104</span>                .ToDictionaryAsync(user =&gt; user.Id!.Value, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  105</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_html_a9b6cb85c0616ae3076d4837f50a34d95"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html#a9b6cb85c0616ae3076d4837f50a34d95">Tgstation.Server.Host.Database.IDatabaseContext.Users</a></div><div class="ttdeci">IDatabaseCollection&lt; User &gt; Users</div><div class="ttdoc">The Users in the IDatabaseContext.</div><div class="ttdef"><b>Definition</b> <a href="_i_database_context_8cs_source.html#l00021">IDatabaseContext.cs:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, and <a class="el" href="_i_database_context_8cs_source.html#l00021">Tgstation.Server.Host.Database.IDatabaseContext.Users</a>.</p>

</div>
</div>
<a id="a56e8c3826bd0907cf7aeb18aa468610b" name="a56e8c3826bd0907cf7aeb18aa468610b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56e8c3826bd0907cf7aeb18aa468610b">&#9670;&#160;</a></span>OAuthConnections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_o_auth_connection.html">GraphQL.Types.OAuth.OAuthConnection</a>[]&gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.OAuthConnections </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>userId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_o_auth_connection.html" title="Represents a valid OAuth connection.">GraphQL.Types.OAuth.OAuthConnection</a>s for the User with a given <em>userId</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> of the User.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in an global::System.Array of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_o_auth_connection.html" title="Represents a valid OAuth connection.">GraphQL.Types.OAuth.OAuthConnection</a> <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html#ab06fff41584b4f5ef12d045eb2e4486e">Tgstation.Server.Host.Authority.IUserAuthority</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00657">Tgstation.Server.Host.Authority.UserAuthority.CreateNewUserFromModel()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a56e8c3826bd0907cf7aeb18aa468610b_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a56e8c3826bd0907cf7aeb18aa468610b_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a56e8c3826bd0907cf7aeb18aa468610b_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a56e8c3826bd0907cf7aeb18aa468610b_icgraph">
<area shape="rect" title="Gets the GraphQL.Types.OAuth.OAuthConnections for the User with a given userId .A ValueTask&lt;TResult&gt; ..." alt="" coords="567,5,779,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aa1c559b133fca84003ff2a8c78da629d" title="Creates a new User from a given model ." alt="" coords="258,5,519,46"/>
<area shape="poly" title=" " alt="" coords="551,28,519,28,519,23,551,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad2695069d164dde2b12e4fed8718726b" title="Creates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,5,210,46"/>
<area shape="poly" title=" " alt="" coords="242,28,210,28,210,23,242,23"/>
</map>
</div>

</div>
</div>
<a id="a473ac45404cca37f783b4575ee401b80" name="a473ac45404cca37f783b4575ee401b80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a473ac45404cca37f783b4575ee401b80">&#9670;&#160;</a></span>OidcConnections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_oidc_connection.html">GraphQL.Types.OAuth.OidcConnection</a>[]&gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.OidcConnections </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>userId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_oidc_connection.html" title="Represents a valid OAuth connection.">GraphQL.Types.OAuth.OidcConnection</a>s for the User with a given <em>userId</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> of the User.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in an global::System.Array of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_graph_q_l_1_1_types_1_1_o_auth_1_1_oidc_connection.html" title="Represents a valid OAuth connection.">GraphQL.Types.OAuth.OidcConnection</a> <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html#ac1d7cd06060a420ce158447060fe0f9d">Tgstation.Server.Host.Authority.IUserAuthority</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00657">Tgstation.Server.Host.Authority.UserAuthority.CreateNewUserFromModel()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a473ac45404cca37f783b4575ee401b80_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a473ac45404cca37f783b4575ee401b80_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a473ac45404cca37f783b4575ee401b80_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a473ac45404cca37f783b4575ee401b80_icgraph">
<area shape="rect" title="Gets the GraphQL.Types.OAuth.OidcConnections for the User with a given userId .A ValueTask&lt;TResult&gt; r..." alt="" coords="567,5,771,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aa1c559b133fca84003ff2a8c78da629d" title="Creates a new User from a given model ." alt="" coords="258,5,519,46"/>
<area shape="poly" title=" " alt="" coords="551,28,519,28,519,23,551,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad2695069d164dde2b12e4fed8718726b" title="Creates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,5,210,46"/>
<area shape="poly" title=" " alt="" coords="242,28,210,28,210,23,242,23"/>
</map>
</div>

</div>
</div>
<a id="a92eacd30b3df017b7a45f854849d8368" name="a92eacd30b3df017b7a45f854849d8368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92eacd30b3df017b7a45f854849d8368">&#9670;&#160;</a></span>Queryable() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_queryable.html">IQueryable</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; Tgstation.Server.Host.Authority.UserAuthority.Queryable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeJoins</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets all registered Users.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">includeJoins</td><td>If related entities should be loaded.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IQueryable&lt;T&gt;</a> of Users.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html#a2ec27d9c5066d888814989969c3ea112">Tgstation.Server.Host.Authority.IUserAuthority</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00300">Tgstation.Server.Host.Authority.UserAuthority.GetId()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a92eacd30b3df017b7a45f854849d8368_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a92eacd30b3df017b7a45f854849d8368_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a92eacd30b3df017b7a45f854849d8368_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a92eacd30b3df017b7a45f854849d8368_icgraph">
<area shape="rect" title="Gets all registered Users.A IQueryable&lt;T&gt; of Users." alt="" coords="258,5,462,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a35ad3c9eb6b23b7d832ed209e604454c" title="Gets the User with a given id .A ValueTask&lt;TResult&gt; resulting in a User AuthorityResponse&lt;TResult&gt;." alt="" coords="5,5,210,46"/>
<area shape="poly" title=" " alt="" coords="242,28,210,28,210,23,242,23"/>
</map>
</div>

</div>
</div>
<a id="a9815843c51ffc0f2c650e5b13518e697" name="a9815843c51ffc0f2c650e5b13518e697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9815843c51ffc0f2c650e5b13518e697">&#9670;&#160;</a></span>Queryable() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_queryable.html">IQueryable</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; Tgstation.Server.Host.Authority.UserAuthority.Queryable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeJoins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowSystemUser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets all registered Users. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">includeJoins</td><td>If related entities should be loaded.</td></tr>
    <tr><td class="paramname">allowSystemUser</td><td>If the User with the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a2e68345f5d52c8ba64dca5ec061d029d" title="Username used when creating jobs automatically.">User.TgsSystemUserName</a> should be included in results.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IQueryable&lt;T&gt;</a> of Users.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00628">628</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  629</span>        {</div>
<div class="line"><span class="lineno">  630</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">tgsUserCanonicalName</a> = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">CanonicalizeName</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a2e68345f5d52c8ba64dca5ec061d029d">TgsSystemUserName</a>);</div>
<div class="line"><span class="lineno">  631</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">queryable</a> = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  632</span>                .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad1c33807b7a75d05d0004e024416e17f">Users</a></div>
<div class="line"><span class="lineno">  633</span>                .AsQueryable();</div>
<div class="line"><span class="lineno">  634</span> </div>
<div class="line"><span class="lineno">  635</span>            <span class="keywordflow">if</span> (!<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">allowSystemUser</a>)</div>
<div class="line"><span class="lineno">  636</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">queryable</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">queryable</a></div>
<div class="line"><span class="lineno">  637</span>                    .Where(user =&gt; user.CanonicalName != <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">tgsUserCanonicalName</a>);</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">includeJoins</a>)</div>
<div class="line"><span class="lineno">  640</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">queryable</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">queryable</a></div>
<div class="line"><span class="lineno">  641</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.CreatedBy)</div>
<div class="line"><span class="lineno">  642</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.OAuthConnections)</div>
<div class="line"><span class="lineno">  643</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.OidcConnections)</div>
<div class="line"><span class="lineno">  644</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Group!)</div>
<div class="line"><span class="lineno">  645</span>                        .ThenInclude(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.PermissionSet)</div>
<div class="line"><span class="lineno">  646</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.PermissionSet);</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">queryable</a>;</div>
<div class="line"><span class="lineno">  649</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">Tgstation.Server.Host.Models.User.CanonicalizeName()</a>, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, <a class="el" href="_models_2_user_8cs_source.html#l00021">Tgstation.Server.Host.Models.User.TgsSystemUserName</a>, and <a class="el" href="_database_context_8cs_source.html#l00029">Tgstation.Server.Host.Database.DatabaseContext.Users</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a9815843c51ffc0f2c650e5b13518e697_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a9815843c51ffc0f2c650e5b13518e697_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a9815843c51ffc0f2c650e5b13518e697_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a9815843c51ffc0f2c650e5b13518e697_cgraph">
<area shape="rect" title="Gets all registered Users." alt="" coords="5,5,210,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16" title="Change a UserName.Name into a CanonicalName." alt="" coords="258,5,453,46"/>
<area shape="poly" title=" " alt="" coords="210,23,242,23,242,28,210,28"/>
</map>
</div>

</div>
</div>
<a id="aae6152e7f8018f4d9be6c65521c7a2a9" name="aae6152e7f8018f4d9be6c65521c7a2a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae6152e7f8018f4d9be6c65521c7a2a9">&#9670;&#160;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.Read </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the currently authenticated user.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in a User <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a>.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html#acc65519303ba19b20d039d9c59206734">Tgstation.Server.Host.Authority.IUserAuthority</a>.</p>

</div>
</div>
<a id="ae05b2c5d239ed788911e42c5c8e44663" name="ae05b2c5d239ed788911e42c5c8e44663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae05b2c5d239ed788911e42c5c8e44663">&#9670;&#160;</a></span>SendUserUpdatedTopics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ValueTask Tgstation.Server.Host.Authority.UserAuthority.SendUserUpdatedTopics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send topics through the topicEventSender indicating a given <em>user</em>  was created or updated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td>The User that was created or updated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask</a> representing the running operation.</dd></dl>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00341">Tgstation.Server.Host.Authority.UserAuthority.Create()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00408">Tgstation.Server.Host.Authority.UserAuthority.Update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ae05b2c5d239ed788911e42c5c8e44663_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ae05b2c5d239ed788911e42c5c8e44663_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ae05b2c5d239ed788911e42c5c8e44663_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_ae05b2c5d239ed788911e42c5c8e44663_icgraph">
<area shape="rect" title="Send topics through the topicEventSender indicating a given user &#160;was created or updated." alt="" coords="258,39,507,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad2695069d164dde2b12e4fed8718726b" title="Creates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,5,210,46"/>
<area shape="poly" title=" " alt="" coords="242,45,210,41,211,35,242,39"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aef9a577a9544d2da75672eb17a24b94d" title="Updates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,71,210,111"/>
<area shape="poly" title=" " alt="" coords="242,78,211,82,210,76,242,73"/>
</map>
</div>

</div>
</div>
<a id="a21c329441fa97014eb568f13ce0475aa" name="a21c329441fa97014eb568f13ce0475aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21c329441fa97014eb568f13ce0475aa">&#9670;&#160;</a></span>TrySetPassword()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt;? Tgstation.Server.Host.Authority.UserAuthority.TrySetPassword </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>&#160;</td>
          <td class="paramname"><em>dbUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>newPassword</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>newUser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to change the password of a given <em>dbUser</em> . </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dbUser</td><td>The user to update.</td></tr>
    <tr><td class="paramname">newPassword</td><td>The new password.</td></tr>
    <tr><td class="paramname">newUser</td><td>If this is for a new UserResponse.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">null</a></code> on success, an errored <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a> if <em>newPassword</em>  is too short.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00712">712</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  713</span>        {</div>
<div class="line"><span class="lineno">  714</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">newPassword</a> ??= <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">String</a>.Empty;</div>
<div class="line"><span class="lineno">  715</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">newPassword</a>.Length &lt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a9000c1eddd40169fecc6cb692ef1a647">generalConfigurationOptions</a>.Value.MinimumPasswordLength)</div>
<div class="line"><span class="lineno">  716</span>                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">AuthorityResponse&lt;User&gt;</a>(</div>
<div class="line"><span class="lineno">  717</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserPasswordLength)</div>
<div class="line"><span class="lineno">  718</span>                    {</div>
<div class="line"><span class="lineno">  719</span>                        AdditionalData = $<span class="stringliteral">&quot;Required password length: {generalConfigurationOptions.Value.MinimumPasswordLength}&quot;</span>,</div>
<div class="line"><span class="lineno">  720</span>                    },</div>
<div class="line"><span class="lineno">  721</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core.html#a0014d9d38ddef55b17fc52f0e4bd071c">HttpFailureResponse</a>.BadRequest);</div>
<div class="line"><span class="lineno">  722</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad57ea79ea07db0081701dc10ffca0e3f">cryptographySuite</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_cryptography_suite.html#aeab60aa0a0ee2cb5e2ad5dbde1983430">SetUserPassword</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">dbUser</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">newPassword</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">newUser</a>);</div>
<div class="line"><span class="lineno">  723</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  724</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_cryptography_suite_html_aeab60aa0a0ee2cb5e2ad5dbde1983430"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_cryptography_suite.html#aeab60aa0a0ee2cb5e2ad5dbde1983430">Tgstation.Server.Host.Security.ICryptographySuite.SetUserPassword</a></div><div class="ttdeci">void SetUserPassword(User user, string newPassword, bool newUser)</div><div class="ttdoc">Sets a User.PasswordHash for a given user .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00341">Tgstation.Server.Host.Authority.UserAuthority.Create()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00408">Tgstation.Server.Host.Authority.UserAuthority.Update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a21c329441fa97014eb568f13ce0475aa_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a21c329441fa97014eb568f13ce0475aa_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a21c329441fa97014eb568f13ce0475aa_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_a21c329441fa97014eb568f13ce0475aa_icgraph">
<area shape="rect" title="Attempt to change the password of a given dbUser ." alt="" coords="258,39,462,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ad2695069d164dde2b12e4fed8718726b" title="Creates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,5,210,46"/>
<area shape="poly" title=" " alt="" coords="242,46,210,42,211,37,243,41"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#aef9a577a9544d2da75672eb17a24b94d" title="Updates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,71,210,111"/>
<area shape="poly" title=" " alt="" coords="243,77,211,81,210,75,242,71"/>
</map>
</div>

</div>
</div>
<a id="aef9a577a9544d2da75672eb17a24b94d" name="aef9a577a9544d2da75672eb17a24b94d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef9a577a9544d2da75672eb17a24b94d">&#9670;&#160;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> &gt; &gt; Tgstation.Server.Host.Authority.UserAuthority.Update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_user_update_request.html">UserUpdateRequest</a>&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates a User.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">updateRequest</td><td>The UserUpdateRequest.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ValueTask&lt;TResult&gt;</a> resulting in am <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">AuthorityResponse&lt;TResult&gt;</a> for the created User.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_authority_1_1_i_user_authority.html#a5a838877714be610b1852a6812218460">Tgstation.Server.Host.Authority.IUserAuthority</a>.</p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00408">408</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  411</span>        {</div>
<div class="line"><span class="lineno">  412</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">ArgumentNullException</a>.ThrowIfNull(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>);</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>            <span class="keywordflow">if</span> (!<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Id.HasValue || <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OAuthConnections?.Any(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> == <span class="keyword">null</span>) == <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  415</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.ModelValidationFailure);</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Group != <span class="keyword">null</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.PermissionSet != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  418</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserGroupAndPermissionSet);</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">callerAdministrationRights</a> = (<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>)<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7">GetRight</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">RightsType</a>.Administration);</div>
<div class="line"><span class="lineno">  421</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">canEditAllUsers</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">callerAdministrationRights</a>.HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>.WriteUsers);</div>
<div class="line"><span class="lineno">  422</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">passwordEdit</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">canEditAllUsers</a> || <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">callerAdministrationRights</a>.HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>.EditOwnPassword);</div>
<div class="line"><span class="lineno">  423</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">oAuthEdit</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">canEditAllUsers</a> || <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">callerAdministrationRights</a>.HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>.EditOwnServiceConnections);</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a> = !<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">canEditAllUsers</a></div>
<div class="line"><span class="lineno">  426</span>                ? <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">AuthenticationContext.User</a></div>
<div class="line"><span class="lineno">  427</span>                : <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  428</span>                    .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad1c33807b7a75d05d0004e024416e17f">Users</a></div>
<div class="line"><span class="lineno">  429</span>                    .AsQueryable()</div>
<div class="line"><span class="lineno">  430</span>                    .Where(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Id == <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Id)</div>
<div class="line"><span class="lineno">  431</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.CreatedBy)</div>
<div class="line"><span class="lineno">  432</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.OAuthConnections)</div>
<div class="line"><span class="lineno">  433</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.OidcConnections)</div>
<div class="line"><span class="lineno">  434</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Group!)</div>
<div class="line"><span class="lineno">  435</span>                        .ThenInclude(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.PermissionSet)</div>
<div class="line"><span class="lineno">  436</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.PermissionSet)</div>
<div class="line"><span class="lineno">  437</span>                    .FirstOrDefaultAsync(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a> == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  440</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">NotFound&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.CanonicalName == <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">CanonicalizeName</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a2e68345f5d52c8ba64dca5ec061d029d">TgsSystemUserName</a>))</div>
<div class="line"><span class="lineno">  443</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Forbid&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>            <span class="comment">// Ensure they are only trying to edit things they have perms for (system identity change will trigger a bad request)</span></div>
<div class="line"><span class="lineno">  446</span>            <span class="keywordflow">if</span> ((!<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">canEditAllUsers</a></div>
<div class="line"><span class="lineno">  447</span>                &amp;&amp; (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Id != <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.Id</div>
<div class="line"><span class="lineno">  448</span>                || <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Enabled.HasValue</div>
<div class="line"><span class="lineno">  449</span>                || <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Group != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  450</span>                || <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.PermissionSet != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  451</span>                || <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name != <span class="keyword">null</span>))</div>
<div class="line"><span class="lineno">  452</span>                || (!<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">passwordEdit</a> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Password != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  453</span>                || (!<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">oAuthEdit</a> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OAuthConnections != <span class="keyword">null</span>))</div>
<div class="line"><span class="lineno">  454</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Forbid&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUserHasSid</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.SystemIdentifier</a> != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  457</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">invalidateSessions</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  458</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUserHasSid</a> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.PasswordHash != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  459</span>            {</div>
<div class="line"><span class="lineno">  460</span>                <span class="comment">// cleanup from https://github.com/tgstation/tgstation-server/issues/1528</span></div>
<div class="line"><span class="lineno">  461</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ac08240a96d7175f7af6966c3922593a3">Logger</a>.LogDebug(<span class="stringliteral">&quot;System user ID {userId}&#39;s PasswordHash is polluted, updating database.&quot;</span>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.Id);</div>
<div class="line"><span class="lineno">  462</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.PasswordHash</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">invalidateSessions</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  465</span>            }</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.SystemIdentifier != <span class="keyword">null</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.SystemIdentifier != <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.SystemIdentifier)</div>
<div class="line"><span class="lineno">  468</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserSidChange);</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Password != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  471</span>            {</div>
<div class="line"><span class="lineno">  472</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUserHasSid</a>)</div>
<div class="line"><span class="lineno">  473</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserMismatchPasswordSid);</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">result</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a21c329441fa97014eb568f13ce0475aa">TrySetPassword</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Password, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  476</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">result</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  477</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">result</a>;</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">invalidateSessions</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  480</span>            }</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name != <span class="keyword">null</span> &amp;&amp; <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">CanonicalizeName</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Name) != <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.CanonicalName)</div>
<div class="line"><span class="lineno">  483</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.UserNameChange);</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OAuthConnections != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  486</span>                &amp;&amp; (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OAuthConnections.Count != <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OAuthConnections!.Count</div>
<div class="line"><span class="lineno">  487</span>                || !<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OAuthConnections.All(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OAuthConnections.Any(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">y</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">y</a>.Provider == <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Provider &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">y</a>.ExternalUserId == <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.ExternalUserId))))</div>
<div class="line"><span class="lineno">  488</span>            {</div>
<div class="line"><span class="lineno">  489</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a>.Value.OidcStrictMode)</div>
<div class="line"><span class="lineno">  490</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.BadUserEditDueToOidcStrictMode);</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.CanonicalName == <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">CanonicalizeName</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_default_credentials.html">DefaultCredentials</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_api_1_1_default_credentials.html#a92e853a434de557956993046d1b364bb">AdminUserName</a>))</div>
<div class="line"><span class="lineno">  493</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.AdminUserCannotHaveServiceConnection);</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OAuthConnections.Count == 0 &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.PasswordHash == <span class="keyword">null</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.SystemIdentifier == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  496</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.CannotRemoveLastAuthenticationOption);</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a6bc7d3bc84fd1589137c9626095dff5b">OAuthConnections</a>.RemoveRange(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OAuthConnections);</div>
<div class="line"><span class="lineno">  499</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OAuthConnections.Clear();</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>                <span class="keywordflow">foreach</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">updatedConnection</a> <span class="keywordflow">in</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OAuthConnections)</div>
<div class="line"><span class="lineno">  502</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OAuthConnections.Add(<span class="keyword">new</span> Models.OAuthConnection</div>
<div class="line"><span class="lineno">  503</span>                    {</div>
<div class="line"><span class="lineno">  504</span>                        Provider = updatedConnection.Provider,</div>
<div class="line"><span class="lineno">  505</span>                        ExternalUserId = updatedConnection.ExternalUserId,</div>
<div class="line"><span class="lineno">  506</span>                    });</div>
<div class="line"><span class="lineno">  507</span>            }</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OidcConnections != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  510</span>                &amp;&amp; (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OidcConnections.Count != <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OidcConnections!.Count</div>
<div class="line"><span class="lineno">  511</span>                || !<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OidcConnections.All(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OidcConnections.Any(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">y</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">y</a>.SchemeKey == <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.SchemeKey &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">y</a>.ExternalUserId == <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.ExternalUserId))))</div>
<div class="line"><span class="lineno">  512</span>            {</div>
<div class="line"><span class="lineno">  513</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a>.Value.OidcStrictMode)</div>
<div class="line"><span class="lineno">  514</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.BadUserEditDueToOidcStrictMode);</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.CanonicalName == <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">CanonicalizeName</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_default_credentials.html">DefaultCredentials</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_api_1_1_default_credentials.html#a92e853a434de557956993046d1b364bb">AdminUserName</a>))</div>
<div class="line"><span class="lineno">  517</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.AdminUserCannotHaveServiceConnection);</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OidcConnections.Count == 0 &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.PasswordHash == <span class="keyword">null</span> &amp;&amp; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.SystemIdentifier == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  520</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.CannotRemoveLastAuthenticationOption);</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad8c27ec242c40e61a8698015ac56f3ee">OidcConnections</a>.RemoveRange(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OidcConnections);</div>
<div class="line"><span class="lineno">  523</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OidcConnections.Clear();</div>
<div class="line"><span class="lineno">  524</span>                <span class="keywordflow">foreach</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">updatedConnection</a> <span class="keywordflow">in</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.OidcConnections)</div>
<div class="line"><span class="lineno">  525</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.OidcConnections.Add(<span class="keyword">new</span> Models.OidcConnection</div>
<div class="line"><span class="lineno">  526</span>                    {</div>
<div class="line"><span class="lineno">  527</span>                        SchemeKey = updatedConnection.SchemeKey,</div>
<div class="line"><span class="lineno">  528</span>                        ExternalUserId = updatedConnection.ExternalUserId,</div>
<div class="line"><span class="lineno">  529</span>                    });</div>
<div class="line"><span class="lineno">  530</span>            }</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Group != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  533</span>            {</div>
<div class="line"><span class="lineno">  534</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a>.Value.OidcStrictMode)</div>
<div class="line"><span class="lineno">  535</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.BadUserEditDueToOidcStrictMode);</div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.Group</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  538</span>                    .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#afdbe72c568fb4a8578a1dc965b34c9fa">Groups</a></div>
<div class="line"><span class="lineno">  539</span>                    .AsQueryable()</div>
<div class="line"><span class="lineno">  540</span>                    .Where(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Id == <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Group.Id)</div>
<div class="line"><span class="lineno">  541</span>                    .Include(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.PermissionSet)</div>
<div class="line"><span class="lineno">  542</span>                    .FirstOrDefaultAsync(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.Group == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  545</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Gone&lt;User&gt;</a>();</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#afdbe72c568fb4a8578a1dc965b34c9fa">Groups</a>.Attach(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.Group);</div>
<div class="line"><span class="lineno">  548</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.PermissionSet != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  549</span>                {</div>
<div class="line"><span class="lineno">  550</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ac08240a96d7175f7af6966c3922593a3">Logger</a>.LogInformation(<span class="stringliteral">&quot;Deleting permission set {permissionSetId}...&quot;</span>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.PermissionSet.Id);</div>
<div class="line"><span class="lineno">  551</span>                    <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a9fa7129139a4c4197efe5c944f4e9d76">PermissionSets</a>.Remove(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.PermissionSet);</div>
<div class="line"><span class="lineno">  552</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.PermissionSet</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  553</span>                }</div>
<div class="line"><span class="lineno">  554</span>            }</div>
<div class="line"><span class="lineno">  555</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.PermissionSet != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  556</span>            {</div>
<div class="line"><span class="lineno">  557</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a>.Value.OidcStrictMode)</div>
<div class="line"><span class="lineno">  558</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.BadUserEditDueToOidcStrictMode);</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.PermissionSet == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  561</span>                {</div>
<div class="line"><span class="lineno">  562</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ac08240a96d7175f7af6966c3922593a3">Logger</a>.LogTrace(<span class="stringliteral">&quot;Creating new permission set...&quot;</span>);</div>
<div class="line"><span class="lineno">  563</span>                    <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.PermissionSet</a> = <span class="keyword">new</span> Models.PermissionSet();</div>
<div class="line"><span class="lineno">  564</span>                }</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.PermissionSet.AdministrationRights</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model.PermissionSet.AdministrationRights</a> ?? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>.None;</div>
<div class="line"><span class="lineno">  567</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.PermissionSet.InstanceManagerRights</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model.PermissionSet.InstanceManagerRights</a> ?? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.None;</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.Group</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  570</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.GroupId</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  571</span>            }</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">fail</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a74520f9973cb772dd5eac7804f86d94a">CheckValidName</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  574</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">fail</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  575</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">fail</a>;</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.Name</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model.Name</a> ?? <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.Name;</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Enabled.HasValue)</div>
<div class="line"><span class="lineno">  580</span>            {</div>
<div class="line"><span class="lineno">  581</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a8fe81db41947acd8ccda3c67a41c3eb6">securityConfigurationOptions</a>.Value.OidcStrictMode)</div>
<div class="line"><span class="lineno">  582</span>                    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">BadRequest&lt;User&gt;</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.BadUserEditDueToOidcStrictMode);</div>
<div class="line"><span class="lineno">  583</span> </div>
<div class="line"><span class="lineno">  584</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">invalidateSessions</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.Require(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a> =&gt; <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">x</a>.Enabled) &amp;&amp; !<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Enabled.Value;</div>
<div class="line"><span class="lineno">  585</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.Enabled</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">model</a>.Enabled.Value;</div>
<div class="line"><span class="lineno">  586</span>            }</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">invalidateSessions</a>)</div>
<div class="line"><span class="lineno">  589</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a04be03772015998cff8d7b8ee6d7e5a6">sessionInvalidationTracker</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html#a8d0fb292e7b1fc5f0659014ced9a2a14">UserModifiedInvalidateSessions</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>);</div>
<div class="line"><span class="lineno">  590</span> </div>
<div class="line"><span class="lineno">  591</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_base.html#ac08240a96d7175f7af6966c3922593a3">Logger</a>.LogInformation(<span class="stringliteral">&quot;Updated user {userName} ({userId})&quot;</span>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.Name, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>.Id);</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">invalidateSessions</a>)</div>
<div class="line"><span class="lineno">  596</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a23afb5c24b05bfeb062c18bb7c38a6fd">permissionsUpdateNotifyee</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html#a004e032cd9c1cb54c6ba3eb13faef180">UserDisabled</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>, <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">cancellationToken</a>);</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">await</a> <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae05b2c5d239ed788911e42c5c8e44663">SendUserUpdatedTopics</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>);</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>            <span class="comment">// return id only if not a self update and cannot read users</span></div>
<div class="line"><span class="lineno">  601</span>            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">var</a> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">canReadBack</a> = <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">AuthenticationContext.User.Id</a> == <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser.Id</a></div>
<div class="line"><span class="lineno">  602</span>                || <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">callerAdministrationRights</a>.HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#affda1440f9c5e2dfcca65138d2f89a21">AdministrationRights</a>.ReadUsers);</div>
<div class="line"><span class="lineno">  603</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">canReadBack</a></div>
<div class="line"><span class="lineno">  604</span>                ? <span class="keyword">new</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">AuthorityResponse&lt;User&gt;</a>(<a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">originalUser</a>)</div>
<div class="line"><span class="lineno">  605</span>                : <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">new</a> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">AuthorityResponse</a>&lt;<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>&gt;();</div>
<div class="line"><span class="lineno">  606</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_default_credentials_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_default_credentials.html">Tgstation.Server.Api.DefaultCredentials</a></div><div class="ttdoc">Represents initial credentials used by the server.</div><div class="ttdef"><b>Definition</b> <a href="_default_credentials_8cs_source.html#l00006">DefaultCredentials.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_default_credentials_html_a92e853a434de557956993046d1b364bb"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_default_credentials.html#a92e853a434de557956993046d1b364bb">Tgstation.Server.Api.DefaultCredentials.AdminUserName</a></div><div class="ttdeci">static readonly string AdminUserName</div><div class="ttdoc">The name of the default admin user.</div><div class="ttdef"><b>Definition</b> <a href="_default_credentials_8cs_source.html#l00011">DefaultCredentials.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_core_1_1_authority_response.html">Tgstation.Server.Host.Authority.Core.AuthorityResponse</a></div><div class="ttdoc">Represents a response from an authority.</div><div class="ttdef"><b>Definition</b> <a href="_authority_response_02_t_result_03_8cs_source.html#l00013">AuthorityResponse{TResult}.cs:14</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_a6bc7d3bc84fd1589137c9626095dff5b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a6bc7d3bc84fd1589137c9626095dff5b">Tgstation.Server.Host.Database.DatabaseContext.OAuthConnections</a></div><div class="ttdeci">DbSet&lt; OAuthConnection &gt; OAuthConnections</div><div class="ttdoc">The OAuthConnections in the DatabaseContext.</div><div class="ttdef"><b>Definition</b> <a href="_database_context_8cs_source.html#l00099">DatabaseContext.cs:99</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_a9fa7129139a4c4197efe5c944f4e9d76"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a9fa7129139a4c4197efe5c944f4e9d76">Tgstation.Server.Host.Database.DatabaseContext.PermissionSets</a></div><div class="ttdeci">DbSet&lt; PermissionSet &gt; PermissionSets</div><div class="ttdoc">The PermissionSets in the DatabaseContext.</div><div class="ttdef"><b>Definition</b> <a href="_database_context_8cs_source.html#l00109">DatabaseContext.cs:109</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_ad8c27ec242c40e61a8698015ac56f3ee"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad8c27ec242c40e61a8698015ac56f3ee">Tgstation.Server.Host.Database.DatabaseContext.OidcConnections</a></div><div class="ttdeci">DbSet&lt; OidcConnection &gt; OidcConnections</div><div class="ttdoc">The OidcConnections in the DatabaseContext.</div><div class="ttdef"><b>Definition</b> <a href="_database_context_8cs_source.html#l00104">DatabaseContext.cs:104</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee_html_a004e032cd9c1cb54c6ba3eb13faef180"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html#a004e032cd9c1cb54c6ba3eb13faef180">Tgstation.Server.Host.Security.IPermissionsUpdateNotifyee.UserDisabled</a></div><div class="ttdeci">ValueTask UserDisabled(User user, CancellationToken cancellationToken)</div><div class="ttdoc">Called when a given User is successfully disabled.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker_html_a8d0fb292e7b1fc5f0659014ced9a2a14"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html#a8d0fb292e7b1fc5f0659014ced9a2a14">Tgstation.Server.Host.Security.ISessionInvalidationTracker.UserModifiedInvalidateSessions</a></div><div class="ttdeci">void UserModifiedInvalidateSessions(User user)</div><div class="ttdoc">Invalidate all sessions for a given user .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_default_credentials_8cs_source.html#l00011">Tgstation.Server.Api.DefaultCredentials.AdminUserName</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16">Tgstation.Server.Host.Models.User.CanonicalizeName()</a>, <a class="el" href="_user_authority_8cs_source.html#l00167">Tgstation.Server.Host.Authority.UserAuthority.CheckValidName()</a>, <a class="el" href="_authentication_context_8cs_source.html#l00103">Tgstation.Server.Host.Security.AuthenticationContext.GetRight()</a>, <a class="el" href="_database_context_8cs_source.html#l00114">Tgstation.Server.Host.Database.DatabaseContext.Groups</a>, <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.List</a>, <a class="el" href="_authority_base_8cs_source.html#l00033">Tgstation.Server.Host.Authority.Core.AuthorityBase.Logger</a>, <a class="el" href="_database_context_8cs_source.html#l00099">Tgstation.Server.Host.Database.DatabaseContext.OAuthConnections</a>, <a class="el" href="_database_context_8cs_source.html#l00104">Tgstation.Server.Host.Database.DatabaseContext.OidcConnections</a>, <a class="el" href="_database_context_8cs_source.html#l00109">Tgstation.Server.Host.Database.DatabaseContext.PermissionSets</a>, <a class="el" href="_user_authority_8cs_source.html#l00057">Tgstation.Server.Host.Authority.UserAuthority.permissionsUpdateNotifyee</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save()</a>, <a class="el" href="_user_authority_8cs_source.html#l00082">Tgstation.Server.Host.Authority.UserAuthority.securityConfigurationOptions</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae05b2c5d239ed788911e42c5c8e44663">Tgstation.Server.Host.Authority.UserAuthority.SendUserUpdatedTopics()</a>, <a class="el" href="_user_authority_8cs_source.html#l00067">Tgstation.Server.Host.Authority.UserAuthority.sessionInvalidationTracker</a>, <a class="el" href="_models_2_user_8cs_source.html#l00021">Tgstation.Server.Host.Models.User.TgsSystemUserName</a>, <a class="el" href="_user_authority_8cs_source.html#l00712">Tgstation.Server.Host.Authority.UserAuthority.TrySetPassword()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html#a004e032cd9c1cb54c6ba3eb13faef180">Tgstation.Server.Host.Security.IPermissionsUpdateNotifyee.UserDisabled()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html#a8d0fb292e7b1fc5f0659014ced9a2a14">Tgstation.Server.Host.Security.ISessionInvalidationTracker.UserModifiedInvalidateSessions()</a>, and <a class="el" href="_database_context_8cs_source.html#l00029">Tgstation.Server.Host.Database.DatabaseContext.Users</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aef9a577a9544d2da75672eb17a24b94d_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aef9a577a9544d2da75672eb17a24b94d_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aef9a577a9544d2da75672eb17a24b94d_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority_aef9a577a9544d2da75672eb17a24b94d_cgraph">
<area shape="rect" title="Updates a User.A ValueTask&lt;TResult&gt; resulting in am AuthorityResponse&lt;TResult&gt; for the created User." alt="" coords="5,235,210,275"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html#a4b139051d0d6db501e37590fa1eabf16" title="Change a UserName.Name into a CanonicalName." alt="" coords="294,5,490,46"/>
<area shape="poly" title=" " alt="" coords="116,233,137,195,168,147,208,98,256,57,278,45,281,50,259,61,211,102,172,150,141,197,121,235"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a74520f9973cb772dd5eac7804f86d94a" title="Check if a given model &#160;has a valid UserName.Name specified." alt="" coords="290,71,494,111"/>
<area shape="poly" title=" " alt="" coords="124,233,179,177,216,147,256,122,274,114,276,119,259,127,219,152,183,181,128,236"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7" title="Get the value of a given rightsType .The value of rightsType . Note that if InstancePermissionSet is ..." alt="" coords="291,136,493,177"/>
<area shape="poly" title=" " alt="" coords="150,232,257,187,283,179,285,184,259,192,152,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c" title="Saves changes made to the IDatabaseContext.A Task representing the running operation." alt="" coords="288,201,496,242"/>
<area shape="poly" title=" " alt="" coords="210,240,272,233,273,238,210,246"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#ae05b2c5d239ed788911e42c5c8e44663" title="Send topics through the topicEventSender indicating a given user &#160;was created or updated." alt="" coords="267,267,517,307"/>
<area shape="poly" title=" " alt="" coords="210,264,252,269,251,274,210,269"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_authority_1_1_user_authority.html#a21c329441fa97014eb568f13ce0475aa" title="Attempt to change the password of a given dbUser ." alt="" coords="290,332,494,373"/>
<area shape="poly" title=" " alt="" coords="153,273,259,316,285,325,284,330,257,322,151,278"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html#a004e032cd9c1cb54c6ba3eb13faef180" title="Called when a given User is successfully disabled." alt="" coords="258,397,526,438"/>
<area shape="poly" title=" " alt="" coords="129,274,183,328,220,357,259,382,274,389,272,394,256,387,217,362,180,332,125,278"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html#a8d0fb292e7b1fc5f0659014ced9a2a14" title="Invalidate all sessions for a given user ." alt="" coords="261,462,523,518"/>
<area shape="poly" title=" " alt="" coords="121,274,142,311,173,358,212,406,259,448,266,452,264,457,256,452,208,410,168,361,137,314,117,277"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html#a40d32838ff902da852c54215bd8e89fb" title="Check if a given rightsType &#160;is meant for an Models.Instance." alt="" coords="574,104,764,145"/>
<area shape="poly" title=" " alt="" coords="493,142,559,134,559,140,494,147"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html#ab694cd1b9b98a6be7d79f236a71b386c" title="Map a given rightsType &#160;to its respective Enum Type." alt="" coords="579,169,760,210"/>
<area shape="poly" title=" " alt="" coords="494,166,564,174,563,180,493,171"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad57ea79ea07db0081701dc10ffca0e3f" name="ad57ea79ea07db0081701dc10ffca0e3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad57ea79ea07db0081701dc10ffca0e3f">&#9670;&#160;</a></span>cryptographySuite</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_cryptography_suite.html">ICryptographySuite</a> Tgstation.Server.Host.Authority.UserAuthority.cryptographySuite</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ICryptographySuite for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00062">62</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="a9000c1eddd40169fecc6cb692ef1a647" name="a9000c1eddd40169fecc6cb692ef1a647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9000c1eddd40169fecc6cb692ef1a647">&#9670;&#160;</a></span>generalConfigurationOptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IOptionsSnapshot&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a>&gt; Tgstation.Server.Host.Authority.UserAuthority.generalConfigurationOptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IOptionsSnapshot&lt;TOptions&gt;</a> of GeneralConfiguration for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00077">77</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00341">Tgstation.Server.Host.Authority.UserAuthority.Create()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="af8ad1a11f6c999ad5d64b9d61e19e035" name="af8ad1a11f6c999ad5d64b9d61e19e035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8ad1a11f6c999ad5d64b9d61e19e035">&#9670;&#160;</a></span>oAuthConnectionsDataLoader</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IOAuthConnectionsDataLoader Tgstation.Server.Host.Authority.UserAuthority.oAuthConnectionsDataLoader</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IOAuthConnectionsDataLoader</a> for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00042">42</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="ac48038ebbd25aacaae82e9a54593518b" name="ac48038ebbd25aacaae82e9a54593518b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac48038ebbd25aacaae82e9a54593518b">&#9670;&#160;</a></span>oidcConnectionsDataLoader</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IOidcConnectionsDataLoader Tgstation.Server.Host.Authority.UserAuthority.oidcConnectionsDataLoader</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IOidcConnectionsDataLoader</a> for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00047">47</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="a23afb5c24b05bfeb062c18bb7c38a6fd" name="a23afb5c24b05bfeb062c18bb7c38a6fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23afb5c24b05bfeb062c18bb7c38a6fd">&#9670;&#160;</a></span>permissionsUpdateNotifyee</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html">IPermissionsUpdateNotifyee</a> Tgstation.Server.Host.Authority.UserAuthority.permissionsUpdateNotifyee</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IPermissionsUpdateNotifyee for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00057">57</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00408">Tgstation.Server.Host.Authority.UserAuthority.Update()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="a8fe81db41947acd8ccda3c67a41c3eb6" name="a8fe81db41947acd8ccda3c67a41c3eb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fe81db41947acd8ccda3c67a41c3eb6">&#9670;&#160;</a></span>securityConfigurationOptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IOptions&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_security_configuration.html">SecurityConfiguration</a>&gt; Tgstation.Server.Host.Authority.UserAuthority.securityConfigurationOptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IOptions&lt;TOptions&gt;</a> of SecurityConfiguration for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00082">82</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00408">Tgstation.Server.Host.Authority.UserAuthority.Update()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="a04be03772015998cff8d7b8ee6d7e5a6" name="a04be03772015998cff8d7b8ee6d7e5a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04be03772015998cff8d7b8ee6d7e5a6">&#9670;&#160;</a></span>sessionInvalidationTracker</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_session_invalidation_tracker.html">ISessionInvalidationTracker</a> Tgstation.Server.Host.Authority.UserAuthority.sessionInvalidationTracker</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionInvalidationTracker for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00067">67</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00408">Tgstation.Server.Host.Authority.UserAuthority.Update()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="a81f60af5ad50d8a4c8452adf96f75bd8" name="a81f60af5ad50d8a4c8452adf96f75bd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81f60af5ad50d8a4c8452adf96f75bd8">&#9670;&#160;</a></span>systemIdentityFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a> Tgstation.Server.Host.Authority.UserAuthority.systemIdentityFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISystemIdentityFactory for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00052">52</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00341">Tgstation.Server.Host.Authority.UserAuthority.Create()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="a092b316af162758aef6289c84c885efb" name="a092b316af162758aef6289c84c885efb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a092b316af162758aef6289c84c885efb">&#9670;&#160;</a></span>topicEventSender</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ITopicEventSender Tgstation.Server.Host.Authority.UserAuthority.topicEventSender</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">ITopicEventSender</a> for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00072">72</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<a id="ae78d9d9f3d1c3fc4f8bc69b46e893f81" name="ae78d9d9f3d1c3fc4f8bc69b46e893f81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae78d9d9f3d1c3fc4f8bc69b46e893f81">&#9670;&#160;</a></span>usersDataLoader</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IUsersDataLoader Tgstation.Server.Host.Authority.UserAuthority.usersDataLoader</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135" title="User may list files if the Models.Instance allows it.">IUsersDataLoader</a> for the UserAuthority. </p>

<p class="definition">Definition at line <a class="el" href="_user_authority_8cs_source.html#l00037">37</a> of file <a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_user_authority_8cs_source.html#l00300">Tgstation.Server.Host.Authority.UserAuthority.GetId()</a>, and <a class="el" href="_user_authority_8cs_source.html#l00195">Tgstation.Server.Host.Authority.UserAuthority.UserAuthority()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Authority/<a class="el" href="_user_authority_8cs_source.html">UserAuthority.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
