<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.Watchdog.WatchdogBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.1.5</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html">Watchdog</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.Watchdog.WatchdogBase Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Base class for <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>s.   
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.Watchdog.WatchdogBase:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map">
<area shape="rect" title="Base class for IWatchdogs." alt="" coords="572,121,799,161"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html" title="A IWatchdog that manages one server." alt="" coords="847,121,1073,161"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers." alt="" coords="395,79,479,104"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="165,5,301,31"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,5,117,31"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="170,55,297,80"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="174,104,293,129"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html" title="Handler for an instance being renamed." alt="" coords="172,153,295,179"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html" title="Handles Commands.ICommands that map to those defined in a IChatTrackingContext." alt="" coords="349,128,524,153"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts." alt="" coords="380,177,493,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html" title="A IWatchdog that, instead of killing servers for updates, uses the wonders of filesystem links to swa..." alt="" coords="1121,121,1348,161"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_posix_watchdog.html" title="A variant of the AdvancedWatchdog that works on POSIX systems." alt="" coords="1396,89,1623,129"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html" title="A variant of the AdvancedWatchdog that works on Windows systems." alt="" coords="1396,153,1623,193"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.Watchdog.WatchdogBase:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map" id="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map">
<area shape="rect" title="Base class for IWatchdogs." alt="" coords="864,486,1091,526"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers." alt="" coords="439,79,523,104"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="167,5,303,31"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,5,117,31"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="171,55,298,80"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="175,104,294,129"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html" title="Handler for an instance being renamed." alt="" coords="173,153,296,179"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html" title="Handles Commands.ICommands that map to those defined in a IChatTrackingContext." alt="" coords="394,128,569,153"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts." alt="" coords="425,177,538,203"/>
<area shape="rect" title=" " alt="" coords="461,227,502,252"/>
<area shape="rect" title=" " alt="" coords="399,276,564,301"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="368,326,595,366"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html" title="Manages the runtime of Jobs." alt="" coords="390,390,573,430"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html" title="Represents the lifetime of a IRestartHandler registration." alt="" coords="391,454,572,494"/>
<area shape="rect" href="class_i_disposable.html" title=" " alt="" coords="189,461,280,487"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="397,518,565,558"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html" title="Factory for creating IRemoteDeploymentManagers." alt="" coords="352,583,611,637"/>
<area shape="rect" title=" " alt="" coords="458,661,505,687"/>
<area shape="rect" title=" " alt="" coords="403,711,560,736"/>
<area shape="rect" title=" " alt="" coords="393,760,570,785"/>
<area shape="rect" title=" " alt="" coords="456,809,507,835"/>
<area shape="rect" title=" " alt="" coords="422,859,541,884"/>
<area shape="rect" title=" " alt="" coords="462,908,501,933"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6f69db8c3ceae298404f5d8d5a7312b3"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a> ()</td></tr>
<tr class="separator:a6f69db8c3ceae298404f5d8d5a7312b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d22a408a414abd08361ceff309c3bf"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad4d22a408a414abd08361ceff309c3bf">ChangeSettings</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad4d22a408a414abd08361ceff309c3bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">launchParameters</td><td>The new DreamDaemonLaunchParameters. May be modified.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in <code>true</code> if a reboot is required, <code>false</code> otherwise.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad4d22a408a414abd08361ceff309c3bf">More...</a><br /></td></tr>
<tr class="separator:ad4d22a408a414abd08361ceff309c3bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fea3476c8ac941fc42087b9c3e36077"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8fea3476c8ac941fc42087b9c3e36077">HandleChatCommand</a> (string commandName, string arguments, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a> sender, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a8fea3476c8ac941fc42087b9c3e36077"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a chat command. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commandName</td><td>The command name.</td></tr>
    <tr><td class="paramname">arguments</td><td>Everything typed after <em>commandName</em>  minus leading spaces.</td></tr>
    <tr><td class="paramname">sender</td><td>The sending <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html" title="Represents a tgs_chat_user datum.">ChatUser</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the MessageContent text to send back.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8fea3476c8ac941fc42087b9c3e36077">More...</a><br /></td></tr>
<tr class="separator:a8fea3476c8ac941fc42087b9c3e36077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7afe38b1ea6c4a0f1396a45a3ff013f"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f">Launch</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ab7afe38b1ea6c4a0f1396a45a3ff013f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f">More...</a><br /></td></tr>
<tr class="separator:ab7afe38b1ea6c4a0f1396a45a3ff013f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad77b687adbbd7f8963b5bab7c46e2acf"><td class="memItemLeft" align="right" valign="top">virtual async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad77b687adbbd7f8963b5bab7c46e2acf">ResetRebootState</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad77b687adbbd7f8963b5bab7c46e2acf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels pending graceful actions. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad77b687adbbd7f8963b5bab7c46e2acf">More...</a><br /></td></tr>
<tr class="separator:ad77b687adbbd7f8963b5bab7c46e2acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805a90319a8bdf4862ce9879f125b853"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853">Restart</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a805a90319a8bdf4862ce9879f125b853"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restarts the watchdog. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the restart will be delayed until a reboot is detected in the active server's DMAPI and this function will retrun immediately.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853">More...</a><br /></td></tr>
<tr class="separator:a805a90319a8bdf4862ce9879f125b853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae30d4b582b04eb7c3ef3c5d848429bbd"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:ae30d4b582b04eb7c3ef3c5d848429bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec4f16b34fe08499a4aaff0235ecdc76"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec4f16b34fe08499a4aaff0235ecdc76">StopAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:aec4f16b34fe08499a4aaff0235ecdc76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee58f2a5e3ae97940e281d6975ed720"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720">Terminate</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a4ee58f2a5e3ae97940e281d6975ed720"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the watchdog. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the termination will be delayed until a reboot is detected in the active server's DMAPI and this function will return immediately.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720">More...</a><br /></td></tr>
<tr class="separator:a4ee58f2a5e3ae97940e281d6975ed720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04162b14c55443e4bf8d2f0956ea0b9b"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a04162b14c55443e4bf8d2f0956ea0b9b">HandleRestart</a> (Version? updateVersion, bool handlerMayDelayShutdownWithExtremelyLongRunningTasks, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a04162b14c55443e4bf8d2f0956ea0b9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a restart of the server. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">updateVersion</td><td>The Version being updated to, <code>null</code> if not being changed.</td></tr>
    <tr><td class="paramname">handlerMayDelayShutdownWithExtremelyLongRunningTasks</td><td>If <code>false</code> the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts.">IRestartHandler</a> should aim to complete the Task returned from this function ASAP.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a04162b14c55443e4bf8d2f0956ea0b9b">More...</a><br /></td></tr>
<tr class="separator:a04162b14c55443e4bf8d2f0956ea0b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed998221c11ef7ab08e022113171dcf"><td class="memItemLeft" align="right" valign="top">abstract ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7ed998221c11ef7ab08e022113171dcf">InstanceRenamed</a> (string newInstanceName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a7ed998221c11ef7ab08e022113171dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newInstanceName</td><td>The new <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity.html#a7e2f2eeddbc6315acbcfa00c54762183" title="The name of the entity represented by the NamedEntity.">Api.Models.NamedEntity.Name</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7ed998221c11ef7ab08e022113171dcf">More...</a><br /></td></tr>
<tr class="separator:a7ed998221c11ef7ab08e022113171dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9386d08a9eb76694c84db3ed5cf0dca2"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9386d08a9eb76694c84db3ed5cf0dca2">CreateDump</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a9386d08a9eb76694c84db3ed5cf0dca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to create a process dump for DreamDaemon. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9386d08a9eb76694c84db3ed5cf0dca2">More...</a><br /></td></tr>
<tr class="separator:a9386d08a9eb76694c84db3ed5cf0dca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a041c4bb73201345e368f9e4879c9cc67"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a041c4bb73201345e368f9e4879c9cc67">Broadcast</a> (string message, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a041c4bb73201345e368f9e4879c9cc67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a broadcast <em>message</em>  to the DMAPI. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The message to broadcast.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in <code>true</code> if the broadcast succeeded., <code>false</code> otherwise.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a041c4bb73201345e368f9e4879c9cc67">More...</a><br /></td></tr>
<tr class="separator:a041c4bb73201345e368f9e4879c9cc67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4d067afa1dd9d2aacc83657f1639dd"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a9e4d067afa1dd9d2aacc83657f1639dd">Launch</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a9e4d067afa1dd9d2aacc83657f1639dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a9e4d067afa1dd9d2aacc83657f1639dd">More...</a><br /></td></tr>
<tr class="separator:a9e4d067afa1dd9d2aacc83657f1639dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ab9706c8c07b39618a769b60bac61e"><td class="memItemLeft" align="right" valign="top">ValueTask&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a74ab9706c8c07b39618a769b60bac61e">ChangeSettings</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a74ab9706c8c07b39618a769b60bac61e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a74ab9706c8c07b39618a769b60bac61e">More...</a><br /></td></tr>
<tr class="separator:a74ab9706c8c07b39618a769b60bac61e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7ff5774e54084bd2ce8a45bebdb2ae2"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#aa7ff5774e54084bd2ce8a45bebdb2ae2">Restart</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aa7ff5774e54084bd2ce8a45bebdb2ae2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restarts the watchdog.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#aa7ff5774e54084bd2ce8a45bebdb2ae2">More...</a><br /></td></tr>
<tr class="separator:aa7ff5774e54084bd2ce8a45bebdb2ae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd3483d8e410fa0651dcb211a93ad4ea"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abd3483d8e410fa0651dcb211a93ad4ea">Terminate</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:abd3483d8e410fa0651dcb211a93ad4ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the watchdog.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abd3483d8e410fa0651dcb211a93ad4ea">More...</a><br /></td></tr>
<tr class="separator:abd3483d8e410fa0651dcb211a93ad4ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac402f4a9d33aba4b8fd57256f31461bc"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#ac402f4a9d33aba4b8fd57256f31461bc">ResetRebootState</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ac402f4a9d33aba4b8fd57256f31461bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels pending graceful actions.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#ac402f4a9d33aba4b8fd57256f31461bc">More...</a><br /></td></tr>
<tr class="separator:ac402f4a9d33aba4b8fd57256f31461bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ddde105ca2c70aa01eb5bdd116d3879"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a3ddde105ca2c70aa01eb5bdd116d3879">CreateDump</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a3ddde105ca2c70aa01eb5bdd116d3879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to create a process dump for DreamDaemon.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a3ddde105ca2c70aa01eb5bdd116d3879">More...</a><br /></td></tr>
<tr class="separator:a3ddde105ca2c70aa01eb5bdd116d3879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a191672b4ebeab3e9c7e1488e9d414e66"><td class="memItemLeft" align="right" valign="top">ValueTask&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a191672b4ebeab3e9c7e1488e9d414e66">Broadcast</a> (string message, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a191672b4ebeab3e9c7e1488e9d414e66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a broadcast <em>message</em>  to the DMAPI.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a191672b4ebeab3e9c7e1488e9d414e66">More...</a><br /></td></tr>
<tr class="separator:a191672b4ebeab3e9c7e1488e9d414e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564f82eb43566dabd77e37191b4e3d37"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string?&gt; parameters, bool deploymentPipeline, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a564f82eb43566dabd77e37191b4e3d37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em> .   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">More...</a><br /></td></tr>
<tr class="separator:a564f82eb43566dabd77e37191b4e3d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c1c4de7ff2aeb837b875d9a6ac99f0a"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a7c1c4de7ff2aeb837b875d9a6ac99f0a">InstanceRenamed</a> (string newInstanceName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a7c1c4de7ff2aeb837b875d9a6ac99f0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a7c1c4de7ff2aeb837b875d9a6ac99f0a">More...</a><br /></td></tr>
<tr class="separator:a7c1c4de7ff2aeb837b875d9a6ac99f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33cdeb0720901aa888813fce8c38fdf"><td class="memItemLeft" align="right" valign="top">ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#ab33cdeb0720901aa888813fce8c38fdf">HandleChatCommand</a> (string commandName, string arguments, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a> sender, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ab33cdeb0720901aa888813fce8c38fdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a chat command.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#ab33cdeb0720901aa888813fce8c38fdf">More...</a><br /></td></tr>
<tr class="separator:ab33cdeb0720901aa888813fce8c38fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a876fb70e47b6d6c39d7016b0b77d5f75"><td class="memItemLeft" align="right" valign="top">ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a876fb70e47b6d6c39d7016b0b77d5f75">HandleRestart</a> (Version? updateVersion, bool handlerMayDelayShutdownWithExtremelyLongRunningTasks, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a876fb70e47b6d6c39d7016b0b77d5f75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a restart of the server.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a876fb70e47b6d6c39d7016b0b77d5f75">More...</a><br /></td></tr>
<tr class="separator:a876fb70e47b6d6c39d7016b0b77d5f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a1a62de2c2fd2249c313a1a8d382d996b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1a62de2c2fd2249c313a1a8d382d996b">WatchdogBase</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> chat, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> sessionControllerFactory, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a> dmbFactory, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a> sessionPersistor, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> serverControl, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> asyncDelayer, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> gameIOManager, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt; logger, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> initialLaunchParameters, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>, bool <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a>)</td></tr>
<tr class="memdesc:a1a62de2c2fd2249c313a1a8d382d996b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> class.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1a62de2c2fd2249c313a1a8d382d996b">More...</a><br /></td></tr>
<tr class="separator:a1a62de2c2fd2249c313a1a8d382d996b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a817e8ca4284258e610bf6070a944c7dd"><td class="memItemLeft" align="right" valign="top">abstract ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd">InitController</a> (ValueTask eventTask, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a>? reattachInfo, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a817e8ca4284258e610bf6070a944c7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts all ISessionControllers.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd">More...</a><br /></td></tr>
<tr class="separator:a817e8ca4284258e610bf6070a944c7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbff1b419510f84375b7ca3dcf315b03"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03">LaunchNoLock</a> (bool startMonitor, bool announce, bool announceFailure, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a>? reattachInfo, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:abbff1b419510f84375b7ca3dcf315b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launches the watchdog.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03">More...</a><br /></td></tr>
<tr class="separator:abbff1b419510f84375b7ca3dcf315b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf80bd8e764b8199c5f63aba6bf3de7"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aabf80bd8e764b8199c5f63aba6bf3de7">StopMonitor</a> ()</td></tr>
<tr class="memdesc:aabf80bd8e764b8199c5f63aba6bf3de7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a>. Doesn't kill the servers.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aabf80bd8e764b8199c5f63aba6bf3de7">More...</a><br /></td></tr>
<tr class="separator:aabf80bd8e764b8199c5f63aba6bf3de7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f4512b6d6c1772682cf7666fc31a323"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4f4512b6d6c1772682cf7666fc31a323">CheckLaunchResult</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a> controller, string serverName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a4f4512b6d6c1772682cf7666fc31a323"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the LaunchResult of a given <em>controller</em>  for errors and throw a JobException if any are detected.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4f4512b6d6c1772682cf7666fc31a323">More...</a><br /></td></tr>
<tr class="separator:a4f4512b6d6c1772682cf7666fc31a323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d53273beb40a057f7f9423b48850702"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d53273beb40a057f7f9423b48850702">ReattachFailure</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2d53273beb40a057f7f9423b48850702"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call from InitController(ValueTask, ReattachInformation, CancellationToken) when a reattach operation fails to attempt a fresh start.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d53273beb40a057f7f9423b48850702">More...</a><br /></td></tr>
<tr class="separator:a2d53273beb40a057f7f9423b48850702"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb29ff97cd95a61ab370d24685171a2"><td class="memItemLeft" align="right" valign="top">abstract ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2">DisposeAndNullControllersImpl</a> ()</td></tr>
<tr class="memdesc:aecb29ff97cd95a61ab370d24685171a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call IDisposable.Dispose and null the fields for all ISessionControllers.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2">More...</a><br /></td></tr>
<tr class="separator:aecb29ff97cd95a61ab370d24685171a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac84983fa4b27fcdf9044aaf68ae82a50"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50">DisposeAndNullControllers</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ac84983fa4b27fcdf9044aaf68ae82a50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers.">DisposeAndNullControllersImpl</a> under a locked context.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50">More...</a><br /></td></tr>
<tr class="separator:ac84983fa4b27fcdf9044aaf68ae82a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab53c08e5a2f37233940f3492207a760b"><td class="memItemLeft" align="right" valign="top">abstract ? <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a> ()</td></tr>
<tr class="memdesc:ab53c08e5a2f37233940f3492207a760b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the active ISessionController.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">More...</a><br /></td></tr>
<tr class="separator:ab53c08e5a2f37233940f3492207a760b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a354a45aca09fbccbe15dbe79d6675c97"><td class="memItemLeft" align="right" valign="top">abstract ValueTask&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97">HandleMonitorWakeup</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> activationReason, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a354a45aca09fbccbe15dbe79d6675c97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the actions to take when the monitor has to "wake up".   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97">More...</a><br /></td></tr>
<tr class="separator:a354a45aca09fbccbe15dbe79d6675c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9efa04dfe5428a8ce1271600e2388a4e"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9efa04dfe5428a8ce1271600e2388a4e">BeforeApplyDmb</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> newCompileJob, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a9efa04dfe5428a8ce1271600e2388a4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called before a given <em>newCompileJob</em>  goes live.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9efa04dfe5428a8ce1271600e2388a4e">More...</a><br /></td></tr>
<tr class="separator:a9efa04dfe5428a8ce1271600e2388a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a7765d8a839d318fee44e8d63b6369"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369">HandleEventImpl</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string &gt; parameters, bool relayToSession, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af1a7765d8a839d318fee44e8d63b6369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em>  without re-throwing errors.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369">More...</a><br /></td></tr>
<tr class="separator:af1a7765d8a839d318fee44e8d63b6369"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ae1d11c811875d5ceefaa909d00a41e79"><td class="memItemLeft" align="right" valign="top">long?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae1d11c811875d5ceefaa909d00a41e79">SessionId</a><code> [get]</code></td></tr>
<tr class="memdesc:ae1d11c811875d5ceefaa909d00a41e79"><td class="mdescLeft">&#160;</td><td class="mdescRight">An incrementing ID for representing current server execution.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae1d11c811875d5ceefaa909d00a41e79">More...</a><br /></td></tr>
<tr class="separator:ae1d11c811875d5ceefaa909d00a41e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683" title="The current status of the watchdog.">WatchdogStatus</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">More...</a><br /></td></tr>
<tr class="separator:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f77bb87d63b1a1a50aac89ad909f29"><td class="memItemLeft" align="right" valign="top">abstract bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39f77bb87d63b1a1a50aac89ad909f29">AlphaIsActive</a><code> [get]</code></td></tr>
<tr class="memdesc:a39f77bb87d63b1a1a50aac89ad909f29"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the alpha server is the active server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39f77bb87d63b1a1a50aac89ad909f29">More...</a><br /></td></tr>
<tr class="separator:a39f77bb87d63b1a1a50aac89ad909f29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a><code> [get, protected set]</code></td></tr>
<tr class="memdesc:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters to be applied.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">More...</a><br /></td></tr>
<tr class="separator:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38066e15427a18f6e71f00526e797088"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a38066e15427a18f6e71f00526e797088">LastLaunchParameters</a><code> [get, protected set]</code></td></tr>
<tr class="memdesc:a38066e15427a18f6e71f00526e797088"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters the active server is using. This may not be the exact same as <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a> but still be associated with the same session.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a38066e15427a18f6e71f00526e797088">More...</a><br /></td></tr>
<tr class="separator:a38066e15427a18f6e71f00526e797088"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c1f65bce4d161d81063e4c426265f4"><td class="memItemLeft" align="right" valign="top">Models.? <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_compile_job.html">CompileJob</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a30c1f65bce4d161d81063e4c426265f4">ActiveCompileJob</a><code> [get]</code></td></tr>
<tr class="memdesc:a30c1f65bce4d161d81063e4c426265f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a30c1f65bce4d161d81063e4c426265f4">More...</a><br /></td></tr>
<tr class="separator:a30c1f65bce4d161d81063e4c426265f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc3f8e6c5569555d358578e612a1920"><td class="memItemLeft" align="right" valign="top">abstract ? <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5bc3f8e6c5569555d358578e612a1920">RebootState</a><code> [get]</code></td></tr>
<tr class="memdesc:a5bc3f8e6c5569555d358578e612a1920"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5bc3f8e6c5569555d358578e612a1920">More...</a><br /></td></tr>
<tr class="separator:a5bc3f8e6c5569555d358578e612a1920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3bafe5d390332f896cdaf43a8db55d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d">SessionPersistor</a><code> [get]</code></td></tr>
<tr class="memdesc:a5a3bafe5d390332f896cdaf43a8db55d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionPersistor for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d">More...</a><br /></td></tr>
<tr class="separator:a5a3bafe5d390332f896cdaf43a8db55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="memItemLeft" align="right" valign="top">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a><code> [get]</code></td></tr>
<tr class="memdesc:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">More...</a><br /></td></tr>
<tr class="separator:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a><code> [get]</code></td></tr>
<tr class="memdesc:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IChatManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">More...</a><br /></td></tr>
<tr class="separator:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb">SessionControllerFactory</a><code> [get]</code></td></tr>
<tr class="memdesc:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionControllerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb">More...</a><br /></td></tr>
<tr class="separator:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401d41a1b1b805f553f53b35f46275ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef">DmbFactory</a><code> [get]</code></td></tr>
<tr class="memdesc:a401d41a1b1b805f553f53b35f46275ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IDmbFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef">More...</a><br /></td></tr>
<tr class="separator:a401d41a1b1b805f553f53b35f46275ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdc59de3b3556a08bd111264527f369"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369">AsyncDelayer</a><code> [get]</code></td></tr>
<tr class="memdesc:abbdc59de3b3556a08bd111264527f369"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369">More...</a><br /></td></tr>
<tr class="separator:abbdc59de3b3556a08bd111264527f369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9954fc5d6d0fcc3625b171ac6877b565"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9954fc5d6d0fcc3625b171ac6877b565">GameIOManager</a><code> [get]</code></td></tr>
<tr class="memdesc:a9954fc5d6d0fcc3625b171ac6877b565"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> pointing to the Game directory.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9954fc5d6d0fcc3625b171ac6877b565">More...</a><br /></td></tr>
<tr class="separator:a9954fc5d6d0fcc3625b171ac6877b565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td colspan="2" onclick="javascript:toggleInherit('properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a></td></tr>
<tr class="memitem:a4f701ad6f7337369f5360ff583a3cc7a inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top">long?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a4f701ad6f7337369f5360ff583a3cc7a">SessionId</a><code> [get]</code></td></tr>
<tr class="memdesc:a4f701ad6f7337369f5360ff583a3cc7a inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">An incrementing ID for representing current server execution.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a4f701ad6f7337369f5360ff583a3cc7a">More...</a><br /></td></tr>
<tr class="separator:a4f701ad6f7337369f5360ff583a3cc7a inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">Status</a><code> [get]</code></td></tr>
<tr class="memdesc:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683" title="The current status of the watchdog.">WatchdogStatus</a>.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">More...</a><br /></td></tr>
<tr class="separator:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">AlphaIsActive</a><code> [get]</code></td></tr>
<tr class="memdesc:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the alpha server is the active server.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">More...</a><br /></td></tr>
<tr class="separator:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7989a86bba4558c54e85f4e2028ee588 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top">Models.? <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_compile_job.html">CompileJob</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7989a86bba4558c54e85f4e2028ee588">ActiveCompileJob</a><code> [get]</code></td></tr>
<tr class="memdesc:a7989a86bba4558c54e85f4e2028ee588 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7989a86bba4558c54e85f4e2028ee588">More...</a><br /></td></tr>
<tr class="separator:a7989a86bba4558c54e85f4e2028ee588 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">ActiveLaunchParameters</a><code> [get]</code></td></tr>
<tr class="memdesc:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters to be applied.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">More...</a><br /></td></tr>
<tr class="separator:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96dd16213c44b74ce05e98b4805361a8 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a96dd16213c44b74ce05e98b4805361a8">LastLaunchParameters</a><code> [get]</code></td></tr>
<tr class="memdesc:a96dd16213c44b74ce05e98b4805361a8 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters the active server is using.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a96dd16213c44b74ce05e98b4805361a8">More...</a><br /></td></tr>
<tr class="separator:a96dd16213c44b74ce05e98b4805361a8 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">RebootState</a><code> [get]</code></td></tr>
<tr class="memdesc:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">More...</a><br /></td></tr>
<tr class="separator:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aed9bd19e52b72a565e6e4cab00ac3e0a"><td class="memItemLeft" align="right" valign="top">async ValueTask IEventConsumer.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aed9bd19e52b72a565e6e4cab00ac3e0a">HandleEvent</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string?&gt; parameters, bool deploymentPipeline, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aed9bd19e52b72a565e6e4cab00ac3e0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em> . <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventType</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7" title="Types of events. Mirror in tgs.dm. Prefer last listed name for script.">EventType</a>.</td></tr>
    <tr><td class="paramname">parameters</td><td>An IEnumerable&lt;T&gt; of string parameters for <em>eventType</em> .</td></tr>
    <tr><td class="paramname">deploymentPipeline</td><td>If this event is part of the deployment pipeline.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aed9bd19e52b72a565e6e4cab00ac3e0a">More...</a><br /></td></tr>
<tr class="separator:aed9bd19e52b72a565e6e4cab00ac3e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24be19620df4ed6b473ad5b49ea8dea"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea">MonitorRestart</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ab24be19620df4ed6b473ad5b49ea8dea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to restart the monitor from scratch.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea">More...</a><br /></td></tr>
<tr class="separator:ab24be19620df4ed6b473ad5b49ea8dea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6672dfae1375d392bcd16ed604590d"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d">InitialCheckDmbUpdated</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_compile_job.html">CompileJob</a> currentCompileJob)</td></tr>
<tr class="memdesc:a6d6672dfae1375d392bcd16ed604590d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for a new IDmbProvider.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d">More...</a><br /></td></tr>
<tr class="separator:a6d6672dfae1375d392bcd16ed604590d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfec26f530228b80d384b86ee979ef2f"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">MonitorLifetimes</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:adfec26f530228b80d384b86ee979ef2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">More...</a><br /></td></tr>
<tr class="separator:adfec26f530228b80d384b86ee979ef2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ee74413d53a906a104c8376a828e73"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73">TerminateNoLock</a> (bool graceful, bool announce, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad3ee74413d53a906a104c8376a828e73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720" title="Stops the watchdog. A ValueTask representing the running operation.">Terminate(bool, CancellationToken)</a>. Does not lock <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4" title="The SemaphoreSlim for the WatchdogBase.">synchronizationSemaphore</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73">More...</a><br /></td></tr>
<tr class="separator:ad3ee74413d53a906a104c8376a828e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075fb0946e843d7eb3f1d708314c5f13"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13">HandleHealthCheck</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a075fb0946e843d7eb3f1d708314c5f13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a watchdog health check.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13">More...</a><br /></td></tr>
<tr class="separator:a075fb0946e843d7eb3f1d708314c5f13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b260f0cac6051983c75a9a6777b38b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad5b260f0cac6051983c75a9a6777b38b">HandleChatResponses</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html">TopicResponse</a>? result)</td></tr>
<tr class="memdesc:ad5b260f0cac6051983c75a9a6777b38b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle any <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html#a2232f10dafaa3d6ec82fb05e1639841c" title="The ChatMessages to send as the result of a TopicCommandType.EventNotification request,...">TopicResponse.ChatResponses</a> in a given topic <em>result</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad5b260f0cac6051983c75a9a6777b38b">More...</a><br /></td></tr>
<tr class="separator:ad5b260f0cac6051983c75a9a6777b38b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d9e24a869875a2654715e7937462179"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179">CreateDumpNoLock</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2d9e24a869875a2654715e7937462179"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to create a process dump for the game server. Requires a lock on <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4" title="The SemaphoreSlim for the WatchdogBase.">synchronizationSemaphore</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179">More...</a><br /></td></tr>
<tr class="separator:a2d9e24a869875a2654715e7937462179"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a52038e1a769f1114c492c76640a6afc8"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a></td></tr>
<tr class="memdesc:a52038e1a769f1114c492c76640a6afc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">More...</a><br /></td></tr>
<tr class="separator:a52038e1a769f1114c492c76640a6afc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a></td></tr>
<tr class="memdesc:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SemaphoreSlim for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">More...</a><br /></td></tr>
<tr class="separator:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a></td></tr>
<tr class="memdesc:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="mdescLeft">&#160;</td><td class="mdescRight">SemaphoreSlim used for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context.">DisposeAndNullControllers</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">More...</a><br /></td></tr>
<tr class="separator:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5768c37124d54e80c66dc63d28d0dea4"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a></td></tr>
<tr class="memdesc:a5768c37124d54e80c66dc63d28d0dea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IEventConsumer that is not the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">More...</a><br /></td></tr>
<tr class="separator:a5768c37124d54e80c66dc63d28d0dea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a></td></tr>
<tr class="memdesc:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">More...</a><br /></td></tr>
<tr class="separator:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html">IRestartRegistration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a></td></tr>
<tr class="memdesc:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRestartRegistration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">More...</a><br /></td></tr>
<tr class="separator:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8becb1115fe1c09c84534c798466e03f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a></td></tr>
<tr class="memdesc:a8becb1115fe1c09c84534c798466e03f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager pointing to the Diagnostics directory.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">More...</a><br /></td></tr>
<tr class="separator:a8becb1115fe1c09c84534c798466e03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72637a3ebe8925b7c3753416370ad83c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a></td></tr>
<tr class="memdesc:a72637a3ebe8925b7c3753416370ad83c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRemoteDeploymentManagerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">More...</a><br /></td></tr>
<tr class="separator:a72637a3ebe8925b7c3753416370ad83c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410f168d84f80c138450fb42f222ba01"><td class="memItemLeft" align="right" valign="top">readonly bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a></td></tr>
<tr class="memdesc:a410f168d84f80c138450fb42f222ba01"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> should LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken) in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync(CancellationToken)</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">More...</a><br /></td></tr>
<tr class="separator:a410f168d84f80c138450fb42f222ba01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f6221485a1d072038f17e0d6ba55fc"><td class="memItemLeft" align="right" valign="top">volatile TaskCompletionSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af8f6221485a1d072038f17e0d6ba55fc">activeParametersUpdated</a></td></tr>
<tr class="memdesc:af8f6221485a1d072038f17e0d6ba55fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">TaskCompletionSource that completes when <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a> are changed and we are running.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af8f6221485a1d072038f17e0d6ba55fc">More...</a><br /></td></tr>
<tr class="separator:af8f6221485a1d072038f17e0d6ba55fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65dd21315e5283fe959552efc2cee6aa"><td class="memItemLeft" align="right" valign="top">CancellationTokenSource?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">monitorCts</a></td></tr>
<tr class="memdesc:a65dd21315e5283fe959552efc2cee6aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource for the monitor loop.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">More...</a><br /></td></tr>
<tr class="separator:a65dd21315e5283fe959552efc2cee6aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663429f7433e25bb662c9d12dd9c285d"><td class="memItemLeft" align="right" valign="top">Task?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">monitorTask</a></td></tr>
<tr class="memdesc:a663429f7433e25bb662c9d12dd9c285d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Task running the monitor loop.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">More...</a><br /></td></tr>
<tr class="separator:a663429f7433e25bb662c9d12dd9c285d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c8949750c7c079faf8d438fde20c6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a></td></tr>
<tr class="memdesc:af5c8949750c7c079faf8d438fde20c6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backing field for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb" title="The current WatchdogStatus.">Status</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">More...</a><br /></td></tr>
<tr class="separator:af5c8949750c7c079faf8d438fde20c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85241e9a900f49e703b7eda13c78564"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a></td></tr>
<tr class="memdesc:ae85241e9a900f49e703b7eda13c78564"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of hearbeats missed.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">More...</a><br /></td></tr>
<tr class="separator:ae85241e9a900f49e703b7eda13c78564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256c7fd5a04870388411185b46ff6fb8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a></td></tr>
<tr class="memdesc:a256c7fd5a04870388411185b46ff6fb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the servers should be released instead of shutdown.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">More...</a><br /></td></tr>
<tr class="separator:a256c7fd5a04870388411185b46ff6fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c39f385b06058f4699503b492d2b743"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a></td></tr>
<tr class="memdesc:a5c39f385b06058f4699503b492d2b743"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> has been <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a>'d.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">More...</a><br /></td></tr>
<tr class="separator:a5c39f385b06058f4699503b492d2b743"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Base class for <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>s.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00036">36</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1a62de2c2fd2249c313a1a8d382d996b" name="a1a62de2c2fd2249c313a1a8d382d996b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a62de2c2fd2249c313a1a8d382d996b">&#9670;&#160;</a></span>WatchdogBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td>
          <td class="paramname"><em>chat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td>
          <td class="paramname"><em>sessionControllerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a>&#160;</td>
          <td class="paramname"><em>dmbFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a>&#160;</td>
          <td class="paramname"><em>sessionPersistor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td>
          <td class="paramname"><em>jobManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td>
          <td class="paramname"><em>serverControl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>diagnosticsIOManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td>
          <td class="paramname"><em>eventConsumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManagerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>gameIOManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>initialLaunchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>autoStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> class.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chat</td><td>The value of <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat.html">Chat</a>.</td></tr>
    <tr><td class="paramname">sessionControllerFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb" title="The ISessionControllerFactory for the WatchdogBase.">SessionControllerFactory</a>.</td></tr>
    <tr><td class="paramname">dmbFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef" title="The IDmbFactory for the WatchdogBase.">DmbFactory</a>.</td></tr>
    <tr><td class="paramname">sessionPersistor</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d" title="The ISessionPersistor for the WatchdogBase.">SessionPersistor</a>.</td></tr>
    <tr><td class="paramname">jobManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319" title="The IJobManager for the WatchdogBase.">jobManager</a>.</td></tr>
    <tr><td class="paramname">serverControl</td><td>The IServerControl to populate <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea" title="The IRestartRegistration for the WatchdogBase.">restartRegistration</a> with.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369" title="The IAsyncDelayer for the WatchdogBase.">AsyncDelayer</a>.</td></tr>
    <tr><td class="paramname">diagnosticsIOManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f" title="The IIOManager pointing to the Diagnostics directory.">diagnosticsIOManager</a>.</td></tr>
    <tr><td class="paramname">eventConsumer</td><td>The value of EventConsumer.</td></tr>
    <tr><td class="paramname">remoteDeploymentManagerFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c" title="The IRemoteDeploymentManagerFactory for the WatchdogBase.">remoteDeploymentManagerFactory</a>.</td></tr>
    <tr><td class="paramname">gameIOManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9954fc5d6d0fcc3625b171ac6877b565" title="The IIOManager for the WatchdogBase pointing to the Game directory.">GameIOManager</a>.</td></tr>
    <tr><td class="paramname">logger</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6" title="The ILogger for the WatchdogBase.">Logger</a>.</td></tr>
    <tr><td class="paramname">initialLaunchParameters</td><td>The initial value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a>. May be modified.</td></tr>
    <tr><td class="paramname">metadata</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8" title="The Api.Models.Instance for the WatchdogBase.">metadata</a>.</td></tr>
    <tr><td class="paramname">autoStart</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01" title="If the WatchdogBase should LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken) in ...">autoStart</a>.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00200">200</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  216</span>        {</div>
<div class="line"><span class="lineno">  217</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a> = chat ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(chat));</div>
<div class="line"><span class="lineno">  218</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory.html">SessionControllerFactory</a> = sessionControllerFactory ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(sessionControllerFactory));</div>
<div class="line"><span class="lineno">  219</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a> = dmbFactory ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(dmbFactory));</div>
<div class="line"><span class="lineno">  220</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a> = sessionPersistor ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(sessionPersistor));</div>
<div class="line"><span class="lineno">  221</span>            this.jobManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>));</div>
<div class="line"><span class="lineno">  222</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html">AsyncDelayer</a> = asyncDelayer ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(asyncDelayer));</div>
<div class="line"><span class="lineno">  223</span>            this.diagnosticsIOManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>));</div>
<div class="line"><span class="lineno">  224</span>            this.eventConsumer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>));</div>
<div class="line"><span class="lineno">  225</span>            this.remoteDeploymentManagerFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>));</div>
<div class="line"><span class="lineno">  226</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9954fc5d6d0fcc3625b171ac6877b565">GameIOManager</a> = gameIOManager ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(gameIOManager));</div>
<div class="line"><span class="lineno">  227</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a> = logger ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(logger));</div>
<div class="line"><span class="lineno">  228</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = initialLaunchParameters ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(initialLaunchParameters));</div>
<div class="line"><span class="lineno">  229</span>            this.metadata = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>));</div>
<div class="line"><span class="lineno">  230</span>            this.autoStart = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a>;</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>            ArgumentNullException.ThrowIfNull(serverControl);</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>            chat.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">RegisterCommandHandler</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = initialLaunchParameters;</div>
<div class="line"><span class="lineno">  237</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  238</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af8f6221485a1d072038f17e0d6ba55fc">activeParametersUpdated</a> = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a> = serverControl.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">RegisterForRestart</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  241</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  242</span>            {</div>
<div class="line"><span class="lineno">  243</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  244</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  245</span>            }</div>
<div class="line"><span class="lineno">  246</span>            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  247</span>            {</div>
<div class="line"><span class="lineno">  248</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a>.Dispose();</div>
<div class="line"><span class="lineno">  249</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>?.Dispose();</div>
<div class="line"><span class="lineno">  250</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  251</span>            }</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Created watchdog&quot;</span>);</div>
<div class="line"><span class="lineno">  254</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">Tgstation.Server.Host.Components.Deployment.DmbFactory</a></div><div class="ttdoc">Standard IDmbFactory.</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00026">DmbFactory.cs:27</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory.html">Tgstation.Server.Host.Components.Session.SessionControllerFactory</a></div><div class="ttdef"><b>Definition:</b> <a href="_session_controller_factory_8cs_source.html#l00032">SessionControllerFactory.cs:33</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">Tgstation.Server.Host.Components.Session.SessionPersistor</a></div><div class="ttdef"><b>Definition:</b> <a href="_session_persistor_8cs_source.html#l00019">SessionPersistor.cs:20</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a1688863ddcd7d0bbfa3ec13b7b015319"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a></div><div class="ttdeci">readonly IJobManager jobManager</div><div class="ttdoc">The IJobManager for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00125">WatchdogBase.cs:125</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a2143ec7079d0ffd42c76f61cf7b71cf6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a></div><div class="ttdeci">ILogger&lt; WatchdogBase &gt; Logger</div><div class="ttdoc">The ILogger for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00075">WatchdogBase.cs:75</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a256c7fd5a04870388411185b46ff6fb8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a></div><div class="ttdeci">bool releaseServers</div><div class="ttdoc">If the servers should be released instead of shutdown.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00175">WatchdogBase.cs:175</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a410f168d84f80c138450fb42f222ba01"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a></div><div class="ttdeci">readonly bool autoStart</div><div class="ttdoc">If the WatchdogBase should LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken) in ...</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00145">WatchdogBase.cs:145</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a52038e1a769f1114c492c76640a6afc8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a></div><div class="ttdeci">readonly Api.Models.Instance metadata</div><div class="ttdoc">The Api.Models.Instance for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00105">WatchdogBase.cs:105</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5768c37124d54e80c66dc63d28d0dea4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a></div><div class="ttdeci">readonly IEventConsumer eventConsumer</div><div class="ttdoc">The IEventConsumer that is not the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00120">WatchdogBase.cs:120</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5f9cfb67111bbc5ec1d954e4ed4bf913"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim controllerDisposeSemaphore</div><div class="ttdoc">SemaphoreSlim used for DisposeAndNullControllers.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00115">WatchdogBase.cs:115</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a72637a3ebe8925b7c3753416370ad83c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a></div><div class="ttdeci">readonly IRemoteDeploymentManagerFactory remoteDeploymentManagerFactory</div><div class="ttdoc">The IRemoteDeploymentManagerFactory for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00140">WatchdogBase.cs:140</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a7e6adcb942a9ff1bb7d11d738b98b6e4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim synchronizationSemaphore</div><div class="ttdoc">The SemaphoreSlim for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00110">WatchdogBase.cs:110</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a8becb1115fe1c09c84534c798466e03f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</a></div><div class="ttdeci">readonly IIOManager diagnosticsIOManager</div><div class="ttdoc">The IIOManager pointing to the Diagnostics directory.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00135">WatchdogBase.cs:135</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a9954fc5d6d0fcc3625b171ac6877b565"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9954fc5d6d0fcc3625b171ac6877b565">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GameIOManager</a></div><div class="ttdeci">IIOManager GameIOManager</div><div class="ttdoc">The IIOManager for the WatchdogBase pointing to the Game directory.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00100">WatchdogBase.cs:100</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a9affc2eeae2903d1bdb0fa81a6550fc4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a></div><div class="ttdeci">DreamDaemonLaunchParameters ActiveLaunchParameters</div><div class="ttdoc">The DreamDaemonLaunchParameters to be applied.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00056">WatchdogBase.cs:56</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aec24ff5e3b22b40e62f4a2443eb8cec9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a></div><div class="ttdeci">IChatManager Chat</div><div class="ttdoc">The IChatManager for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00080">WatchdogBase.cs:80</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aefe25fd33c4a6dfb4ea27b583a2286ea"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a></div><div class="ttdeci">readonly IRestartRegistration restartRegistration</div><div class="ttdoc">The IRestartRegistration for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00130">WatchdogBase.cs:130</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_af8f6221485a1d072038f17e0d6ba55fc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af8f6221485a1d072038f17e0d6ba55fc">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.activeParametersUpdated</a></div><div class="ttdeci">volatile TaskCompletionSource activeParametersUpdated</div><div class="ttdoc">TaskCompletionSource that completes when ActiveLaunchParameters are changed and we are running.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00150">WatchdogBase.cs:150</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html">Tgstation.Server.Host.Utils.AsyncDelayer</a></div><div class="ttdef"><b>Definition:</b> <a href="_async_delayer_8cs_source.html#l00008">AsyncDelayer.cs:9</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_a1e1ce49aa3e843a1e037060a544e125e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">Tgstation.Server.Host.Components.Chat.IChatManager.RegisterCommandHandler</a></div><div class="ttdeci">void RegisterCommandHandler(ICustomCommandHandler customCommandHandler)</div><div class="ttdoc">Registers a customCommandHandler  to use.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control_html_a35728d66030addfd5551351b8c6db942"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">Tgstation.Server.Host.Core.IServerControl.RegisterForRestart</a></div><div class="ttdeci">IRestartRegistration RegisterForRestart(IRestartHandler handler)</div><div class="ttdoc">Register a given handler  to run before stopping the server for a restart.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00056">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00150">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.activeParametersUpdated</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00145">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00115">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00135">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00120">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GameIOManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00125">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00105">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">Tgstation.Server.Host.Components.Chat.IChatManager.RegisterCommandHandler()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">Tgstation.Server.Host.Core.IServerControl.RegisterForRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00175">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00140">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00130">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1a62de2c2fd2249c313a1a8d382d996b_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1a62de2c2fd2249c313a1a8d382d996b_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1a62de2c2fd2249c313a1a8d382d996b_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a1a62de2c2fd2249c313a1a8d382d996b_cgraph">
<area shape="rect" title="Initializes a new instance of the WatchdogBase class." alt="" coords="5,37,268,77"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e" title="Registers a customCommandHandler &#160;to use." alt="" coords="316,5,604,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942" title="Register a given handler &#160;to run before stopping the server for a restart." alt="" coords="351,69,569,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9efa04dfe5428a8ce1271600e2388a4e" name="a9efa04dfe5428a8ce1271600e2388a4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9efa04dfe5428a8ce1271600e2388a4e">&#9670;&#160;</a></span>BeforeApplyDmb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td>
          <td class="paramname"><em>newCompileJob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>To be called before a given <em>newCompileJob</em>  goes live.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newCompileJob</td><td>The new <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> being applied.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00705">705</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  706</span>        {</div>
<div class="line"><span class="lineno">  707</span>            <span class="keywordflow">if</span> (newCompileJob.Id == <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a30c1f65bce4d161d81063e4c426265f4">ActiveCompileJob</a>?.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a>)</div>
<div class="line"><span class="lineno">  708</span>            {</div>
<div class="line"><span class="lineno">  709</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Same compile job, not sending deployment event&quot;</span>);</div>
<div class="line"><span class="lineno">  710</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  711</span>            }</div>
<div class="line"><span class="lineno">  712</span> </div>
<div class="line"><span class="lineno">  713</span>            var remoteDeploymentManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">CreateRemoteDeploymentManager</a>(</div>
<div class="line"><span class="lineno">  714</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>,</div>
<div class="line"><span class="lineno">  715</span>                newCompileJob);</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>            var eventTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(</div>
<div class="line"><span class="lineno">  718</span>                <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.DeploymentActivation,</div>
<div class="line"><span class="lineno">  719</span>                <span class="keyword">new</span> List&lt;string?&gt;</div>
<div class="line"><span class="lineno">  720</span>                {</div>
<div class="line"><span class="lineno">  721</span>                    GameIOManager.ResolvePath(newCompileJob.DirectoryName!.Value.ToString()),</div>
<div class="line"><span class="lineno">  722</span>                },</div>
<div class="line"><span class="lineno">  723</span>                <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  724</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  727</span>            {</div>
<div class="line"><span class="lineno">  728</span>                await remoteDeploymentManager.ApplyDeployment(newCompileJob, cancellationToken);</div>
<div class="line"><span class="lineno">  729</span>            }</div>
<div class="line"><span class="lineno">  730</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  731</span>            {</div>
<div class="line"><span class="lineno">  732</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(ex, <span class="stringliteral">&quot;Failed to apply remote deployment!&quot;</span>);</div>
<div class="line"><span class="lineno">  733</span>            }</div>
<div class="line"><span class="lineno">  734</span> </div>
<div class="line"><span class="lineno">  735</span>            await eventTask;</div>
<div class="line"><span class="lineno">  736</span>        }</div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id_html_ae31e478e1d338b37a14565df6fd58570"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Tgstation.Server.Api.Models.EntityId.Id</a></div><div class="ttdeci">virtual ? long Id</div><div class="ttdoc">The ID of the entity.</div><div class="ttdef"><b>Definition:</b> <a href="_entity_id_8cs_source.html#l00013">EntityId.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a30c1f65bce4d161d81063e4c426265f4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a30c1f65bce4d161d81063e4c426265f4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</a></div><div class="ttdeci">Models.? CompileJob ActiveCompileJob</div><div class="ttdoc">Retrieves the Models.CompileJob currently running on the server.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00062">WatchdogBase.cs:62</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory_html_a4115cea1f220c4fdaede74566aa848d3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager</a></div><div class="ttdeci">IRemoteDeploymentManager CreateRemoteDeploymentManager(Api.Models.Instance metadata, RemoteGitProvider remoteGitProvider)</div><div class="ttdoc">Creates a IRemoteDeploymentManager for a given remoteGitProvider .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer_html_a564f82eb43566dabd77e37191b4e3d37"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent</a></div><div class="ttdeci">ValueTask HandleEvent(EventType eventType, IEnumerable&lt; string?&gt; parameters, bool deploymentPipeline, CancellationToken cancellationToken)</div><div class="ttdoc">Handle a given eventType .</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_html_ac30c818717e92c8fb65f389adec739b7"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">Tgstation.Server.Host.Components.Events.EventType</a></div><div class="ttdeci">EventType</div><div class="ttdoc">Types of events. Mirror in tgs.dm. Prefer last listed name for script.</div><div class="ttdef"><b>Definition:</b> <a href="_event_type_8cs_source.html#l00006">EventType.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00062">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00120">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, <a class="el" href="_entity_id_8cs_source.html#l00013">Tgstation.Server.Api.Models.EntityId.Id</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00105">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00140">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a>.</p>

<p class="reference">Referenced by <a class="el" href="_advanced_watchdog_8cs_source.html#l00137">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.HandleNormalReboot()</a>, and <a class="el" href="_basic_watchdog_8cs_source.html#l00209">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9efa04dfe5428a8ce1271600e2388a4e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9efa04dfe5428a8ce1271600e2388a4e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9efa04dfe5428a8ce1271600e2388a4e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9efa04dfe5428a8ce1271600e2388a4e_cgraph">
<area shape="rect" title="To be called before a given newCompileJob &#160;goes live." alt="" coords="5,49,276,89"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3" title="Creates a IRemoteDeploymentManager for a given remoteGitProvider ." alt="" coords="324,5,643,60"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="364,85,603,125"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9efa04dfe5428a8ce1271600e2388a4e_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9efa04dfe5428a8ce1271600e2388a4e_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9efa04dfe5428a8ce1271600e2388a4e_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9efa04dfe5428a8ce1271600e2388a4e_icgraph">
<area shape="rect" title="To be called before a given newCompileJob &#160;goes live." alt="" coords="380,37,651,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#a9a94dccebeb6abb16f75b2ad03a5eb28" title="Handler for MonitorActivationReason.ActiveServerRebooted when the RebootState is RebootState...." alt="" coords="5,5,332,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a857f98eb5a2516c2a70c35d684c2c21b" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="43,69,294,109"/>
</map>
</div>

</div>
</div>
<a id="a041c4bb73201345e368f9e4879c9cc67" name="a041c4bb73201345e368f9e4879c9cc67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a041c4bb73201345e368f9e4879c9cc67">&#9670;&#160;</a></span>Broadcast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; bool &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Broadcast </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a broadcast <em>message</em>  to the DMAPI. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The message to broadcast.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in <code>true</code> if the broadcast succeeded., <code>false</code> otherwise.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a191672b4ebeab3e9c7e1488e9d414e66">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00454">454</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  455</span>        {</div>
<div class="line"><span class="lineno">  456</span>            ArgumentNullException.ThrowIfNull(message);</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>            var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  459</span>            <span class="keywordflow">if</span> (activeServer == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  460</span>            {</div>
<div class="line"><span class="lineno">  461</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Attempted broadcast failed, no active server!&quot;</span>);</div>
<div class="line"><span class="lineno">  462</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  463</span>            }</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>            <span class="keywordflow">if</span> (!activeServer.DMApiAvailable)</div>
<div class="line"><span class="lineno">  466</span>            {</div>
<div class="line"><span class="lineno">  467</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Attempted broadcast failed, no DMAPI!&quot;</span>);</div>
<div class="line"><span class="lineno">  468</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  469</span>            }</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>            var minimumRequiredVersion = <span class="keyword">new</span> Version(5, 7, 0);</div>
<div class="line"><span class="lineno">  472</span>            <span class="keywordflow">if</span> (activeServer.DMApiVersion &lt; minimumRequiredVersion)</div>
<div class="line"><span class="lineno">  473</span>            {</div>
<div class="line"><span class="lineno">  474</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(</div>
<div class="line"><span class="lineno">  475</span>                    <span class="stringliteral">&quot;Attempted broadcast failed, insufficient interop version: {interopVersion}. Requires {minimumRequiredVersion}!&quot;</span>,</div>
<div class="line"><span class="lineno">  476</span>                    activeServer.DMApiVersion,</div>
<div class="line"><span class="lineno">  477</span>                    minimumRequiredVersion);</div>
<div class="line"><span class="lineno">  478</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  479</span>            }</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Broadcasting: {message}&quot;</span>, message);</div>
<div class="line"><span class="lineno">  482</span> </div>
<div class="line"><span class="lineno">  483</span>            var response = await activeServer.SendCommand(</div>
<div class="line"><span class="lineno">  484</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html#a733b0f473c698e2ba05b2c9f3d7b8f48">CreateBroadcastParameters</a>(message),</div>
<div class="line"><span class="lineno">  485</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>            <span class="keywordflow">return</span> response != <span class="keyword">null</span> &amp;&amp; response.ErrorMessage == <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  488</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">Tgstation.Server.Host.Components.Interop.Topic.TopicParameters</a></div><div class="ttdoc">Parameters for a topic request.</div><div class="ttdef"><b>Definition:</b> <a href="_topic_parameters_8cs_source.html#l00012">TopicParameters.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters_html_a733b0f473c698e2ba05b2c9f3d7b8f48"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html#a733b0f473c698e2ba05b2c9f3d7b8f48">Tgstation.Server.Host.Components.Interop.Topic.TopicParameters.CreateBroadcastParameters</a></div><div class="ttdeci">static TopicParameters CreateBroadcastParameters(string broadcastMessage)</div><div class="ttdoc">Initializes a new instance of the TopicParameters class.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ab53c08e5a2f37233940f3492207a760b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController</a></div><div class="ttdeci">abstract ? ISessionController GetActiveController()</div><div class="ttdoc">Get the active ISessionController.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html#a733b0f473c698e2ba05b2c9f3d7b8f48">Tgstation.Server.Host.Components.Interop.Topic.TopicParameters.CreateBroadcastParameters()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a041c4bb73201345e368f9e4879c9cc67_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a041c4bb73201345e368f9e4879c9cc67_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a041c4bb73201345e368f9e4879c9cc67_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a041c4bb73201345e368f9e4879c9cc67_cgraph">
<area shape="rect" title="Send a broadcast message &#160;to the DMAPI. A ValueTask&lt;TResult&gt; resulting in true if the broadcast succe..." alt="" coords="5,49,239,89"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html#a733b0f473c698e2ba05b2c9f3d7b8f48" title="Initializes a new instance of the TopicParameters class." alt="" coords="310,5,550,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="287,85,573,125"/>
</map>
</div>

</div>
</div>
<a id="ad4d22a408a414abd08361ceff309c3bf" name="ad4d22a408a414abd08361ceff309c3bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d22a408a414abd08361ceff309c3bf">&#9670;&#160;</a></span>ChangeSettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; bool &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>launchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">launchParameters</td><td>The new DreamDaemonLaunchParameters. May be modified.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in <code>true</code> if a reboot is required, <code>false</code> otherwise.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a74ab9706c8c07b39618a769b60bac61e">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00270">270</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  271</span>        {</div>
<div class="line"><span class="lineno">  272</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  273</span>            {</div>
<div class="line"><span class="lineno">  274</span>                <span class="keywordtype">bool</span> match = launchParameters.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13">CanApplyWithoutReboot</a>(<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>);</div>
<div class="line"><span class="lineno">  275</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = launchParameters;</div>
<div class="line"><span class="lineno">  276</span>                <span class="keywordflow">if</span> (match || <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline || <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.DelayedRestart)</div>
<div class="line"><span class="lineno">  277</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>                var oldTcs = Interlocked.Exchange(ref <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af8f6221485a1d072038f17e0d6ba55fc">activeParametersUpdated</a>, <span class="keyword">new</span> TaskCompletionSource());</div>
<div class="line"><span class="lineno">  280</span>                oldTcs.SetResult();</div>
<div class="line"><span class="lineno">  281</span>            }</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  284</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_ad1c56d38c1a48c110765c99a72619e13"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.CanApplyWithoutReboot</a></div><div class="ttdeci">bool CanApplyWithoutReboot(DreamDaemonLaunchParameters otherParameters)</div><div class="ttdoc">Check if we match a given set of otherParameters . StartupTimeout is excluded.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00106">DreamDaemonLaunchParameters.cs:106</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5fa8be05b0c448ea097a70e5d8708ffb"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a></div><div class="ttdeci">WatchdogStatus Status</div><div class="ttdoc">The current WatchdogStatus.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00042">WatchdogBase.cs:43</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">Tgstation.Server.Host.Utils.SemaphoreSlimContext</a></div><div class="ttdoc">Async lock context helper.</div><div class="ttdef"><b>Definition:</b> <a href="_semaphore_slim_context_8cs_source.html#l00010">SemaphoreSlimContext.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html_a29773d588476671bbe480f096d839c91"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock</a></div><div class="ttdeci">static async ValueTask&lt; SemaphoreSlimContext &gt; Lock(SemaphoreSlim semaphore, CancellationToken cancellationToken)</div><div class="ttdoc">Asyncronously locks a semaphore .</div><div class="ttdef"><b>Definition:</b> <a href="_semaphore_slim_context_8cs_source.html#l00018">SemaphoreSlimContext.cs:18</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_abcc98739b8feb9dd6744647f287e0683"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">Tgstation.Server.Api.Models.WatchdogStatus</a></div><div class="ttdeci">WatchdogStatus</div><div class="ttdoc">The current status of the watchdog.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_status_8cs_source.html#l00006">WatchdogStatus.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00056">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00150">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.activeParametersUpdated</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00106">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.CanApplyWithoutReboot()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad4d22a408a414abd08361ceff309c3bf_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad4d22a408a414abd08361ceff309c3bf_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad4d22a408a414abd08361ceff309c3bf_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad4d22a408a414abd08361ceff309c3bf_cgraph">
<area shape="rect" title="Changes the ActiveLaunchParameters. If currently running, may trigger a graceful restart...." alt="" coords="5,49,272,89"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13" title="Check if we match a given set of otherParameters . StartupTimeout is excluded." alt="" coords="320,5,587,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="358,85,549,125"/>
</map>
</div>

</div>
</div>
<a id="a4f4512b6d6c1772682cf7666fc31a323" name="a4f4512b6d6c1772682cf7666fc31a323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f4512b6d6c1772682cf7666fc31a323">&#9670;&#160;</a></span>CheckLaunchResult()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CheckLaunchResult </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a>&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>serverName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the LaunchResult of a given <em>controller</em>  for errors and throw a JobException if any are detected.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>The ISessionController to checkou.</td></tr>
    <tr><td class="paramname">serverName</td><td>The name of the server being checked.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00629">629</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  630</span>        {</div>
<div class="line"><span class="lineno">  631</span>            var launchResult = await controller.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html#adca786a78dbcd230b94fcde69e9fc885">LaunchResult</a>.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>            <span class="comment">// Dead sessions won&#39;t trigger this</span></div>
<div class="line"><span class="lineno">  634</span>            <span class="keywordflow">if</span> (launchResult.ExitCode.HasValue) <span class="comment">// you killed us ray...</span></div>
<div class="line"><span class="lineno">  635</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(</div>
<div class="line"><span class="lineno">  636</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogStartupFailed,</div>
<div class="line"><span class="lineno">  637</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>($<span class="stringliteral">&quot;{serverName} failed to start: {launchResult}&quot;</span>));</div>
<div class="line"><span class="lineno">  638</span>            <span class="keywordflow">if</span> (!launchResult.StartupTime.HasValue)</div>
<div class="line"><span class="lineno">  639</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(</div>
<div class="line"><span class="lineno">  640</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogStartupTimeout,</div>
<div class="line"><span class="lineno">  641</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>($<span class="stringliteral">&quot;{serverName} timed out on startup: {ActiveLaunchParameters.StartupTimeout!.Value}s&quot;</span>));</div>
<div class="line"><span class="lineno">  642</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">Tgstation.Server.Host.Jobs.JobException</a></div><div class="ttdoc">Operation exceptions thrown from the context of a Models.Job.</div><div class="ttdef"><b>Definition:</b> <a href="_job_exception_8cs_source.html#l00010">JobException.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_html_adca786a78dbcd230b94fcde69e9fc885"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html#adca786a78dbcd230b94fcde69e9fc885">Tgstation.Server.Host.Components.Session.ISessionController.LaunchResult</a></div><div class="ttdeci">Task&lt; LaunchResult &gt; LaunchResult</div><div class="ttdoc">A Task that completes when DreamDaemon starts pumping the windows message queue after loading a ....</div><div class="ttdef"><b>Definition:</b> <a href="_i_session_controller_8cs_source.html#l00020">ISessionController.cs:20</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a1a6adb59dd51244efabf4e548e7075c8"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">Tgstation.Server.Api.Models.ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Types of Response.ErrorMessageResponses that the API may return.</div><div class="ttdef"><b>Definition:</b> <a href="_error_code_8cs_source.html#l00012">ErrorCode.cs:13</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_session_controller_8cs_source.html#l00020">Tgstation.Server.Host.Components.Session.ISessionController.LaunchResult</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00209">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4f4512b6d6c1772682cf7666fc31a323_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4f4512b6d6c1772682cf7666fc31a323_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4f4512b6d6c1772682cf7666fc31a323_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4f4512b6d6c1772682cf7666fc31a323_icgraph">
<area shape="rect" title="Check the LaunchResult of a given controller &#160;for errors and throw a JobException if any are detected..." alt="" coords="304,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a857f98eb5a2516c2a70c35d684c2c21b" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="5,5,256,45"/>
</map>
</div>

</div>
</div>
<a id="a9386d08a9eb76694c84db3ed5cf0dca2" name="a9386d08a9eb76694c84db3ed5cf0dca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9386d08a9eb76694c84db3ed5cf0dca2">&#9670;&#160;</a></span>CreateDump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to create a process dump for DreamDaemon. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a3ddde105ca2c70aa01eb5bdd116d3879">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00447">447</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  448</span>        {</div>
<div class="line"><span class="lineno">  449</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  450</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179">CreateDumpNoLock</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  451</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a2d9e24a869875a2654715e7937462179"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDumpNoLock</a></div><div class="ttdeci">async ValueTask CreateDumpNoLock(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l01225">WatchdogBase.cs:1225</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l01225">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDumpNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9386d08a9eb76694c84db3ed5cf0dca2_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9386d08a9eb76694c84db3ed5cf0dca2_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9386d08a9eb76694c84db3ed5cf0dca2_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a9386d08a9eb76694c84db3ed5cf0dca2_cgraph">
<area shape="rect" title="Attempt to create a process dump for DreamDaemon. A ValueTask representing the running operation." alt="" coords="5,37,252,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="300,5,592,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="351,69,541,109"/>
</map>
</div>

</div>
</div>
<a id="a2d9e24a869875a2654715e7937462179" name="a2d9e24a869875a2654715e7937462179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d9e24a869875a2654715e7937462179">&#9670;&#160;</a></span>CreateDumpNoLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDumpNoLock </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to create a process dump for the game server. Requires a lock on <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4" title="The SemaphoreSlim for the WatchdogBase.">synchronizationSemaphore</a>.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l01225">1225</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1226</span>        {</div>
<div class="line"><span class="lineno"> 1227</span>            <span class="keyword">const</span> <span class="keywordtype">string</span> DumpDirectory = <span class="stringliteral">&quot;ProcessDumps&quot;</span>;</div>
<div class="line"><span class="lineno"> 1228</span>            var dumpFileNameTemplate = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(</div>
<div class="line"><span class="lineno"> 1229</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(</div>
<div class="line"><span class="lineno"> 1230</span>                    DumpDirectory,</div>
<div class="line"><span class="lineno"> 1231</span>                    $<span class="stringliteral">&quot;DreamDaemon-{DateTimeOffset.UtcNow.ToFileStamp()}.dmp&quot;</span>));</div>
<div class="line"><span class="lineno"> 1232</span> </div>
<div class="line"><span class="lineno"> 1233</span>            var dumpFileName = dumpFileNameTemplate;</div>
<div class="line"><span class="lineno"> 1234</span>            var iteration = 0;</div>
<div class="line"><span class="lineno"> 1235</span>            <span class="keywordflow">while</span> (await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">FileExists</a>(dumpFileName, cancellationToken))</div>
<div class="line"><span class="lineno"> 1236</span>                dumpFileName = $<span class="stringliteral">&quot;{dumpFileNameTemplate} ({++iteration})&quot;</span>;</div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>            <span class="keywordflow">if</span> (iteration == 0)</div>
<div class="line"><span class="lineno"> 1239</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">CreateDirectory</a>(DumpDirectory, cancellationToken);</div>
<div class="line"><span class="lineno"> 1240</span> </div>
<div class="line"><span class="lineno"> 1241</span>            var session = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno"> 1242</span>            <span class="keywordflow">if</span> (session?.Lifetime.IsCompleted != <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno"> 1243</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.GameServerOffline);</div>
<div class="line"><span class="lineno"> 1244</span> </div>
<div class="line"><span class="lineno"> 1245</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Dumping session to {dumpFileName}...&quot;</span>, dumpFileName);</div>
<div class="line"><span class="lineno"> 1246</span>            await session.CreateDump(dumpFileName, cancellationToken);</div>
<div class="line"><span class="lineno"> 1247</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a18a442b5dff16f5e7a730ec354e81d78"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath</a></div><div class="ttdeci">string ResolvePath()</div><div class="ttdoc">Retrieve the full path of the current working directory.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a69aa1b9dbeb6af3744e568095c4376e7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">Tgstation.Server.Host.IO.IIOManager.CreateDirectory</a></div><div class="ttdeci">Task CreateDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Create a directory at path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad4de873180481f7afa206b6282158d62"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">Tgstation.Server.Host.IO.IIOManager.FileExists</a></div><div class="ttdeci">Task&lt; bool &gt; FileExists(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Check that the file at path  exists.</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00447">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d9e24a869875a2654715e7937462179_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d9e24a869875a2654715e7937462179_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d9e24a869875a2654715e7937462179_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d9e24a869875a2654715e7937462179_icgraph">
<area shape="rect" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="1611,37,1903,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9386d08a9eb76694c84db3ed5cf0dca2" title="Attempt to create a process dump for DreamDaemon. A ValueTask representing the running operation." alt="" coords="1294,5,1541,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="1272,69,1563,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,69,1224,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="643,99,905,139"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,99,579,139"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,35,595,75"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,163,579,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,227,585,267"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,163,288,203"/>
</map>
</div>

</div>
</div>
<a id="ac84983fa4b27fcdf9044aaf68ae82a50" name="ac84983fa4b27fcdf9044aaf68ae82a50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac84983fa4b27fcdf9044aaf68ae82a50">&#9670;&#160;</a></span>DisposeAndNullControllers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers.">DisposeAndNullControllersImpl</a> under a locked context.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00672">672</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  673</span>        {</div>
<div class="line"><span class="lineno">  674</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;DisposeAndNullControllers&quot;</span>);</div>
<div class="line"><span class="lineno">  675</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  676</span>            {</div>
<div class="line"><span class="lineno">  677</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2">DisposeAndNullControllersImpl</a>();</div>
<div class="line"><span class="lineno">  678</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>)</div>
<div class="line"><span class="lineno">  679</span>                    await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f">Clear</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  680</span>            }</div>
<div class="line"><span class="lineno">  681</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html_ac3551d3e6a6a17ef85ac39c506c32d5f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f">Tgstation.Server.Host.Components.Session.SessionPersistor.Clear</a></div><div class="ttdeci">ValueTask Clear(CancellationToken cancellationToken)</div><div class="ttdoc">Clear any stored ReattachInformation. A ValueTask representing the running operation.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aecb29ff97cd95a61ab370d24685171a2"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl</a></div><div class="ttdeci">abstract ValueTask DisposeAndNullControllersImpl()</div><div class="ttdoc">Call IDisposable.Dispose and null the fields for all ISessionControllers.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f">Tgstation.Server.Host.Components.Session.SessionPersistor.Clear()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00115">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00175">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00209">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00767">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00649">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ac84983fa4b27fcdf9044aaf68ae82a50_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ac84983fa4b27fcdf9044aaf68ae82a50_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ac84983fa4b27fcdf9044aaf68ae82a50_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ac84983fa4b27fcdf9044aaf68ae82a50_cgraph">
<area shape="rect" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="5,70,272,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="340,5,567,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="320,70,587,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="358,149,549,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="635,5,864,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="912,5,1121,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ac84983fa4b27fcdf9044aaf68ae82a50_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ac84983fa4b27fcdf9044aaf68ae82a50_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ac84983fa4b27fcdf9044aaf68ae82a50_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ac84983fa4b27fcdf9044aaf68ae82a50_icgraph">
<area shape="rect" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1611,211,1877,266"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="1272,111,1563,151"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,136,1224,176"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,197,595,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a857f98eb5a2516c2a70c35d684c2c21b" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="963,301,1214,341"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d53273beb40a057f7f9423b48850702" title="Call from InitController(ValueTask, ReattachInformation, CancellationToken) when a reattach operation..." alt="" coords="1285,327,1550,367"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="643,111,905,151"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,5,585,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="aecb29ff97cd95a61ab370d24685171a2" name="aecb29ff97cd95a61ab370d24685171a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecb29ff97cd95a61ab370d24685171a2">&#9670;&#160;</a></span>DisposeAndNullControllersImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call IDisposable.Dispose and null the fields for all ISessionControllers.  </p>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#ad685dab25c922c43bff30f2822811c2b">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog</a>, and <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a17ec9ca3abd941947bcc2aa0ab1f92f4">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00672">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00257">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aecb29ff97cd95a61ab370d24685171a2_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aecb29ff97cd95a61ab370d24685171a2_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aecb29ff97cd95a61ab370d24685171a2_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aecb29ff97cd95a61ab370d24685171a2_icgraph">
<area shape="rect" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1953,252,2220,306"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1639,120,1905,174"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3" title=" " alt="" coords="1643,320,1901,360"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="1286,159,1577,199"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,159,1224,199"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,34,595,74"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a857f98eb5a2516c2a70c35d684c2c21b" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="963,70,1214,110"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d53273beb40a057f7f9423b48850702" title="Call from InitController(ValueTask, ReattachInformation, CancellationToken) when a reattach operation..." alt="" coords="1299,95,1564,135"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="643,159,905,199"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,98,579,138"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,226,579,266"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,162,585,202"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,226,288,266"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#acb48f966670f07a01c89a708fc82411a" title="Initializes a new instance of the AdvancedWatchdog class." alt="" coords="1272,432,1591,472"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#ad685dab25c922c43bff30f2822811c2b" title="Call IDisposable.Dispose and null the fields for all ISessionControllers. A ValueTask representing th..." alt="" coords="1295,274,1567,329"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#abc18654a9da3b33e0c5201fe3c376374" title="Handler for MonitorActivationReason.NewDmbAvailable. A ValueTask representing the running operation." alt="" coords="1296,353,1567,408"/>
</map>
</div>

</div>
</div>
<a id="a6f69db8c3ceae298404f5d8d5a7312b3" name="a6f69db8c3ceae298404f5d8d5a7312b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f69db8c3ceae298404f5d8d5a7312b3">&#9670;&#160;</a></span>DisposeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00257">257</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  258</span>        {</div>
<div class="line"><span class="lineno">  259</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Disposing...&quot;</span>);</div>
<div class="line"><span class="lineno">  260</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  261</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a>.Dispose();</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2">DisposeAndNullControllersImpl</a>();</div>
<div class="line"><span class="lineno">  264</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  265</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">monitorCts</a>?.Dispose();</div>
<div class="line"><span class="lineno">  266</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  267</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5c39f385b06058f4699503b492d2b743"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a></div><div class="ttdeci">bool disposed</div><div class="ttdoc">If the WatchdogBase has been DisposeAsync'd.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00180">WatchdogBase.cs:180</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a65dd21315e5283fe959552efc2cee6aa"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a></div><div class="ttdeci">CancellationTokenSource? monitorCts</div><div class="ttdoc">The CancellationTokenSource for the monitor loop.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00155">WatchdogBase.cs:155</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00115">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00180">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00155">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00130">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="_advanced_watchdog_8cs_source.html#l00072">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.AdvancedWatchdog()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00124">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.DisposeAndNullControllersImpl()</a>, and <a class="el" href="_advanced_watchdog_8cs_source.html#l00231">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.HandleNewDmbAvailable()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,263,53"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="311,5,577,60"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph">
<area shape="rect" title=" " alt="" coords="372,77,629,117"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#acb48f966670f07a01c89a708fc82411a" title="Initializes a new instance of the AdvancedWatchdog class." alt="" coords="5,5,324,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#ad685dab25c922c43bff30f2822811c2b" title="Call IDisposable.Dispose and null the fields for all ISessionControllers. A ValueTask representing th..." alt="" coords="29,70,301,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#abc18654a9da3b33e0c5201fe3c376374" title="Handler for MonitorActivationReason.NewDmbAvailable. A ValueTask representing the running operation." alt="" coords="29,149,300,203"/>
</map>
</div>

</div>
</div>
<a id="ab53c08e5a2f37233940f3492207a760b" name="ab53c08e5a2f37233940f3492207a760b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab53c08e5a2f37233940f3492207a760b">&#9670;&#160;</a></span>GetActiveController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract ? <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the active ISessionController.  </p>
<dl class="section return"><dt>Returns</dt><dd>The active ISessionController, if any.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a667300b8a8fbdcdb40dfad604dba50c6">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00454">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Broadcast()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00287">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00491">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00341">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00354">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab53c08e5a2f37233940f3492207a760b_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab53c08e5a2f37233940f3492207a760b_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab53c08e5a2f37233940f3492207a760b_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab53c08e5a2f37233940f3492207a760b_icgraph">
<area shape="rect" title="Get the active ISessionController." alt="" coords="1621,227,1908,267"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a041c4bb73201345e368f9e4879c9cc67" title="Send a broadcast message &#160;to the DMAPI. A ValueTask&lt;TResult&gt; resulting in true if the broadcast succe..." alt="" coords="1306,5,1539,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8fea3476c8ac941fc42087b9c3e36077" title="Handle a chat command. A ValueTask&lt;TResult&gt; resulting in the MessageContent text to send back." alt="" coords="1272,69,1573,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aed9bd19e52b72a565e6e4cab00ac3e0a" title="Handle a given eventType . A ValueTask representing the running operation." alt="" coords="1299,133,1547,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="1277,197,1568,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,207,1224,247"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,353,579,393"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad77b687adbbd7f8963b5bab7c46e2acf" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="1283,363,1563,403"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="1283,427,1562,467"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="643,225,905,265"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,225,579,265"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,161,595,201"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,289,585,329"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,353,288,393"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720" title="Stops the watchdog. A ValueTask representing the running operation." alt="" coords="973,427,1205,467"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a04162b14c55443e4bf8d2f0956ea0b9b" title="Handle a restart of the server. A ValueTask representing the running operation." alt="" coords="645,427,903,467"/>
</map>
</div>

</div>
</div>
<a id="a8fea3476c8ac941fc42087b9c3e36077" name="a8fea3476c8ac941fc42087b9c3e36077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fea3476c8ac941fc42087b9c3e36077">&#9670;&#160;</a></span>HandleChatCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>commandName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a>&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a chat command. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commandName</td><td>The command name.</td></tr>
    <tr><td class="paramname">arguments</td><td>Everything typed after <em>commandName</em>  minus leading spaces.</td></tr>
    <tr><td class="paramname">sender</td><td>The sending <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html" title="Represents a tgs_chat_user datum.">ChatUser</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the MessageContent text to send back.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#ab33cdeb0720901aa888813fce8c38fdf">Tgstation.Server.Host.Components.Chat.ICustomCommandHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00287">287</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  288</span>        {</div>
<div class="line"><span class="lineno">  289</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  290</span>            {</div>
<div class="line"><span class="lineno">  291</span>                var commandObject = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command.html">ChatCommand</a>(sender, commandName, arguments);</div>
<div class="line"><span class="lineno">  292</span>                var command = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(commandObject);</div>
<div class="line"><span class="lineno">  293</span>                var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  294</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online || activeServer == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  295</span>                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  296</span>                    {</div>
<div class="line"><span class="lineno">  297</span>                        Text = <span class="stringliteral">&quot;TGS: Server offline!&quot;</span>,</div>
<div class="line"><span class="lineno">  298</span>                    };</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>                var commandResult = await activeServer.SendCommand(command, cancellationToken);</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>                <span class="keywordflow">if</span> (commandResult == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  303</span>                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  304</span>                    {</div>
<div class="line"><span class="lineno">  305</span>                        Text = <span class="stringliteral">&quot;TGS: Bad topic exchange!&quot;</span>,</div>
<div class="line"><span class="lineno">  306</span>                    };</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>                <span class="keywordflow">if</span> (commandResult == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  309</span>                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  310</span>                    {</div>
<div class="line"><span class="lineno">  311</span>                        Text = <span class="stringliteral">&quot;TGS: Bad topic response!&quot;</span>,</div>
<div class="line"><span class="lineno">  312</span>                    };</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>                var commandResponse = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  315</span>                {</div>
<div class="line"><span class="lineno">  316</span>                    Text = commandResult.CommandResponse?.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html#acc847c3c842120dede3072ddb6e0c0cd">Text</a> ?? commandResult.CommandResponseMessage,</div>
<div class="line"><span class="lineno">  317</span>                    Embed = commandResult.CommandResponse?.Embed,</div>
<div class="line"><span class="lineno">  318</span>                };</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>                <span class="keywordflow">if</span> (commandResponse.Text == <span class="keyword">null</span> &amp;&amp; commandResponse.Embed == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  321</span>                {</div>
<div class="line"><span class="lineno">  322</span>                    commandResponse.Text = <span class="stringliteral">&quot;TGS: Command processed but no DMAPI response returned!&quot;</span>;</div>
<div class="line"><span class="lineno">  323</span>                }</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad5b260f0cac6051983c75a9a6777b38b">HandleChatResponses</a>(commandResult);</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>                <span class="keywordflow">return</span> commandResponse;</div>
<div class="line"><span class="lineno">  328</span>            }</div>
<div class="line"><span class="lineno">  329</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">Tgstation.Server.Host.Components.Interop.MessageContent</a></div><div class="ttdoc">Represents a message to send to a chat provider.</div><div class="ttdef"><b>Definition:</b> <a href="_message_content_8cs_source.html#l00006">MessageContent.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content_html_acc847c3c842120dede3072ddb6e0c0cd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html#acc847c3c842120dede3072ddb6e0c0cd">Tgstation.Server.Host.Components.Interop.MessageContent.Text</a></div><div class="ttdeci">string? Text</div><div class="ttdoc">The message string.</div><div class="ttdef"><b>Definition:</b> <a href="_message_content_8cs_source.html#l00011">MessageContent.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command.html">Tgstation.Server.Host.Components.Interop.Topic.ChatCommand</a></div><div class="ttdoc">Represents a chat command to be handled by DD.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_command_8cs_source.html#l00010">ChatCommand.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ad5b260f0cac6051983c75a9a6777b38b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad5b260f0cac6051983c75a9a6777b38b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses</a></div><div class="ttdeci">void HandleChatResponses(TopicResponse? result)</div><div class="ttdoc">Handle any TopicResponse.ChatResponses in a given topic result .</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l01182">WatchdogBase.cs:1182</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01182">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_message_content_8cs_source.html#l00011">Tgstation.Server.Host.Components.Interop.MessageContent.Text</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a8fea3476c8ac941fc42087b9c3e36077_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a8fea3476c8ac941fc42087b9c3e36077_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a8fea3476c8ac941fc42087b9c3e36077_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a8fea3476c8ac941fc42087b9c3e36077_cgraph">
<area shape="rect" title="Handle a chat command. A ValueTask&lt;TResult&gt; resulting in the MessageContent text to send back." alt="" coords="5,69,307,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="365,5,651,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad5b260f0cac6051983c75a9a6777b38b" title="Handle any TopicResponse.ChatResponses in a given topic result ." alt="" coords="355,69,661,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="413,133,603,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002" title="Queue a chat message &#160;to a given set of channelIds ." alt="" coords="709,69,936,109"/>
</map>
</div>

</div>
</div>
<a id="ad5b260f0cac6051983c75a9a6777b38b" name="ad5b260f0cac6051983c75a9a6777b38b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b260f0cac6051983c75a9a6777b38b">&#9670;&#160;</a></span>HandleChatResponses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html">TopicResponse</a>?&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle any <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html#a2232f10dafaa3d6ec82fb05e1639841c" title="The ChatMessages to send as the result of a TopicCommandType.EventNotification request,...">TopicResponse.ChatResponses</a> in a given topic <em>result</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>The TopicResponse.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l01182">1182</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1183</span>        {</div>
<div class="line"><span class="lineno"> 1184</span>            <span class="keywordflow">if</span> (result?.ChatResponses != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1185</span>            {</div>
<div class="line"><span class="lineno"> 1186</span>                var warnedMissingChannelIds = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1187</span>                <span class="keywordflow">foreach</span> (var response <span class="keywordflow">in</span> result.ChatResponses</div>
<div class="line"><span class="lineno"> 1188</span>                    .Where(response =&gt;</div>
<div class="line"><span class="lineno"> 1189</span>                    {</div>
<div class="line"><span class="lineno"> 1190</span>                        if (response.ChannelIds == null)</div>
<div class="line"><span class="lineno"> 1191</span>                        {</div>
<div class="line"><span class="lineno"> 1192</span>                            if (!warnedMissingChannelIds)</div>
<div class="line"><span class="lineno"> 1193</span>                            {</div>
<div class="line"><span class="lineno"> 1194</span>                                Logger.LogWarning(<span class="stringliteral">&quot;DMAPI response contains null channelIds!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1195</span>                                warnedMissingChannelIds = true;</div>
<div class="line"><span class="lineno"> 1196</span>                            }</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>                            return false;</div>
<div class="line"><span class="lineno"> 1199</span>                        }</div>
<div class="line"><span class="lineno"> 1200</span> </div>
<div class="line"><span class="lineno"> 1201</span>                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1202</span>                    }))</div>
<div class="line"><span class="lineno"> 1203</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002">QueueMessage</a>(</div>
<div class="line"><span class="lineno"> 1204</span>                        response,</div>
<div class="line"><span class="lineno"> 1205</span>                        response.ChannelIds!</div>
<div class="line"><span class="lineno"> 1206</span>                            .Select(channelIdString =&gt;</div>
<div class="line"><span class="lineno"> 1207</span>                            {</div>
<div class="line"><span class="lineno"> 1208</span>                                if (UInt64.TryParse(channelIdString, out var channelId))</div>
<div class="line"><span class="lineno"> 1209</span>                                    return (ulong?)channelId;</div>
<div class="line"><span class="lineno"> 1210</span>                                else</div>
<div class="line"><span class="lineno"> 1211</span>                                    Logger.LogWarning(<span class="stringliteral">&quot;Could not parse chat response channel ID: {channelID}&quot;</span>, channelIdString);</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>                                return null;</div>
<div class="line"><span class="lineno"> 1214</span>                            })</div>
<div class="line"><span class="lineno"> 1215</span>                            .Where(nullableChannelId =&gt; nullableChannelId.HasValue)</div>
<div class="line"><span class="lineno"> 1216</span>                            .Select(nullableChannelId =&gt; nullableChannelId!.Value));</div>
<div class="line"><span class="lineno"> 1217</span>            }</div>
<div class="line"><span class="lineno"> 1218</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_af9226f864c0c82403eab7ac5f8e43002"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002">Tgstation.Server.Host.Components.Chat.IChatManager.QueueMessage</a></div><div class="ttdeci">void QueueMessage(MessageContent message, IEnumerable&lt; ulong &gt; channelIds)</div><div class="ttdoc">Queue a chat message  to a given set of channelIds .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_topic_response_8cs_source.html#l00025">Tgstation.Server.Host.Components.Interop.Topic.TopicResponse.ChatResponses</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002">Tgstation.Server.Host.Components.Chat.IChatManager.QueueMessage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00287">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00491">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad5b260f0cac6051983c75a9a6777b38b_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad5b260f0cac6051983c75a9a6777b38b_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad5b260f0cac6051983c75a9a6777b38b_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad5b260f0cac6051983c75a9a6777b38b_cgraph">
<area shape="rect" title="Handle any TopicResponse.ChatResponses in a given topic result ." alt="" coords="5,5,312,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002" title="Queue a chat message &#160;to a given set of channelIds ." alt="" coords="360,5,587,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad5b260f0cac6051983c75a9a6777b38b_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad5b260f0cac6051983c75a9a6777b38b_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad5b260f0cac6051983c75a9a6777b38b_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad5b260f0cac6051983c75a9a6777b38b_icgraph">
<area shape="rect" title="Handle any TopicResponse.ChatResponses in a given topic result ." alt="" coords="355,37,661,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8fea3476c8ac941fc42087b9c3e36077" title="Handle a chat command. A ValueTask&lt;TResult&gt; resulting in the MessageContent text to send back." alt="" coords="5,5,307,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aed9bd19e52b72a565e6e4cab00ac3e0a" title="Handle a given eventType . A ValueTask representing the running operation." alt="" coords="32,69,280,109"/>
</map>
</div>

</div>
</div>
<a id="aed9bd19e52b72a565e6e4cab00ac3e0a" name="aed9bd19e52b72a565e6e4cab00ac3e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed9bd19e52b72a565e6e4cab00ac3e0a">&#9670;&#160;</a></span>HandleEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask IEventConsumer. Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>&#160;</td>
          <td class="paramname"><em>eventType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; string?&gt;&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deploymentPipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a given <em>eventType</em> . <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventType</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7" title="Types of events. Mirror in tgs.dm. Prefer last listed name for script.">EventType</a>.</td></tr>
    <tr><td class="paramname">parameters</td><td>An IEnumerable&lt;T&gt; of string parameters for <em>eventType</em> .</td></tr>
    <tr><td class="paramname">deploymentPipeline</td><td>If this event is part of the deployment pipeline.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00491">491</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  492</span>        {</div>
<div class="line"><span class="lineno">  493</span>            ArgumentNullException.ThrowIfNull(parameters);</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>            <span class="comment">// Method explicitly implemented to prevent accidental calls when this.eventConsumer should be used.</span></div>
<div class="line"><span class="lineno">  496</span>            var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>            <span class="comment">// Server may have ended</span></div>
<div class="line"><span class="lineno">  499</span>            <span class="keywordflow">if</span> (activeServer == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  500</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>            var notification = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification.html">EventNotification</a>(eventType, parameters);</div>
<div class="line"><span class="lineno">  503</span>            var result = await activeServer.SendCommand(</div>
<div class="line"><span class="lineno">  504</span>                <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(notification),</div>
<div class="line"><span class="lineno">  505</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>            <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad5b260f0cac6051983c75a9a6777b38b">HandleChatResponses</a>(result);</div>
<div class="line"><span class="lineno">  508</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification.html">Tgstation.Server.Host.Components.Interop.Topic.EventNotification</a></div><div class="ttdoc">Data structure for TopicCommandType.EventNotification requests.</div><div class="ttdef"><b>Definition:</b> <a href="_event_notification_8cs_source.html#l00012">EventNotification.cs:13</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01182">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aed9bd19e52b72a565e6e4cab00ac3e0a_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aed9bd19e52b72a565e6e4cab00ac3e0a_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aed9bd19e52b72a565e6e4cab00ac3e0a_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aed9bd19e52b72a565e6e4cab00ac3e0a_cgraph">
<area shape="rect" title="Handle a given eventType . A ValueTask representing the running operation." alt="" coords="5,37,253,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="311,5,598,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad5b260f0cac6051983c75a9a6777b38b" title="Handle any TopicResponse.ChatResponses in a given topic result ." alt="" coords="301,69,608,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002" title="Queue a chat message &#160;to a given set of channelIds ." alt="" coords="656,69,883,109"/>
</map>
</div>

</div>
</div>
<a id="af1a7765d8a839d318fee44e8d63b6369" name="af1a7765d8a839d318fee44e8d63b6369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1a7765d8a839d318fee44e8d63b6369">&#9670;&#160;</a></span>HandleEventImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>&#160;</td>
          <td class="paramname"><em>eventType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; string &gt;&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>relayToSession</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a given <em>eventType</em>  without re-throwing errors.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventType</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7" title="Types of events. Mirror in tgs.dm. Prefer last listed name for script.">EventType</a>.</td></tr>
    <tr><td class="paramname">parameters</td><td>An IEnumerable&lt;T&gt; of string parameters for <em>eventType</em> .</td></tr>
    <tr><td class="paramname">relayToSession</td><td>If the event should be sent to DreamDaemon.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00746">746</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  747</span>        {</div>
<div class="line"><span class="lineno">  748</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  749</span>            {</div>
<div class="line"><span class="lineno">  750</span>                var sessionEventTask = relayToSession ? ((<a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>)<span class="keyword">this</span>).HandleEvent(eventType, parameters, <span class="keyword">false</span>, cancellationToken) : ValueTask.CompletedTask;</div>
<div class="line"><span class="lineno">  751</span>                var eventConsumerTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">HandleEvent</a>(eventType, parameters, <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  752</span>                await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(</div>
<div class="line"><span class="lineno">  753</span>                    eventConsumerTask,</div>
<div class="line"><span class="lineno">  754</span>                    sessionEventTask);</div>
<div class="line"><span class="lineno">  755</span>            }</div>
<div class="line"><span class="lineno">  756</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a> ex)</div>
<div class="line"><span class="lineno">  757</span>            {</div>
<div class="line"><span class="lineno">  758</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(ex, <span class="stringliteral">&quot;Suppressing exception triggered by event!&quot;</span>);</div>
<div class="line"><span class="lineno">  759</span>            }</div>
<div class="line"><span class="lineno">  760</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">Tgstation.Server.Common.Extensions.ValueTaskExtensions</a></div><div class="ttdoc">Extension methods for the ValueTask and ValueTask&lt;TResult&gt; classes.</div><div class="ttdef"><b>Definition:</b> <a href="_value_task_extensions_8cs_source.html#l00011">ValueTaskExtensions.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html_a58adbd94d764754bd3e6c566a5fe7fe3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll</a></div><div class="ttdeci">static async ValueTask WhenAll(IEnumerable&lt; ValueTask &gt; tasks)</div><div class="ttdoc">Fully await a given list of tasks .</div><div class="ttdef"><b>Definition:</b> <a href="_value_task_extensions_8cs_source.html#l00099">ValueTaskExtensions.cs:99</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">Tgstation.Server.Host.Components.Events.IEventConsumer</a></div><div class="ttdoc">Consumes EventTypes and takes the appropriate actions.</div><div class="ttdef"><b>Definition:</b> <a href="_i_event_consumer_8cs_source.html#l00010">IEventConsumer.cs:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00120">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af1a7765d8a839d318fee44e8d63b6369_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af1a7765d8a839d318fee44e8d63b6369_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af1a7765d8a839d318fee44e8d63b6369_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af1a7765d8a839d318fee44e8d63b6369_cgraph">
<area shape="rect" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="5,41,279,81"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="327,5,565,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="338,70,554,125"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af1a7765d8a839d318fee44e8d63b6369_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af1a7765d8a839d318fee44e8d63b6369_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af1a7765d8a839d318fee44e8d63b6369_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af1a7765d8a839d318fee44e8d63b6369_icgraph">
<area shape="rect" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="999,159,1272,199"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ada8f7b456ea5697f2d3bb3bb01491d64" title="Handles the actions to take when the monitor has to &quot;wake up&quot;. A ValueTask&lt;TResult&gt; resulting in the ..." alt="" coords="643,95,951,135"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="665,159,928,199"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="657,248,936,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,5,579,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,69,595,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,248,579,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,133,585,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,127,282,167"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,248,288,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720" title="Stops the watchdog. A ValueTask representing the running operation." alt="" coords="349,312,581,352"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a04162b14c55443e4bf8d2f0956ea0b9b" title="Handle a restart of the server. A ValueTask representing the running operation." alt="" coords="18,312,275,352"/>
</map>
</div>

</div>
</div>
<a id="a075fb0946e843d7eb3f1d708314c5f13" name="a075fb0946e843d7eb3f1d708314c5f13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a075fb0946e843d7eb3f1d708314c5f13">&#9670;&#160;</a></span>HandleHealthCheck()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles a watchdog health check.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the next <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812" title="The action for the monitor loop to take when control is returned to it.">MonitorAction</a> to take.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l01100">1100</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1101</span>        {</div>
<div class="line"><span class="lineno"> 1102</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Sending health check to active server...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1103</span>            var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno"> 1104</span>            <span class="keywordflow">if</span> (activeServer == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1105</span>                <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Restart; <span class="comment">// uhhhh???</span></div>
<div class="line"><span class="lineno"> 1106</span> </div>
<div class="line"><span class="lineno"> 1107</span>            var response = await activeServer.SendCommand(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(), cancellationToken);</div>
<div class="line"><span class="lineno"> 1108</span> </div>
<div class="line"><span class="lineno"> 1109</span>            var shouldShutdown = activeServer.RebootState == Session.RebootState.Shutdown;</div>
<div class="line"><span class="lineno"> 1110</span>            <span class="keywordflow">if</span> (response == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1111</span>            {</div>
<div class="line"><span class="lineno"> 1112</span>                <span class="keywordflow">switch</span> (++<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a>)</div>
<div class="line"><span class="lineno"> 1113</span>                {</div>
<div class="line"><span class="lineno"> 1114</span>                    <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno"> 1115</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;DEFCON 4: Game server missed first health check!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1116</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1117</span>                    <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno"> 1118</span>                        <span class="keyword">const</span> <span class="keywordtype">string</span> message2 = <span class="stringliteral">&quot;DEFCON 3: Game server has missed 2 health checks!&quot;</span>;</div>
<div class="line"><span class="lineno"> 1119</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(message2);</div>
<div class="line"><span class="lineno"> 1120</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(message2);</div>
<div class="line"><span class="lineno"> 1121</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1122</span>                    <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno"> 1123</span>                        var actionToTake = shouldShutdown</div>
<div class="line"><span class="lineno"> 1124</span>                            ? <span class="stringliteral">&quot;shutdown&quot;</span></div>
<div class="line"><span class="lineno"> 1125</span>                            : <span class="stringliteral">&quot;be restarted&quot;</span>;</div>
<div class="line"><span class="lineno"> 1126</span>                        <span class="keyword">const</span> <span class="keywordtype">string</span> logTemplate1 = <span class="stringliteral">&quot;DEFCON 2: Game server has missed 3 health checks! If it does not respond to the next one, the watchdog will {actionToTake}!&quot;</span>;</div>
<div class="line"><span class="lineno"> 1127</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(logTemplate1, actionToTake);</div>
<div class="line"><span class="lineno"> 1128</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno"> 1129</span>                            logTemplate1.Replace(</div>
<div class="line"><span class="lineno"> 1130</span>                                <span class="stringliteral">&quot;{actionToTake}&quot;</span>,</div>
<div class="line"><span class="lineno"> 1131</span>                                actionToTake,</div>
<div class="line"><span class="lineno"> 1132</span>                                StringComparison.Ordinal));</div>
<div class="line"><span class="lineno"> 1133</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1134</span>                    <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno"> 1135</span>                        var actionTaken = shouldShutdown</div>
<div class="line"><span class="lineno"> 1136</span>                            ? <span class="stringliteral">&quot;Shutting down due to graceful termination request&quot;</span></div>
<div class="line"><span class="lineno"> 1137</span>                            : <span class="stringliteral">&quot;Restarting&quot;</span>;</div>
<div class="line"><span class="lineno"> 1138</span>                        <span class="keyword">const</span> <span class="keywordtype">string</span> logTemplate2 = <span class="stringliteral">&quot;DEFCON 1: Four health checks have been missed! {actionTaken}...&quot;</span>;</div>
<div class="line"><span class="lineno"> 1139</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(logTemplate2, actionTaken);</div>
<div class="line"><span class="lineno"> 1140</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno"> 1141</span>                            logTemplate2.Replace(</div>
<div class="line"><span class="lineno"> 1142</span>                                <span class="stringliteral">&quot;{actionTaken}&quot;</span>,</div>
<div class="line"><span class="lineno"> 1143</span>                                actionTaken,</div>
<div class="line"><span class="lineno"> 1144</span>                                StringComparison.Ordinal));</div>
<div class="line"><span class="lineno"> 1145</span> </div>
<div class="line"><span class="lineno"> 1146</span>                        <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ae1546ab1b54146ff4cbc6b827c2f0eda">DumpOnHealthCheckRestart</a>!.Value)</div>
<div class="line"><span class="lineno"> 1147</span>                        {</div>
<div class="line"><span class="lineno"> 1148</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;DumpOnHealthCheckRestart enabled.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1149</span>                            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno"> 1150</span>                            {</div>
<div class="line"><span class="lineno"> 1151</span>                                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179">CreateDumpNoLock</a>(cancellationToken);</div>
<div class="line"><span class="lineno"> 1152</span>                            }</div>
<div class="line"><span class="lineno"> 1153</span>                            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a> ex)</div>
<div class="line"><span class="lineno"> 1154</span>                            {</div>
<div class="line"><span class="lineno"> 1155</span>                                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(ex, <span class="stringliteral">&quot;Creating dump failed!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1156</span>                            }</div>
<div class="line"><span class="lineno"> 1157</span>                            <span class="keywordflow">catch</span> (Win32Exception ex)</div>
<div class="line"><span class="lineno"> 1158</span>                            {</div>
<div class="line"><span class="lineno"> 1159</span>                                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(ex, <span class="stringliteral">&quot;Creating dump failed!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1160</span>                            }</div>
<div class="line"><span class="lineno"> 1161</span>                        }</div>
<div class="line"><span class="lineno"> 1162</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1163</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;DumpOnHealthCheckRestart disabled.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1164</span> </div>
<div class="line"><span class="lineno"> 1165</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50">DisposeAndNullControllers</a>(cancellationToken);</div>
<div class="line"><span class="lineno"> 1166</span>                        <span class="keywordflow">return</span> shouldShutdown ? MonitorAction.Exit : <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Restart;</div>
<div class="line"><span class="lineno"> 1167</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1168</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(<span class="stringliteral">&quot;Invalid health checks missed count: {healthChecksMissed}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a>);</div>
<div class="line"><span class="lineno"> 1169</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1170</span>                }</div>
<div class="line"><span class="lineno"> 1171</span>            }</div>
<div class="line"><span class="lineno"> 1172</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1173</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a> = 0;</div>
<div class="line"><span class="lineno"> 1174</span> </div>
<div class="line"><span class="lineno"> 1175</span>            <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno"> 1176</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_ae1546ab1b54146ff4cbc6b827c2f0eda"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ae1546ab1b54146ff4cbc6b827c2f0eda">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.DumpOnHealthCheckRestart</a></div><div class="ttdeci">bool? DumpOnHealthCheckRestart</div><div class="ttdoc">If a process core dump should be created prior to restarting the watchdog due to health check failure...</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00069">DreamDaemonLaunchParameters.cs:69</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ac84983fa4b27fcdf9044aaf68ae82a50"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers</a></div><div class="ttdeci">async ValueTask DisposeAndNullControllers(CancellationToken cancellationToken)</div><div class="ttdoc">Wrapper for DisposeAndNullControllersImpl under a locked context.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00672">WatchdogBase.cs:672</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ae85241e9a900f49e703b7eda13c78564"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.healthChecksMissed</a></div><div class="ttdeci">int healthChecksMissed</div><div class="ttdoc">The number of hearbeats missed.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00170">WatchdogBase.cs:170</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_a103e061814fc6760410734c7a83f9a83"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage</a></div><div class="ttdeci">void QueueWatchdogMessage(string message)</div><div class="ttdoc">Queue a chat message  to configured watchdog channels.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_html_a97c1a4a168451bd7e3be23c467aa2812"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">Tgstation.Server.Host.Components.Watchdog.MonitorAction</a></div><div class="ttdeci">MonitorAction</div><div class="ttdoc">The action for the monitor loop to take when control is returned to it.</div><div class="ttdef"><b>Definition:</b> <a href="_monitor_action_8cs_source.html#l00006">MonitorAction.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00056">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01225">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDumpNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00672">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00069">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.DumpOnHealthCheckRestart</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00170">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.healthChecksMissed</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a075fb0946e843d7eb3f1d708314c5f13_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a075fb0946e843d7eb3f1d708314c5f13_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a075fb0946e843d7eb3f1d708314c5f13_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a075fb0946e843d7eb3f1d708314c5f13_cgraph">
<area shape="rect" title="Handles a watchdog health check." alt="" coords="5,113,296,153"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="344,5,636,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="357,70,623,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="347,149,633,189"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="347,213,633,253"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="704,5,931,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="684,70,951,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="722,149,913,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="999,5,1228,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1276,5,1485,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a075fb0946e843d7eb3f1d708314c5f13_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a075fb0946e843d7eb3f1d708314c5f13_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a075fb0946e843d7eb3f1d708314c5f13_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a075fb0946e843d7eb3f1d708314c5f13_icgraph">
<area shape="rect" title="Handles a watchdog health check." alt="" coords="1272,40,1563,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a354a45aca09fbccbe15dbe79d6675c97" name="a354a45aca09fbccbe15dbe79d6675c97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a354a45aca09fbccbe15dbe79d6675c97">&#9670;&#160;</a></span>HandleMonitorWakeup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract ValueTask&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>&#160;</td>
          <td class="paramname"><em>activationReason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the actions to take when the monitor has to "wake up".  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">activationReason</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9" title="Reasons for the monitor to wake up.">MonitorActivationReason</a> that caused the invocation. Will never be MonitorActivationReason.HealthCheck.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812" title="The action for the monitor loop to take when control is returned to it.">MonitorAction</a> to take.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_advanced_watchdog.html#af92913ca3e4ef60daa783fc3bc1a0807">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog</a>, and <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ada8f7b456ea5697f2d3bb3bb01491d64">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a354a45aca09fbccbe15dbe79d6675c97_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a354a45aca09fbccbe15dbe79d6675c97_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a354a45aca09fbccbe15dbe79d6675c97_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a354a45aca09fbccbe15dbe79d6675c97_icgraph">
<area shape="rect" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="1272,40,1577,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a04162b14c55443e4bf8d2f0956ea0b9b" name="a04162b14c55443e4bf8d2f0956ea0b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04162b14c55443e4bf8d2f0956ea0b9b">&#9670;&#160;</a></span>HandleRestart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart </td>
          <td>(</td>
          <td class="paramtype">Version?&#160;</td>
          <td class="paramname"><em>updateVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>handlerMayDelayShutdownWithExtremelyLongRunningTasks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a restart of the server. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">updateVersion</td><td>The Version being updated to, <code>null</code> if not being changed.</td></tr>
    <tr><td class="paramname">handlerMayDelayShutdownWithExtremelyLongRunningTasks</td><td>If <code>false</code> the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts.">IRestartHandler</a> should aim to complete the Task returned from this function ASAP.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a876fb70e47b6d6c39d7016b0b77d5f75">Tgstation.Server.Host.Core.IRestartHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00419">419</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  420</span>        {</div>
<div class="line"><span class="lineno">  421</span>            <span class="keywordflow">if</span> (handlerMayDelayShutdownWithExtremelyLongRunningTasks)</div>
<div class="line"><span class="lineno">  422</span>            {</div>
<div class="line"><span class="lineno">  423</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720">Terminate</a>(<span class="keyword">true</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  426</span>                {</div>
<div class="line"><span class="lineno">  427</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Waiting for server to gracefully shut down.&quot;</span>);</div>
<div class="line"><span class="lineno">  428</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">monitorTask</a>!.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  429</span>                }</div>
<div class="line"><span class="lineno">  430</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  431</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Graceful shutdown requested but server is already offline.&quot;</span>);</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  434</span>            }</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  437</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online)</div>
<div class="line"><span class="lineno">  438</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Detaching...&quot;</span>);</div>
<div class="line"><span class="lineno">  439</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  440</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Not sending detach chat message as status is: {status}&quot;</span>, <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a>);</div>
<div class="line"><span class="lineno">  441</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a4ee58f2a5e3ae97940e281d6975ed720"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate</a></div><div class="ttdeci">async ValueTask Terminate(bool graceful, CancellationToken cancellationToken)</div><div class="ttdoc">Stops the watchdog. A ValueTask representing the running operation.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00412">WatchdogBase.cs:412</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a663429f7433e25bb662c9d12dd9c285d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a></div><div class="ttdeci">Task? monitorTask</div><div class="ttdoc">The Task running the monitor loop.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00160">WatchdogBase.cs:160</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00160">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00175">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00412">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a04162b14c55443e4bf8d2f0956ea0b9b_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a04162b14c55443e4bf8d2f0956ea0b9b_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a04162b14c55443e4bf8d2f0956ea0b9b_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a04162b14c55443e4bf8d2f0956ea0b9b_cgraph">
<area shape="rect" title="Handle a restart of the server. A ValueTask representing the running operation." alt="" coords="5,35,263,75"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="918,5,1203,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720" title="Stops the watchdog. A ValueTask representing the running operation." alt="" coords="311,63,543,103"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="635,63,825,103"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="591,127,869,167"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="917,69,1204,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="924,133,1197,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aabf80bd8e764b8199c5f63aba6bf3de7" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="939,197,1183,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="1252,97,1491,137"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="1263,162,1479,217"/>
</map>
</div>

</div>
</div>
<a id="a817e8ca4284258e610bf6070a944c7dd" name="a817e8ca4284258e610bf6070a944c7dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a817e8ca4284258e610bf6070a944c7dd">&#9670;&#160;</a></span>InitController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController </td>
          <td>(</td>
          <td class="paramtype">ValueTask&#160;</td>
          <td class="paramname"><em>eventTask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a>?&#160;</td>
          <td class="paramname"><em>reattachInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts all ISessionControllers.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventTask</td><td>A, possibly active, Task for an event that's running.</td></tr>
    <tr><td class="paramname">reattachInfo</td><td>ReattachInformation to use, if any.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a857f98eb5a2516c2a70c35d684c2c21b">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00649">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a817e8ca4284258e610bf6070a944c7dd_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a817e8ca4284258e610bf6070a944c7dd_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a817e8ca4284258e610bf6070a944c7dd_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a817e8ca4284258e610bf6070a944c7dd_icgraph">
<area shape="rect" title="Starts all ISessionControllers." alt="" coords="956,197,1203,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="644,133,907,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d53273beb40a057f7f9423b48850702" title="Call from InitController(ValueTask, ReattachInformation, CancellationToken) when a reattach operation..." alt="" coords="643,229,908,269"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,37,579,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,101,595,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,165,579,205"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,229,585,269"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,41,282,81"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,165,288,205"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a857f98eb5a2516c2a70c35d684c2c21b" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="340,293,591,333"/>
</map>
</div>

</div>
</div>
<a id="a6d6672dfae1375d392bcd16ed604590d" name="a6d6672dfae1375d392bcd16ed604590d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d6672dfae1375d392bcd16ed604590d">&#9670;&#160;</a></span>InitialCheckDmbUpdated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitialCheckDmbUpdated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_compile_job.html">CompileJob</a>&#160;</td>
          <td class="paramname"><em>currentCompileJob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for a new IDmbProvider.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentCompileJob</td><td>The session's current CompileJob.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task that completes if and when a newer CompileJob is available.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00813">813</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  814</span>        {</div>
<div class="line"><span class="lineno">  815</span>            var factoryTask = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#ab61dd81459c04b375182d4a0c8c4cdfe">OnNewerDmb</a>;</div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>            var latestCompileJob = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153">LatestCompileJob</a>();</div>
<div class="line"><span class="lineno">  818</span>            <span class="keywordflow">if</span> (latestCompileJob == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  819</span>                <span class="keywordflow">return</span> factoryTask;</div>
<div class="line"><span class="lineno">  820</span> </div>
<div class="line"><span class="lineno">  821</span>            <span class="keywordflow">if</span> (latestCompileJob.Id != currentCompileJob.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a>)</div>
<div class="line"><span class="lineno">  822</span>            {</div>
<div class="line"><span class="lineno">  823</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Found new CompileJob without waiting&quot;</span>);</div>
<div class="line"><span class="lineno">  824</span>                <span class="keywordflow">return</span> Task.CompletedTask;</div>
<div class="line"><span class="lineno">  825</span>            }</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>            <span class="keywordflow">return</span> factoryTask;</div>
<div class="line"><span class="lineno">  828</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html_a3a98b8f1018f913bc97786f51031f153"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153">Tgstation.Server.Host.Components.Deployment.DmbFactory.LatestCompileJob</a></div><div class="ttdeci">CompileJob? LatestCompileJob()</div><div class="ttdoc">Gets the latest CompileJob. The latest CompileJob or null if none are available.</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00414">DmbFactory.cs:414</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html_ab61dd81459c04b375182d4a0c8c4cdfe"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#ab61dd81459c04b375182d4a0c8c4cdfe">Tgstation.Server.Host.Components.Deployment.DmbFactory.OnNewerDmb</a></div><div class="ttdeci">Task OnNewerDmb</div><div class="ttdoc">Get a Task that completes when the result of a call to LockNextDmb will be different than the previou...</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00029">DmbFactory.cs:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_entity_id_8cs_source.html#l00013">Tgstation.Server.Api.Models.EntityId.Id</a>, <a class="el" href="_dmb_factory_8cs_source.html#l00414">Tgstation.Server.Host.Components.Deployment.DmbFactory.LatestCompileJob()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="_dmb_factory_8cs_source.html#l00030">Tgstation.Server.Host.Components.Deployment.DmbFactory.OnNewerDmb</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_cgraph">
<area shape="rect" title="Check for a new IDmbProvider." alt="" coords="5,5,275,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153" title="Gets the latest CompileJob. The latest CompileJob or null if none are available." alt="" coords="323,13,593,53"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. DmbAvailable is a precondition. A new IDmbProvider." alt="" coords="641,13,891,53"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_icgraph">
<area shape="rect" title="Check for a new IDmbProvider." alt="" coords="1272,33,1541,87"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a7ed998221c11ef7ab08e022113171dcf" name="a7ed998221c11ef7ab08e022113171dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed998221c11ef7ab08e022113171dcf">&#9670;&#160;</a></span>InstanceRenamed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InstanceRenamed </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>newInstanceName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newInstanceName</td><td>The new <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity.html#a7e2f2eeddbc6315acbcfa00c54762183" title="The name of the entity represented by the NamedEntity.">Api.Models.NamedEntity.Name</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a7c1c4de7ff2aeb837b875d9a6ac99f0a">Tgstation.Server.Host.Components.IRenameNotifyee</a>.</p>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#afdc6ea22b9e59466b041ebd6864813d0">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

</div>
</div>
<a id="ab7afe38b1ea6c4a0f1396a45a3ff013f" name="ab7afe38b1ea6c4a0f1396a45a3ff013f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7afe38b1ea6c4a0f1396a45a3ff013f">&#9670;&#160;</a></span>Launch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a9e4d067afa1dd9d2aacc83657f1639dd">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00332">332</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  333</span>        {</div>
<div class="line"><span class="lineno">  334</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  335</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogRunning);</div>
<div class="line"><span class="lineno">  336</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  337</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  338</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_abbff1b419510f84375b7ca3dcf315b03"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock</a></div><div class="ttdeci">async ValueTask LaunchNoLock(bool startMonitor, bool announce, bool announceFailure, ReattachInformation? reattachInfo, CancellationToken cancellationToken)</div><div class="ttdoc">Launches the watchdog.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00528">WatchdogBase.cs:528</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab7afe38b1ea6c4a0f1396a45a3ff013f_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab7afe38b1ea6c4a0f1396a45a3ff013f_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab7afe38b1ea6c4a0f1396a45a3ff013f_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab7afe38b1ea6c4a0f1396a45a3ff013f_cgraph">
<area shape="rect" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="5,89,232,129"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="280,157,543,197"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1643,196,1834,236"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="591,125,864,165"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd" title="Starts all ISessionControllers." alt="" coords="604,61,851,101"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="592,396,863,436"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1269,267,1554,307"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="945,123,1184,163"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="957,43,1173,98"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1278,382,1545,437"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="1268,525,1555,565"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="919,453,1210,493"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="912,648,1217,688"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="930,569,1199,623"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="935,187,1194,227"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="1625,425,1852,465"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1605,346,1872,401"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="1920,425,2149,465"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2197,425,2407,465"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="1265,461,1557,501"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153" title="Gets the latest CompileJob. The latest CompileJob or null if none are available." alt="" coords="1276,589,1547,629"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. DmbAvailable is a precondition. A new IDmbProvider." alt="" coords="1614,589,1863,629"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="1321,203,1502,243"/>
</map>
</div>

</div>
</div>
<a id="abbff1b419510f84375b7ca3dcf315b03" name="abbff1b419510f84375b7ca3dcf315b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbff1b419510f84375b7ca3dcf315b03">&#9670;&#160;</a></span>LaunchNoLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startMonitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announceFailure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a>?&#160;</td>
          <td class="paramname"><em>reattachInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Launches the watchdog.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startMonitor</td><td>If <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a> should be started by this function.</td></tr>
    <tr><td class="paramname">announce</td><td>If the launch should be announced to chat by this function.</td></tr>
    <tr><td class="paramname">announceFailure</td><td>If launch failure should be announced to chat by this function.</td></tr>
    <tr><td class="paramname">reattachInfo</td><td>ReattachInformation to use, if any.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00528">528</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  534</span>        {</div>
<div class="line"><span class="lineno">  535</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Begin LaunchImplNoLock&quot;</span>);</div>
<div class="line"><span class="lineno">  536</span>            <span class="keywordflow">if</span> (startMonitor &amp;&amp; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  537</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogRunning);</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>            <span class="keywordflow">if</span> (reattachInfo == <span class="keyword">null</span> &amp;&amp; !<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6072027691530ddea3454b05d1d6e322">DmbAvailable</a>)</div>
<div class="line"><span class="lineno">  540</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogCompileJobCorrupted);</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>            <span class="comment">// this is necessary, the monitor could be in it&#39;s sleep loop trying to restart, if so cancel THAT monitor and start our own with blackjack and hookers</span></div>
<div class="line"><span class="lineno">  543</span>            var eventTask = ValueTask.CompletedTask;</div>
<div class="line"><span class="lineno">  544</span>            <span class="keywordflow">if</span> (announce)</div>
<div class="line"><span class="lineno">  545</span>            {</div>
<div class="line"><span class="lineno">  546</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno">  547</span>                    reattachInfo == <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  548</span>                        ? <span class="stringliteral">&quot;Launching...&quot;</span></div>
<div class="line"><span class="lineno">  549</span>                        : <span class="stringliteral">&quot;Reattaching...&quot;</span>); <span class="comment">// simple announce</span></div>
<div class="line"><span class="lineno">  550</span>                <span class="keywordflow">if</span> (reattachInfo == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  551</span>                    eventTask = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369">HandleEventImpl</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogLaunch, Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(), <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  552</span>            }</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>            <span class="comment">// since neither server is running, this is safe to do</span></div>
<div class="line"><span class="lineno">  555</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a38066e15427a18f6e71f00526e797088">LastLaunchParameters</a> = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>;</div>
<div class="line"><span class="lineno">  556</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a> = 0;</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  559</span>            {</div>
<div class="line"><span class="lineno">  560</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd">InitController</a>(eventTask, reattachInfo, cancellationToken);</div>
<div class="line"><span class="lineno">  561</span>            }</div>
<div class="line"><span class="lineno">  562</span>            <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  563</span>            {</div>
<div class="line"><span class="lineno">  564</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(ex, <span class="stringliteral">&quot;Controller initialization cancelled!&quot;</span>);</div>
<div class="line"><span class="lineno">  565</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  566</span>            }</div>
<div class="line"><span class="lineno">  567</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e)</div>
<div class="line"><span class="lineno">  568</span>            {</div>
<div class="line"><span class="lineno">  569</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(e, <span class="stringliteral">&quot;Failed to start watchdog!&quot;</span>);</div>
<div class="line"><span class="lineno">  570</span>                var originalChatTask = eventTask;</div>
<div class="line"><span class="lineno">  571</span>                async ValueTask ChainEventTaskWithErrorMessage()</div>
<div class="line"><span class="lineno">  572</span>                {</div>
<div class="line"><span class="lineno">  573</span>                    await originalChatTask;</div>
<div class="line"><span class="lineno">  574</span>                    <span class="keywordflow">if</span> (announceFailure)</div>
<div class="line"><span class="lineno">  575</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Startup failed!&quot;</span>);</div>
<div class="line"><span class="lineno">  576</span>                }</div>
<div class="line"><span class="lineno">  577</span> </div>
<div class="line"><span class="lineno">  578</span>                eventTask = ChainEventTaskWithErrorMessage();</div>
<div class="line"><span class="lineno">  579</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  580</span>            }</div>
<div class="line"><span class="lineno">  581</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  582</span>            {</div>
<div class="line"><span class="lineno">  583</span>                <span class="comment">// finish the chat task that&#39;s in flight</span></div>
<div class="line"><span class="lineno">  584</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  585</span>                {</div>
<div class="line"><span class="lineno">  586</span>                    await eventTask;</div>
<div class="line"><span class="lineno">  587</span>                }</div>
<div class="line"><span class="lineno">  588</span>                <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  589</span>                {</div>
<div class="line"><span class="lineno">  590</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(ex, <span class="stringliteral">&quot;Announcement task canceled!&quot;</span>);</div>
<div class="line"><span class="lineno">  591</span>                }</div>
<div class="line"><span class="lineno">  592</span>            }</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Controller(s) initialized successfully&quot;</span>);</div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>            <span class="keywordflow">if</span> (startMonitor)</div>
<div class="line"><span class="lineno">  597</span>            {</div>
<div class="line"><span class="lineno">  598</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">monitorCts</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  599</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">monitorTask</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">MonitorLifetimes</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">monitorCts</a>.Token);</div>
<div class="line"><span class="lineno">  600</span>            }</div>
<div class="line"><span class="lineno">  601</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html_a6072027691530ddea3454b05d1d6e322"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6072027691530ddea3454b05d1d6e322">Tgstation.Server.Host.Components.Deployment.DmbFactory.DmbAvailable</a></div><div class="ttdeci">bool DmbAvailable</div><div class="ttdoc">If LockNextDmb will succeed.</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00040">DmbFactory.cs:40</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a38066e15427a18f6e71f00526e797088"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a38066e15427a18f6e71f00526e797088">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a></div><div class="ttdeci">DreamDaemonLaunchParameters? LastLaunchParameters</div><div class="ttdoc">The DreamDaemonLaunchParameters the active server is using. This may not be the exact same as ActiveL...</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00059">WatchdogBase.cs:59</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a817e8ca4284258e610bf6070a944c7dd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController</a></div><div class="ttdeci">abstract ValueTask InitController(ValueTask eventTask, ReattachInformation? reattachInfo, CancellationToken cancellationToken)</div><div class="ttdoc">Starts all ISessionControllers.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_adfec26f530228b80d384b86ee979ef2f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes</a></div><div class="ttdeci">async Task MonitorLifetimes(CancellationToken cancellationToken)</div><div class="ttdoc">The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00836">WatchdogBase.cs:836</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_af1a7765d8a839d318fee44e8d63b6369"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl</a></div><div class="ttdeci">async ValueTask HandleEventImpl(EventType eventType, IEnumerable&lt; string &gt; parameters, bool relayToSession, CancellationToken cancellationToken)</div><div class="ttdoc">Handle a given eventType  without re-throwing errors.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00746">WatchdogBase.cs:746</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00056">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_dmb_factory_8cs_source.html#l00040">Tgstation.Server.Host.Components.Deployment.DmbFactory.DmbAvailable</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00746">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00170">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.healthChecksMissed</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00155">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00160">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00332">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00767">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00354">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00378">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_abbff1b419510f84375b7ca3dcf315b03_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_abbff1b419510f84375b7ca3dcf315b03_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_abbff1b419510f84375b7ca3dcf315b03_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_abbff1b419510f84375b7ca3dcf315b03_cgraph">
<area shape="rect" title="Launches the watchdog." alt="" coords="5,177,268,217"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="316,56,589,96"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd" title="Starts all ISessionControllers." alt="" coords="329,120,576,160"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="317,387,588,427"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="994,229,1279,269"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="671,5,909,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="682,70,898,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1003,294,1270,349"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1369,373,1559,413"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="993,437,1280,477"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="645,387,935,427"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="637,632,943,672"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="655,553,925,607"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="661,171,919,211"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="1351,229,1577,269"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1331,294,1597,349"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="1645,229,1875,269"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1923,229,2132,269"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="991,373,1283,413"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153" title="Gets the latest CompileJob. The latest CompileJob or null if none are available." alt="" coords="1001,560,1272,600"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. DmbAvailable is a precondition. A new IDmbProvider." alt="" coords="1339,560,1589,600"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="1046,115,1227,155"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_abbff1b419510f84375b7ca3dcf315b03_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_abbff1b419510f84375b7ca3dcf315b03_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_abbff1b419510f84375b7ca3dcf315b03_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_abbff1b419510f84375b7ca3dcf315b03_icgraph">
<area shape="rect" title="Launches the watchdog." alt="" coords="643,133,905,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,5,579,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,133,595,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,195,282,235"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,69,288,109"/>
</map>
</div>

</div>
</div>
<a id="adfec26f530228b80d384b86ee979ef2f" name="adfec26f530228b80d384b86ee979ef2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfec26f530228b80d384b86ee979ef2f">&#9670;&#160;</a></span>MonitorLifetimes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00836">836</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  837</span>        {</div>
<div class="line"><span class="lineno">  838</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Entered MonitorLifetimes&quot;</span>);</div>
<div class="line"><span class="lineno">  839</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online;</div>
<div class="line"><span class="lineno">  840</span>            <span class="keyword">using </span>var cancellationTokenLoggingRegistration = cancellationToken.Register(() =&gt; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor cancellationToken triggered&quot;</span>));</div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span>            <span class="comment">// this function is responsible for calling HandlerMonitorWakeup when necessary and manitaining the MonitorState</span></div>
<div class="line"><span class="lineno">  843</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  844</span>            {</div>
<div class="line"><span class="lineno">  845</span>                <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  846</span>                Task? activeServerLifetime = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  847</span>                    activeServerReboot = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  848</span>                    activeServerStartup = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  849</span>                    serverPrimed = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  850</span>                    activeLaunchParametersChanged = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  851</span>                    newDmbAvailable = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  852</span>                    healthCheck = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  853</span>                <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a>? lastController = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  854</span>                var ranInitialDmbCheck = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  855</span>                <span class="keywordflow">for</span> (ulong iteration = 1; nextAction != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit; ++iteration)</div>
<div class="line"><span class="lineno">  856</span>                    <span class="keyword">using</span> (LogContext.PushProperty(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper.html">SerilogContextHelper</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper.html#a6db637890083eeb6ad07f64c109eca1e">WatchdogMonitorIterationContextProperty</a>, iteration))</div>
<div class="line"><span class="lineno">  857</span>                    {</div>
<div class="line"><span class="lineno">  858</span>                        var nextMonitorWakeupTcs = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  859</span>                        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  860</span>                        {</div>
<div class="line"><span class="lineno">  861</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Iteration {iteration} of monitor loop&quot;</span>, iteration);</div>
<div class="line"><span class="lineno">  862</span>                            nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>                            var controller = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  865</span> </div>
<div class="line"><span class="lineno">  866</span>                            <span class="keywordtype">void</span> UpdateMonitoredTasks()</div>
<div class="line"><span class="lineno">  867</span>                            {</div>
<div class="line"><span class="lineno">  868</span>                                var sameController = lastController == controller;</div>
<div class="line"><span class="lineno">  869</span>                                <span class="keywordtype">void</span> TryUpdateTask(ref Task? oldTask, Func&lt;Task&gt; newTaskFactory)</div>
<div class="line"><span class="lineno">  870</span>                                {</div>
<div class="line"><span class="lineno">  871</span>                                    <span class="keywordflow">if</span> (sameController &amp;&amp; oldTask?.IsCompleted == <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  872</span>                                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>                                    oldTask = newTaskFactory();</div>
<div class="line"><span class="lineno">  875</span>                                }</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>                                controller!.RebootGate = nextMonitorWakeupTcs.Task;</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>                                TryUpdateTask(ref activeServerLifetime, () =&gt; controller.Lifetime);</div>
<div class="line"><span class="lineno">  880</span>                                TryUpdateTask(ref activeServerReboot, () =&gt; controller.OnReboot);</div>
<div class="line"><span class="lineno">  881</span>                                TryUpdateTask(ref serverPrimed, () =&gt; controller.OnPrime);</div>
<div class="line"><span class="lineno">  882</span>                                TryUpdateTask(ref activeServerStartup, () =&gt; controller.OnStartup);</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>                                <span class="keywordflow">if</span> (!sameController)</div>
<div class="line"><span class="lineno">  885</span>                                    lastController = controller;</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>                                TryUpdateTask(ref activeLaunchParametersChanged, () =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af8f6221485a1d072038f17e0d6ba55fc">activeParametersUpdated</a>.Task);</div>
<div class="line"><span class="lineno">  888</span>                                TryUpdateTask(</div>
<div class="line"><span class="lineno">  889</span>                                    ref newDmbAvailable,</div>
<div class="line"><span class="lineno">  890</span>                                    () =&gt;</div>
<div class="line"><span class="lineno">  891</span>                                    {</div>
<div class="line"><span class="lineno">  892</span>                                        var result = ranInitialDmbCheck</div>
<div class="line"><span class="lineno">  893</span>                                            ? DmbFactory.OnNewerDmb</div>
<div class="line"><span class="lineno">  894</span>                                            : <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d">InitialCheckDmbUpdated</a>(controller.CompileJob);</div>
<div class="line"><span class="lineno">  895</span>                                        ranInitialDmbCheck = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  896</span>                                        <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  897</span>                                    });</div>
<div class="line"><span class="lineno">  898</span>                            }</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>                            <span class="keywordflow">if</span> (controller != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  901</span>                            {</div>
<div class="line"><span class="lineno">  902</span>                                UpdateMonitoredTasks();</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>                                var healthCheckSeconds = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a9bfa02156238c84f1a7554ddc6439c5a">HealthCheckSeconds</a>!.Value;</div>
<div class="line"><span class="lineno">  905</span>                                healthCheck = healthCheckSeconds == 0</div>
<div class="line"><span class="lineno">  906</span>                                    || !controller.DMApiAvailable</div>
<div class="line"><span class="lineno">  907</span>                                    ? Extensions.TaskExtensions.InfiniteTask</div>
<div class="line"><span class="lineno">  908</span>                                    : Task.Delay(</div>
<div class="line"><span class="lineno">  909</span>                                        TimeSpan.FromSeconds(healthCheckSeconds),</div>
<div class="line"><span class="lineno">  910</span>                                        cancellationToken);</div>
<div class="line"><span class="lineno">  911</span> </div>
<div class="line"><span class="lineno">  912</span>                                <span class="comment">// cancel waiting if requested</span></div>
<div class="line"><span class="lineno">  913</span>                                var toWaitOn = Task.WhenAny(</div>
<div class="line"><span class="lineno">  914</span>                                    activeServerLifetime!,</div>
<div class="line"><span class="lineno">  915</span>                                    activeServerReboot!,</div>
<div class="line"><span class="lineno">  916</span>                                    activeServerStartup!,</div>
<div class="line"><span class="lineno">  917</span>                                    healthCheck,</div>
<div class="line"><span class="lineno">  918</span>                                    newDmbAvailable!,</div>
<div class="line"><span class="lineno">  919</span>                                    activeLaunchParametersChanged!,</div>
<div class="line"><span class="lineno">  920</span>                                    serverPrimed!);</div>
<div class="line"><span class="lineno">  921</span> </div>
<div class="line"><span class="lineno">  922</span>                                <span class="comment">// wait for something to happen</span></div>
<div class="line"><span class="lineno">  923</span>                                await toWaitOn.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  924</span>                            }</div>
<div class="line"><span class="lineno">  925</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  926</span>                            {</div>
<div class="line"><span class="lineno">  927</span>                                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(<span class="stringliteral">&quot;Controller was null on monitor wakeup! Attempting restart...&quot;</span>);</div>
<div class="line"><span class="lineno">  928</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Restart; <span class="comment">// excuse me wtf?</span></div>
<div class="line"><span class="lineno">  929</span>                            }</div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span>                            cancellationToken.ThrowIfCancellationRequested();</div>
<div class="line"><span class="lineno">  932</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor activated&quot;</span>);</div>
<div class="line"><span class="lineno">  933</span> </div>
<div class="line"><span class="lineno">  934</span>                            <span class="comment">// always run HandleMonitorWakeup from the context of the semaphore lock</span></div>
<div class="line"><span class="lineno">  935</span>                            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  936</span>                            {</div>
<div class="line"><span class="lineno">  937</span>                                <span class="comment">// Set this sooner so chat sends don&#39;t hold us up</span></div>
<div class="line"><span class="lineno">  938</span>                                <span class="keywordflow">if</span> (activeServerLifetime!.IsCompleted)</div>
<div class="line"><span class="lineno">  939</span>                                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Restoring;</div>
<div class="line"><span class="lineno">  940</span> </div>
<div class="line"><span class="lineno">  941</span>                                <span class="comment">// multiple things may have happened, handle them one at a time</span></div>
<div class="line"><span class="lineno">  942</span>                                <span class="keywordflow">for</span> (var moreActivationsToProcess = <span class="keyword">true</span>; moreActivationsToProcess &amp;&amp; (nextAction == MonitorAction.Continue || nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Skip);)</div>
<div class="line"><span class="lineno">  943</span>                                {</div>
<div class="line"><span class="lineno">  944</span>                                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> activationReason = <span class="keywordflow">default</span>; <span class="comment">// this will always be assigned before being used</span></div>
<div class="line"><span class="lineno">  945</span> </div>
<div class="line"><span class="lineno">  946</span>                                    <span class="keywordtype">bool</span> CheckActivationReason(ref Task? task, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> testActivationReason)</div>
<div class="line"><span class="lineno">  947</span>                                    {</div>
<div class="line"><span class="lineno">  948</span>                                        var taskCompleted = task?.IsCompleted == <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  949</span>                                        task = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  950</span>                                        <span class="keywordflow">if</span> (nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Skip)</div>
<div class="line"><span class="lineno">  951</span>                                            nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  952</span>                                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (taskCompleted)</div>
<div class="line"><span class="lineno">  953</span>                                        {</div>
<div class="line"><span class="lineno">  954</span>                                            activationReason = testActivationReason;</div>
<div class="line"><span class="lineno">  955</span>                                            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  956</span>                                        }</div>
<div class="line"><span class="lineno">  957</span> </div>
<div class="line"><span class="lineno">  958</span>                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  959</span>                                    }</div>
<div class="line"><span class="lineno">  960</span> </div>
<div class="line"><span class="lineno">  961</span>                                    <span class="comment">// process the tasks in this order and call HandlerMonitorWakup for each depending on the new monitorState</span></div>
<div class="line"><span class="lineno">  962</span>                                    var anyActivation = CheckActivationReason(ref activeServerLifetime, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerCrashed)</div>
<div class="line"><span class="lineno">  963</span>                                        || CheckActivationReason(ref activeServerReboot, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerRebooted)</div>
<div class="line"><span class="lineno">  964</span>                                        || CheckActivationReason(ref newDmbAvailable, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.NewDmbAvailable)</div>
<div class="line"><span class="lineno">  965</span>                                        || CheckActivationReason(ref activeLaunchParametersChanged, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveLaunchParametersUpdated)</div>
<div class="line"><span class="lineno">  966</span>                                        || CheckActivationReason(ref healthCheck, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.HealthCheck)</div>
<div class="line"><span class="lineno">  967</span>                                        || CheckActivationReason(ref serverPrimed, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerPrimed)</div>
<div class="line"><span class="lineno">  968</span>                                        || CheckActivationReason(ref activeServerStartup, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerStartup);</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>                                    UpdateMonitoredTasks();</div>
<div class="line"><span class="lineno">  971</span> </div>
<div class="line"><span class="lineno">  972</span>                                    <span class="keywordflow">if</span> (!anyActivation)</div>
<div class="line"><span class="lineno">  973</span>                                        moreActivationsToProcess = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  974</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  975</span>                                    {</div>
<div class="line"><span class="lineno">  976</span>                                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Reason: {activationReason}&quot;</span>, activationReason);</div>
<div class="line"><span class="lineno">  977</span>                                        <span class="keywordflow">if</span> (activationReason == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.HealthCheck)</div>
<div class="line"><span class="lineno">  978</span>                                            nextAction = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13">HandleHealthCheck</a>(</div>
<div class="line"><span class="lineno">  979</span>                                                cancellationToken);</div>
<div class="line"><span class="lineno">  980</span>                                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  981</span>                                            nextAction = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97">HandleMonitorWakeup</a>(</div>
<div class="line"><span class="lineno">  982</span>                                                activationReason,</div>
<div class="line"><span class="lineno">  983</span>                                                cancellationToken);</div>
<div class="line"><span class="lineno">  984</span>                                    }</div>
<div class="line"><span class="lineno">  985</span>                                }</div>
<div class="line"><span class="lineno">  986</span>                            }</div>
<div class="line"><span class="lineno">  987</span> </div>
<div class="line"><span class="lineno">  988</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Next monitor action is to {nextAction}&quot;</span>, nextAction);</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>                            <span class="comment">// Restart if requested</span></div>
<div class="line"><span class="lineno">  991</span>                            <span class="keywordflow">if</span> (nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Restart)</div>
<div class="line"><span class="lineno">  992</span>                            {</div>
<div class="line"><span class="lineno">  993</span>                                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea">MonitorRestart</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  994</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  995</span>                            }</div>
<div class="line"><span class="lineno">  996</span>                        }</div>
<div class="line"><span class="lineno">  997</span>                        <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e) when (e is not OperationCanceledException)</div>
<div class="line"><span class="lineno">  998</span>                        {</div>
<div class="line"><span class="lineno">  999</span>                            <span class="comment">// really, this should NEVER happen</span></div>
<div class="line"><span class="lineno"> 1000</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(</div>
<div class="line"><span class="lineno"> 1001</span>                                e,</div>
<div class="line"><span class="lineno"> 1002</span>                                <span class="stringliteral">&quot;Monitor crashed! Iteration: {iteration}&quot;</span>,</div>
<div class="line"><span class="lineno"> 1003</span>                                iteration);</div>
<div class="line"><span class="lineno"> 1004</span> </div>
<div class="line"><span class="lineno"> 1005</span>                            var nextActionMessage = nextAction != MonitorAction.Exit</div>
<div class="line"><span class="lineno"> 1006</span>                                ? <span class="stringliteral">&quot;Recovering&quot;</span></div>
<div class="line"><span class="lineno"> 1007</span>                                : <span class="stringliteral">&quot;Shutting down&quot;</span>;</div>
<div class="line"><span class="lineno"> 1008</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno"> 1009</span>                                $<span class="stringliteral">&quot;Monitor crashed, this should NEVER happen! Please report this, full details in logs! {nextActionMessage}. Error: {e.Message}&quot;</span>);</div>
<div class="line"><span class="lineno"> 1010</span> </div>
<div class="line"><span class="lineno"> 1011</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a>)</div>
<div class="line"><span class="lineno"> 1012</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit;</div>
<div class="line"><span class="lineno"> 1013</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextAction != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit)</div>
<div class="line"><span class="lineno"> 1014</span>                            {</div>
<div class="line"><span class="lineno"> 1015</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>()?.Lifetime.IsCompleted != <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1016</span>                                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea">MonitorRestart</a>(cancellationToken);</div>
<div class="line"><span class="lineno"> 1017</span>                                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1018</span>                                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Server seems to be okay, not restarting&quot;</span>);</div>
<div class="line"><span class="lineno"> 1019</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno"> 1020</span>                            }</div>
<div class="line"><span class="lineno"> 1021</span>                        }</div>
<div class="line"><span class="lineno"> 1022</span>                        <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno"> 1023</span>                        {</div>
<div class="line"><span class="lineno"> 1024</span>                            nextMonitorWakeupTcs.SetResult();</div>
<div class="line"><span class="lineno"> 1025</span>                        }</div>
<div class="line"><span class="lineno"> 1026</span>                    }</div>
<div class="line"><span class="lineno"> 1027</span>            }</div>
<div class="line"><span class="lineno"> 1028</span>            <span class="keywordflow">catch</span> (OperationCanceledException)</div>
<div class="line"><span class="lineno"> 1029</span>            {</div>
<div class="line"><span class="lineno"> 1030</span>                <span class="comment">// stop signal</span></div>
<div class="line"><span class="lineno"> 1031</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Monitor cancelled&quot;</span>);</div>
<div class="line"><span class="lineno"> 1032</span> </div>
<div class="line"><span class="lineno"> 1033</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>)</div>
<div class="line"><span class="lineno"> 1034</span>                {</div>
<div class="line"><span class="lineno"> 1035</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Detaching server...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1036</span>                    var controller = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno"> 1037</span>                    <span class="keywordflow">if</span> (controller != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1038</span>                        await controller.Release();</div>
<div class="line"><span class="lineno"> 1039</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1040</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(<span class="stringliteral">&quot;Controller was null on monitor shutdown!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1041</span>                }</div>
<div class="line"><span class="lineno"> 1042</span>            }</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>            <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno"> 1045</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50">DisposeAndNullControllers</a>(CancellationToken.None);</div>
<div class="line"><span class="lineno"> 1046</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline;</div>
<div class="line"><span class="lineno"> 1047</span> </div>
<div class="line"><span class="lineno"> 1048</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor exiting...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1049</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_a9bfa02156238c84f1a7554ddc6439c5a"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a9bfa02156238c84f1a7554ddc6439c5a">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.HealthCheckSeconds</a></div><div class="ttdeci">uint? HealthCheckSeconds</div><div class="ttdoc">The number of seconds between each watchdog health check. 0 disables.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00062">DreamDaemonLaunchParameters.cs:62</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a075fb0946e843d7eb3f1d708314c5f13"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck</a></div><div class="ttdeci">async ValueTask&lt; MonitorAction &gt; HandleHealthCheck(CancellationToken cancellationToken)</div><div class="ttdoc">Handles a watchdog health check.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l01100">WatchdogBase.cs:1100</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a354a45aca09fbccbe15dbe79d6675c97"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup</a></div><div class="ttdeci">abstract ValueTask&lt; MonitorAction &gt; HandleMonitorWakeup(MonitorActivationReason activationReason, CancellationToken cancellationToken)</div><div class="ttdoc">Handles the actions to take when the monitor has to &quot;wake up&quot;.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a6d6672dfae1375d392bcd16ed604590d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitialCheckDmbUpdated</a></div><div class="ttdeci">Task InitialCheckDmbUpdated(CompileJob currentCompileJob)</div><div class="ttdoc">Check for a new IDmbProvider.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00813">WatchdogBase.cs:813</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ab24be19620df4ed6b473ad5b49ea8dea"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart</a></div><div class="ttdeci">async ValueTask MonitorRestart(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to restart the monitor from scratch.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00767">WatchdogBase.cs:767</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper.html">Tgstation.Server.Host.Utils.SerilogContextHelper</a></div><div class="ttdoc">Helpers for manipulating the Serilog.Context.LogContext.</div><div class="ttdef"><b>Definition:</b> <a href="_serilog_context_helper_8cs_source.html#l00006">SerilogContextHelper.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper_html_a6db637890083eeb6ad07f64c109eca1e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper.html#a6db637890083eeb6ad07f64c109eca1e">Tgstation.Server.Host.Utils.SerilogContextHelper.WatchdogMonitorIterationContextProperty</a></div><div class="ttdeci">const string WatchdogMonitorIterationContextProperty</div><div class="ttdoc">The Serilog.Context.LogContext property name for the ID of the watchdog monitor iteration currently b...</div><div class="ttdef"><b>Definition:</b> <a href="_serilog_context_helper_8cs_source.html#l00031">SerilogContextHelper.cs:31</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">Tgstation.Server.Host.Components.Session.ISessionController</a></div><div class="ttdoc">Handles communication with a DreamDaemon IProcess.</div><div class="ttdef"><b>Definition:</b> <a href="_i_session_controller_8cs_source.html#l00015">ISessionController.cs:16</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_html_acb2ccc2dc05d01ec3a6448d3d57155c9"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">Tgstation.Server.Host.Components.Watchdog.MonitorActivationReason</a></div><div class="ttdeci">MonitorActivationReason</div><div class="ttdoc">Reasons for the monitor to wake up.</div><div class="ttdef"><b>Definition:</b> <a href="_monitor_activation_reason_8cs_source.html#l00006">MonitorActivationReason.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00056">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00150">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.activeParametersUpdated</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00672">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00180">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup()</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00062">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.HealthCheckSeconds</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00813">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitialCheckDmbUpdated()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00767">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00175">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_serilog_context_helper_8cs_source.html#l00031">Tgstation.Server.Host.Utils.SerilogContextHelper.WatchdogMonitorIterationContextProperty</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph">
<area shape="rect" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="5,333,276,373"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="690,134,957,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1065,257,1255,297"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="680,5,967,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="331,141,622,181"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1017,380,1303,420"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="324,397,629,437"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="342,586,611,641"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="347,333,606,373"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="1047,92,1273,132"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1027,157,1293,211"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="1355,92,1585,132"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1637,92,1847,132"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="677,69,969,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153" title="Gets the latest CompileJob. The latest CompileJob or null if none are available." alt="" coords="688,595,959,635"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. DmbAvailable is a precondition. A new IDmbProvider." alt="" coords="1035,595,1285,635"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="733,416,914,456"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="692,531,955,571"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="1023,531,1297,571"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd" title="Starts all ISessionControllers." alt="" coords="1037,467,1283,507"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="1351,567,1589,607"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="1362,487,1578,542"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph">
<area shape="rect" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="ab24be19620df4ed6b473ad5b49ea8dea" name="ab24be19620df4ed6b473ad5b49ea8dea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24be19620df4ed6b473ad5b49ea8dea">&#9670;&#160;</a></span>MonitorRestart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to restart the monitor from scratch.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00767">767</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  768</span>        {</div>
<div class="line"><span class="lineno">  769</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor restart!&quot;</span>);</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50">DisposeAndNullControllers</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>            <span class="keywordflow">for</span> (var retryAttempts = 1; ; ++retryAttempts)</div>
<div class="line"><span class="lineno">  774</span>            {</div>
<div class="line"><span class="lineno">  775</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Restoring;</div>
<div class="line"><span class="lineno">  776</span>                <a class="code hl_class" href="class_exception.html">Exception</a> launchException;</div>
<div class="line"><span class="lineno">  777</span>                <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  778</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  779</span>                    {</div>
<div class="line"><span class="lineno">  780</span>                        <span class="comment">// use LaunchImplNoLock without announcements or restarting the monitor</span></div>
<div class="line"><span class="lineno">  781</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03">LaunchNoLock</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  782</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online;</div>
<div class="line"><span class="lineno">  783</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Relaunch successful, resuming monitor...&quot;</span>);</div>
<div class="line"><span class="lineno">  784</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  785</span>                    }</div>
<div class="line"><span class="lineno">  786</span>                    <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e) when (e is not OperationCanceledException)</div>
<div class="line"><span class="lineno">  787</span>                    {</div>
<div class="line"><span class="lineno">  788</span>                        launchException = e;</div>
<div class="line"><span class="lineno">  789</span>                    }</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(launchException, <span class="stringliteral">&quot;Failed to automatically restart the watchdog! Attempt: {attemptNumber}&quot;</span>, retryAttempts);</div>
<div class="line"><span class="lineno">  792</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.DelayedRestart;</div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>                var retryDelay = Math.Min(</div>
<div class="line"><span class="lineno">  795</span>                    Convert.ToInt32(</div>
<div class="line"><span class="lineno">  796</span>                        Math.Pow(2, retryAttempts)),</div>
<div class="line"><span class="lineno">  797</span>                    TimeSpan.FromHours(1).TotalSeconds); <span class="comment">// max of one hour, increasing by a power of 2 each time</span></div>
<div class="line"><span class="lineno">  798</span> </div>
<div class="line"><span class="lineno">  799</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno">  800</span>                    $<span class="stringliteral">&quot;Failed to restart (Attempt: {retryAttempts}), retrying in {retryDelay}s...&quot;</span>);</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>                await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html">AsyncDelayer</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Delay</a>(</div>
<div class="line"><span class="lineno">  803</span>                    TimeSpan.FromSeconds(retryDelay),</div>
<div class="line"><span class="lineno">  804</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  805</span>            }</div>
<div class="line"><span class="lineno">  806</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer_html_a866d0f61c2a2311e5fbe5d8de329df33"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Tgstation.Server.Host.Utils.AsyncDelayer.Delay</a></div><div class="ttdeci">Task Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan . A Task representing the running operation.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Tgstation.Server.Host.Utils.AsyncDelayer.Delay()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00672">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab24be19620df4ed6b473ad5b49ea8dea_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab24be19620df4ed6b473ad5b49ea8dea_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab24be19620df4ed6b473ad5b49ea8dea_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab24be19620df4ed6b473ad5b49ea8dea_cgraph">
<area shape="rect" title="Attempt to restart the monitor from scratch." alt="" coords="5,167,264,207"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="353,5,534,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1310,222,1577,277"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1675,157,1866,197"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="312,575,575,615"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1301,549,1586,589"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="1657,301,1884,341"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1637,222,1904,277"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="1952,301,2181,341"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2229,301,2439,341"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="623,696,896,736"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd" title="Starts all ISessionControllers." alt="" coords="636,632,883,672"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="624,323,895,363"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="977,712,1216,752"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="989,633,1205,687"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="1300,301,1587,341"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="951,323,1242,363"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="944,387,1249,427"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="962,451,1231,506"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="1297,365,1589,405"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153" title="Gets the latest CompileJob. The latest CompileJob or null if none are available." alt="" coords="1308,459,1579,499"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. DmbAvailable is a precondition. A new IDmbProvider." alt="" coords="1646,459,1895,499"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab24be19620df4ed6b473ad5b49ea8dea_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab24be19620df4ed6b473ad5b49ea8dea_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab24be19620df4ed6b473ad5b49ea8dea_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab24be19620df4ed6b473ad5b49ea8dea_icgraph">
<area shape="rect" title="Attempt to restart the monitor from scratch." alt="" coords="1252,69,1511,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="933,40,1204,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="623,69,885,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab7afe38b1ea6c4a0f1396a45a3ff013f" title="Start the IWatchdog. A ValueTask representing the running operation." alt="" coords="342,5,569,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="342,69,569,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="336,133,575,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,69,288,109"/>
</map>
</div>

</div>
</div>
<a id="a2d53273beb40a057f7f9423b48850702" name="a2d53273beb40a057f7f9423b48850702"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d53273beb40a057f7f9423b48850702">&#9670;&#160;</a></span>ReattachFailure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call from InitController(ValueTask, ReattachInformation, CancellationToken) when a reattach operation fails to attempt a fresh start.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00649">649</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  650</span>        {</div>
<div class="line"><span class="lineno">  651</span>            <span class="comment">// we lost the server, just restart entirely</span></div>
<div class="line"><span class="lineno">  652</span>            <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  653</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50">DisposeAndNullControllers</a>(CancellationToken.None);</div>
<div class="line"><span class="lineno">  654</span>            <span class="keyword">const</span> <span class="keywordtype">string</span> FailReattachMessage = <span class="stringliteral">&quot;Unable to properly reattach to server! Restarting watchdog...&quot;</span>;</div>
<div class="line"><span class="lineno">  655</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(FailReattachMessage);</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(FailReattachMessage);</div>
<div class="line"><span class="lineno">  658</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd">InitController</a>(ValueTask.CompletedTask, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  659</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00672">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00209">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d53273beb40a057f7f9423b48850702_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d53273beb40a057f7f9423b48850702_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d53273beb40a057f7f9423b48850702_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d53273beb40a057f7f9423b48850702_cgraph">
<area shape="rect" title="Call from InitController(ValueTask, ReattachInformation, CancellationToken) when a reattach operation..." alt="" coords="5,149,271,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="328,70,595,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd" title="Starts all ISessionControllers." alt="" coords="338,149,585,189"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="319,213,604,253"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="672,5,899,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="652,70,919,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="690,149,881,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="967,5,1196,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1244,5,1453,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d53273beb40a057f7f9423b48850702_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d53273beb40a057f7f9423b48850702_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d53273beb40a057f7f9423b48850702_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2d53273beb40a057f7f9423b48850702_icgraph">
<area shape="rect" title="Call from InitController(ValueTask, ReattachInformation, CancellationToken) when a reattach operation..." alt="" coords="304,5,569,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a857f98eb5a2516c2a70c35d684c2c21b" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="5,5,256,45"/>
</map>
</div>

</div>
</div>
<a id="ad77b687adbbd7f8963b5bab7c46e2acf" name="ad77b687adbbd7f8963b5bab7c46e2acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad77b687adbbd7f8963b5bab7c46e2acf">&#9670;&#160;</a></span>ResetRebootState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cancels pending graceful actions. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#ac402f4a9d33aba4b8fd57256f31461bc">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p>Reimplemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00341">341</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  342</span>        {</div>
<div class="line"><span class="lineno">  343</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  344</span>            {</div>
<div class="line"><span class="lineno">  345</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  346</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  347</span>                var toClear = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  348</span>                <span class="keywordflow">if</span> (toClear != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  349</span>                    await toClear.SetRebootState(Session.RebootState.Normal, cancellationToken);</div>
<div class="line"><span class="lineno">  350</span>            }</div>
<div class="line"><span class="lineno">  351</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad77b687adbbd7f8963b5bab7c46e2acf_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad77b687adbbd7f8963b5bab7c46e2acf_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad77b687adbbd7f8963b5bab7c46e2acf_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad77b687adbbd7f8963b5bab7c46e2acf_cgraph">
<area shape="rect" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,37,285,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="333,5,620,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="381,69,572,109"/>
</map>
</div>

</div>
</div>
<a id="a805a90319a8bdf4862ce9879f125b853" name="a805a90319a8bdf4862ce9879f125b853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805a90319a8bdf4862ce9879f125b853">&#9670;&#160;</a></span>Restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restarts the watchdog. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the restart will be delayed until a reboot is detected in the active server's DMAPI and this function will retrun immediately.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#aa7ff5774e54084bd2ce8a45bebdb2ae2">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00354">354</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  355</span>        {</div>
<div class="line"><span class="lineno">  356</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  357</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogNotRunning);</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Begin Restart. Graceful: {gracefulFlag}&quot;</span>, graceful);</div>
<div class="line"><span class="lineno">  360</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  361</span>            {</div>
<div class="line"><span class="lineno">  362</span>                <span class="keywordflow">if</span> (!graceful)</div>
<div class="line"><span class="lineno">  363</span>                {</div>
<div class="line"><span class="lineno">  364</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Manual restart triggered...&quot;</span>);</div>
<div class="line"><span class="lineno">  365</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73">TerminateNoLock</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  366</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  367</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  368</span>                }</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>                var toReboot = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  371</span>                <span class="keywordflow">if</span> (toReboot != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  372</span>                    &amp;&amp; !await toReboot.SetRebootState(Session.RebootState.Restart, cancellationToken))</div>
<div class="line"><span class="lineno">  373</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(<span class="stringliteral">&quot;Unable to send reboot state change event!&quot;</span>);</div>
<div class="line"><span class="lineno">  374</span>            }</div>
<div class="line"><span class="lineno">  375</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ad3ee74413d53a906a104c8376a828e73"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock</a></div><div class="ttdeci">async ValueTask TerminateNoLock(bool graceful, bool announce, CancellationToken cancellationToken)</div><div class="ttdoc">Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l01059">WatchdogBase.cs:1059</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00097">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.ResetRebootState()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a805a90319a8bdf4862ce9879f125b853_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a805a90319a8bdf4862ce9879f125b853_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a805a90319a8bdf4862ce9879f125b853_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a805a90319a8bdf4862ce9879f125b853_cgraph">
<area shape="rect" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="5,208,232,248"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="1284,719,1571,759"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="288,208,551,248"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1659,192,1850,232"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1285,201,1570,241"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="280,547,559,587"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="607,547,880,587"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd" title="Starts all ISessionControllers." alt="" coords="620,208,867,248"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="608,360,879,400"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="961,669,1200,709"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="973,734,1189,789"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1294,482,1561,537"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="935,555,1226,595"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="928,360,1233,400"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="946,425,1215,479"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="951,93,1210,133"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="1641,485,1868,525"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1621,550,1888,605"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="1936,485,2165,525"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2213,485,2423,525"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="1281,561,1573,601"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153" title="Gets the latest CompileJob. The latest CompileJob or null if none are available." alt="" coords="1292,417,1563,457"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. DmbAvailable is a precondition. A new IDmbProvider." alt="" coords="1630,417,1879,457"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="1337,137,1518,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aabf80bd8e764b8199c5f63aba6bf3de7" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="621,611,865,651"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a805a90319a8bdf4862ce9879f125b853_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a805a90319a8bdf4862ce9879f125b853_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a805a90319a8bdf4862ce9879f125b853_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a805a90319a8bdf4862ce9879f125b853_icgraph">
<area shape="rect" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="336,5,563,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,5,288,45"/>
</map>
</div>

</div>
</div>
<a id="ae30d4b582b04eb7c3ef3c5d848429bbd" name="ae30d4b582b04eb7c3ef3c5d848429bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae30d4b582b04eb7c3ef3c5d848429bbd">&#9670;&#160;</a></span>StartAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00378">378</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  379</span>        {</div>
<div class="line"><span class="lineno">  380</span>            var reattachInfo = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a89dd7970dd66a8630f036c9ecc67e834">Load</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  381</span>            var reattaching = reattachInfo != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  382</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a> &amp;&amp; !reattaching)</div>
<div class="line"><span class="lineno">  383</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>            var job = Models.Job.Create(</div>
<div class="line"><span class="lineno">  386</span>                reattaching</div>
<div class="line"><span class="lineno">  387</span>                    ? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a7c8f30de4159253ce2ffec51771bed71">JobCode</a>.StartupWatchdogReattach</div>
<div class="line"><span class="lineno">  388</span>                    : <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a7c8f30de4159253ce2ffec51771bed71">JobCode</a>.StartupWatchdogLaunch,</div>
<div class="line"><span class="lineno">  389</span>                <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  390</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>,</div>
<div class="line"><span class="lineno">  391</span>                <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">DreamDaemonRights</a>.Shutdown);</div>
<div class="line"><span class="lineno">  392</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#aefaca6d0c2762350a41adfe7daaade95">RegisterOperation</a>(</div>
<div class="line"><span class="lineno">  393</span>                job,</div>
<div class="line"><span class="lineno">  394</span>                async (core, databaseContextFactory, paramJob, progressFunction, ct) =&gt;</div>
<div class="line"><span class="lineno">  395</span>                {</div>
<div class="line"><span class="lineno">  396</span>                    <span class="keywordflow">if</span> (core?.Watchdog != <span class="keyword">this</span>)</div>
<div class="line"><span class="lineno">  397</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Instance</a>.DifferentCoreExceptionMessage);</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>                    using (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, ct))</div>
<div class="line"><span class="lineno">  400</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, reattachInfo, ct);</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>                    await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a9db61524573df9c1993f87862c29aae2">UpdateTrackingContexts</a>(ct);</div>
<div class="line"><span class="lineno">  403</span>                },</div>
<div class="line"><span class="lineno">  404</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  405</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Tgstation.Server.Api.Models.Instance</a></div><div class="ttdoc">Metadata about a server instance.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00008">Instance.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html_a89dd7970dd66a8630f036c9ecc67e834"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a89dd7970dd66a8630f036c9ecc67e834">Tgstation.Server.Host.Components.Session.SessionPersistor.Load</a></div><div class="ttdeci">async ValueTask&lt; ReattachInformation?&gt; Load(CancellationToken cancellationToken)</div><div class="ttdoc">Load a saved ReattachInformation. A ValueTask&lt;TResult&gt; resulting in the stored ReattachInformation if...</div><div class="ttdef"><b>Definition:</b> <a href="_session_persistor_8cs_source.html#l00128">SessionPersistor.cs:128</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_a9db61524573df9c1993f87862c29aae2"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a9db61524573df9c1993f87862c29aae2">Tgstation.Server.Host.Components.Chat.IChatManager.UpdateTrackingContexts</a></div><div class="ttdeci">ValueTask UpdateTrackingContexts(CancellationToken cancellationToken)</div><div class="ttdoc">Force an update with the active channels on all active IChatTrackingContexts.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager_html_aefaca6d0c2762350a41adfe7daaade95"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#aefaca6d0c2762350a41adfe7daaade95">Tgstation.Server.Host.Jobs.IJobManager.RegisterOperation</a></div><div class="ttdeci">ValueTask RegisterOperation(Job job, JobEntrypoint operation, CancellationToken cancellationToken)</div><div class="ttdoc">Registers a given Job and begins running it.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a7c8f30de4159253ce2ffec51771bed71"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a7c8f30de4159253ce2ffec51771bed71">Tgstation.Server.Api.Models.JobCode</a></div><div class="ttdeci">JobCode</div><div class="ttdoc">The different types of Response.JobResponse.</div><div class="ttdef"><b>Definition:</b> <a href="_job_code_8cs_source.html#l00008">JobCode.cs:9</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_acf2642afce6567c03b79876139a10a49"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">Tgstation.Server.Api.Rights.DreamDaemonRights</a></div><div class="ttdeci">DreamDaemonRights</div><div class="ttdoc">Rights for managing DreamDaemon.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_rights_8cs_source.html#l00009">DreamDaemonRights.cs:10</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00145">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_tgstation_8_server_8_host_2_components_2_instance_8cs_source.html#l00033">Tgstation.Server.Host.Components.Instance.DifferentCoreExceptionMessage</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00125">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_session_persistor_8cs_source.html#l00128">Tgstation.Server.Host.Components.Session.SessionPersistor.Load()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00105">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#aefaca6d0c2762350a41adfe7daaade95">Tgstation.Server.Host.Jobs.IJobManager.RegisterOperation()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a9db61524573df9c1993f87862c29aae2">Tgstation.Server.Host.Components.Chat.IChatManager.UpdateTrackingContexts()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph">
<area shape="rect" title=" " alt="" coords="5,460,244,500"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbff1b419510f84375b7ca3dcf315b03" title="Launches the watchdog." alt="" coords="300,300,563,340"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1671,143,1862,183"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a89dd7970dd66a8630f036c9ecc67e834" title="Load a saved ReattachInformation. A ValueTask&lt;TResult&gt; resulting in the stored ReattachInformation if..." alt="" coords="318,460,545,500"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#aefaca6d0c2762350a41adfe7daaade95" title="Registers a given Job and begins running it." alt="" coords="329,524,533,564"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a9db61524573df9c1993f87862c29aae2" title="Force an update with the active channels on all active IChatTrackingContexts." alt="" coords="292,588,571,628"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="619,332,892,372"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a817e8ca4284258e610bf6070a944c7dd" title="Starts all ISessionControllers." alt="" coords="632,396,879,436"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="620,268,891,308"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1297,173,1582,213"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="973,649,1212,689"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="985,570,1201,625"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1306,297,1573,351"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="1296,440,1583,480"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a075fb0946e843d7eb3f1d708314c5f13" title="Handles a watchdog health check." alt="" coords="947,376,1238,416"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a354a45aca09fbccbe15dbe79d6675c97" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="940,160,1245,200"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="958,491,1227,546"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab24be19620df4ed6b473ad5b49ea8dea" title="Attempt to restart the monitor from scratch." alt="" coords="963,45,1222,85"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#ac3551d3e6a6a17ef85ac39c506c32d5f" title="Clear any stored ReattachInformation. A ValueTask representing the running operation." alt="" coords="1653,304,1880,344"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aecb29ff97cd95a61ab370d24685171a2" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1633,369,1900,423"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#af7789658917d10b7f4fd9a6284d244f4" title="Clear any stored ReattachInformation." alt="" coords="1948,304,2177,344"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2225,304,2435,344"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2d9e24a869875a2654715e7937462179" title="Attempt to create a process dump for the game server. Requires a lock on synchronizationSemaphore." alt="" coords="1293,376,1585,416"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a3a98b8f1018f913bc97786f51031f153" title="Gets the latest CompileJob. The latest CompileJob or null if none are available." alt="" coords="1304,504,1575,544"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. DmbAvailable is a precondition. A new IDmbProvider." alt="" coords="1642,504,1891,544"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="1349,103,1530,143"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html#ae23ebde726f8d74da32de334ad3e002b" title="Gets a IDmbProvider for a given CompileJob." alt="" coords="621,460,889,500"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html#a82c1c9bbc432577594f49417c969849f" title="Get a IProcess by id ." alt="" coords="656,524,855,564"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="636,588,875,628"/>
</map>
</div>

</div>
</div>
<a id="aec4f16b34fe08499a4aaff0235ecdc76" name="aec4f16b34fe08499a4aaff0235ecdc76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec4f16b34fe08499a4aaff0235ecdc76">&#9670;&#160;</a></span>StopAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

</div>
</div>
<a id="aabf80bd8e764b8199c5f63aba6bf3de7" name="aabf80bd8e764b8199c5f63aba6bf3de7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabf80bd8e764b8199c5f63aba6bf3de7">&#9670;&#160;</a></span>StopMonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; bool &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a>. Doesn't kill the servers.  </p>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in <code>true</code> if the monitor was running, <code>false</code> otherwise.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00607">607</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  608</span>        {</div>
<div class="line"><span class="lineno">  609</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;StopMonitor&quot;</span>);</div>
<div class="line"><span class="lineno">  610</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">monitorTask</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  611</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  612</span>            var wasRunning = !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">monitorTask</a>.IsCompleted;</div>
<div class="line"><span class="lineno">  613</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">monitorCts</a>!.Cancel();</div>
<div class="line"><span class="lineno">  614</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">monitorTask</a>;</div>
<div class="line"><span class="lineno">  615</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Stopped Monitor&quot;</span>);</div>
<div class="line"><span class="lineno">  616</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">monitorCts</a>.Dispose();</div>
<div class="line"><span class="lineno">  617</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a663429f7433e25bb662c9d12dd9c285d">monitorTask</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  618</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a65dd21315e5283fe959552efc2cee6aa">monitorCts</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  619</span>            <span class="keywordflow">return</span> wasRunning;</div>
<div class="line"><span class="lineno">  620</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00155">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00160">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aabf80bd8e764b8199c5f63aba6bf3de7_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aabf80bd8e764b8199c5f63aba6bf3de7_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aabf80bd8e764b8199c5f63aba6bf3de7_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aabf80bd8e764b8199c5f63aba6bf3de7_icgraph">
<area shape="rect" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="943,37,1187,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="616,37,895,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="339,5,565,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720" title="Stops the watchdog. A ValueTask representing the running operation." alt="" coords="336,69,568,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,5,288,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a04162b14c55443e4bf8d2f0956ea0b9b" title="Handle a restart of the server. A ValueTask representing the running operation." alt="" coords="18,69,275,109"/>
</map>
</div>

</div>
</div>
<a id="a4ee58f2a5e3ae97940e281d6975ed720" name="a4ee58f2a5e3ae97940e281d6975ed720"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ee58f2a5e3ae97940e281d6975ed720">&#9670;&#160;</a></span>Terminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the watchdog. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the termination will be delayed until a reboot is detected in the active server's DMAPI and this function will return immediately.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abd3483d8e410fa0651dcb211a93ad4ea">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00412">412</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  413</span>        {</div>
<div class="line"><span class="lineno">  414</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  415</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73">TerminateNoLock</a>(graceful, !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  416</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00175">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00419">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4ee58f2a5e3ae97940e281d6975ed720_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4ee58f2a5e3ae97940e281d6975ed720_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4ee58f2a5e3ae97940e281d6975ed720_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4ee58f2a5e3ae97940e281d6975ed720_cgraph">
<area shape="rect" title="Stops the watchdog. A ValueTask representing the running operation." alt="" coords="5,69,237,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="329,37,520,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad3ee74413d53a906a104c8376a828e73" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="285,101,564,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="612,5,899,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="619,69,892,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="613,133,898,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aabf80bd8e764b8199c5f63aba6bf3de7" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="633,197,877,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="947,33,1185,73"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="958,98,1174,153"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4ee58f2a5e3ae97940e281d6975ed720_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4ee58f2a5e3ae97940e281d6975ed720_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4ee58f2a5e3ae97940e281d6975ed720_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a4ee58f2a5e3ae97940e281d6975ed720_icgraph">
<area shape="rect" title="Stops the watchdog. A ValueTask representing the running operation." alt="" coords="311,5,543,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a04162b14c55443e4bf8d2f0956ea0b9b" title="Handle a restart of the server. A ValueTask representing the running operation." alt="" coords="5,5,263,45"/>
</map>
</div>

</div>
</div>
<a id="ad3ee74413d53a906a104c8376a828e73" name="ad3ee74413d53a906a104c8376a828e73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3ee74413d53a906a104c8376a828e73">&#9670;&#160;</a></span>TerminateNoLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementation of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720" title="Stops the watchdog. A ValueTask representing the running operation.">Terminate(bool, CancellationToken)</a>. Does not lock <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4" title="The SemaphoreSlim for the WatchdogBase.">synchronizationSemaphore</a>.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the termination will be delayed until a reboot is detected in the active server's DMAPI and this function will return immediately.</td></tr>
    <tr><td class="paramname">announce</td><td>If <code>true</code> the termination will be announced using <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat.html">Chat</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l01059">1059</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1060</span>        {</div>
<div class="line"><span class="lineno"> 1061</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno"> 1062</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1063</span>            <span class="keywordflow">if</span> (!graceful)</div>
<div class="line"><span class="lineno"> 1064</span>            {</div>
<div class="line"><span class="lineno"> 1065</span>                var eventTask = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369">HandleEventImpl</a>(</div>
<div class="line"><span class="lineno"> 1066</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a></div>
<div class="line"><span class="lineno"> 1067</span>                        ? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogDetach</div>
<div class="line"><span class="lineno"> 1068</span>                        : <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogShutdown,</div>
<div class="line"><span class="lineno"> 1069</span>                    Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(),</div>
<div class="line"><span class="lineno"> 1070</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>,</div>
<div class="line"><span class="lineno"> 1071</span>                    cancellationToken);</div>
<div class="line"><span class="lineno"> 1072</span> </div>
<div class="line"><span class="lineno"> 1073</span>                <span class="keywordflow">if</span> (announce)</div>
<div class="line"><span class="lineno"> 1074</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Shutting down...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>                await eventTask;</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aabf80bd8e764b8199c5f63aba6bf3de7">StopMonitor</a>();</div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a38066e15427a18f6e71f00526e797088">LastLaunchParameters</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1081</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1082</span>            }</div>
<div class="line"><span class="lineno"> 1083</span> </div>
<div class="line"><span class="lineno"> 1084</span>            <span class="comment">// merely set the reboot state</span></div>
<div class="line"><span class="lineno"> 1085</span>            var toKill = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">GetActiveController</a>();</div>
<div class="line"><span class="lineno"> 1086</span>            <span class="keywordflow">if</span> (toKill != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1087</span>            {</div>
<div class="line"><span class="lineno"> 1088</span>                await toKill.SetRebootState(Session.RebootState.Shutdown, cancellationToken);</div>
<div class="line"><span class="lineno"> 1089</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Graceful termination requested&quot;</span>);</div>
<div class="line"><span class="lineno"> 1090</span>            }</div>
<div class="line"><span class="lineno"> 1091</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1092</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Could not gracefully terminate as there is no active controller!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1093</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aabf80bd8e764b8199c5f63aba6bf3de7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aabf80bd8e764b8199c5f63aba6bf3de7">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor</a></div><div class="ttdeci">async ValueTask&lt; bool &gt; StopMonitor()</div><div class="ttdoc">Stops MonitorLifetimes(CancellationToken). Doesn't kill the servers.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00607">WatchdogBase.cs:607</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00080">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00746">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00075">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00175">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00607">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00354">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00412">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad3ee74413d53a906a104c8376a828e73_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad3ee74413d53a906a104c8376a828e73_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad3ee74413d53a906a104c8376a828e73_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad3ee74413d53a906a104c8376a828e73_cgraph">
<area shape="rect" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="5,101,284,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab53c08e5a2f37233940f3492207a760b" title="Get the active ISessionController." alt="" coords="332,5,619,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af1a7765d8a839d318fee44e8d63b6369" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="339,69,612,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="333,133,618,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aabf80bd8e764b8199c5f63aba6bf3de7" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="353,197,597,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#a564f82eb43566dabd77e37191b4e3d37" title="Handle a given eventType ." alt="" coords="667,33,905,73"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="678,98,894,153"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad3ee74413d53a906a104c8376a828e73_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad3ee74413d53a906a104c8376a828e73_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad3ee74413d53a906a104c8376a828e73_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad3ee74413d53a906a104c8376a828e73_icgraph">
<area shape="rect" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="616,37,895,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a805a90319a8bdf4862ce9879f125b853" title="Restarts the watchdog. A ValueTask representing the running operation." alt="" coords="339,5,565,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a4ee58f2a5e3ae97940e281d6975ed720" title="Stops the watchdog. A ValueTask representing the running operation." alt="" coords="336,69,568,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a86e19b422334b36dbb2a7f84d5393b99" title="Cancels pending graceful actions. A ValueTask representing the running operation." alt="" coords="5,5,288,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a04162b14c55443e4bf8d2f0956ea0b9b" title="Handle a restart of the server. A ValueTask representing the running operation." alt="" coords="18,69,275,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af8f6221485a1d072038f17e0d6ba55fc" name="af8f6221485a1d072038f17e0d6ba55fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f6221485a1d072038f17e0d6ba55fc">&#9670;&#160;</a></span>activeParametersUpdated</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile TaskCompletionSource Tgstation.Server.Host.Components.Watchdog.WatchdogBase.activeParametersUpdated</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>TaskCompletionSource that completes when <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a> are changed and we are running.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00150">150</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a410f168d84f80c138450fb42f222ba01" name="a410f168d84f80c138450fb42f222ba01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a410f168d84f80c138450fb42f222ba01">&#9670;&#160;</a></span>autoStart</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> should LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken) in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync(CancellationToken)</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00145">145</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00378">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5f9cfb67111bbc5ec1d954e4ed4bf913" name="a5f9cfb67111bbc5ec1d954e4ed4bf913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f9cfb67111bbc5ec1d954e4ed4bf913">&#9670;&#160;</a></span>controllerDisposeSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SemaphoreSlim used for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ac84983fa4b27fcdf9044aaf68ae82a50" title="Wrapper for DisposeAndNullControllersImpl under a locked context.">DisposeAndNullControllers</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00115">115</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00672">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00257">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a8becb1115fe1c09c84534c798466e03f" name="a8becb1115fe1c09c84534c798466e03f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8becb1115fe1c09c84534c798466e03f">&#9670;&#160;</a></span>diagnosticsIOManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager pointing to the Diagnostics directory.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00135">135</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5c39f385b06058f4699503b492d2b743" name="a5c39f385b06058f4699503b492d2b743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c39f385b06058f4699503b492d2b743">&#9670;&#160;</a></span>disposed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> has been <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a>'d.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00180">180</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00257">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>

</div>
</div>
<a id="a5768c37124d54e80c66dc63d28d0dea4" name="a5768c37124d54e80c66dc63d28d0dea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5768c37124d54e80c66dc63d28d0dea4">&#9670;&#160;</a></span>eventConsumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IEventConsumer that is not the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00120">120</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00705">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00746">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="ae85241e9a900f49e703b7eda13c78564" name="ae85241e9a900f49e703b7eda13c78564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae85241e9a900f49e703b7eda13c78564">&#9670;&#160;</a></span>healthChecksMissed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Tgstation.Server.Host.Components.Watchdog.WatchdogBase.healthChecksMissed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of hearbeats missed.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00170">170</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>.</p>

</div>
</div>
<a id="a1688863ddcd7d0bbfa3ec13b7b015319" name="a1688863ddcd7d0bbfa3ec13b7b015319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1688863ddcd7d0bbfa3ec13b7b015319">&#9670;&#160;</a></span>jobManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00125">125</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00378">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a52038e1a769f1114c492c76640a6afc8" name="a52038e1a769f1114c492c76640a6afc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52038e1a769f1114c492c76640a6afc8">&#9670;&#160;</a></span>metadata</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00105">105</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00705">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00378">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a65dd21315e5283fe959552efc2cee6aa" name="a65dd21315e5283fe959552efc2cee6aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65dd21315e5283fe959552efc2cee6aa">&#9670;&#160;</a></span>monitorCts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CancellationTokenSource? Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource for the monitor loop.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00155">155</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00257">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00607">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

</div>
</div>
<a id="a663429f7433e25bb662c9d12dd9c285d" name="a663429f7433e25bb662c9d12dd9c285d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a663429f7433e25bb662c9d12dd9c285d">&#9670;&#160;</a></span>monitorTask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task? Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Task running the monitor loop.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00160">160</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00419">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00607">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

</div>
</div>
<a id="a256c7fd5a04870388411185b46ff6fb8" name="a256c7fd5a04870388411185b46ff6fb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256c7fd5a04870388411185b46ff6fb8">&#9670;&#160;</a></span>releaseServers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the servers should be released instead of shutdown.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00175">175</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00672">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00419">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00412">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a72637a3ebe8925b7c3753416370ad83c" name="a72637a3ebe8925b7c3753416370ad83c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72637a3ebe8925b7c3753416370ad83c">&#9670;&#160;</a></span>remoteDeploymentManagerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRemoteDeploymentManagerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00140">140</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00705">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="aefe25fd33c4a6dfb4ea27b583a2286ea" name="aefe25fd33c4a6dfb4ea27b583a2286ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefe25fd33c4a6dfb4ea27b583a2286ea">&#9670;&#160;</a></span>restartRegistration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html">IRestartRegistration</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRestartRegistration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00130">130</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00257">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="af5c8949750c7c079faf8d438fde20c6c" name="af5c8949750c7c079faf8d438fde20c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c8949750c7c079faf8d438fde20c6c">&#9670;&#160;</a></span>status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Backing field for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb" title="The current WatchdogStatus.">Status</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00165">165</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

</div>
</div>
<a id="a7e6adcb942a9ff1bb7d11d738b98b6e4" name="a7e6adcb942a9ff1bb7d11d738b98b6e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e6adcb942a9ff1bb7d11d738b98b6e4">&#9670;&#160;</a></span>synchronizationSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The SemaphoreSlim for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00110">110</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00447">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00257">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00287">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00332">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00767">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00341">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00354">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00378">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00412">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a30c1f65bce4d161d81063e4c426265f4" name="a30c1f65bce4d161d81063e4c426265f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c1f65bce4d161d81063e4c426265f4">&#9670;&#160;</a></span>ActiveCompileJob</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Models.? <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_compile_job.html">CompileJob</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7989a86bba4558c54e85f4e2028ee588">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00062">62</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00705">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, and <a class="el" href="_advanced_watchdog_8cs_source.html#l00231">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.HandleNewDmbAvailable()</a>.</p>

</div>
</div>
<a id="a9affc2eeae2903d1bdb0fa81a6550fc4" name="a9affc2eeae2903d1bdb0fa81a6550fc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9affc2eeae2903d1bdb0fa81a6550fc4">&#9670;&#160;</a></span>ActiveLaunchParameters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The DreamDaemonLaunchParameters to be applied.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00056">56</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>{ <span class="keyword">get</span>; <span class="keyword">protected</span> <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00137">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.HandleNormalReboot()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00209">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a39f77bb87d63b1a1a50aac89ad909f29" name="a39f77bb87d63b1a1a50aac89ad909f29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f77bb87d63b1a1a50aac89ad909f29">&#9670;&#160;</a></span>AlphaIsActive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.AlphaIsActive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the alpha server is the active server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00053">53</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="abbdc59de3b3556a08bd111264527f369" name="abbdc59de3b3556a08bd111264527f369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbdc59de3b3556a08bd111264527f369">&#9670;&#160;</a></span>AsyncDelayer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.AsyncDelayer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAsyncDelayer for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00095">95</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   95</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aec24ff5e3b22b40e62f4a2443eb8cec9" name="aec24ff5e3b22b40e62f4a2443eb8cec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec24ff5e3b22b40e62f4a2443eb8cec9">&#9670;&#160;</a></span>Chat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IChatManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00080">80</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   80</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01182">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00306">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleNewDmbAvailable()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00137">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.HandleNormalReboot()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00419">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00767">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00649">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00354">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00378">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a401d41a1b1b805f553f53b35f46275ef" name="a401d41a1b1b805f553f53b35f46275ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401d41a1b1b805f553f53b35f46275ef">&#9670;&#160;</a></span>DmbFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DmbFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IDmbFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00090">90</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9954fc5d6d0fcc3625b171ac6877b565" name="a9954fc5d6d0fcc3625b171ac6877b565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9954fc5d6d0fcc3625b171ac6877b565">&#9670;&#160;</a></span>GameIOManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GameIOManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> pointing to the Game directory.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00100">100</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a38066e15427a18f6e71f00526e797088" name="a38066e15427a18f6e71f00526e797088"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38066e15427a18f6e71f00526e797088">&#9670;&#160;</a></span>LastLaunchParameters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>? Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The DreamDaemonLaunchParameters the active server is using. This may not be the exact same as <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a> but still be associated with the same session. </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a96dd16213c44b74ce05e98b4805361a8">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00059">59</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   59</span>{ <span class="keyword">get</span>; <span class="keyword">protected</span> <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

</div>
</div>
<a id="a2143ec7079d0ffd42c76f61cf7b71cf6" name="a2143ec7079d0ffd42c76f61cf7b71cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2143ec7079d0ffd42c76f61cf7b71cf6">&#9670;&#160;</a></span>Logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ILogger&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a>&gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00075">75</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_windows_watchdog_8cs_source.html#l00082">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.ApplyInitialDmb()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00705">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00454">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Broadcast()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00350">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.CanUseSwappableDmbProvider()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00672">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00257">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00415">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.DrainDeploymentCleanupTasks()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00746">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01100">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00110">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00231">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.HandleNewDmbAvailable()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00137">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.HandleNormalReboot()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00419">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00209">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00813">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitialCheckDmbUpdated()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00366">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.InitialLink()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00767">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00379">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.PerformDmbSwap()</a>, <a class="el" href="_advanced_watchdog_8cs_source.html#l00287">Tgstation.Server.Host.Components.Watchdog.AdvancedWatchdog.PrepServerForLaunch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00649">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00354">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00607">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00200">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5bc3f8e6c5569555d358578e612a1920" name="a5bc3f8e6c5569555d358578e612a1920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc3f8e6c5569555d358578e612a1920">&#9670;&#160;</a></span>RebootState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract ? <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.RebootState</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00065">65</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a24eb5f0e32cd79487cd9bd80d5257abb" name="a24eb5f0e32cd79487cd9bd80d5257abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24eb5f0e32cd79487cd9bd80d5257abb">&#9670;&#160;</a></span>SessionControllerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.SessionControllerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionControllerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00085">85</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   85</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1d11c811875d5ceefaa909d00a41e79" name="ae1d11c811875d5ceefaa909d00a41e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1d11c811875d5ceefaa909d00a41e79">&#9670;&#160;</a></span>SessionId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long? Tgstation.Server.Host.Components.Watchdog.WatchdogBase.SessionId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An incrementing ID for representing current server execution.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a4f701ad6f7337369f5360ff583a3cc7a">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00039">39</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00209">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>

</div>
</div>
<a id="a5a3bafe5d390332f896cdaf43a8db55d" name="a5a3bafe5d390332f896cdaf43a8db55d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a3bafe5d390332f896cdaf43a8db55d">&#9670;&#160;</a></span>SessionPersistor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.SessionPersistor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionPersistor for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00070">70</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   70</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fa8be05b0c448ea097a70e5d8708ffb" name="a5fa8be05b0c448ea097a70e5d8708ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa8be05b0c448ea097a70e5d8708ffb">&#9670;&#160;</a></span>Status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683" title="The current status of the watchdog.">WatchdogStatus</a>.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00042">42</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   43</span>        {</div>
<div class="line"><span class="lineno">   44</span>            <span class="keyword">get</span> =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a>;</div>
<div class="line"><span class="lineno">   45</span>            <span class="keyword">set</span></div>
<div class="line"><span class="lineno">   46</span>            {</div>
<div class="line"><span class="lineno">   47</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a> = value;</div>
<div class="line"><span class="lineno">   48</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Status set to {status}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a>);</div>
<div class="line"><span class="lineno">   49</span>            }</div>
<div class="line"><span class="lineno">   50</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_af5c8949750c7c079faf8d438fde20c6c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.status</a></div><div class="ttdeci">WatchdogStatus status</div><div class="ttdoc">Backing field for Status.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00165">WatchdogBase.cs:165</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00287">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00419">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00332">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00528">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00836">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00767">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00341">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00354">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01059">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/Watchdog/<a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
