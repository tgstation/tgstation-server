<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tgstation-server: TGServerService/ServerInstance/Compiler.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tgstation-server
   &#160;<span id="projectnumber">3.1.6.6</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f220d0611c2e3262469750905b70ffc9.html">TGServerService</a></li><li class="navelem"><a class="el" href="dir_7e4cc728347459cda364f4bf32c2446b.html">ServerInstance</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Compiler.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_t_g_server_service_2_server_instance_2_compiler_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="_t_g_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Diagnostics;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.IO;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Runtime.InteropServices;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Text;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Threading;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_service_interface.html">TGServiceInterface</a>;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_service_interface.html">TGServiceInterface</a>.<a class="code" href="namespace_t_g_service_interface_1_1_components.html">Components</a>;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_t_g_server_service.html">TGServerService</a></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;{</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    sealed <span class="keyword">partial class </span>ServerInstance : <a class="code" href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_compiler.html">ITGCompiler</a></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    {</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">        #region Win32 Shit</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        [DllImport(<span class="stringliteral">&quot;kernel32.dll&quot;</span>, SetLastError = <span class="keyword">true</span>)]</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6842952e4558a97fc0b9612c5cfc5088">CreateSymbolicLink</a>(<span class="keywordtype">string</span> lpSymlinkFileName, <span class="keywordtype">string</span> lpTargetFileName, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af30b33f85b47517c591e0a2ea5b88fa9">SymbolicLink</a> dwFlags);</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#af30b33f85b47517c591e0a2ea5b88fa9">   18</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af30b33f85b47517c591e0a2ea5b88fa9">SymbolicLink</a></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        {</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            File = 0,</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;            Directory = 1</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        }</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">        #endregion</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aaa64ece7176410ce074603fd735e3f10">   25</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaa64ece7176410ce074603fd735e3f10">StaticDirs</a> = <span class="stringliteral">&quot;Static&quot;</span>;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#ae65be76d9379b4c23864048a54032e76">   26</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae65be76d9379b4c23864048a54032e76">StaticBackupDir</a> = <span class="stringliteral">&quot;Static_BACKUP&quot;</span>;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aae521c4c39e87f29fc7cba98c0ff58d7">   28</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aae521c4c39e87f29fc7cba98c0ff58d7">GameDir</a> = <span class="stringliteral">&quot;Game&quot;</span>;</div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a0c6bafbaf5618ced251442f5e66fa89c">   29</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a0c6bafbaf5618ced251442f5e66fa89c">GameDirA</a> = GameDir + <span class="stringliteral">&quot;/A&quot;</span>;</div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a7a81324e1e1171c1d2d2adc35b105e62">   30</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a81324e1e1171c1d2d2adc35b105e62">GameDirB</a> = GameDir + <span class="stringliteral">&quot;/B&quot;</span>;</div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a6dc8ecb836197d4e0a889d8b8944237a">   31</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6dc8ecb836197d4e0a889d8b8944237a">GameDirLive</a> = GameDir + <span class="stringliteral">&quot;/Live&quot;</span>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a857c11bb60033e231f050145493ca3b8">   33</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a857c11bb60033e231f050145493ca3b8">LiveFile</a> = <span class="stringliteral">&quot;/TestLive.lk&quot;</span>;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a5cea7fb477daccffb693b933e8a0b231">   34</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a5cea7fb477daccffb693b933e8a0b231">ADirTest</a> = GameDirA + <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a857c11bb60033e231f050145493ca3b8">LiveFile</a>;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a3584843b75b22e9caaf4706fe6d9a26f">   35</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a3584843b75b22e9caaf4706fe6d9a26f">BDirTest</a> = GameDirB + <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a857c11bb60033e231f050145493ca3b8">LiveFile</a>;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a6399ca237782f1286ad7379153a51298">   36</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6399ca237782f1286ad7379153a51298">LiveDirTest</a> = GameDirLive + <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a857c11bb60033e231f050145493ca3b8">LiveFile</a>;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a43598a044d75089e4c3a0b433bca455b">   38</a></span>&#160;        <span class="keywordtype">object</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a43598a044d75089e4c3a0b433bca455b">CompilerLock</a> = <span class="keyword">new</span> object();</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a9adc6c97daa5981c9b4c6128c4df1f11">   39</a></span>&#160;        <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9adc6c97daa5981c9b4c6128c4df1f11">compilerCurrentStatus</a>;</div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a66a6d4cf18b436ad79fd5eb9e3546881">   40</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a66a6d4cf18b436ad79fd5eb9e3546881">lastCompilerError</a>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a7276f1afc5e4e29a3dd7ecbc324b1661">   42</a></span>&#160;        Thread <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7276f1afc5e4e29a3dd7ecbc324b1661">CompilerThread</a>;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a65f620ffb3b9d255d551adc32cf2015e">   43</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a65f620ffb3b9d255d551adc32cf2015e">compilationCancellationRequestation</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a4d44f07976a3c02b441bbc108ee0473a">   44</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a4d44f07976a3c02b441bbc108ee0473a">canCancelCompilation</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a8011e4943a3fbb07f419d91ea5585132">   45</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8011e4943a3fbb07f419d91ea5585132">silentCompile</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aaff75bb9874194c398f76a60c494bbdf">   47</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaff75bb9874194c398f76a60c494bbdf">UpdateStaged</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="comment">//deletes leftovers and checks current status</span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#ad6f61d0895428e85ec403dbfd0afe744">   50</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ad6f61d0895428e85ec403dbfd0afe744">InitCompiler</a>()</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            var rldt = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(LiveDirTest);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <span class="keywordflow">if</span> (File.Exists(rldt))</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                File.Delete(rldt);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            compilerCurrentStatus = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8445f34deceaaa76a7c2088f8c7f1991">IsInitialized</a>();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        }</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#acfabf82df8e6ecbf4069b7a841b0e8b7">   59</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#acfabf82df8e6ecbf4069b7a841b0e8b7">GetStatus</a>()</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            lock (CompilerLock)</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9adc6c97daa5981c9b4c6128c4df1f11">compilerCurrentStatus</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a47fd4bf82907a2c2fbcb4bcabf998e44">   68</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a47fd4bf82907a2c2fbcb4bcabf998e44">CompileError</a>()</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            lock (CompilerLock)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                var err = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a66a6d4cf18b436ad79fd5eb9e3546881">lastCompilerError</a>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                lastCompilerError = null;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <span class="keywordflow">return</span> err;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">//kills the compiler if its running</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a46ed0d7dc832756ebf66a79ab2435f7f">   79</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a46ed0d7dc832756ebf66a79ab2435f7f">DisposeCompiler</a>()</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            lock (CompilerLock)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <span class="keywordflow">if</span> (CompilerThread == null || !CompilerThread.IsAlive)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                CompilerThread.Abort(); <span class="comment">//this will safely kill dm</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ad6f61d0895428e85ec403dbfd0afe744">InitCompiler</a>(); <span class="comment">//also cleanup</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="comment">//translates the win32 api call into an exception if it fails</span></div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">   91</a></span>&#160;        <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(<span class="keywordtype">string</span> link, <span class="keywordtype">string</span> target)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6842952e4558a97fc0b9612c5cfc5088">CreateSymbolicLink</a>(<span class="keyword">new</span> DirectoryInfo(link).FullName, <span class="keyword">new</span> DirectoryInfo(target).FullName, File.Exists(target) ? <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af30b33f85b47517c591e0a2ea5b88fa9">SymbolicLink</a>.File : <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af30b33f85b47517c591e0a2ea5b88fa9">SymbolicLink</a>.Directory))</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(String.Format(<span class="stringliteral">&quot;Failed to create symlink from {0} to {1}! Error: {2}&quot;</span>, target, link, Marshal.GetLastWin32Error()));</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        }</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="comment">//requires CompilerLock to be locked</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a7885cff0cd047f5485cbb9cba09407e8">   98</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7885cff0cd047f5485cbb9cba09407e8">CompilerIdleNoLock</a>()</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">return</span> compilerCurrentStatus == <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Uninitialized || compilerCurrentStatus == <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a427984d1cb5c60f217967795c9695998">  104</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a427984d1cb5c60f217967795c9695998">Initialize</a>()</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            lock (CompilerLock)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7885cff0cd047f5485cbb9cba09407e8">CompilerIdleNoLock</a>())</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                lastCompilerError = null;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initializing;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                CompilerThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> ThreadStart(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aabf31525de01a260b7a83ce8ac928d62">InitializeImpl</a>));</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                CompilerThread.Start();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="comment">//what is says on the tin</span></div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a8445f34deceaaa76a7c2088f8c7f1991">  119</a></span>&#160;        <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8445f34deceaaa76a7c2088f8c7f1991">IsInitialized</a>()</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">if</span> (File.Exists(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(GameDirLive, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>))))    <span class="comment">//its a good tell, jim</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Uninitialized;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        </div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="comment">//we need to remove symlinks before we can recursively delete</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#af08b470db051748bc99e830bd263d215">  127</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af08b470db051748bc99e830bd263d215">CleanGameFolder</a>()</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            var GameDirABridge = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(GameDirA, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>));</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">if</span> (Directory.Exists(GameDirABridge))</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                Directory.Delete(GameDirABridge);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            var GameDirBBridge = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(GameDirB, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>));</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">if</span> (Directory.Exists(GameDirBBridge))</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                Directory.Delete(GameDirBBridge);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            var rgdl = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirLive);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">if</span> (Directory.Exists(rgdl))</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                Directory.Delete(rgdl);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment">//Initializing thread</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aabf31525de01a260b7a83ce8ac928d62">  143</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aabf31525de01a260b7a83ce8ac928d62">InitializeImpl</a>()</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#ab39a3abd504c56e0d217a7ad475506e4">DaemonStatus</a>() != <a class="code" href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">DreamDaemonStatus</a>.Offline)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                        lastCompilerError = <span class="stringliteral">&quot;Dream daemon must not be running&quot;</span>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                        compilerCurrentStatus = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8445f34deceaaa76a7c2088f8c7f1991">IsInitialized</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#ace81439a32bd7252f187ff607a071e07">Exists</a>()) <span class="comment">//repo</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                        lastCompilerError = <span class="stringliteral">&quot;Repository is not setup!&quot;</span>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                        compilerCurrentStatus = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8445f34deceaaa76a7c2088f8c7f1991">IsInitialized</a>();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a3a0db5ea4f797662c4317686d629a7e8">RepoConfigsMatch</a>())</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                    {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                        lastCompilerError = <span class="stringliteral">&quot;Repository TGS3.json does not match cached version! Please update the config appropriately!&quot;</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                        compilerCurrentStatus = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8445f34deceaaa76a7c2088f8c7f1991">IsInitialized</a>();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                    }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: Setting up symlinks...&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af08b470db051748bc99e830bd263d215">CleanGameFolder</a>();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_program.html">Program</a>.<a class="code" href="class_t_g_server_service_1_1_program.html#af23c01e40193036d8b54ca95efb5b229">DeleteDirectory</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDir));</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    Directory.CreateDirectory(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirA));</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    Directory.CreateDirectory(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirB));</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    var rep_config = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a460f7422c8ca2c016df6d18a6c64e287">GetCachedRepoConfig</a>();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <span class="keywordflow">if</span> (rep_config != null) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        <span class="keywordflow">foreach</span> (var I <span class="keywordflow">in</span> rep_config.StaticDirectoryPaths)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(GameDirA, I)), <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(StaticDirs, I)));</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        <span class="keywordflow">foreach</span> (var I <span class="keywordflow">in</span> rep_config.DLLPaths)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(GameDirA, I)), <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(StaticDirs, I)));</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    var rbdlln = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(GameDirA, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>)), rbdlln);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(GameDirB, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>)), rbdlln);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirLive), <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirA));</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    </div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Compiling;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        silentCompile = <span class="keyword">true</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <span class="keywordflow">catch</span> (ThreadAbortException)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <span class="keywordflow">catch</span> (Exception e)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: Setup failed!&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#abc4aea21aa8dfb0039d9e384458b037e">WriteError</a>(<span class="stringliteral">&quot;Compiler Initialization Error: &quot;</span> + e.ToString(), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.DMInitializeCrash);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                        lastCompilerError = e.ToString();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                        compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Uninitialized;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">catch</span> (ThreadAbortException)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a591be0739a0ebf1c70fa2d0615262324">CompileImpl</a>();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="comment">//Returns the A or B dir in which the game is NOT running</span></div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#af4f0d76eb19015bd076df3f3aa28e526">  230</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af4f0d76eb19015bd076df3f3aa28e526">GetStagingDir</a>()</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordtype">string</span> TheDir;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">if</span> (!Directory.Exists(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirLive)))</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                TheDir = GameDirA;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                File.Create(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(LiveDirTest)).Close();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    <span class="keywordflow">if</span> (File.Exists(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(ADirTest)))</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                        TheDir = GameDirA;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (File.Exists(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(BDirTest)))</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        TheDir = GameDirB;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Unable to determine current live directory!&quot;</span>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <span class="keywordflow">finally</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    File.Delete(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(LiveDirTest));</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                TheDir = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af1a8a673b30cc996fc7251de037732fc">InvertDirectory</a>(TheDir);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="comment">//So TheDir is what the Live folder is NOT pointing to</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="comment">//Now we need to check if DD is running that folder and swap it if necessary</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            var rsclock = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(TheDir + <span class="stringliteral">&quot;/&quot;</span> + <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a0ec30eb2bda8894c13d493fd80566d">Config</a>.<a class="code" href="class_t_g_server_service_1_1_instance_config.html#afd4b77b20fae111e375526a44ca6a583">ProjectName</a> + <span class="stringliteral">&quot;.rsc.lk&quot;</span>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">if</span> (File.Exists(rsclock))</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    File.Delete(rsclock);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="keywordflow">catch</span>   <span class="comment">//held open by byond</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    <span class="comment">//This means there is a staged update waiting to be applied, we have to unstage it before we can work</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                    Directory.Delete(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirLive));</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirLive), TheDir);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#af1a8a673b30cc996fc7251de037732fc">InvertDirectory</a>(TheDir));</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(TheDir);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="comment">//I hope you can read this</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#af1a8a673b30cc996fc7251de037732fc">  278</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af1a8a673b30cc996fc7251de037732fc">InvertDirectory</a>(<span class="keywordtype">string</span> gameDirectory)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">if</span> (gameDirectory == GameDirA)</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a81324e1e1171c1d2d2adc35b105e62">GameDirB</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a0c6bafbaf5618ced251442f5e66fa89c">GameDirA</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">//Compiler thread</span></div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a591be0739a0ebf1c70fa2d0615262324">  287</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a591be0739a0ebf1c70fa2d0615262324">CompileImpl</a>()</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae64d03735cb348d0d162e493bf9b3f68">GetVersion</a>(<a class="code" href="namespace_t_g_service_interface.html#a7610968e566eeb321fee2adba3fbf107">ByondVersion</a>.Installed) == null)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        lastCompilerError = <span class="stringliteral">&quot;BYOND not installed!&quot;</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                        compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a3a0db5ea4f797662c4317686d629a7e8">RepoConfigsMatch</a>())</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                        lastCompilerError = <span class="stringliteral">&quot;Repository TGS3.json does not match cached version! Please update the config appropriately!&quot;</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                        compilerCurrentStatus = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8445f34deceaaa76a7c2088f8c7f1991">IsInitialized</a>();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="keywordtype">string</span> resurrectee;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordtype">bool</span> repobusy_check = <span class="keyword">false</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keywordflow">if</span> (!Monitor.TryEnter(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">RepoLock</a>))</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    repobusy_check = <span class="keyword">true</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">if</span> (!repobusy_check)</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6a5f6fad2c5c52da78eb9d1968c02f9d">RepoBusy</a>)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                        repobusy_check = <span class="keyword">true</span>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6a5f6fad2c5c52da78eb9d1968c02f9d">RepoBusy</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    Monitor.Exit(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">RepoLock</a>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">if</span> (repobusy_check)</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: Copy aborted, repo locked!&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                        lastCompilerError = <span class="stringliteral">&quot;The repo could not be locked for copying&quot;</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                        compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;   <span class="comment">//still fairly valid</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <span class="keywordtype">string</span> CurrentSha;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    <span class="keywordtype">bool</span> silent;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                        silent = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8011e4943a3fbb07f419d91ea5585132">silentCompile</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                        silentCompile = <span class="keyword">false</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    <span class="keywordflow">if</span> (!silent)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: Compiling...&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                    resurrectee = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af4f0d76eb19015bd076df3f3aa28e526">GetStagingDir</a>();  <span class="comment">//non-relative</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    var <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a0ec30eb2bda8894c13d493fd80566d">Config</a> = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a460f7422c8ca2c016df6d18a6c64e287">GetCachedRepoConfig</a>();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    var deleteExcludeList = <span class="keyword">new</span> List&lt;string&gt; { <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a> };</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    deleteExcludeList.AddRange(Config.StaticDirectoryPaths);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    deleteExcludeList.AddRange(Config.DLLPaths);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_program.html">Program</a>.<a class="code" href="class_t_g_server_service_1_1_program.html#af23c01e40193036d8b54ca95efb5b229">DeleteDirectory</a>(resurrectee, <span class="keyword">true</span>, deleteExcludeList);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    Directory.CreateDirectory(resurrectee + <span class="stringliteral">&quot;/.git/logs&quot;</span>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    <span class="keywordflow">foreach</span> (var I <span class="keywordflow">in</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a0ec30eb2bda8894c13d493fd80566d">Config</a>.StaticDirectoryPaths)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                        var the_path = Path.Combine(resurrectee, I);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                        <span class="keywordflow">if</span> (!Directory.Exists(the_path))</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(Path.Combine(resurrectee, I), <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(StaticDirs, I)));</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    <span class="keywordflow">foreach</span> (var I <span class="keywordflow">in</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a0ec30eb2bda8894c13d493fd80566d">Config</a>.DLLPaths)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                        var the_path = Path.Combine(resurrectee, I);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                        <span class="keywordflow">if</span> (!File.Exists(the_path))</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(the_path, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(Path.Combine(StaticDirs, I)));</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    <span class="keywordflow">if</span> (!File.Exists(Path.Combine(resurrectee, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>)))</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(Path.Combine(resurrectee, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>), <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a>));</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    deleteExcludeList.Add(<span class="stringliteral">&quot;.git&quot;</span>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_program.html">Program</a>.<a class="code" href="class_t_g_server_service_1_1_program.html#ae1290ddee2583742124827bad8d68f23">CopyDirectory</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8d4c21888ad433c4c7acf2dd2b8d42a0">RepoPath</a>), resurrectee, deleteExcludeList);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    CurrentSha = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#abefd625f907f5e953509baa1c6da9a07">GetHead</a>(<span class="keyword">false</span>, out <span class="keywordtype">string</span> error);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    <span class="comment">//just the tip</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">string</span> GitLogsDir = <span class="stringliteral">&quot;/.git/logs&quot;</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_program.html">Program</a>.<a class="code" href="class_t_g_server_service_1_1_program.html#ae1290ddee2583742124827bad8d68f23">CopyDirectory</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8d4c21888ad433c4c7acf2dd2b8d42a0">RepoPath</a> + GitLogsDir), resurrectee + GitLogsDir);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    <span class="keywordflow">try</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                        File.Copy(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a5a3e4575d902a3e8650d4734629bd9d9">PRJobFile</a>), Path.Combine(resurrectee, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a5a3e4575d902a3e8650d4734629bd9d9">PRJobFile</a>));</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    <span class="keywordflow">catch</span> { }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <span class="keywordflow">finally</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                    lock (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">RepoLock</a>)</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6a5f6fad2c5c52da78eb9d1968c02f9d">RepoBusy</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                var res = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae69e75b4b1379d03852e6bef850dfcc4">CreateBackup</a>();</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <span class="keywordflow">if</span> (res != null)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                        lastCompilerError = res;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                        compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                var dmeName = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a724c7681dbfd9bfc0128392e92f8cfae">ProjectName</a>() + <span class="stringliteral">&quot;.dme&quot;</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                var dmePath = resurrectee + <span class="stringliteral">&quot;/&quot;</span> + dmeName;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <span class="keywordflow">if</span> (!File.Exists(dmePath))</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    var errorMsg = String.Format(<span class="stringliteral">&quot;Could not find {0}!&quot;</span>, dmeName);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: &quot;</span> + errorMsg, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#abc4aea21aa8dfb0039d9e384458b037e">WriteError</a>(errorMsg, <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.DMCompileCrash);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    lock (CompilerLock)</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                        lastCompilerError = errorMsg;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                        compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#af19d01601edb8beb1e78ffdcaf572c47">PrecompileHook</a>())</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                    lastCompilerError = <span class="stringliteral">&quot;The precompile hook failed&quot;</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;   <span class="comment">//still fairly valid</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f6e141cd76aa497dcf72f14c1219017">WriteWarning</a>(<span class="stringliteral">&quot;Precompile hook failed!&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.DMCompileError);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="keyword">using</span> (var DM = <span class="keyword">new</span> Process())  <span class="comment">//will kill the process if the thread is terminated</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    DM.StartInfo.FileName = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a63d04056dea64487e7eaed6b26b57e3a">ByondDirectory</a> + <span class="stringliteral">&quot;/bin/dm.exe&quot;</span>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    DM.StartInfo.Arguments = String.Format(<span class="stringliteral">&quot;-clean {0}&quot;</span>, dmePath);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    DM.StartInfo.RedirectStandardOutput = <span class="keyword">true</span>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    DM.StartInfo.UseShellExecute = <span class="keyword">false</span>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    var OutputList = <span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    DM.OutputDataReceived += <span class="keyword">new</span> DataReceivedEventHandler(</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        delegate (<span class="keywordtype">object</span> sender, DataReceivedEventArgs e)</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                        {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                            OutputList.Append(Environment.NewLine);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                            OutputList.Append(e.Data);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                        }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    );</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    <span class="keywordflow">try</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                        lock (CompilerLock)</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                            <span class="keywordflow">if</span> (compilationCancellationRequestation)</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                            canCancelCompilation = <span class="keyword">true</span>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                        }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                        DM.Start();</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                        DM.BeginOutputReadLine();</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                        <span class="keywordflow">while</span> (!DM.HasExited)</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                            DM.WaitForExit(100);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                        DM.CancelOutputRead();</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                        lock (CompilerLock)</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                        {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                            canCancelCompilation = <span class="keyword">false</span>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                            compilationCancellationRequestation = <span class="keyword">false</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                        }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                    <span class="keywordflow">catch</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                        <span class="keywordflow">if</span> (!DM.HasExited)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                        {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                            DM.Kill();</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                            DM.WaitForExit();</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                        <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                    }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                    <span class="keywordflow">finally</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                    {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                        lock (CompilerLock)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                            canCancelCompilation = <span class="keyword">false</span>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                        }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                    <span class="keywordflow">if</span> (DM.ExitCode == 0)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                    {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        lock (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">watchdogLock</a>)</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                        {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                            <span class="comment">//gotta go fast</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                            var online = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ac30b2fd293b49f890f3a1e32646c6d64">currentStatus</a> == <a class="code" href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">DreamDaemonStatus</a>.Online;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                            <span class="keywordflow">if</span> (online)</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                                <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aa550118aee5bf93064cb25b2171a969b">Proc</a>.Suspend();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                            <span class="keywordflow">try</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                            {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                var rgdl = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">RelativePath</a>(GameDirLive);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                <span class="keywordflow">if</span> (Directory.Exists(rgdl))</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                    <span class="comment">//these next two lines should be atomic but this is the best we can do</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                    Directory.Delete(rgdl);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">CreateSymlink</a>(rgdl, resurrectee);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                            }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                            <span class="keywordflow">finally</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                            {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                <span class="keywordflow">if</span> (online &amp;&amp; !<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aa550118aee5bf93064cb25b2171a969b">Proc</a>.HasExited)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aa550118aee5bf93064cb25b2171a969b">Proc</a>.Resume();</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                            }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                        }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                        var staged = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ab39a3abd504c56e0d217a7ad475506e4">DaemonStatus</a>() != <a class="code" href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">DreamDaemonStatus</a>.Offline;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a74d6e8df896a4a8f6f1faa7d67a2bbde">PostcompileHook</a>())</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                        {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                            lastCompilerError = <span class="stringliteral">&quot;The postcompile hook failed&quot;</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                            compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;   <span class="comment">//still fairly valid</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f6e141cd76aa497dcf72f14c1219017">WriteWarning</a>(<span class="stringliteral">&quot;Postcompile hook failed!&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.DMCompileError);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aeb0cb7b5664b4796ef9aa9082bbce424">UpdateLiveSha</a>(CurrentSha);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                        var msg = String.Format(<span class="stringliteral">&quot;Compile complete!{0}&quot;</span>, !staged ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; Server will update next round.&quot;</span>);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: &quot;</span> + msg, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a33c09fd7ed6d0907549e1cc08ad74562">WriteInfo</a>(msg, <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.DMCompileSuccess);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                        lock (CompilerLock)</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                            <span class="keywordflow">if</span> (staged)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                UpdateStaged = <span class="keyword">true</span>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                            lastCompilerError = null;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                            compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;   <span class="comment">//still fairly valid</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                    {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: Compile failed!&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo); <span class="comment">//Also happens for warnings</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f6e141cd76aa497dcf72f14c1219017">WriteWarning</a>(<span class="stringliteral">&quot;Compile error: &quot;</span> + OutputList.ToString(), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.DMCompileError);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                        lock (CompilerLock)</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                        {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                            lastCompilerError = <span class="stringliteral">&quot;DM compile failure&quot;</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                            compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                        }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">catch</span> (ThreadAbortException)</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">catch</span> (Exception e)</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: Compiler thread crashed!&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_server_instance.html#abc4aea21aa8dfb0039d9e384458b037e">WriteError</a>(<span class="stringliteral">&quot;Compile manager errror: &quot;</span> + e.ToString(), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.DMCompileCrash);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                lock (CompilerLock)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                    lastCompilerError = e.ToString();</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                    compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;   <span class="comment">//still fairly valid</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">finally</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                lock (CompilerLock)</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    canCancelCompilation = <span class="keyword">false</span>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    <span class="keywordflow">if</span> (compilationCancellationRequestation)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                    {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                        compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                        compilationCancellationRequestation = <span class="keyword">false</span>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;DM: Compile cancelled!&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a33c09fd7ed6d0907549e1cc08ad74562">WriteInfo</a>(<span class="stringliteral">&quot;Compilation cancelled&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.DMCompileCancel);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="comment">//kicks off the compiler thread</span></div><div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#afdd737c980b2c078c2de10a57dc4ad40">  563</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#afdd737c980b2c078c2de10a57dc4ad40">Compile</a>(<span class="keywordtype">bool</span> silent = <span class="keyword">false</span>)</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            lock (CompilerLock)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <span class="keywordflow">if</span> (compilerCurrentStatus != <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized)</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                silentCompile = silent;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                lastCompilerError = null;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                compilerCurrentStatus = <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Compiling;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                CompilerThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> ThreadStart(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a591be0739a0ebf1c70fa2d0615262324">CompileImpl</a>));</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                CompilerThread.Start();</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a724c7681dbfd9bfc0128392e92f8cfae">  579</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a724c7681dbfd9bfc0128392e92f8cfae">ProjectName</a>()</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            lock (CompilerLock)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a0ec30eb2bda8894c13d493fd80566d">Config</a>.<a class="code" href="class_t_g_server_service_1_1_instance_config.html#afd4b77b20fae111e375526a44ca6a583">ProjectName</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a13f5af1053cf88ca54c769cc339db419">  588</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a13f5af1053cf88ca54c769cc339db419">SetProjectName</a>(<span class="keywordtype">string</span> projectName)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            lock (CompilerLock)</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a0ec30eb2bda8894c13d493fd80566d">Config</a>.<a class="code" href="class_t_g_server_service_1_1_instance_config.html#afd4b77b20fae111e375526a44ca6a583">ProjectName</a> = projectName;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a5d503c183dc730ccdf2d396ab4306a89">  596</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a5d503c183dc730ccdf2d396ab4306a89">Cancel</a>()</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            lock (CompilerLock)</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="keywordflow">if</span> (compilerCurrentStatus != <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Compiling)</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Invalid state for cancellation!&quot;</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                compilationCancellationRequestation = <span class="keyword">true</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <span class="keywordflow">if</span> (canCancelCompilation)</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                    CompilerThread.Abort();</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Compilation will be cancelled when the repo copy is complete&quot;</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div><div class="ttc" id="namespace_t_g_service_interface_1_1_components_html"><div class="ttname"><a href="namespace_t_g_service_interface_1_1_components.html">TGServiceInterface.Components</a></div><div class="ttdef"><b>Definition:</b> <a href="_t_g_service_interface_2_components_2_administration_8cs_source.html#l00003">Administration.cs:3</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_html_a77ffb8da5e77d0173c9a1a3b8ba0b110"><div class="ttname"><a href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">TGServerService.MessageType</a></div><div class="ttdeci">MessageType</div><div class="ttdoc">Type of chat message, these may be OR&amp;#39;d together </div><div class="ttdef"><b>Definition:</b> <a href="_message_type_8cs_source.html#l00008">MessageType.cs:8</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ab39a3abd504c56e0d217a7ad475506e4"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ab39a3abd504c56e0d217a7ad475506e4">TGServerService.ServerInstance.DaemonStatus</a></div><div class="ttdeci">DreamDaemonStatus DaemonStatus()</div><div class="ttdoc">Gets the status of DreamDaemon  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00193">DreamDaemon.cs:193</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a7885cff0cd047f5485cbb9cba09407e8"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a7885cff0cd047f5485cbb9cba09407e8">TGServerService.ServerInstance.CompilerIdleNoLock</a></div><div class="ttdeci">bool CompilerIdleNoLock()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00098">Compiler.cs:98</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a591be0739a0ebf1c70fa2d0615262324"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a591be0739a0ebf1c70fa2d0615262324">TGServerService.ServerInstance.CompileImpl</a></div><div class="ttdeci">void CompileImpl()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00287">Compiler.cs:287</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a13f5af1053cf88ca54c769cc339db419"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a13f5af1053cf88ca54c769cc339db419">TGServerService.ServerInstance.SetProjectName</a></div><div class="ttdeci">void SetProjectName(string projectName)</div><div class="ttdoc">Sets the relative path of the dme the compiler will look for without the .dme part  ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00588">Compiler.cs:588</a></div></div>
<div class="ttc" id="interface_t_g_service_interface_1_1_components_1_1_i_t_g_compiler_html"><div class="ttname"><a href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_compiler.html">TGServiceInterface.Components.ITGCompiler</a></div><div class="ttdoc">For managing the Game A/B/Live folders, compiling, and hotswapping them </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_service_interface_2_components_2_compiler_8cs_source.html#l00009">Compiler.cs:9</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aac9358eb96d27250fb77c78695e90128"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">TGServerService.ServerInstance.watchdogLock</a></div><div class="ttdeci">object watchdogLock</div><div class="ttdoc">Used for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00053">DreamDaemon.cs:53</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a63d04056dea64487e7eaed6b26b57e3a"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a63d04056dea64487e7eaed6b26b57e3a">TGServerService.ServerInstance.ByondDirectory</a></div><div class="ttdeci">const string ByondDirectory</div><div class="ttdoc">The instance directory to store the BYOND installation </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00018">Byond.cs:18</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a6399ca237782f1286ad7379153a51298"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a6399ca237782f1286ad7379153a51298">TGServerService.ServerInstance.LiveDirTest</a></div><div class="ttdeci">const string LiveDirTest</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00036">Compiler.cs:36</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a460f7422c8ca2c016df6d18a6c64e287"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a460f7422c8ca2c016df6d18a6c64e287">TGServerService.ServerInstance.GetCachedRepoConfig</a></div><div class="ttdeci">RepoConfig GetCachedRepoConfig()</div><div class="ttdoc">Gets the RepoConfig for CachedTGS3SettingsPath </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00130">Repository.cs:130</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_html_a98d8f6303b894422167c743e15185398"><div class="ttname"><a href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">TGServerService.EventID</a></div><div class="ttdeci">EventID</div><div class="ttdoc">Various events and their IDs in no particular order. Found in the Windows event log. These key incremented by 100 and are guaranteed to never be reused in the future. In the windows event viewer, these IDs will be offset by the ServerInstance.LoggingID to distinguish events between instances. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults </div><div class="ttdef"><b>Definition:</b> <a href="_event_i_d_8cs_source.html#l00008">EventID.cs:8</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ac30b2fd293b49f890f3a1e32646c6d64"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ac30b2fd293b49f890f3a1e32646c6d64">TGServerService.ServerInstance.currentStatus</a></div><div class="ttdeci">DreamDaemonStatus currentStatus</div><div class="ttdoc">The DreamDaemonStatus of Proc </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00061">DreamDaemon.cs:61</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html_a7610968e566eeb321fee2adba3fbf107"><div class="ttname"><a href="namespace_t_g_service_interface.html#a7610968e566eeb321fee2adba3fbf107">TGServiceInterface.ByondVersion</a></div><div class="ttdeci">ByondVersion</div><div class="ttdoc">Type of byond version </div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00062">Enumerations.cs:62</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a7a81324e1e1171c1d2d2adc35b105e62"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a7a81324e1e1171c1d2d2adc35b105e62">TGServerService.ServerInstance.GameDirB</a></div><div class="ttdeci">const string GameDirB</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00030">Compiler.cs:30</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aaff75bb9874194c398f76a60c494bbdf"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aaff75bb9874194c398f76a60c494bbdf">TGServerService.ServerInstance.UpdateStaged</a></div><div class="ttdeci">bool UpdateStaged</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00047">Compiler.cs:47</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9adc6c97daa5981c9b4c6128c4df1f11"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9adc6c97daa5981c9b4c6128c4df1f11">TGServerService.ServerInstance.compilerCurrentStatus</a></div><div class="ttdeci">CompilerStatus compilerCurrentStatus</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00039">Compiler.cs:39</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a8d4c21888ad433c4c7acf2dd2b8d42a0"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a8d4c21888ad433c4c7acf2dd2b8d42a0">TGServerService.ServerInstance.RepoPath</a></div><div class="ttdeci">const string RepoPath</div><div class="ttdoc">The ServerInstance directory for the repository </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00020">Repository.cs:20</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a65f620ffb3b9d255d551adc32cf2015e"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a65f620ffb3b9d255d551adc32cf2015e">TGServerService.ServerInstance.compilationCancellationRequestation</a></div><div class="ttdeci">bool compilationCancellationRequestation</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00043">Compiler.cs:43</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a5cea7fb477daccffb693b933e8a0b231"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a5cea7fb477daccffb693b933e8a0b231">TGServerService.ServerInstance.ADirTest</a></div><div class="ttdeci">const string ADirTest</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00034">Compiler.cs:34</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_af30b33f85b47517c591e0a2ea5b88fa9"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#af30b33f85b47517c591e0a2ea5b88fa9">TGServerService.ServerInstance.SymbolicLink</a></div><div class="ttdeci">SymbolicLink</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00018">Compiler.cs:18</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a6842952e4558a97fc0b9612c5cfc5088"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a6842952e4558a97fc0b9612c5cfc5088">TGServerService.ServerInstance.CreateSymbolicLink</a></div><div class="ttdeci">static bool CreateSymbolicLink(string lpSymlinkFileName, string lpTargetFileName, SymbolicLink dwFlags)</div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aa550118aee5bf93064cb25b2171a969b"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aa550118aee5bf93064cb25b2171a969b">TGServerService.ServerInstance.Proc</a></div><div class="ttdeci">Process Proc</div><div class="ttdoc">The DreamDaemon process </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00044">DreamDaemon.cs:44</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_instance_config_html_afd4b77b20fae111e375526a44ca6a583"><div class="ttname"><a href="class_t_g_server_service_1_1_instance_config.html#afd4b77b20fae111e375526a44ca6a583">TGServerService.InstanceConfig.ProjectName</a></div><div class="ttdeci">string ProjectName</div><div class="ttdoc">The name of the .dme/.dmb the ServerInstance uses </div><div class="ttdef"><b>Definition:</b> <a href="_instance_config_8cs_source.html#l00044">InstanceConfig.cs:44</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a6a5f6fad2c5c52da78eb9d1968c02f9d"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a6a5f6fad2c5c52da78eb9d1968c02f9d">TGServerService.ServerInstance.RepoBusy</a></div><div class="ttdeci">bool RepoBusy</div><div class="ttdoc">Used in conjunction with RepoLock for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00069">Repository.cs:69</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a857c11bb60033e231f050145493ca3b8"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a857c11bb60033e231f050145493ca3b8">TGServerService.ServerInstance.LiveFile</a></div><div class="ttdeci">const string LiveFile</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00033">Compiler.cs:33</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a7a0ec30eb2bda8894c13d493fd80566d"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a7a0ec30eb2bda8894c13d493fd80566d">TGServerService.ServerInstance.Config</a></div><div class="ttdeci">readonly InstanceConfig Config</div><div class="ttdoc">The configuration settings for the instance </div><div class="ttdef"><b>Definition:</b> <a href="_server_instance_8cs_source.html#l00027">ServerInstance.cs:27</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a4d44f07976a3c02b441bbc108ee0473a"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a4d44f07976a3c02b441bbc108ee0473a">TGServerService.ServerInstance.canCancelCompilation</a></div><div class="ttdeci">bool canCancelCompilation</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00044">Compiler.cs:44</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_af08b470db051748bc99e830bd263d215"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#af08b470db051748bc99e830bd263d215">TGServerService.ServerInstance.CleanGameFolder</a></div><div class="ttdeci">void CleanGameFolder()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00127">Compiler.cs:127</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a3584843b75b22e9caaf4706fe6d9a26f"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a3584843b75b22e9caaf4706fe6d9a26f">TGServerService.ServerInstance.BDirTest</a></div><div class="ttdeci">const string BDirTest</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00035">Compiler.cs:35</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a724c7681dbfd9bfc0128392e92f8cfae"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a724c7681dbfd9bfc0128392e92f8cfae">TGServerService.ServerInstance.ProjectName</a></div><div class="ttdeci">string ProjectName()</div><div class="ttdoc">Returns the relative path of the dme the compiler will look for without the .dme part  ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00579">Compiler.cs:579</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ae65be76d9379b4c23864048a54032e76"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ae65be76d9379b4c23864048a54032e76">TGServerService.ServerInstance.StaticBackupDir</a></div><div class="ttdeci">const string StaticBackupDir</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00026">Compiler.cs:26</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a3a0db5ea4f797662c4317686d629a7e8"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a3a0db5ea4f797662c4317686d629a7e8">TGServerService.ServerInstance.RepoConfigsMatch</a></div><div class="ttdeci">bool RepoConfigsMatch()</div><div class="ttdoc">Checks if the CachedTGS3SettingsPath and RepoTGS3SettingsPath json files match. </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00111">Repository.cs:111</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a8011e4943a3fbb07f419d91ea5585132"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a8011e4943a3fbb07f419d91ea5585132">TGServerService.ServerInstance.silentCompile</a></div><div class="ttdeci">bool silentCompile</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00045">Compiler.cs:45</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aaa64ece7176410ce074603fd735e3f10"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aaa64ece7176410ce074603fd735e3f10">TGServerService.ServerInstance.StaticDirs</a></div><div class="ttdeci">const string StaticDirs</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00025">Compiler.cs:25</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a46ed0d7dc832756ebf66a79ab2435f7f"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a46ed0d7dc832756ebf66a79ab2435f7f">TGServerService.ServerInstance.DisposeCompiler</a></div><div class="ttdeci">void DisposeCompiler()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00079">Compiler.cs:79</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ae69e75b4b1379d03852e6bef850dfcc4"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ae69e75b4b1379d03852e6bef850dfcc4">TGServerService.ServerInstance.CreateBackup</a></div><div class="ttdeci">string CreateBackup()</div><div class="ttdoc">Creates a date and timestamped tag of the current HEAD </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00670">Repository.cs:670</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9b7cd7bdfe31916e6818245e2354d0cc"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">TGServerService.ServerInstance.RepoLock</a></div><div class="ttdeci">object RepoLock</div><div class="ttdoc">Used in conjunction with RepoBusy for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00065">Repository.cs:65</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a5d503c183dc730ccdf2d396ab4306a89"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a5d503c183dc730ccdf2d396ab4306a89">TGServerService.ServerInstance.Cancel</a></div><div class="ttdeci">string Cancel()</div><div class="ttdoc">Cancels the current compilation </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00596">Compiler.cs:596</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html_af50082a408f9ae6f37a053a7a2464ef3"><div class="ttname"><a href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">TGServiceInterface.CompilerStatus</a></div><div class="ttdeci">CompilerStatus</div><div class="ttdoc">The status of the compiler </div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00117">Enumerations.cs:117</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ae64d03735cb348d0d162e493bf9b3f68"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ae64d03735cb348d0d162e493bf9b3f68">TGServerService.ServerInstance.GetVersion</a></div><div class="ttdeci">string GetVersion(ByondVersion type)</div><div class="ttdoc">Get the currently installed version as a string formatted as Major.Minor  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00149">Byond.cs:149</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a47fd4bf82907a2c2fbcb4bcabf998e44"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a47fd4bf82907a2c2fbcb4bcabf998e44">TGServerService.ServerInstance.CompileError</a></div><div class="ttdeci">string CompileError()</div><div class="ttdoc">Returns the error message of the last operation. Reading this will clear the stored value  ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00068">Compiler.cs:68</a></div></div>
<div class="ttc" id="_t_g_command_line_2_program_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_t_g_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">using System</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_command_line_2_program_8cs_source.html#l00001">Program.cs:1</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a33c09fd7ed6d0907549e1cc08ad74562"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a33c09fd7ed6d0907549e1cc08ad74562">TGServerService.ServerInstance.WriteInfo</a></div><div class="ttdeci">void WriteInfo(string message, EventID id)</div><div class="ttdoc">Writes information to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_server_instance_8cs_source.html#l00062">ServerInstance.cs:62</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_acfabf82df8e6ecbf4069b7a841b0e8b7"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#acfabf82df8e6ecbf4069b7a841b0e8b7">TGServerService.ServerInstance.GetStatus</a></div><div class="ttdeci">CompilerStatus GetStatus()</div><div class="ttdoc">Returns the current compiler status  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00059">Compiler.cs:59</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_af19d01601edb8beb1e78ffdcaf572c47"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#af19d01601edb8beb1e78ffdcaf572c47">TGServerService.ServerInstance.PrecompileHook</a></div><div class="ttdeci">bool PrecompileHook()</div><div class="ttdoc">Run the &quot;precompile&quot; event </div><div class="ttdef"><b>Definition:</b> <a href="_preaction_handler_8cs_source.html#l00088">PreactionHandler.cs:88</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a6dc8ecb836197d4e0a889d8b8944237a"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a6dc8ecb836197d4e0a889d8b8944237a">TGServerService.ServerInstance.GameDirLive</a></div><div class="ttdeci">const string GameDirLive</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00031">Compiler.cs:31</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aabf31525de01a260b7a83ce8ac928d62"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aabf31525de01a260b7a83ce8ac928d62">TGServerService.ServerInstance.InitializeImpl</a></div><div class="ttdeci">void InitializeImpl()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00143">Compiler.cs:143</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html"><div class="ttname"><a href="namespace_t_g_service_interface.html">TGServiceInterface</a></div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00006">ChatSetupInfo.cs:6</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a53163f831dc935310ef155d7b1f48aac"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">TGServerService.ServerInstance.BridgeDLLName</a></div><div class="ttdeci">const string BridgeDLLName</div><div class="ttdoc">The file name of the .dll that contains the ITGInterop bridge class </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00055">Interop.cs:55</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9f987c1a8b05d222f908674c813ec918"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9f987c1a8b05d222f908674c813ec918">TGServerService.ServerInstance.CreateSymlink</a></div><div class="ttdeci">static void CreateSymlink(string link, string target)</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00091">Compiler.cs:91</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a43598a044d75089e4c3a0b433bca455b"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a43598a044d75089e4c3a0b433bca455b">TGServerService.ServerInstance.CompilerLock</a></div><div class="ttdeci">object CompilerLock</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00038">Compiler.cs:38</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ad6f61d0895428e85ec403dbfd0afe744"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ad6f61d0895428e85ec403dbfd0afe744">TGServerService.ServerInstance.InitCompiler</a></div><div class="ttdeci">void InitCompiler()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00050">Compiler.cs:50</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a5a3e4575d902a3e8650d4734629bd9d9"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a5a3e4575d902a3e8650d4734629bd9d9">TGServerService.ServerInstance.PRJobFile</a></div><div class="ttdeci">const string PRJobFile</div><div class="ttdoc">File name for monitoring which github pull requests are currently test merged </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00052">Repository.cs:52</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a74d6e8df896a4a8f6f1faa7d67a2bbde"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a74d6e8df896a4a8f6f1faa7d67a2bbde">TGServerService.ServerInstance.PostcompileHook</a></div><div class="ttdeci">bool PostcompileHook()</div><div class="ttdoc">Run the &quot;postcompile&quot; event </div><div class="ttdef"><b>Definition:</b> <a href="_preaction_handler_8cs_source.html#l00097">PreactionHandler.cs:97</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ae6ea9140e5cf33703628ac25700bc556"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">TGServerService.ServerInstance.SendMessage</a></div><div class="ttdeci">void SendMessage(string msg, MessageType mt)</div><div class="ttdoc">Broadcast a message to appropriate channels based on the message type </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_chat_8cs_source.html#l00226">Chat.cs:226</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_af4f0d76eb19015bd076df3f3aa28e526"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#af4f0d76eb19015bd076df3f3aa28e526">TGServerService.ServerInstance.GetStagingDir</a></div><div class="ttdeci">string GetStagingDir()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00230">Compiler.cs:230</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9f6e141cd76aa497dcf72f14c1219017"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9f6e141cd76aa497dcf72f14c1219017">TGServerService.ServerInstance.WriteWarning</a></div><div class="ttdeci">void WriteWarning(string message, EventID id)</div><div class="ttdoc">Writes a warning to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_server_instance_8cs_source.html#l00082">ServerInstance.cs:82</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a7d6b306dbbaec279da07bdffc641cd17"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a7d6b306dbbaec279da07bdffc641cd17">TGServerService.ServerInstance.RelativePath</a></div><div class="ttdeci">string RelativePath(string path)</div><div class="ttdoc">Converts relative paths to full ServerInstance directory paths </div><div class="ttdef"><b>Definition:</b> <a href="_server_instance_8cs_source.html#l00101">ServerInstance.cs:101</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_program_html_ae1290ddee2583742124827bad8d68f23"><div class="ttname"><a href="class_t_g_server_service_1_1_program.html#ae1290ddee2583742124827bad8d68f23">TGServerService.Program.CopyDirectory</a></div><div class="ttdeci">static void CopyDirectory(string sourceDirName, string destDirName, IList&lt; string &gt; ignore=null, bool ignoreIfNotExists=false)</div><div class="ttdoc">Recusively copy a directory </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_program_8cs_source.html#l00108">Program.cs:108</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aeb0cb7b5664b4796ef9aa9082bbce424"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aeb0cb7b5664b4796ef9aa9082bbce424">TGServerService.ServerInstance.UpdateLiveSha</a></div><div class="ttdeci">void UpdateLiveSha(string newSha)</div><div class="ttdoc">Updates LiveTrackingBranch with the staged Compile(bool)&amp;#39;s SHA </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l01298">Repository.cs:1298</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a8445f34deceaaa76a7c2088f8c7f1991"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a8445f34deceaaa76a7c2088f8c7f1991">TGServerService.ServerInstance.IsInitialized</a></div><div class="ttdeci">CompilerStatus IsInitialized()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00119">Compiler.cs:119</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_afdd737c980b2c078c2de10a57dc4ad40"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#afdd737c980b2c078c2de10a57dc4ad40">TGServerService.ServerInstance.Compile</a></div><div class="ttdeci">bool Compile(bool silent=false)</div><div class="ttdoc">Does all the necessary actions to take the revision currently in the repository and compile it to be ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00563">Compiler.cs:563</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aae521c4c39e87f29fc7cba98c0ff58d7"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aae521c4c39e87f29fc7cba98c0ff58d7">TGServerService.ServerInstance.GameDir</a></div><div class="ttdeci">const string GameDir</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00028">Compiler.cs:28</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a66a6d4cf18b436ad79fd5eb9e3546881"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a66a6d4cf18b436ad79fd5eb9e3546881">TGServerService.ServerInstance.lastCompilerError</a></div><div class="ttdeci">string lastCompilerError</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00040">Compiler.cs:40</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_abefd625f907f5e953509baa1c6da9a07"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#abefd625f907f5e953509baa1c6da9a07">TGServerService.ServerInstance.GetHead</a></div><div class="ttdeci">string GetHead(bool useTracked, out string error)</div><div class="ttdoc">Gets the sha of the current HEAD  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00440">Repository.cs:440</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a0c6bafbaf5618ced251442f5e66fa89c"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a0c6bafbaf5618ced251442f5e66fa89c">TGServerService.ServerInstance.GameDirA</a></div><div class="ttdeci">const string GameDirA</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00029">Compiler.cs:29</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a7276f1afc5e4e29a3dd7ecbc324b1661"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a7276f1afc5e4e29a3dd7ecbc324b1661">TGServerService.ServerInstance.CompilerThread</a></div><div class="ttdeci">Thread CompilerThread</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00042">Compiler.cs:42</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_html"><div class="ttname"><a href="namespace_t_g_server_service.html">TGServerService</a></div><div class="ttdef"><b>Definition:</b> <a href="_administrative_authorization_manager_8cs_source.html#l00007">AdministrativeAuthorizationManager.cs:7</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_abc4aea21aa8dfb0039d9e384458b037e"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#abc4aea21aa8dfb0039d9e384458b037e">TGServerService.ServerInstance.WriteError</a></div><div class="ttdeci">void WriteError(string message, EventID id)</div><div class="ttdoc">Writes an error to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_server_instance_8cs_source.html#l00072">ServerInstance.cs:72</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a427984d1cb5c60f217967795c9695998"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a427984d1cb5c60f217967795c9695998">TGServerService.ServerInstance.Initialize</a></div><div class="ttdeci">bool Initialize()</div><div class="ttdoc">Sets up the symlinks for hotswapping game code. This will reset everything in the Game folder...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00104">Compiler.cs:104</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_af1a8a673b30cc996fc7251de037732fc"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#af1a8a673b30cc996fc7251de037732fc">TGServerService.ServerInstance.InvertDirectory</a></div><div class="ttdeci">string InvertDirectory(string gameDirectory)</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00278">Compiler.cs:278</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_program_html_af23c01e40193036d8b54ca95efb5b229"><div class="ttname"><a href="class_t_g_server_service_1_1_program.html#af23c01e40193036d8b54ca95efb5b229">TGServerService.Program.DeleteDirectory</a></div><div class="ttdeci">static void DeleteDirectory(string path, bool ContentsOnly=false, IList&lt; string &gt; excludeRoot=null)</div><div class="ttdoc">Recursive directory deleter </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_program_8cs_source.html#l00041">Program.cs:41</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html_a8d0a8727304bcbf3c0b9967701e533e9"><div class="ttname"><a href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">TGServiceInterface.DreamDaemonStatus</a></div><div class="ttdeci">DreamDaemonStatus</div><div class="ttdoc">The status of the DD instance </div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00140">Enumerations.cs:140</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ace81439a32bd7252f187ff607a071e07"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ace81439a32bd7252f187ff607a071e07">TGServerService.ServerInstance.Exists</a></div><div class="ttdeci">bool Exists()</div><div class="ttdoc">Check if the repository is valid, if not Setup(string, string) must be called  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00184">Repository.cs:184</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_program_html"><div class="ttname"><a href="class_t_g_server_service_1_1_program.html">TGServerService.Program</a></div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_program_8cs_source.html#l00008">Program.cs:8</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
