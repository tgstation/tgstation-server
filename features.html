<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Features</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tgstation-server
   &#160;<span id="projectnumber">4.15.7</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Features </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#new_features">New since TGS3 (Rewrite)</a></li>
<li class="level1"><a href="#features_list">Comprehensive Feature List</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="new_features"></a>
New since TGS3 (Rewrite)</h1>
<ul>
<li>Agnostic HTTP API: The replaces the WCF service calls used in TGS3. This helps avoid Windows vendor lock-in and get away from the SOAP API that literally no one understood (not even me). With it, it's much easier to expose TGS to the internet, all you need is a HTTPS reverse proxy in front of it. A rundown of the new API exists here: <a href="https://tgstation.github.io/tgstation-server/api.html">https://tgstation.github.io/tgstation-server/api.html</a>.</li>
<li>Granular Access Controls: Windows users are no longer (required to be) the basis for authentication to the server. We now have database-backed users as a login option. These use a combined Basic/JWT authentication scheme with industry standard password hashing and salting. Users are fully customizable and can be given granular access to every bit of the server via the new permissions system. From changing the BYOND version, to test merging a PR, to restarting the server, every action may now be granted or revoked on a per user basis.<ul>
<li>Limitation: Users can be disabled but not deleted.</li>
</ul>
</li>
<li>Proper Long Running Operation Support: Server actions take a long time, from a git pull to a DreamMaker compile. TGS now internally allows for them to be run in parallel with each other and provides an audit record via the database. This is an improvement over the old system where connections had to be held open for the duration of operations.</li>
<li>Database Backend: TGS requires an SQL database to operate. This allows for much better concurrency and is just overall much cleaner than the old single json file storage blob per instance.<ul>
<li>Limitation: There is a one-to-one relationship with a TGS server and a database. <b>DO NOT SHARE TGS DATABASES</b>.</li>
</ul>
</li>
<li>Linux/Docker Support: TGS is Linux and docker compatible. (Note this does not mean that rust-g and BSQL work out of the box, they must be compiled using event scripts like PreCompile.sh).<ul>
<li>Limitation: TGS has a dependency on the native library libgit2 which is known to cause issues on Linux. The binaries distributed with TGS are kept up to date with the upstream repository, but out of the box Linux support can't be assured in every environment. Docker is guaranteed to always work, however. See the repository for the distributed binary here: <a href="https://github.com/libgit2/libgit2sharp.nativebinaries">https://github.com/libgit2/libgit2sharp.nativebinaries</a>.</li>
<li>Limitation: System based logins are not supported on Linux. <a href="https://github.com/tgstation/tgstation-server/issues/709">https://github.com/tgstation/tgstation-server/issues/709</a></li>
</ul>
</li>
<li>Incredibly Detailed Logging: Various log levels exist now (Trace/Debug/Info/Warning/Error/Critical) and are sanely output to a rolling file on the host. Significant improvement over having to use the Windows event viewer with TGS3. Until such a point where bugs stop copping up I'd recommend Trace logging for the main log level.</li>
<li>Historical Deployment Data: Every time code is compiled the following data is logged and stored.<ul>
<li>The User that initiated it.</li>
<li>When it was started.</li>
<li>When it finished.</li>
<li>All revision information including local/remote SHAs, test merged pull requests and their SHAs.</li>
<li>The BYOND version used.</li>
<li>The DMAPI version in the binary</li>
</ul>
</li>
<li>Multiple chat bots per instance: Up to 65535 as a matter of fact (who knows why I chose that number?)!</li>
<li>Automatic Chat Bot Reconnection Intervals: Set in minutes.</li>
<li>Better Error State Handling: The Server and Watchdog aren't your momma's boys anymore. Every error state will be automatically resolved or reported with recommended actions.</li>
<li>Watchdog Heartbeats: An interval in seconds can now be set at which TGS will send /world/Topic() packets to DreamDaemon. If four of these are missed, the server will be rebooted. No more endless @Key Holder pings in discord (and I can finally unmute the /tg/ guild)! This feature can be disabled.</li>
<li>Better DMAPI: No longer requires injecting a .NET runtime .dll into the DreamDaemon process. DD -&gt; TGS communication is now handled securely via BYOND's native /world/Export() API ("But Cyberboss, BYOND only supports GET requests." Who said anything about respecting HTTP standards when dealing with BYOND?).</li>
<li>Safe/Ultrasafe Security Support: Thanks to the new DMAPI, the ultrasafe and safe security levels may be used without running into BYOND's limitations. But no one really cares...</li>
<li>Private/Invisible visibility Support: Stored per instance.</li>
<li>Self Upgrading: To upgrade TGS3 you needed to download and run the installer. This was pretty seamless, but it's now even better in versions &gt;=4 as the command to upgrade can be given straight to the API. At that point the server will handle downloading the update, detaching running DreamDaemon instances, restarting with the new version, and reattaching to them. Easier than ever patch delivery.</li>
<li><em>Gasp</em> TESTING: TGS currently has over 60% code coverage in automated unit and full stack integration tests. I aim to have that number ever increasing to prevent trivial mistakes. Big improvement over V3 which had... literally none...</li>
</ul>
<p>Along with these features, nearly every single V3 feature has been included and possibly improved in some fashion. This includes stuff like Windows accounts for logins, and using ACLs for static file handling. The following exceptions exist but are planned for future updates:</p><ul>
<li>Process memory/CPU diagnostic data is not generated: <a href="https://github.com/tgstation/tgstation-server/issues/611">https://github.com/tgstation/tgstation-server/issues/611</a></li>
<li>Process dumps may not be created: <a href="https://github.com/tgstation/tgstation-server/issues/612">https://github.com/tgstation/tgstation-server/issues/612</a></li>
<li>The DMAPI is required in DreamMaker code: <a href="https://github.com/tgstation/tgstation-server/issues/934">https://github.com/tgstation/tgstation-server/issues/934</a></li>
<li>The option to "Initialize Game Directories" is no longer present, but a variant is still performed every deployment for smoother error handling.</li>
<li>Direct server announcements are no longer present but may be readded upon request.</li>
</ul>
<h1><a class="anchor" id="features_list"></a>
Comprehensive Feature List</h1>
<p>tgstation-server is a BYOND server managment suite. It includes all the following features</p>
<ul>
<li>Standalone server with OpenAPI 3.0 defined HTTP REST API</li>
<li>Secure user authentication, management, and permissions system</li>
<li>Support for using Windows accounts as logins</li>
<li>Long running operation support via the jobs subsystem</li>
<li>Logging system with configurable levels of verbosity</li>
<li>Able to self update with user input</li>
<li>Instances: Managing multiple sets of the below features seperately on the same machine<ul>
<li>Git repository managment<ul>
<li>Cloning</li>
<li>Checking out SHAs and references</li>
<li>Local Merging</li>
<li>Hard resetting to references</li>
<li>Merging GitHub pull requests locally, optionally commenting on them</li>
<li>Optionally pushing commits for GitHub visibility</li>
<li>Can be deleted and changed to a different origin</li>
</ul>
</li>
<li>BYOND version management<ul>
<li>Downloading and installing a given BYOND version<ul>
<li>Includes DirectX installation on Windows and proper handling of POSIX shared libraries</li>
</ul>
</li>
<li>Supporting any amount of installed versions</li>
<li>Cleaning the BYOND cache</li>
</ul>
</li>
<li>Code Deployment<ul>
<li>Compiles git code with DreamMaker and the active BYOND version</li>
<li>Validates interop with the compiled binary</li>
<li>Can be scheduled to pull the repository and build on a given interval</li>
</ul>
</li>
<li>The Watchdog, a DreamDaemon uptime monitor<ul>
<li>Automatically restarts the server when crashed until told to stop</li>
<li>"Heartbeat" system for checking DreamDaemon isn't hung</li>
<li>Seamless automatic application of new deployments on /world/Reboot</li>
<li>Automatic startup at server boot time</li>
<li>Automatically handles Windows prompts related to trusted mode</li>
<li>TGS restarts/updates do not interrupt the DreamDaemon process</li>
<li>Raises process priority of DreamDaemon for increased performance</li>
</ul>
</li>
<li>Chat System<ul>
<li>Support multiple chat bots per instance. Current providers:<ul>
<li>Discord<ul>
<li>Supports rich embeds when deployments occur</li>
</ul>
</li>
<li>IRC</li>
</ul>
</li>
<li>Bots come out of the box with some basic commands like showing the server revision</li>
<li>Support different chat channel types &amp; tags for use in DM code</li>
</ul>
</li>
<li>Configuration system<ul>
<li>Allows specifying files/directories to be permanently symlinked with active game code</li>
<li>Support for scripts that run on certain events. e.g. Before/after compiling</li>
<li>Allows including arbitrary .dm code in compilations</li>
<li>ACL support with Windows based logins</li>
</ul>
</li>
<li>DMAPI, DM code interop<ul>
<li>Provides metadata such as the current TGS version, git revision, active pull requests, security level</li>
<li>Provides API for responding to TGS events (compile, update, etc)</li>
<li>Provides API for sending chat bot messages</li>
<li>Provides API for implementing chat bot commands in DM code</li>
<li>Gives the ability to restart the DreamDaemon process from DM code</li>
<li>Functions with all 3 DreamDaemon security levels</li>
<li>Allows specifying the .dmb's minimum required security level </li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
