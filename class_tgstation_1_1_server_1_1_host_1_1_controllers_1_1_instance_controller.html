<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Controllers.InstanceController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.8.0</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_controllers.html">Controllers</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">InstanceController</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Controllers.InstanceController Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html" title="Base Controller for API functions.">ApiController</a> for managing <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Components.Instance</a>s.   
 <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Controllers.InstanceController:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_controllers_8_instance_controller_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_controllers_8_instance_controller_inherit__map" id="a_tgstation_8_server_8_host_8_controllers_8_instance_controller_inherit__map">
<area shape="rect" title="ApiController for managing Components.Instances." alt="" coords="5,299,221,339"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html" title="ApiController for operations on IInstanceCores." alt="" coords="11,225,215,251"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html" title="Base Controller for API functions." alt="" coords="65,152,161,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base.html" title="Base class for all API style controllers." alt="" coords="50,79,177,104"/>
<area shape="rect" href="class_controller.html" title=" " alt="" coords="75,5,152,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Controllers.InstanceController:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_controllers_8_instance_controller_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_controllers_8_instance_controller_coll__map" id="a_tgstation_8_server_8_host_8_controllers_8_instance_controller_coll__map">
<area shape="rect" title="ApiController for managing Components.Instances." alt="" coords="1340,485,1556,525"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html" title="ApiController for operations on IInstanceCores." alt="" coords="911,115,1115,140"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html" title="Base Controller for API functions." alt="" coords="496,168,592,193"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base.html" title="Base class for all API style controllers." alt="" coords="138,177,265,203"/>
<area shape="rect" href="class_controller.html" title=" " alt="" coords="5,177,83,203"/>
<area shape="rect" title=" " alt="" coords="155,309,248,335"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html" title="General configuration options." alt="" coords="899,293,1128,333"/>
<area shape="rect" title=" " alt="" coords="178,111,225,136"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances." alt="" coords="431,33,657,73"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html" title="Operations that can be performed on a given Models.Instance." alt="" coords="132,5,271,31"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html" title="Handler for BridgeParameters." alt="" coords="139,55,264,80"/>
<area shape="rect" title=" " alt="" coords="499,679,589,704"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html" title="Configuration for the server swarm system." alt="" coords="899,739,1128,779"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html" title="Manages the runtime of Jobs." alt="" coords="922,357,1105,397"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="929,421,1097,461"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html" title="For identifying the current platform." alt="" coords="914,485,1113,525"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html" title="Gets unassigned ports for use by TGS." alt="" coords="923,549,1104,589"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html" title="Receives notifications about permissions updates." alt="" coords="913,613,1114,653"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base.html" title="Base class for Response.ServerInformationResponse." alt="" coords="467,413,621,439"/>
<area shape="rect" title=" " alt="" coords="523,251,565,276"/>
<area shape="rect" title=" " alt="" coords="468,300,620,325"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html" title="Information about a server in the swarm." alt="" coords="493,757,595,783"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a20a97e61a81db44a12e27c18da680ed8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a20a97e61a81db44a12e27c18da680ed8">InstanceController</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a> authenticationContext, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">InstanceController</a> &gt; logger, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html">IInstanceManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a9a2c4d46ba2467c16b22172a98f1ba35">instanceManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34">jobManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ac62c0b1b0e346409b20c3054d4a8354a">platformIdentifier</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html">IPortAllocator</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">portAllocator</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html">IPermissionsUpdateNotifyee</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae45aceab65d37ece10acd7eb0fa15b85">permissionsUpdateNotifyee</a>, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt; generalConfigurationOptions, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt; swarmConfigurationOptions, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_api_headers_provider.html">IApiHeadersProvider</a> apiHeaders)</td></tr>
<tr class="memdesc:a20a97e61a81db44a12e27c18da680ed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a> class.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a20a97e61a81db44a12e27c18da680ed8">More...</a><br /></td></tr>
<tr class="separator:a20a97e61a81db44a12e27c18da680ed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab462ce6aa240b963c67cab7d20927060"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ab462ce6aa240b963c67cab7d20927060">Create</a> ([FromBody] <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_instance_create_request.html">InstanceCreateRequest</a> model, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ab462ce6aa240b963c67cab7d20927060"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create or attach an <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ab462ce6aa240b963c67cab7d20927060">More...</a><br /></td></tr>
<tr class="separator:ab462ce6aa240b963c67cab7d20927060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae67fd03e536f1aaed8d8ad6975192344"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae67fd03e536f1aaed8d8ad6975192344">Delete</a> (long id, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ae67fd03e536f1aaed8d8ad6975192344"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach an <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> with the given <em>id</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae67fd03e536f1aaed8d8ad6975192344">More...</a><br /></td></tr>
<tr class="separator:ae67fd03e536f1aaed8d8ad6975192344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709c5985e78cdb8bde3f705869ddafb9"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a709c5985e78cdb8bde3f705869ddafb9">Update</a> ([FromBody] <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_instance_update_request.html">InstanceUpdateRequest</a> model, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a709c5985e78cdb8bde3f705869ddafb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify an <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>'s settings.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a709c5985e78cdb8bde3f705869ddafb9">More...</a><br /></td></tr>
<tr class="separator:a709c5985e78cdb8bde3f705869ddafb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98360d756afee2844b21b0936cc050cc"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a98360d756afee2844b21b0936cc050cc">List</a> ([FromQuery] int? page, [FromQuery] int? pageSize, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a98360d756afee2844b21b0936cc050cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">List <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>s.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a98360d756afee2844b21b0936cc050cc">More...</a><br /></td></tr>
<tr class="separator:a98360d756afee2844b21b0936cc050cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d88c0b757913b42934e82312434633"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a16d88c0b757913b42934e82312434633">GetId</a> (long id, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a16d88c0b757913b42934e82312434633"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a specific <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a16d88c0b757913b42934e82312434633">More...</a><br /></td></tr>
<tr class="separator:a16d88c0b757913b42934e82312434633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff1ddb6e7b8f7a52a29dbcc3c48b1aa3"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aff1ddb6e7b8f7a52a29dbcc3c48b1aa3">GrantPermissions</a> (long id, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aff1ddb6e7b8f7a52a29dbcc3c48b1aa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives the current user full permissions on a given instance <em>id</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aff1ddb6e7b8f7a52a29dbcc3c48b1aa3">More...</a><br /></td></tr>
<tr class="separator:aff1ddb6e7b8f7a52a29dbcc3c48b1aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base.html">Tgstation.Server.Host.Controllers.ApiControllerBase</a></td></tr>
<tr class="memitem:a019fb9487ec8d0ef728c9d09de1baaa1 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base"><td class="memItemLeft" align="right" valign="top">sealed override async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base.html#a019fb9487ec8d0ef728c9d09de1baaa1">OnActionExecutionAsync</a> (ActionExecutingContext context, ActionExecutionDelegate next)</td></tr>
<tr class="separator:a019fb9487ec8d0ef728c9d09de1baaa1 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:aa40d55750e2193d714eb1470505c47ee"><td class="memItemLeft" align="right" valign="top">const string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">InstanceAttachFileName</a> = &quot;TGS4_ALLOW_INSTANCE_ATTACH&quot;</td></tr>
<tr class="memdesc:aa40d55750e2193d714eb1470505c47ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">File name to allow attaching instances.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">More...</a><br /></td></tr>
<tr class="separator:aa40d55750e2193d714eb1470505c47ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a02be01c6c5cab421a7a0c9f01f213b30"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a>?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a02be01c6c5cab421a7a0c9f01f213b30">CreateDefaultInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_instance_create_request.html">InstanceCreateRequest</a> initialSettings, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a02be01c6c5cab421a7a0c9f01f213b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a default <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> from <em>initialSettings</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a02be01c6c5cab421a7a0c9f01f213b30">More...</a><br /></td></tr>
<tr class="separator:a02be01c6c5cab421a7a0c9f01f213b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7505e585db1c6dd7fffda95599994960"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance_permission_set.html">InstancePermissionSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960">InstanceAdminPermissionSet</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance_permission_set.html">InstancePermissionSet</a>? permissionSetToModify)</td></tr>
<tr class="memdesc:a7505e585db1c6dd7fffda95599994960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an InstancePermissionSet with full rights.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960">More...</a><br /></td></tr>
<tr class="separator:a7505e585db1c6dd7fffda95599994960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a600268a32d5da87b3c80f97d34319366"><td class="memItemLeft" align="right" valign="top">string?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a600268a32d5da87b3c80f97d34319366">NormalizePath</a> (string? path)</td></tr>
<tr class="memdesc:a600268a32d5da87b3c80f97d34319366"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalize a given <em>path</em>  for an instance.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a600268a32d5da87b3c80f97d34319366">More...</a><br /></td></tr>
<tr class="separator:a600268a32d5da87b3c80f97d34319366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6de3128c5d49b91d7bb8f6f2caf0ed5"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5">CheckAccessible</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_instance_response.html">InstanceResponse</a> instanceResponse, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ae6de3128c5d49b91d7bb8f6f2caf0ed5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate the <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_instance_response.html#a86d9a044bcddfe1d99701e62b70b6bd0" title="If the querying user may access this instance.">InstanceResponse.Accessible</a> property of a given <em>instanceResponse</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5">More...</a><br /></td></tr>
<tr class="separator:ae6de3128c5d49b91d7bb8f6f2caf0ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b38d5cba6df39071299a0d0c5e71a6d"><td class="memItemLeft" align="right" valign="top">BadRequestObjectResult?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a5b38d5cba6df39071299a0d0c5e71a6d">ValidateCronSetting</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> instance)</td></tr>
<tr class="memdesc:a5b38d5cba6df39071299a0d0c5e71a6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates a given <em>instance</em> 's <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aa94e263fa829683a2b8ae4cdf8d366c6" title="A cron expression indicating when auto-updates should trigger. Must be a valid 6 part cron schedule (...">Api.Models.Instance.AutoUpdateCron</a> setting.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a5b38d5cba6df39071299a0d0c5e71a6d">More...</a><br /></td></tr>
<tr class="separator:a5b38d5cba6df39071299a0d0c5e71a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a38f7f9669773242d177345e38be2dd34"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34">jobManager</a></td></tr>
<tr class="memdesc:a38f7f9669773242d177345e38be2dd34"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34">More...</a><br /></td></tr>
<tr class="separator:a38f7f9669773242d177345e38be2dd34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2e4e54c38a97b299d1fb7692cc5cdd"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a></td></tr>
<tr class="memdesc:afb2e4e54c38a97b299d1fb7692cc5cdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">More...</a><br /></td></tr>
<tr class="separator:afb2e4e54c38a97b299d1fb7692cc5cdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac62c0b1b0e346409b20c3054d4a8354a"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ac62c0b1b0e346409b20c3054d4a8354a">platformIdentifier</a></td></tr>
<tr class="memdesc:ac62c0b1b0e346409b20c3054d4a8354a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IPlatformIdentifier for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ac62c0b1b0e346409b20c3054d4a8354a">More...</a><br /></td></tr>
<tr class="separator:ac62c0b1b0e346409b20c3054d4a8354a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61dbab212a95b16ad876b7c5f8dd51c5"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html">IPortAllocator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">portAllocator</a></td></tr>
<tr class="memdesc:a61dbab212a95b16ad876b7c5f8dd51c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IPortAllocator for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">More...</a><br /></td></tr>
<tr class="separator:a61dbab212a95b16ad876b7c5f8dd51c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae45aceab65d37ece10acd7eb0fa15b85"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html">IPermissionsUpdateNotifyee</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae45aceab65d37ece10acd7eb0fa15b85">permissionsUpdateNotifyee</a></td></tr>
<tr class="memdesc:ae45aceab65d37ece10acd7eb0fa15b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IPermissionsUpdateNotifyee for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae45aceab65d37ece10acd7eb0fa15b85">More...</a><br /></td></tr>
<tr class="separator:ae45aceab65d37ece10acd7eb0fa15b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f60f72c082a222a31383dbfceb755a6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a4f60f72c082a222a31383dbfceb755a6">generalConfiguration</a></td></tr>
<tr class="memdesc:a4f60f72c082a222a31383dbfceb755a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The GeneralConfiguration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a4f60f72c082a222a31383dbfceb755a6">More...</a><br /></td></tr>
<tr class="separator:a4f60f72c082a222a31383dbfceb755a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a952ce837f434c65e69d35ec886d0fc2d"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a></td></tr>
<tr class="memdesc:a952ce837f434c65e69d35ec886d0fc2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SwarmConfiguration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">More...</a><br /></td></tr>
<tr class="separator:a952ce837f434c65e69d35ec886d0fc2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html">Tgstation.Server.Host.Controllers.ComponentInterfacingController</a></td></tr>
<tr class="memitem:a1fbf7f318ced5ab7c2c44a4cd43510a8 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a1fbf7f318ced5ab7c2c44a4cd43510a8">ComponentInterfacingController</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a> authenticationContext, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html">ComponentInterfacingController</a> &gt; logger, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html">IInstanceManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a9a2c4d46ba2467c16b22172a98f1ba35">instanceManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_api_headers_provider.html">IApiHeadersProvider</a> apiHeaders, bool <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a92bb12695e2aae9efae16f28c7d61607">useInstanceRequestHeader</a>)</td></tr>
<tr class="memdesc:a1fbf7f318ced5ab7c2c44a4cd43510a8 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html" title="ApiController for operations on IInstanceCores.">ComponentInterfacingController</a> class.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a1fbf7f318ced5ab7c2c44a4cd43510a8">More...</a><br /></td></tr>
<tr class="separator:a1fbf7f318ced5ab7c2c44a4cd43510a8 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518bdda7e1021bdd9782abd9f510f86b inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memItemLeft" align="right" valign="top">override async ValueTask&lt; IActionResult?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a518bdda7e1021bdd9782abd9f510f86b">ValidateRequest</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a518bdda7e1021bdd9782abd9f510f86b inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs validation a request. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in an appropriate IActionResult on validation failure, <code>null</code> otherwise.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a518bdda7e1021bdd9782abd9f510f86b">More...</a><br /></td></tr>
<tr class="separator:a518bdda7e1021bdd9782abd9f510f86b inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba9306ee424759a221509c021cdf0cde inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde">ValidateInstanceOnlineStatus</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> metadata)</td></tr>
<tr class="memdesc:aba9306ee424759a221509c021cdf0cde inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Corrects discrepencies between the <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a6f024aa440adbecbd80b053eb57badc2" title="If the Instance is online.">Api.Models.Instance.Online</a> status of IInstances in the database vs the service.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde">More...</a><br /></td></tr>
<tr class="separator:aba9306ee424759a221509c021cdf0cde inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e985e6b0812f8bbce17ed2e5028fd65 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; IActionResult?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a0e985e6b0812f8bbce17ed2e5028fd65">WithComponentInstanceNullable</a> (Func&lt; <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html">IInstanceCore</a>, ValueTask&lt; IActionResult?&gt; &gt; action, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a>? instance=null)</td></tr>
<tr class="memdesc:a0e985e6b0812f8bbce17ed2e5028fd65 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a given <em>action</em>  with the relevant IInstance.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a0e985e6b0812f8bbce17ed2e5028fd65">More...</a><br /></td></tr>
<tr class="separator:a0e985e6b0812f8bbce17ed2e5028fd65 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5262a00e199825c5f7e2f25d6d76f0 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a9e5262a00e199825c5f7e2f25d6d76f0">WithComponentInstance</a> (Func&lt; <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html">IInstanceCore</a>, ValueTask&lt; IActionResult &gt; &gt; action, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a>? instance=null)</td></tr>
<tr class="memdesc:a9e5262a00e199825c5f7e2f25d6d76f0 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a given <em>action</em>  with the relevant IInstance.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a9e5262a00e199825c5f7e2f25d6d76f0">More...</a><br /></td></tr>
<tr class="separator:a9e5262a00e199825c5f7e2f25d6d76f0 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html">Tgstation.Server.Host.Controllers.ApiController</a></td></tr>
<tr class="memitem:af69971c47f8065bca0242735ef068cab inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#af69971c47f8065bca0242735ef068cab">ApiController</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a> authenticationContext, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_api_headers_provider.html">IApiHeadersProvider</a> apiHeadersProvider, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html">ApiController</a> &gt; logger, bool <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a91c58c31f7a3cc51fff3cfc3b236756d">requireHeaders</a>)</td></tr>
<tr class="memdesc:af69971c47f8065bca0242735ef068cab inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html" title="Base Controller for API functions.">ApiController</a> class.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#af69971c47f8065bca0242735ef068cab">More...</a><br /></td></tr>
<tr class="separator:af69971c47f8065bca0242735ef068cab inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c7235c3ee61017e2ae5734a100c53bf inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">override async ValueTask&lt; IActionResult?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a7c7235c3ee61017e2ae5734a100c53bf">HookExecuteAction</a> (Func&lt; Task &gt; executeAction, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a7c7235c3ee61017e2ae5734a100c53bf inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook for executing a request. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">executeAction</td><td>A Func&lt;TResult&gt; that should be invoked and its response awaited to continue normal execution of the request. Should NOT be called if this method returns a non-<code>null</code> value.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in an IActionResult that, if not <code>null</code>, is executed.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a7c7235c3ee61017e2ae5734a100c53bf">More...</a><br /></td></tr>
<tr class="separator:a7c7235c3ee61017e2ae5734a100c53bf inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30874703840788ecc629d91fc7e15a5f inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">new NotFoundObjectResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a30874703840788ecc629d91fc7e15a5f">NotFound</a> ()</td></tr>
<tr class="memdesc:a30874703840788ecc629d91fc7e15a5f inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic 404 response.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a30874703840788ecc629d91fc7e15a5f">More...</a><br /></td></tr>
<tr class="separator:a30874703840788ecc629d91fc7e15a5f inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d1c4f6e52c2f6b83d40930646bd9f5 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">new ObjectResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a84d1c4f6e52c2f6b83d40930646bd9f5">Unauthorized</a> ()</td></tr>
<tr class="memdesc:a84d1c4f6e52c2f6b83d40930646bd9f5 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic 401 response.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a84d1c4f6e52c2f6b83d40930646bd9f5">More...</a><br /></td></tr>
<tr class="separator:a84d1c4f6e52c2f6b83d40930646bd9f5 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526173be91476b48ade7f0bc0cac6287 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">ObjectResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a526173be91476b48ade7f0bc0cac6287">RequiresPosixSystemIdentity</a> (NotImplementedException ex)</td></tr>
<tr class="memdesc:a526173be91476b48ade7f0bc0cac6287 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic 501 response.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a526173be91476b48ade7f0bc0cac6287">More...</a><br /></td></tr>
<tr class="separator:a526173be91476b48ade7f0bc0cac6287 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a978fe89eeaea424d7e034d2c7ab7b76e inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">StatusCodeResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a978fe89eeaea424d7e034d2c7ab7b76e">StatusCode</a> (HttpStatusCode statusCode)</td></tr>
<tr class="memdesc:a978fe89eeaea424d7e034d2c7ab7b76e inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Strongly type calls to ControllerBase.StatusCode(int).   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a978fe89eeaea424d7e034d2c7ab7b76e">More...</a><br /></td></tr>
<tr class="separator:a978fe89eeaea424d7e034d2c7ab7b76e inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0fcee33c7b7341bc3bf0c0e66e1ebf4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">ObjectResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae0fcee33c7b7341bc3bf0c0e66e1ebf4">Created</a> (object payload)</td></tr>
<tr class="memdesc:ae0fcee33c7b7341bc3bf0c0e66e1ebf4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic 201 response with a given <em>payload</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae0fcee33c7b7341bc3bf0c0e66e1ebf4">More...</a><br /></td></tr>
<tr class="separator:ae0fcee33c7b7341bc3bf0c0e66e1ebf4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc4e0e6f1d81ebc19a238527550f7a4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">ObjectResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#adfc4e0e6f1d81ebc19a238527550f7a4">RateLimit</a> (RateLimitExceededException rateLimitException)</td></tr>
<tr class="memdesc:adfc4e0e6f1d81ebc19a238527550f7a4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">429 response for a given <em>rateLimitException</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#adfc4e0e6f1d81ebc19a238527550f7a4">More...</a><br /></td></tr>
<tr class="separator:adfc4e0e6f1d81ebc19a238527550f7a4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab2a7e4c6bd41c9374dadb115d3766c2 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">virtual ValueTask&lt; IActionResult?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#aab2a7e4c6bd41c9374dadb115d3766c2">ValidateRequest</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aab2a7e4c6bd41c9374dadb115d3766c2 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs validation a request.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#aab2a7e4c6bd41c9374dadb115d3766c2">More...</a><br /></td></tr>
<tr class="separator:aab2a7e4c6bd41c9374dadb115d3766c2 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5333dd9534ea615440e2360016e75be4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">IActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a5333dd9534ea615440e2360016e75be4">HeadersIssue</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_headers_exception.html">HeadersException</a> headersException)</td></tr>
<tr class="memdesc:a5333dd9534ea615440e2360016e75be4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Response for missing/Invalid headers.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a5333dd9534ea615440e2360016e75be4">More...</a><br /></td></tr>
<tr class="separator:a5333dd9534ea615440e2360016e75be4 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad81f5293d2eac8bda8aa5ddd3d15c95c inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ad81f5293d2eac8bda8aa5ddd3d15c95c">Paginated&lt; TModel &gt;</a> (Func&lt; ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_results_1_1_paginatable_result.html">PaginatableResult</a>&lt; TModel &gt; &gt; &gt; queryGenerator, Func&lt; TModel, ValueTask &gt;? resultTransformer, int? pageQuery, int? pageSizeQuery, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad81f5293d2eac8bda8aa5ddd3d15c95c inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a paginated response.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ad81f5293d2eac8bda8aa5ddd3d15c95c">More...</a><br /></td></tr>
<tr class="separator:ad81f5293d2eac8bda8aa5ddd3d15c95c inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb8f191b60327e6bc75679ab009328b inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">ValueTask&lt; IActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#afdb8f191b60327e6bc75679ab009328b">Paginated&lt; TModel, TApiModel &gt;</a> (Func&lt; ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_results_1_1_paginatable_result.html">PaginatableResult</a>&lt; TModel &gt; &gt; &gt; queryGenerator, Func&lt; TApiModel, ValueTask &gt;? resultTransformer, int? pageQuery, int? pageSizeQuery, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:afdb8f191b60327e6bc75679ab009328b inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a paginated response.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#afdb8f191b60327e6bc75679ab009328b">More...</a><br /></td></tr>
<tr class="separator:afdb8f191b60327e6bc75679ab009328b inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14d6800a421c55e955c030f6c2c02543"><td class="memItemLeft" align="right" valign="top">virtual async ValueTask&lt; IActionResult?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base.html#a14d6800a421c55e955c030f6c2c02543">HookExecuteAction</a> (Func&lt; Task &gt; executeAction, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a14d6800a421c55e955c030f6c2c02543"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook for executing a request.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_base.html#a14d6800a421c55e955c030f6c2c02543">More...</a><br /></td></tr>
<tr class="separator:a14d6800a421c55e955c030f6c2c02543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td colspan="2" onclick="javascript:toggleInherit('properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html">Tgstation.Server.Host.Controllers.ComponentInterfacingController</a></td></tr>
<tr class="memitem:a95dc96499f6b951fd0726fa7fe947ace inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html">IInstanceOperations</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a95dc96499f6b951fd0726fa7fe947ace">InstanceOperations</a><code> [get]</code></td></tr>
<tr class="memdesc:a95dc96499f6b951fd0726fa7fe947ace inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the IInstanceOperations instance.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a95dc96499f6b951fd0726fa7fe947ace">More...</a><br /></td></tr>
<tr class="separator:a95dc96499f6b951fd0726fa7fe947ace inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td colspan="2" onclick="javascript:toggleInherit('properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html">Tgstation.Server.Host.Controllers.ApiController</a></td></tr>
<tr class="memitem:a115f271cf58494b63440aa01595f4199 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_api_headers.html">ApiHeaders</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a115f271cf58494b63440aa01595f4199">ApiHeaders</a><code> [get]</code></td></tr>
<tr class="memdesc:a115f271cf58494b63440aa01595f4199 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_api_headers.html" title="Represents the header that must be present for every server request.">Api.ApiHeaders</a> for the operation.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a115f271cf58494b63440aa01595f4199">More...</a><br /></td></tr>
<tr class="separator:a115f271cf58494b63440aa01595f4199 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e119156b0541beb48172efa7fef27af inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_api_headers_provider.html">IApiHeadersProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a7e119156b0541beb48172efa7fef27af">ApiHeadersProvider</a><code> [get]</code></td></tr>
<tr class="memdesc:a7e119156b0541beb48172efa7fef27af inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IApiHeadersProvider containing value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a115f271cf58494b63440aa01595f4199" title="The Api.ApiHeaders for the operation.">ApiHeaders</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a7e119156b0541beb48172efa7fef27af">More...</a><br /></td></tr>
<tr class="separator:a7e119156b0541beb48172efa7fef27af inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab687e0fc0cb712708297c0c2b43ca849 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ab687e0fc0cb712708297c0c2b43ca849">DatabaseContext</a><code> [get]</code></td></tr>
<tr class="memdesc:ab687e0fc0cb712708297c0c2b43ca849 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IDatabaseContext for the operation.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ab687e0fc0cb712708297c0c2b43ca849">More...</a><br /></td></tr>
<tr class="separator:ab687e0fc0cb712708297c0c2b43ca849 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37f0d0021bc861bea5444108a4de87d inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#af37f0d0021bc861bea5444108a4de87d">AuthenticationContext</a><code> [get]</code></td></tr>
<tr class="memdesc:af37f0d0021bc861bea5444108a4de87d inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAuthenticationContext for the operation.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#af37f0d0021bc861bea5444108a4de87d">More...</a><br /></td></tr>
<tr class="separator:af37f0d0021bc861bea5444108a4de87d inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5655868c2b2b913046ecf61934ce119 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html">ApiController</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae5655868c2b2b913046ecf61934ce119">Logger</a><code> [get]</code></td></tr>
<tr class="memdesc:ae5655868c2b2b913046ecf61934ce119 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html" title="Base Controller for API functions.">ApiController</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae5655868c2b2b913046ecf61934ce119">More...</a><br /></td></tr>
<tr class="separator:ae5655868c2b2b913046ecf61934ce119 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2deba88552365803bfebb8b9dea492 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memItemLeft" align="right" valign="top">Models.? <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a2c2deba88552365803bfebb8b9dea492">Instance</a><code> [get]</code></td></tr>
<tr class="memdesc:a2c2deba88552365803bfebb8b9dea492 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a2c2deba88552365803bfebb8b9dea492" title="The Instance for the operation.">Instance</a> for the operation.   <a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#a2c2deba88552365803bfebb8b9dea492">More...</a><br /></td></tr>
<tr class="separator:a2c2deba88552365803bfebb8b9dea492 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p ><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html" title="Base Controller for API functions.">ApiController</a> for managing <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Components.Instance</a>s.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00042">42</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a20a97e61a81db44a12e27c18da680ed8" name="a20a97e61a81db44a12e27c18da680ed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20a97e61a81db44a12e27c18da680ed8">&#9670;&#160;</a></span>InstanceController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Controllers.InstanceController.InstanceController </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a>&#160;</td>
          <td class="paramname"><em>databaseContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_authentication_context.html">IAuthenticationContext</a>&#160;</td>
          <td class="paramname"><em>authenticationContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">InstanceController</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html">IInstanceManager</a>&#160;</td>
          <td class="paramname"><em>instanceManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td>
          <td class="paramname"><em>jobManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>ioManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a>&#160;</td>
          <td class="paramname"><em>platformIdentifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html">IPortAllocator</a>&#160;</td>
          <td class="paramname"><em>portAllocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html">IPermissionsUpdateNotifyee</a>&#160;</td>
          <td class="paramname"><em>permissionsUpdateNotifyee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>generalConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>swarmConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_api_headers_provider.html">IApiHeadersProvider</a>&#160;</td>
          <td class="paramname"><em>apiHeaders</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a> class.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">databaseContext</td><td>The IDatabaseContext for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html" title="ApiController for operations on IInstanceCores.">ComponentInterfacingController</a>.</td></tr>
    <tr><td class="paramname">authenticationContext</td><td>The IAuthenticationContext for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html" title="ApiController for operations on IInstanceCores.">ComponentInterfacingController</a>.</td></tr>
    <tr><td class="paramname">logger</td><td>The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html" title="ApiController for operations on IInstanceCores.">ComponentInterfacingController</a>.</td></tr>
    <tr><td class="paramname">instanceManager</td><td>The IInstanceManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html" title="ApiController for operations on IInstanceCores.">ComponentInterfacingController</a>.</td></tr>
    <tr><td class="paramname">jobManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34" title="The IJobManager for the InstanceController.">jobManager</a>.</td></tr>
    <tr><td class="paramname">ioManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd" title="The IIOManager for the InstanceController.">ioManager</a>.</td></tr>
    <tr><td class="paramname">platformIdentifier</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ac62c0b1b0e346409b20c3054d4a8354a" title="The IPlatformIdentifier for the InstanceController.">platformIdentifier</a>.</td></tr>
    <tr><td class="paramname">portAllocator</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5" title="The IPortAllocator for the InstanceController.">portAllocator</a>.</td></tr>
    <tr><td class="paramname">permissionsUpdateNotifyee</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae45aceab65d37ece10acd7eb0fa15b85" title="The IPermissionsUpdateNotifyee for the InstanceController.">permissionsUpdateNotifyee</a>.</td></tr>
    <tr><td class="paramname">generalConfigurationOptions</td><td>The IOptions&lt;TOptions&gt; containing the value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a4f60f72c082a222a31383dbfceb755a6" title="The GeneralConfiguration for the InstanceController.">generalConfiguration</a>.</td></tr>
    <tr><td class="paramname">swarmConfigurationOptions</td><td>The IOptions&lt;TOptions&gt; containing the value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d" title="The SwarmConfiguration for the InstanceController.">swarmConfiguration</a>.</td></tr>
    <tr><td class="paramname">apiHeaders</td><td>The IApiHeadersProvider for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html" title="ApiController for operations on IInstanceCores.">ComponentInterfacingController</a>.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00099">99</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>            : base(</div>
<div class="line"><span class="lineno">  113</span>                  databaseContext,</div>
<div class="line"><span class="lineno">  114</span>                  authenticationContext,</div>
<div class="line"><span class="lineno">  115</span>                  logger,</div>
<div class="line"><span class="lineno">  116</span>                  <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a9a2c4d46ba2467c16b22172a98f1ba35">instanceManager</a>,</div>
<div class="line"><span class="lineno">  117</span>                  apiHeaders,</div>
<div class="line"><span class="lineno">  118</span>                  <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  119</span>        {</div>
<div class="line"><span class="lineno">  120</span>            this.jobManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34">jobManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34">jobManager</a>));</div>
<div class="line"><span class="lineno">  121</span>            this.ioManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>));</div>
<div class="line"><span class="lineno">  122</span>            this.platformIdentifier = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ac62c0b1b0e346409b20c3054d4a8354a">platformIdentifier</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ac62c0b1b0e346409b20c3054d4a8354a">platformIdentifier</a>));</div>
<div class="line"><span class="lineno">  123</span>            this.portAllocator = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">portAllocator</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">portAllocator</a>));</div>
<div class="line"><span class="lineno">  124</span>            this.permissionsUpdateNotifyee = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae45aceab65d37ece10acd7eb0fa15b85">permissionsUpdateNotifyee</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae45aceab65d37ece10acd7eb0fa15b85">permissionsUpdateNotifyee</a>));</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a4f60f72c082a222a31383dbfceb755a6">generalConfiguration</a> = generalConfigurationOptions?.Value ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(generalConfigurationOptions));</div>
<div class="line"><span class="lineno">  127</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a> = swarmConfigurationOptions?.Value ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(swarmConfigurationOptions));</div>
<div class="line"><span class="lineno">  128</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller_html_a9a2c4d46ba2467c16b22172a98f1ba35"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a9a2c4d46ba2467c16b22172a98f1ba35">Tgstation.Server.Host.Controllers.ComponentInterfacingController.instanceManager</a></div><div class="ttdeci">readonly IInstanceManager instanceManager</div><div class="ttdoc">The IInstanceManager for the ComponentInterfacingController.</div><div class="ttdef"><b>Definition:</b> <a href="_component_interfacing_controller_8cs_source.html#l00032">ComponentInterfacingController.cs:32</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_a38f7f9669773242d177345e38be2dd34"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34">Tgstation.Server.Host.Controllers.InstanceController.jobManager</a></div><div class="ttdeci">readonly IJobManager jobManager</div><div class="ttdoc">The IJobManager for the InstanceController.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00052">InstanceController.cs:52</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_a4f60f72c082a222a31383dbfceb755a6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a4f60f72c082a222a31383dbfceb755a6">Tgstation.Server.Host.Controllers.InstanceController.generalConfiguration</a></div><div class="ttdeci">readonly GeneralConfiguration generalConfiguration</div><div class="ttdoc">The GeneralConfiguration for the InstanceController.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00077">InstanceController.cs:77</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_a61dbab212a95b16ad876b7c5f8dd51c5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">Tgstation.Server.Host.Controllers.InstanceController.portAllocator</a></div><div class="ttdeci">readonly IPortAllocator portAllocator</div><div class="ttdoc">The IPortAllocator for the InstanceController.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00067">InstanceController.cs:67</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_a952ce837f434c65e69d35ec886d0fc2d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a></div><div class="ttdeci">readonly SwarmConfiguration swarmConfiguration</div><div class="ttdoc">The SwarmConfiguration for the InstanceController.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00082">InstanceController.cs:82</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_ac62c0b1b0e346409b20c3054d4a8354a"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ac62c0b1b0e346409b20c3054d4a8354a">Tgstation.Server.Host.Controllers.InstanceController.platformIdentifier</a></div><div class="ttdeci">readonly IPlatformIdentifier platformIdentifier</div><div class="ttdoc">The IPlatformIdentifier for the InstanceController.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00062">InstanceController.cs:62</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_ae45aceab65d37ece10acd7eb0fa15b85"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae45aceab65d37ece10acd7eb0fa15b85">Tgstation.Server.Host.Controllers.InstanceController.permissionsUpdateNotifyee</a></div><div class="ttdeci">readonly IPermissionsUpdateNotifyee permissionsUpdateNotifyee</div><div class="ttdoc">The IPermissionsUpdateNotifyee for the InstanceController.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00072">InstanceController.cs:72</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_afb2e4e54c38a97b299d1fb7692cc5cdd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">Tgstation.Server.Host.Controllers.InstanceController.ioManager</a></div><div class="ttdeci">readonly IIOManager ioManager</div><div class="ttdoc">The IIOManager for the InstanceController.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00057">InstanceController.cs:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_controller_8cs_source.html#l00077">Tgstation.Server.Host.Controllers.InstanceController.generalConfiguration</a>, <a class="el" href="_instance_controller_8cs_source.html#l00057">Tgstation.Server.Host.Controllers.InstanceController.ioManager</a>, <a class="el" href="_instance_controller_8cs_source.html#l00052">Tgstation.Server.Host.Controllers.InstanceController.jobManager</a>, <a class="el" href="_instance_controller_8cs_source.html#l00072">Tgstation.Server.Host.Controllers.InstanceController.permissionsUpdateNotifyee</a>, <a class="el" href="_instance_controller_8cs_source.html#l00062">Tgstation.Server.Host.Controllers.InstanceController.platformIdentifier</a>, <a class="el" href="_instance_controller_8cs_source.html#l00067">Tgstation.Server.Host.Controllers.InstanceController.portAllocator</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00082">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae6de3128c5d49b91d7bb8f6f2caf0ed5" name="ae6de3128c5d49b91d7bb8f6f2caf0ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6de3128c5d49b91d7bb8f6f2caf0ed5">&#9670;&#160;</a></span>CheckAccessible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Controllers.InstanceController.CheckAccessible </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_instance_response.html">InstanceResponse</a>&#160;</td>
          <td class="paramname"><em>instanceResponse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Populate the <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_instance_response.html#a86d9a044bcddfe1d99701e62b70b6bd0" title="If the querying user may access this instance.">InstanceResponse.Accessible</a> property of a given <em>instanceResponse</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instanceResponse</td><td>The InstanceResponse to populate.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00812">812</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  813</span>        {</div>
<div class="line"><span class="lineno">  814</span>            instanceResponse.Accessible = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  815</span>                .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a901489c5ed1c32ef2c745ecd93440892">InstancePermissionSets</a></div>
<div class="line"><span class="lineno">  816</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  817</span>                .Where(x =&gt; x.InstanceId == instanceResponse.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a> &amp;&amp; x.PermissionSetId == <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html#a7dd58fdca2eaeb82ceb474bc22b36a47">Id</a>)</div>
<div class="line"><span class="lineno">  818</span>                .AnyAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  819</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id_html_ae31e478e1d338b37a14565df6fd58570"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Tgstation.Server.Api.Models.EntityId.Id</a></div><div class="ttdeci">virtual ? long Id</div><div class="ttdoc">The ID of the entity.</div><div class="ttdef"><b>Definition:</b> <a href="_entity_id_8cs_source.html#l00013">EntityId.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set_html_a7dd58fdca2eaeb82ceb474bc22b36a47"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html#a7dd58fdca2eaeb82ceb474bc22b36a47">Tgstation.Server.Api.Models.PermissionSet.Id</a></div><div class="ttdeci">override? long Id</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00014">PermissionSet.cs:15</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">Tgstation.Server.Host.Database.DatabaseContext</a></div><div class="ttdoc">Backend abstract implementation of IDatabaseContext.</div><div class="ttdef"><b>Definition:</b> <a href="_database_context_8cs_source.html#l00024">DatabaseContext.cs:25</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_a901489c5ed1c32ef2c745ecd93440892"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a901489c5ed1c32ef2c745ecd93440892">Tgstation.Server.Host.Database.DatabaseContext.InstancePermissionSets</a></div><div class="ttdeci">DbSet&lt; InstancePermissionSet &gt; InstancePermissionSets</div><div class="ttdoc">The InstancePermissionSets in the DatabaseContext.</div><div class="ttdef"><b>Definition:</b> <a href="_database_context_8cs_source.html#l00069">DatabaseContext.cs:69</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">Tgstation.Server.Host.Security.AuthenticationContext</a></div><div class="ttdef"><b>Definition:</b> <a href="_authentication_context_8cs_source.html#l00010">AuthenticationContext.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context_html_acfb9937bf37b839f1d60289129c5ea77"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">Tgstation.Server.Host.Security.AuthenticationContext.PermissionSet</a></div><div class="ttdeci">PermissionSet PermissionSet</div><div class="ttdoc">The User's effective PermissionSet.</div><div class="ttdef"><b>Definition:</b> <a href="_authentication_context_8cs_source.html#l00019">AuthenticationContext.cs:19</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_entity_id_8cs_source.html#l00013">Tgstation.Server.Api.Models.EntityId.Id</a>, <a class="el" href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00015">Tgstation.Server.Api.Models.PermissionSet.Id</a>, <a class="el" href="_database_context_8cs_source.html#l00069">Tgstation.Server.Host.Database.DatabaseContext.InstancePermissionSets</a>, and <a class="el" href="_authentication_context_8cs_source.html#l00019">Tgstation.Server.Host.Security.AuthenticationContext.PermissionSet</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00591">Tgstation.Server.Host.Controllers.InstanceController.GetId()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00523">Tgstation.Server.Host.Controllers.InstanceController.List()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00323">Tgstation.Server.Host.Controllers.InstanceController.Update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ae6de3128c5d49b91d7bb8f6f2caf0ed5_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ae6de3128c5d49b91d7bb8f6f2caf0ed5_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ae6de3128c5d49b91d7bb8f6f2caf0ed5_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ae6de3128c5d49b91d7bb8f6f2caf0ed5_icgraph">
<area shape="rect" title="Populate the InstanceResponse.Accessible property of a given instanceResponse ." alt="" coords="269,69,500,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a16d88c0b757913b42934e82312434633" title="Get a specific Api.Models.Instance." alt="" coords="5,5,221,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a98360d756afee2844b21b0936cc050cc" title="List Api.Models.Instances." alt="" coords="5,69,221,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a709c5985e78cdb8bde3f705869ddafb9" title="Modify an Api.Models.Instance&#39;s settings." alt="" coords="5,133,221,173"/>
</map>
</div>

</div>
</div>
<a id="ab462ce6aa240b963c67cab7d20927060" name="ab462ce6aa240b963c67cab7d20927060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab462ce6aa240b963c67cab7d20927060">&#9670;&#160;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; IActionResult &gt; Tgstation.Server.Host.Controllers.InstanceController.Create </td>
          <td>(</td>
          <td class="paramtype">[FromBody] <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_instance_create_request.html">InstanceCreateRequest</a>&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create or attach an <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>The InstanceCreateRequest.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the IActionResult of the request.</dd></dl>
<p>&lt;response code="200"&gt;Instance attached successfully.&lt;/response&gt; &lt;response code="201"&gt;Instance created successfully.&lt;/response&gt; </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00142">142</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  143</span>        {</div>
<div class="line"><span class="lineno">  144</span>            ArgumentNullException.ThrowIfNull(model);</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>            <span class="keywordflow">if</span> (String.IsNullOrWhiteSpace(model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity.html#a7e2f2eeddbc6315acbcfa00c54762183">Name</a>) || String.IsNullOrWhiteSpace(model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318">Path</a>))</div>
<div class="line"><span class="lineno">  147</span>                <span class="keywordflow">return</span> BadRequest(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceWhitespaceNameOrPath));</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>            IActionResult? earlyOut = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a5b38d5cba6df39071299a0d0c5e71a6d">ValidateCronSetting</a>(model);</div>
<div class="line"><span class="lineno">  150</span>            <span class="keywordflow">if</span> (earlyOut != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  151</span>                <span class="keywordflow">return</span> earlyOut;</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>            var targetInstancePath = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a600268a32d5da87b3c80f97d34319366">NormalizePath</a>(model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318">Path</a>!);</div>
<div class="line"><span class="lineno">  154</span>            model.Path = targetInstancePath;</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>            var installationDirectoryPath = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html">DefaultIOManager</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html#a984a32ee93a073036f63d543ad9a6cdd">CurrentDirectory</a>;</div>
<div class="line"><span class="lineno">  157</span>            <span class="keywordflow">if</span> (await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">PathIsChildOf</a>(installationDirectoryPath, targetInstancePath, cancellationToken))</div>
<div class="line"><span class="lineno">  158</span>                <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceAtConflictingPath));</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>            <span class="comment">// Validate it&#39;s not a child of any other instance</span></div>
<div class="line"><span class="lineno">  161</span>            var instancePaths = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  162</span>                .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a></div>
<div class="line"><span class="lineno">  163</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  164</span>                .Where(x =&gt; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>)</div>
<div class="line"><span class="lineno">  165</span>                .Select(x =&gt; <span class="keyword">new</span> Models.Instance</div>
<div class="line"><span class="lineno">  166</span>                {</div>
<div class="line"><span class="lineno">  167</span>                    Path = x.Path,</div>
<div class="line"><span class="lineno">  168</span>                })</div>
<div class="line"><span class="lineno">  169</span>                .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>            <span class="keywordflow">if</span> ((instancePaths.Count + 1) &gt;= <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a4f60f72c082a222a31383dbfceb755a6">generalConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base.html#af1beb234779e0c00a3d62fa62f2b177e">InstanceLimit</a>)</div>
<div class="line"><span class="lineno">  172</span>                <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceLimitReached));</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>            var instancePathChecks = instancePaths</div>
<div class="line"><span class="lineno">  175</span>                .Select(otherInstance =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">PathIsChildOf</a>(otherInstance.Path!, targetInstancePath, cancellationToken))</div>
<div class="line"><span class="lineno">  176</span>                .ToArray();</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>            await Task.WhenAll(instancePathChecks);</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>            <span class="keywordflow">if</span> (instancePathChecks.Any(task =&gt; task.Result))</div>
<div class="line"><span class="lineno">  181</span>                <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceAtConflictingPath));</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>            <span class="comment">// Last test, ensure it&#39;s in the list of valid paths</span></div>
<div class="line"><span class="lineno">  184</span>            var pathChecks = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a4f60f72c082a222a31383dbfceb755a6">generalConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base.html#ad8ba8b8ed402cdd46777277b8105d5b0">ValidInstancePaths</a>?</div>
<div class="line"><span class="lineno">  185</span>                .Select(path =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">PathIsChildOf</a>(path, targetInstancePath, cancellationToken))</div>
<div class="line"><span class="lineno">  186</span>                .ToArray()</div>
<div class="line"><span class="lineno">  187</span>                ?? Enumerable.Empty&lt;Task&lt;bool&gt;&gt;();</div>
<div class="line"><span class="lineno">  188</span>            await Task.WhenAll(pathChecks);</div>
<div class="line"><span class="lineno">  189</span>            <span class="keywordflow">if</span> (!pathChecks.All(task =&gt; task.Result))</div>
<div class="line"><span class="lineno">  190</span>                <span class="keywordflow">return</span> BadRequest(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceNotAtWhitelistedPath));</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>            async ValueTask&lt;bool&gt; DirExistsAndIsNotEmpty()</div>
<div class="line"><span class="lineno">  193</span>            {</div>
<div class="line"><span class="lineno">  194</span>                <span class="keywordflow">if</span> (!await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa">DirectoryExists</a>(targetInstancePath, cancellationToken))</div>
<div class="line"><span class="lineno">  195</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>                var filesTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0749e071c50bd39000bb7db1d02fc2e3">GetFiles</a>(targetInstancePath, cancellationToken);</div>
<div class="line"><span class="lineno">  198</span>                var dirsTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a39ebf958ad54ba63a6b74a1d4d75a6f2">GetDirectories</a>(targetInstancePath, cancellationToken);</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>                var files = await filesTask;</div>
<div class="line"><span class="lineno">  201</span>                var dirs = await dirsTask;</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>                <span class="keywordflow">return</span> files.Concat(dirs).Any();</div>
<div class="line"><span class="lineno">  204</span>            }</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>            var dirExistsTask = DirExistsAndIsNotEmpty();</div>
<div class="line"><span class="lineno">  207</span>            <span class="keywordtype">bool</span> attached = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  208</span>            <span class="keywordflow">if</span> (await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">FileExists</a>(targetInstancePath, cancellationToken) || await dirExistsTask)</div>
<div class="line"><span class="lineno">  209</span>                <span class="keywordflow">if</span> (!await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">FileExists</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(targetInstancePath, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">InstanceAttachFileName</a>), cancellationToken))</div>
<div class="line"><span class="lineno">  210</span>                    <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceAtExistingPath));</div>
<div class="line"><span class="lineno">  211</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  212</span>                    attached = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>            var newInstance = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a02be01c6c5cab421a7a0c9f01f213b30">CreateDefaultInstance</a>(model, cancellationToken);</div>
<div class="line"><span class="lineno">  215</span>            <span class="keywordflow">if</span> (newInstance == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  216</span>                <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.NoPortsAvailable));</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a>.Add(newInstance);</div>
<div class="line"><span class="lineno">  219</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  220</span>            {</div>
<div class="line"><span class="lineno">  221</span>                await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  224</span>                {</div>
<div class="line"><span class="lineno">  225</span>                    <span class="comment">// actually reserve it now</span></div>
<div class="line"><span class="lineno">  226</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">CreateDirectory</a>(targetInstancePath, cancellationToken);</div>
<div class="line"><span class="lineno">  227</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a6ca322ea63f5693487917c1ee71c707a">DeleteFile</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(targetInstancePath, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">InstanceAttachFileName</a>), cancellationToken);</div>
<div class="line"><span class="lineno">  228</span>                }</div>
<div class="line"><span class="lineno">  229</span>                <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  230</span>                {</div>
<div class="line"><span class="lineno">  231</span>                    <span class="comment">// oh shit delete the model</span></div>
<div class="line"><span class="lineno">  232</span>                    <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a>.Remove(newInstance);</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>                    <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  235</span>                    await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(CancellationToken.None);</div>
<div class="line"><span class="lineno">  236</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  237</span>                }</div>
<div class="line"><span class="lineno">  238</span>            }</div>
<div class="line"><span class="lineno">  239</span>            <span class="keywordflow">catch</span> (IOException e)</div>
<div class="line"><span class="lineno">  240</span>            {</div>
<div class="line"><span class="lineno">  241</span>                <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.IOError)</div>
<div class="line"><span class="lineno">  242</span>                {</div>
<div class="line"><span class="lineno">  243</span>                    AdditionalData = e.Message,</div>
<div class="line"><span class="lineno">  244</span>                });</div>
<div class="line"><span class="lineno">  245</span>            }</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae5655868c2b2b913046ecf61934ce119">Logger</a>.LogInformation(</div>
<div class="line"><span class="lineno">  248</span>                <span class="stringliteral">&quot;{userName} {attachedOrCreated} instance {instanceName}: {instanceId} ({instancePath})&quot;</span>,</div>
<div class="line"><span class="lineno">  249</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#a0846ac9679599a99923987863edb0d5c">User</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_user_name.html#a74805e22cab51569d1d1aa098d62c9d3">Name</a>,</div>
<div class="line"><span class="lineno">  250</span>                attached ? <span class="stringliteral">&quot;attached&quot;</span> : <span class="stringliteral">&quot;created&quot;</span>,</div>
<div class="line"><span class="lineno">  251</span>                newInstance.Name,</div>
<div class="line"><span class="lineno">  252</span>                newInstance.Id,</div>
<div class="line"><span class="lineno">  253</span>                newInstance.Path);</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae45aceab65d37ece10acd7eb0fa15b85">permissionsUpdateNotifyee</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html#af74918a720028e721b99f9947fe9fc76">InstancePermissionSetCreated</a>(</div>
<div class="line"><span class="lineno">  256</span>                newInstance.InstancePermissionSets.First(),</div>
<div class="line"><span class="lineno">  257</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>            var api = newInstance.ToApi();</div>
<div class="line"><span class="lineno">  260</span>            api.Accessible = <span class="keyword">true</span>; <span class="comment">// instances are always accessible by their creator</span></div>
<div class="line"><span class="lineno">  261</span>            <span class="keywordflow">return</span> attached ? Json(api) : <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae0fcee33c7b7341bc3bf0c0e66e1ebf4">Created</a>(api);</div>
<div class="line"><span class="lineno">  262</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html_a833e5307625344be5429bcccca5b4318"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318">Tgstation.Server.Api.Models.Instance.Path</a></div><div class="ttdeci">string? Path</div><div class="ttdoc">The path to where the Instance is located. Can only be changed while the Instance is offline....</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00015">Instance.cs:15</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base_html_ad8ba8b8ed402cdd46777277b8105d5b0"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base.html#ad8ba8b8ed402cdd46777277b8105d5b0">Tgstation.Server.Api.Models.Internal.ServerInformationBase.ValidInstancePaths</a></div><div class="ttdeci">ICollection&lt; string &gt;? ValidInstancePaths</div><div class="ttdoc">Limits the locations instances may be created or attached from.</div><div class="ttdef"><b>Definition:</b> <a href="_server_information_base_8cs_source.html#l00034">ServerInformationBase.cs:34</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base_html_af1beb234779e0c00a3d62fa62f2b177e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base.html#af1beb234779e0c00a3d62fa62f2b177e">Tgstation.Server.Api.Models.Internal.ServerInformationBase.InstanceLimit</a></div><div class="ttdeci">uint InstanceLimit</div><div class="ttdoc">The maximum number of Instances allowed.</div><div class="ttdef"><b>Definition:</b> <a href="_server_information_base_8cs_source.html#l00018">ServerInformationBase.cs:18</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server_html_af98e4f47f1aa632ead02ed80695ce836"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a></div><div class="ttdeci">string? Identifier</div><div class="ttdoc">The server's identifier.</div><div class="ttdef"><b>Definition:</b> <a href="_swarm_server_8cs_source.html#l00026">SwarmServer.cs:26</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity_html_a7e2f2eeddbc6315acbcfa00c54762183"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity.html#a7e2f2eeddbc6315acbcfa00c54762183">Tgstation.Server.Api.Models.NamedEntity.Name</a></div><div class="ttdeci">virtual ? string Name</div><div class="ttdoc">The name of the entity represented by the NamedEntity.</div><div class="ttdef"><b>Definition:</b> <a href="_named_entity_8cs_source.html#l00016">NamedEntity.cs:16</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">Tgstation.Server.Api.Models.Response.ErrorMessageResponse</a></div><div class="ttdoc">Represents an error message returned by the server.</div><div class="ttdef"><b>Definition:</b> <a href="_error_message_response_8cs_source.html#l00011">ErrorMessageResponse.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_user_name_html_a74805e22cab51569d1d1aa098d62c9d3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_user_name.html#a74805e22cab51569d1d1aa098d62c9d3">Tgstation.Server.Api.Models.UserName.Name</a></div><div class="ttdeci">override? string Name</div><div class="ttdef"><b>Definition:</b> <a href="_user_name_8cs_source.html#l00010">UserName.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_html_ae0fcee33c7b7341bc3bf0c0e66e1ebf4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae0fcee33c7b7341bc3bf0c0e66e1ebf4">Tgstation.Server.Host.Controllers.ApiController.Created</a></div><div class="ttdeci">ObjectResult Created(object payload)</div><div class="ttdoc">Generic 201 response with a given payload .</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller_html_ae5655868c2b2b913046ecf61934ce119"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae5655868c2b2b913046ecf61934ce119">Tgstation.Server.Host.Controllers.ApiController.Logger</a></div><div class="ttdeci">ILogger&lt; ApiController &gt; Logger</div><div class="ttdoc">The ILogger for the ApiController.</div><div class="ttdef"><b>Definition:</b> <a href="_api_controller_8cs_source.html#l00071">ApiController.cs:71</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_a02be01c6c5cab421a7a0c9f01f213b30"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a02be01c6c5cab421a7a0c9f01f213b30">Tgstation.Server.Host.Controllers.InstanceController.CreateDefaultInstance</a></div><div class="ttdeci">async ValueTask&lt; Models.Instance?&gt; CreateDefaultInstance(InstanceCreateRequest initialSettings, CancellationToken cancellationToken)</div><div class="ttdoc">Creates a default Models.Instance from initialSettings .</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00688">InstanceController.cs:688</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_a5b38d5cba6df39071299a0d0c5e71a6d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a5b38d5cba6df39071299a0d0c5e71a6d">Tgstation.Server.Host.Controllers.InstanceController.ValidateCronSetting</a></div><div class="ttdeci">BadRequestObjectResult? ValidateCronSetting(Api.Models.Instance instance)</div><div class="ttdoc">Validates a given instance 's Api.Models.Instance.AutoUpdateCron setting.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00826">InstanceController.cs:826</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_a600268a32d5da87b3c80f97d34319366"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a600268a32d5da87b3c80f97d34319366">Tgstation.Server.Host.Controllers.InstanceController.NormalizePath</a></div><div class="ttdeci">string? NormalizePath(string? path)</div><div class="ttdoc">Normalize a given path  for an instance.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00795">InstanceController.cs:795</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_aa40d55750e2193d714eb1470505c47ee"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a></div><div class="ttdeci">const string InstanceAttachFileName</div><div class="ttdoc">File name to allow attaching instances.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00047">InstanceController.cs:47</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_a1bc257ebf1d31bfba7f665d61da5c4a2"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Tgstation.Server.Host.Database.DatabaseContext.Instances</a></div><div class="ttdeci">DbSet&lt; Instance &gt; Instances</div><div class="ttdoc">The Instances in the DatabaseContext.</div><div class="ttdef"><b>Definition:</b> <a href="_database_context_8cs_source.html#l00034">DatabaseContext.cs:34</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_ac2e88d53bf1b6ac87d175d83ed39da7c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save</a></div><div class="ttdeci">Task Save(CancellationToken cancellationToken)</div><div class="ttdoc">Saves changes made to the IDatabaseContext. A Task representing the running operation.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html">Tgstation.Server.Host.IO.DefaultIOManager</a></div><div class="ttdoc">IIOManager that resolves paths to Environment.CurrentDirectory.</div><div class="ttdef"><b>Definition:</b> <a href="_default_i_o_manager_8cs_source.html#l00016">DefaultIOManager.cs:17</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager_html_a984a32ee93a073036f63d543ad9a6cdd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html#a984a32ee93a073036f63d543ad9a6cdd">Tgstation.Server.Host.IO.DefaultIOManager.CurrentDirectory</a></div><div class="ttdeci">const string CurrentDirectory</div><div class="ttdoc">Path to the current working directory for the IIOManager.</div><div class="ttdef"><b>Definition:</b> <a href="_default_i_o_manager_8cs_source.html#l00021">DefaultIOManager.cs:21</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context_html_a0846ac9679599a99923987863edb0d5c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#a0846ac9679599a99923987863edb0d5c">Tgstation.Server.Host.Security.AuthenticationContext.User</a></div><div class="ttdeci">User User</div><div class="ttdoc">The authenticated user.</div><div class="ttdef"><b>Definition:</b> <a href="_authentication_context_8cs_source.html#l00016">AuthenticationContext.cs:16</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a0749e071c50bd39000bb7db1d02fc2e3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0749e071c50bd39000bb7db1d02fc2e3">Tgstation.Server.Host.IO.IIOManager.GetFiles</a></div><div class="ttdeci">Task&lt; IReadOnlyList&lt; string &gt; &gt; GetFiles(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Returns full file names in a given path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a0d9526a8d840f2c00cb203bdebdcb994"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">Tgstation.Server.Host.IO.IIOManager.PathIsChildOf</a></div><div class="ttdeci">Task&lt; bool &gt; PathIsChildOf(string parentPath, string childPath, CancellationToken cancellationToken)</div><div class="ttdoc">Check if a given parentPath  is a parent of a given parentPath .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a39ebf958ad54ba63a6b74a1d4d75a6f2"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a39ebf958ad54ba63a6b74a1d4d75a6f2">Tgstation.Server.Host.IO.IIOManager.GetDirectories</a></div><div class="ttdeci">Task&lt; IReadOnlyList&lt; string &gt; &gt; GetDirectories(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Returns full directory names in a given path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a69aa1b9dbeb6af3744e568095c4376e7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">Tgstation.Server.Host.IO.IIOManager.CreateDirectory</a></div><div class="ttdeci">Task CreateDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Create a directory at path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a6ca322ea63f5693487917c1ee71c707a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a6ca322ea63f5693487917c1ee71c707a">Tgstation.Server.Host.IO.IIOManager.DeleteFile</a></div><div class="ttdeci">Task DeleteFile(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Deletes a file at path .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad4de873180481f7afa206b6282158d62"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">Tgstation.Server.Host.IO.IIOManager.FileExists</a></div><div class="ttdeci">Task&lt; bool &gt; FileExists(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Check that the file at path  exists.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_aeae08438da658a3c0afddbb7960e4faa"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa">Tgstation.Server.Host.IO.IIOManager.DirectoryExists</a></div><div class="ttdeci">Task&lt; bool &gt; DirectoryExists(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Check that the directory at path  exists.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee_html_af74918a720028e721b99f9947fe9fc76"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html#af74918a720028e721b99f9947fe9fc76">Tgstation.Server.Host.Security.IPermissionsUpdateNotifyee.InstancePermissionSetCreated</a></div><div class="ttdeci">ValueTask InstancePermissionSetCreated(InstancePermissionSet instancePermissionSet, CancellationToken cancellationToken)</div><div class="ttdoc">Called when a given instancePermissionSet  is successfully created.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a1a6adb59dd51244efabf4e548e7075c8"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">Tgstation.Server.Api.Models.ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Types of Response.ErrorMessageResponses that the API may return.</div><div class="ttdef"><b>Definition:</b> <a href="_error_code_8cs_source.html#l00011">ErrorCode.cs:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae0fcee33c7b7341bc3bf0c0e66e1ebf4">Tgstation.Server.Host.Controllers.ApiController.Created()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00688">Tgstation.Server.Host.Controllers.InstanceController.CreateDefaultInstance()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">Tgstation.Server.Host.IO.IIOManager.CreateDirectory()</a>, <a class="el" href="_default_i_o_manager_8cs_source.html#l00021">Tgstation.Server.Host.IO.DefaultIOManager.CurrentDirectory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a6ca322ea63f5693487917c1ee71c707a">Tgstation.Server.Host.IO.IIOManager.DeleteFile()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa">Tgstation.Server.Host.IO.IIOManager.DirectoryExists()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">Tgstation.Server.Host.IO.IIOManager.FileExists()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00077">Tgstation.Server.Host.Controllers.InstanceController.generalConfiguration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a39ebf958ad54ba63a6b74a1d4d75a6f2">Tgstation.Server.Host.IO.IIOManager.GetDirectories()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0749e071c50bd39000bb7db1d02fc2e3">Tgstation.Server.Host.IO.IIOManager.GetFiles()</a>, <a class="el" href="_swarm_server_8cs_source.html#l00026">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_instance_controller_8cs_source.html#l00047">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a>, <a class="el" href="_server_information_base_8cs_source.html#l00018">Tgstation.Server.Api.Models.Internal.ServerInformationBase.InstanceLimit</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html#af74918a720028e721b99f9947fe9fc76">Tgstation.Server.Host.Security.IPermissionsUpdateNotifyee.InstancePermissionSetCreated()</a>, <a class="el" href="_database_context_8cs_source.html#l00034">Tgstation.Server.Host.Database.DatabaseContext.Instances</a>, <a class="el" href="_instance_controller_8cs_source.html#l00057">Tgstation.Server.Host.Controllers.InstanceController.ioManager</a>, <a class="el" href="_api_controller_8cs_source.html#l00071">Tgstation.Server.Host.Controllers.ApiController.Logger</a>, <a class="el" href="_user_name_8cs_source.html#l00011">Tgstation.Server.Api.Models.UserName.Name</a>, <a class="el" href="_instance_controller_8cs_source.html#l00795">Tgstation.Server.Host.Controllers.InstanceController.NormalizePath()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994">Tgstation.Server.Host.IO.IIOManager.PathIsChildOf()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00072">Tgstation.Server.Host.Controllers.InstanceController.permissionsUpdateNotifyee</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00082">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a>, <a class="el" href="_authentication_context_8cs_source.html#l00016">Tgstation.Server.Host.Security.AuthenticationContext.User</a>, <a class="el" href="_instance_controller_8cs_source.html#l00826">Tgstation.Server.Host.Controllers.InstanceController.ValidateCronSetting()</a>, and <a class="el" href="_server_information_base_8cs_source.html#l00034">Tgstation.Server.Api.Models.Internal.ServerInformationBase.ValidInstancePaths</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ab462ce6aa240b963c67cab7d20927060_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ab462ce6aa240b963c67cab7d20927060_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ab462ce6aa240b963c67cab7d20927060_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ab462ce6aa240b963c67cab7d20927060_cgraph">
<area shape="rect" title="Create or attach an Api.Models.Instance." alt="" coords="5,421,221,461"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="315,5,483,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae0fcee33c7b7341bc3bf0c0e66e1ebf4" title="Generic 201 response with a given payload ." alt="" coords="291,69,507,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a02be01c6c5cab421a7a0c9f01f213b30" title="Creates a default Models.Instance from initialSettings ." alt="" coords="269,133,528,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="307,197,490,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a6ca322ea63f5693487917c1ee71c707a" title="Deletes a file at path ." alt="" coords="315,261,483,301"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa" title="Check that the directory at path &#160;exists." alt="" coords="309,325,488,365"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62" title="Check that the file at path &#160;exists." alt="" coords="315,389,483,429"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a39ebf958ad54ba63a6b74a1d4d75a6f2" title="Returns full directory names in a given path ." alt="" coords="311,453,487,493"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0749e071c50bd39000bb7db1d02fc2e3" title="Returns full file names in a given path ." alt="" coords="315,517,483,557"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html#af74918a720028e721b99f9947fe9fc76" title="Called when a given instancePermissionSet &#160;is successfully created." alt="" coords="278,582,519,637"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a600268a32d5da87b3c80f97d34319366" title="Normalize a given path &#160;for an instance." alt="" coords="291,661,507,701"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a0d9526a8d840f2c00cb203bdebdcb994" title="Check if a given parentPath &#160;is a parent of a given parentPath ." alt="" coords="311,725,486,765"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c" title="Saves changes made to the IDatabaseContext. A Task representing the running operation." alt="" coords="294,789,503,829"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a5b38d5cba6df39071299a0d0c5e71a6d" title="Validates a given instance &#39;s Api.Models.Instance.AutoUpdateCron setting." alt="" coords="276,853,521,893"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html#a5a1124502330220abb9c651d8154499f" title="Gets a port not currently in use by TGS." alt="" coords="626,101,829,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960" title="Generate an InstancePermissionSet with full rights." alt="" coords="576,165,879,205"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#a885378549e2e71bda33b550c252e6098" title="Normalize a path for consistency." alt="" coords="621,629,833,669"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="643,693,811,733"/>
</map>
</div>

</div>
</div>
<a id="a02be01c6c5cab421a7a0c9f01f213b30" name="a02be01c6c5cab421a7a0c9f01f213b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02be01c6c5cab421a7a0c9f01f213b30">&#9670;&#160;</a></span>CreateDefaultInstance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a>?&gt; Tgstation.Server.Host.Controllers.InstanceController.CreateDefaultInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_instance_create_request.html">InstanceCreateRequest</a>&#160;</td>
          <td class="paramname"><em>initialSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a default <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> from <em>initialSettings</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initialSettings</td><td>The InstanceCreateRequest.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the new <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> or <code>null</code> if ports could not be allocated.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00688">688</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  689</span>        {</div>
<div class="line"><span class="lineno">  690</span>            var ddPort = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">portAllocator</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html#a5a1124502330220abb9c651d8154499f">GetAvailablePort</a>(1024, <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  691</span>            <span class="keywordflow">if</span> (!ddPort.HasValue)</div>
<div class="line"><span class="lineno">  692</span>                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>            <span class="comment">// try to use the old default if possible</span></div>
<div class="line"><span class="lineno">  695</span>            <span class="keyword">const</span> ushort DefaultDreamDaemonPort = 1337;</div>
<div class="line"><span class="lineno">  696</span>            <span class="keywordflow">if</span> (ddPort.Value &lt; DefaultDreamDaemonPort)</div>
<div class="line"><span class="lineno">  697</span>                ddPort = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">portAllocator</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html#a5a1124502330220abb9c651d8154499f">GetAvailablePort</a>(DefaultDreamDaemonPort, <span class="keyword">false</span>, cancellationToken) ?? ddPort;</div>
<div class="line"><span class="lineno">  698</span> </div>
<div class="line"><span class="lineno">  699</span>            <span class="keyword">const</span> ushort DefaultApiValidationPort = 1339;</div>
<div class="line"><span class="lineno">  700</span>            var dmPort = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">portAllocator</a></div>
<div class="line"><span class="lineno">  701</span>                .<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html#a5a1124502330220abb9c651d8154499f">GetAvailablePort</a>(</div>
<div class="line"><span class="lineno">  702</span>                    Math.Min((ushort)(ddPort.Value + 1), DefaultApiValidationPort),</div>
<div class="line"><span class="lineno">  703</span>                    <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  704</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  705</span>            <span class="keywordflow">if</span> (!dmPort.HasValue)</div>
<div class="line"><span class="lineno">  706</span>                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>            <span class="comment">// try to use the old default if possible</span></div>
<div class="line"><span class="lineno">  709</span>            <span class="keywordflow">if</span> (dmPort &lt; DefaultApiValidationPort)</div>
<div class="line"><span class="lineno">  710</span>                dmPort = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a61dbab212a95b16ad876b7c5f8dd51c5">portAllocator</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html#a5a1124502330220abb9c651d8154499f">GetAvailablePort</a>(DefaultApiValidationPort, <span class="keyword">false</span>, cancellationToken) ?? dmPort;</div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Models.Instance</a></div>
<div class="line"><span class="lineno">  713</span>            {</div>
<div class="line"><span class="lineno">  714</span>                <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ab7bc96f211e450615be8669d10de2440">ConfigurationType</a> = initialSettings.ConfigurationType ?? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ab7bc96f211e450615be8669d10de2440">ConfigurationType</a>.Disallowed,</div>
<div class="line"><span class="lineno">  715</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_dream_daemon_settings.html">DreamDaemonSettings</a> = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_dream_daemon_settings.html">DreamDaemonSettings</a></div>
<div class="line"><span class="lineno">  716</span>                {</div>
<div class="line"><span class="lineno">  717</span>                    AllowWebClient = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  718</span>                    AutoStart = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  719</span>                    Port = ddPort,</div>
<div class="line"><span class="lineno">  720</span>                    OpenDreamTopicPort = 0,</div>
<div class="line"><span class="lineno">  721</span>                    SecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Safe,</div>
<div class="line"><span class="lineno">  722</span>                    Visibility = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a2ca30004669a0f022b39b67d21ac976c">DreamDaemonVisibility</a>.Public,</div>
<div class="line"><span class="lineno">  723</span>                    StartupTimeout = 60,</div>
<div class="line"><span class="lineno">  724</span>                    HealthCheckSeconds = 60,</div>
<div class="line"><span class="lineno">  725</span>                    DumpOnHealthCheckRestart = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  726</span>                    TopicRequestTimeout = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a4f60f72c082a222a31383dbfceb755a6">generalConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a51431792c5538add1bdad55e499a4971">ByondTopicTimeout</a>,</div>
<div class="line"><span class="lineno">  727</span>                    AdditionalParameters = String.Empty,</div>
<div class="line"><span class="lineno">  728</span>                    StartProfiler = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  729</span>                    LogOutput = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  730</span>                    MapThreads = 0,</div>
<div class="line"><span class="lineno">  731</span>                    Minidumps = <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  732</span>                },</div>
<div class="line"><span class="lineno">  733</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_dream_maker_settings.html">DreamMakerSettings</a> = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_dream_maker_settings.html">DreamMakerSettings</a></div>
<div class="line"><span class="lineno">  734</span>                {</div>
<div class="line"><span class="lineno">  735</span>                    ApiValidationPort = dmPort,</div>
<div class="line"><span class="lineno">  736</span>                    ApiValidationSecurityLevel = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">DreamDaemonSecurity</a>.Safe,</div>
<div class="line"><span class="lineno">  737</span>                    RequireDMApiValidation = <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  738</span>                    Timeout = TimeSpan.FromHours(1),</div>
<div class="line"><span class="lineno">  739</span>                    CompilerAdditionalArguments = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  740</span>                },</div>
<div class="line"><span class="lineno">  741</span>                Name = initialSettings.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity.html#a7e2f2eeddbc6315acbcfa00c54762183">Name</a>,</div>
<div class="line"><span class="lineno">  742</span>                Online = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  743</span>                Path = initialSettings.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318">Path</a>,</div>
<div class="line"><span class="lineno">  744</span>                AutoUpdateInterval = initialSettings.AutoUpdateInterval ?? 0,</div>
<div class="line"><span class="lineno">  745</span>                AutoUpdateCron = initialSettings.AutoUpdateCron ?? String.Empty,</div>
<div class="line"><span class="lineno">  746</span>                ChatBotLimit = initialSettings.ChatBotLimit ?? Models.Instance.DefaultChatBotLimit,</div>
<div class="line"><span class="lineno">  747</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_repository_settings.html">RepositorySettings</a> = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_repository_settings.html">RepositorySettings</a></div>
<div class="line"><span class="lineno">  748</span>                {</div>
<div class="line"><span class="lineno">  749</span>                    CommitterEmail = Components.Repository.Repository.DefaultCommitterEmail,</div>
<div class="line"><span class="lineno">  750</span>                    CommitterName = Components.Repository.Repository.DefaultCommitterName,</div>
<div class="line"><span class="lineno">  751</span>                    PushTestMergeCommits = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  752</span>                    ShowTestMergeCommitters = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  753</span>                    AutoUpdatesKeepTestMerges = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  754</span>                    AutoUpdatesSynchronize = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  755</span>                    PostTestMergeComment = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  756</span>                    CreateGitHubDeployments = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  757</span>                    UpdateSubmodules = <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  758</span>                },</div>
<div class="line"><span class="lineno">  759</span>                InstancePermissionSets = <span class="keyword">new</span> List&lt;InstancePermissionSet&gt; <span class="comment">// give this user full privileges on the instance</span></div>
<div class="line"><span class="lineno">  760</span>                {</div>
<div class="line"><span class="lineno">  761</span>                    <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960">InstanceAdminPermissionSet</a>(<span class="keyword">null</span>),</div>
<div class="line"><span class="lineno">  762</span>                },</div>
<div class="line"><span class="lineno">  763</span>                SwarmIdentifer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>,</div>
<div class="line"><span class="lineno">  764</span>            };</div>
<div class="line"><span class="lineno">  765</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Tgstation.Server.Api.Models.Instance</a></div><div class="ttdoc">Metadata about a server instance.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00008">Instance.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration_html_a51431792c5538add1bdad55e499a4971"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a51431792c5538add1bdad55e499a4971">Tgstation.Server.Host.Configuration.GeneralConfiguration.ByondTopicTimeout</a></div><div class="ttdeci">uint ByondTopicTimeout</div><div class="ttdoc">The timeout in milliseconds for sending and receiving topics to/from DreamDaemon. Note that a single ...</div><div class="ttdef"><b>Definition:</b> <a href="_general_configuration_8cs_source.html#l00105">GeneralConfiguration.cs:105</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_a7505e585db1c6dd7fffda95599994960"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960">Tgstation.Server.Host.Controllers.InstanceController.InstanceAdminPermissionSet</a></div><div class="ttdeci">InstancePermissionSet InstanceAdminPermissionSet(InstancePermissionSet? permissionSetToModify)</div><div class="ttdoc">Generate an InstancePermissionSet with full rights.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00772">InstanceController.cs:772</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_dream_daemon_settings_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_dream_daemon_settings.html">Tgstation.Server.Host.Models.DreamDaemonSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_host_2_models_2_dream_daemon_settings_8cs_source.html#l00006">DreamDaemonSettings.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_dream_maker_settings_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_dream_maker_settings.html">Tgstation.Server.Host.Models.DreamMakerSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_host_2_models_2_dream_maker_settings_8cs_source.html#l00008">DreamMakerSettings.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_repository_settings_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_repository_settings.html">Tgstation.Server.Host.Models.RepositorySettings</a></div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_host_2_models_2_repository_settings_8cs_source.html#l00008">RepositorySettings.cs:9</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator_html_a5a1124502330220abb9c651d8154499f"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html#a5a1124502330220abb9c651d8154499f">Tgstation.Server.Host.Utils.IPortAllocator.GetAvailablePort</a></div><div class="ttdeci">ValueTask&lt; ushort?&gt; GetAvailablePort(ushort basePort, bool checkOne, CancellationToken cancellationToken)</div><div class="ttdoc">Gets a port not currently in use by TGS.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a2ca30004669a0f022b39b67d21ac976c"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a2ca30004669a0f022b39b67d21ac976c">Tgstation.Server.Api.Models.DreamDaemonVisibility</a></div><div class="ttdeci">DreamDaemonVisibility</div><div class="ttdoc">The visibility setting for DreamDaemon.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_visibility_8cs_source.html#l00006">DreamDaemonVisibility.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_ab7bc96f211e450615be8669d10de2440"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ab7bc96f211e450615be8669d10de2440">Tgstation.Server.Api.Models.ConfigurationType</a></div><div class="ttdeci">ConfigurationType</div><div class="ttdoc">The type of configuration allowed on an Instance.</div><div class="ttdef"><b>Definition:</b> <a href="_configuration_type_8cs_source.html#l00006">ConfigurationType.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_ad4850e6b78816679602b13d63d2869b5"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#ad4850e6b78816679602b13d63d2869b5">Tgstation.Server.Api.Models.DreamDaemonSecurity</a></div><div class="ttdeci">DreamDaemonSecurity</div><div class="ttdoc">DreamDaemon's security level.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_security_8cs_source.html#l00006">DreamDaemonSecurity.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_general_configuration_8cs_source.html#l00105">Tgstation.Server.Host.Configuration.GeneralConfiguration.ByondTopicTimeout</a>, <a class="el" href="_instance_controller_8cs_source.html#l00077">Tgstation.Server.Host.Controllers.InstanceController.generalConfiguration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html#a5a1124502330220abb9c651d8154499f">Tgstation.Server.Host.Utils.IPortAllocator.GetAvailablePort()</a>, <a class="el" href="_swarm_server_8cs_source.html#l00026">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_instance_controller_8cs_source.html#l00772">Tgstation.Server.Host.Controllers.InstanceController.InstanceAdminPermissionSet()</a>, <a class="el" href="_named_entity_8cs_source.html#l00016">Tgstation.Server.Api.Models.NamedEntity.Name</a>, <a class="el" href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00015">Tgstation.Server.Api.Models.Instance.Path</a>, <a class="el" href="_instance_controller_8cs_source.html#l00067">Tgstation.Server.Host.Controllers.InstanceController.portAllocator</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00082">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00142">Tgstation.Server.Host.Controllers.InstanceController.Create()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a02be01c6c5cab421a7a0c9f01f213b30_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a02be01c6c5cab421a7a0c9f01f213b30_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a02be01c6c5cab421a7a0c9f01f213b30_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a02be01c6c5cab421a7a0c9f01f213b30_cgraph">
<area shape="rect" title="Creates a default Models.Instance from initialSettings ." alt="" coords="5,37,264,77"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html#a5a1124502330220abb9c651d8154499f" title="Gets a port not currently in use by TGS." alt="" coords="362,5,565,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960" title="Generate an InstancePermissionSet with full rights." alt="" coords="312,69,615,109"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a02be01c6c5cab421a7a0c9f01f213b30_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a02be01c6c5cab421a7a0c9f01f213b30_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a02be01c6c5cab421a7a0c9f01f213b30_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a02be01c6c5cab421a7a0c9f01f213b30_icgraph">
<area shape="rect" title="Creates a default Models.Instance from initialSettings ." alt="" coords="269,5,528,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ab462ce6aa240b963c67cab7d20927060" title="Create or attach an Api.Models.Instance." alt="" coords="5,5,221,45"/>
</map>
</div>

</div>
</div>
<a id="ae67fd03e536f1aaed8d8ad6975192344" name="ae67fd03e536f1aaed8d8ad6975192344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae67fd03e536f1aaed8d8ad6975192344">&#9670;&#160;</a></span>Delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; IActionResult &gt; Tgstation.Server.Host.Controllers.InstanceController.Delete </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detach an <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> with the given <em>id</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> of the instance to detach.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the IActionResult of the request.</dd></dl>
<p>&lt;response code="204"&gt;Instance detatched successfully.&lt;/response&gt; &lt;response code="410"&gt;The database entity for the requested instance could not be retrieved. The instance was likely detached.&lt;/response&gt; </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00276">276</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  277</span>        {</div>
<div class="line"><span class="lineno">  278</span>            var originalModel = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  279</span>                .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a></div>
<div class="line"><span class="lineno">  280</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  281</span>                .Where(x =&gt; x.Id == <span class="keywordtype">id</span> &amp;&amp; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>)</div>
<div class="line"><span class="lineno">  282</span>                .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  283</span>            <span class="keywordflow">if</span> (originalModel == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  284</span>                <span class="keywordflow">return</span> this.Gone();</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">if</span> (originalModel.Online!.Value)</div>
<div class="line"><span class="lineno">  286</span>                <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceDetachOnline));</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a>.Remove(originalModel);</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>            var originalPath = originalModel.Path!;</div>
<div class="line"><span class="lineno">  291</span>            var attachFileName = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(originalPath, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">InstanceAttachFileName</a>);</div>
<div class="line"><span class="lineno">  292</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  293</span>            {</div>
<div class="line"><span class="lineno">  294</span>                <span class="keywordflow">if</span> (await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa">DirectoryExists</a>(originalPath, cancellationToken))</div>
<div class="line"><span class="lineno">  295</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">WriteAllBytes</a>(attachFileName, Array.Empty&lt;<span class="keywordtype">byte</span>&gt;(), cancellationToken);</div>
<div class="line"><span class="lineno">  296</span>            }</div>
<div class="line"><span class="lineno">  297</span>            <span class="keywordflow">catch</span> (OperationCanceledException)</div>
<div class="line"><span class="lineno">  298</span>            {</div>
<div class="line"><span class="lineno">  299</span>                <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  300</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a6ca322ea63f5693487917c1ee71c707a">DeleteFile</a>(attachFileName, CancellationToken.None);</div>
<div class="line"><span class="lineno">  301</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  302</span>            }</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>            await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(cancellationToken); <span class="comment">// cascades everything</span></div>
<div class="line"><span class="lineno">  305</span>            <span class="keywordflow">return</span> NoContent();</div>
<div class="line"><span class="lineno">  306</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a9aeb8b83ea3f4b13a183b6ac55b35a70"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes</a></div><div class="ttdeci">ValueTask WriteAllBytes(string path, byte[] contents, CancellationToken cancellationToken)</div><div class="ttdoc">Writes some contents  to a file at path  overwriting previous content.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a6ca322ea63f5693487917c1ee71c707a">Tgstation.Server.Host.IO.IIOManager.DeleteFile()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa">Tgstation.Server.Host.IO.IIOManager.DirectoryExists()</a>, <a class="el" href="_swarm_server_8cs_source.html#l00026">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_instance_controller_8cs_source.html#l00047">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a>, <a class="el" href="_database_context_8cs_source.html#l00034">Tgstation.Server.Host.Database.DatabaseContext.Instances</a>, <a class="el" href="_instance_controller_8cs_source.html#l00057">Tgstation.Server.Host.Controllers.InstanceController.ioManager</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00082">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ae67fd03e536f1aaed8d8ad6975192344_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ae67fd03e536f1aaed8d8ad6975192344_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ae67fd03e536f1aaed8d8ad6975192344_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_ae67fd03e536f1aaed8d8ad6975192344_cgraph">
<area shape="rect" title="Detach an Api.Models.Instance with the given id ." alt="" coords="5,133,221,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="290,5,458,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a6ca322ea63f5693487917c1ee71c707a" title="Deletes a file at path ." alt="" coords="290,69,458,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa" title="Check that the directory at path &#160;exists." alt="" coords="285,133,463,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c" title="Saves changes made to the IDatabaseContext. A Task representing the running operation." alt="" coords="269,197,479,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70" title="Writes some contents &#160;to a file at path &#160;overwriting previous content." alt="" coords="289,261,459,301"/>
</map>
</div>

</div>
</div>
<a id="a16d88c0b757913b42934e82312434633" name="a16d88c0b757913b42934e82312434633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16d88c0b757913b42934e82312434633">&#9670;&#160;</a></span>GetId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; IActionResult &gt; Tgstation.Server.Host.Controllers.InstanceController.GetId </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a specific <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The instance <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> to retrieve.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the IActionResult of the request.</dd></dl>
<p>&lt;response code="200"&gt;Retrieved <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> successfully.&lt;/response&gt; &lt;response code="410"&gt;The database entity for the requested instance could not be retrieved. The instance was likely detached.&lt;/response&gt; </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00591">591</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  592</span>        {</div>
<div class="line"><span class="lineno">  593</span>            var cantList = !<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html#a8676d0049c53168324b9103d252710a2">InstanceManagerRights</a>!.Value.HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.List);</div>
<div class="line"><span class="lineno">  594</span>            <a class="code hl_class" href="class_i_queryable.html">IQueryable</a>&lt;Models.Instance&gt; QueryForUser()</div>
<div class="line"><span class="lineno">  595</span>            {</div>
<div class="line"><span class="lineno">  596</span>                var query = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  597</span>                    .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a></div>
<div class="line"><span class="lineno">  598</span>                    .AsQueryable()</div>
<div class="line"><span class="lineno">  599</span>                    .Where(x =&gt; x.Id == <span class="keywordtype">id</span> &amp;&amp; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>);</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>                <span class="keywordflow">if</span> (cantList)</div>
<div class="line"><span class="lineno">  602</span>                    query = query.Include(x =&gt; x.InstancePermissionSets);</div>
<div class="line"><span class="lineno">  603</span>                <span class="keywordflow">return</span> query;</div>
<div class="line"><span class="lineno">  604</span>            }</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span>            var instance = await QueryForUser().FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>            <span class="keywordflow">if</span> (instance == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  609</span>                <span class="keywordflow">return</span> this.Gone();</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde">ValidateInstanceOnlineStatus</a>(instance))</div>
<div class="line"><span class="lineno">  612</span>                await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>            <span class="keywordflow">if</span> (cantList &amp;&amp; !instance.InstancePermissionSets.Any(instanceUser =&gt; instanceUser.PermissionSetId == <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>.Require(x =&gt; x.Id)</div>
<div class="line"><span class="lineno">  615</span>                &amp;&amp; (instanceUser.RepositoryRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a95336db3db40dbae9701ef6e51240f39">RepositoryRights</a>.None ||</div>
<div class="line"><span class="lineno">  616</span>                instanceUser.EngineRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a92ef878d1a367365148110bee95bb311">EngineRights</a>.None ||</div>
<div class="line"><span class="lineno">  617</span>                instanceUser.ChatBotRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a580a36a11165b2590be342b45c31ec72">ChatBotRights</a>.None ||</div>
<div class="line"><span class="lineno">  618</span>                instanceUser.ConfigurationRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0c">ConfigurationRights</a>.None ||</div>
<div class="line"><span class="lineno">  619</span>                instanceUser.DreamDaemonRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">DreamDaemonRights</a>.None ||</div>
<div class="line"><span class="lineno">  620</span>                instanceUser.DreamMakerRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a6aac419b6a793fe07657d96ac48dee5d">DreamMakerRights</a>.None ||</div>
<div class="line"><span class="lineno">  621</span>                instanceUser.InstancePermissionSetRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#ac5664dd4d4a0618c0eb53d11e8067352">InstancePermissionSetRights</a>.None)))</div>
<div class="line"><span class="lineno">  622</span>                <span class="keywordflow">return</span> Forbid();</div>
<div class="line"><span class="lineno">  623</span> </div>
<div class="line"><span class="lineno">  624</span>            var api = instance.ToApi();</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>            var moveJob = await QueryForUser()</div>
<div class="line"><span class="lineno">  627</span>                .SelectMany(x =&gt; x.Jobs)</div>
<div class="line"><span class="lineno">  628</span>                .Where(x =&gt; !x.StoppedAt.HasValue &amp;&amp; x.JobCode == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a7c8f30de4159253ce2ffec51771bed71">JobCode</a>.Move)</div>
<div class="line"><span class="lineno">  629</span>                .Include(x =&gt; x.StartedBy!)</div>
<div class="line"><span class="lineno">  630</span>                    .ThenInclude(x =&gt; x.CreatedBy)</div>
<div class="line"><span class="lineno">  631</span>                .Include(x =&gt; x.Instance)</div>
<div class="line"><span class="lineno">  632</span>                .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  633</span>            api.MoveJob = moveJob?.ToApi();</div>
<div class="line"><span class="lineno">  634</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5">CheckAccessible</a>(api, cancellationToken);</div>
<div class="line"><span class="lineno">  635</span>            <span class="keywordflow">return</span> Json(api);</div>
<div class="line"><span class="lineno">  636</span>        }</div>
<div class="ttc" id="aclass_i_queryable_html"><div class="ttname"><a href="class_i_queryable.html">IQueryable</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set_html_a8676d0049c53168324b9103d252710a2"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html#a8676d0049c53168324b9103d252710a2">Tgstation.Server.Api.Models.PermissionSet.InstanceManagerRights</a></div><div class="ttdeci">InstanceManagerRights? InstanceManagerRights</div><div class="ttdoc">The Rights.InstanceManagerRights for the user.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00030">PermissionSet.cs:30</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller_html_aba9306ee424759a221509c021cdf0cde"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde">Tgstation.Server.Host.Controllers.ComponentInterfacingController.ValidateInstanceOnlineStatus</a></div><div class="ttdeci">bool ValidateInstanceOnlineStatus(Api.Models.Instance metadata)</div><div class="ttdoc">Corrects discrepencies between the Api.Models.Instance.Online status of IInstances in the database vs...</div><div class="ttdef"><b>Definition:</b> <a href="_component_interfacing_controller_8cs_source.html#l00094">ComponentInterfacingController.cs:94</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_ae6de3128c5d49b91d7bb8f6f2caf0ed5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5">Tgstation.Server.Host.Controllers.InstanceController.CheckAccessible</a></div><div class="ttdeci">async ValueTask CheckAccessible(InstanceResponse instanceResponse, CancellationToken cancellationToken)</div><div class="ttdoc">Populate the InstanceResponse.Accessible property of a given instanceResponse .</div><div class="ttdef"><b>Definition:</b> <a href="_instance_controller_8cs_source.html#l00812">InstanceController.cs:812</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a7c8f30de4159253ce2ffec51771bed71"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a7c8f30de4159253ce2ffec51771bed71">Tgstation.Server.Api.Models.JobCode</a></div><div class="ttdeci">JobCode</div><div class="ttdoc">The different types of Response.JobResponse.</div><div class="ttdef"><b>Definition:</b> <a href="_job_code_8cs_source.html#l00008">JobCode.cs:9</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a580a36a11165b2590be342b45c31ec72"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a580a36a11165b2590be342b45c31ec72">Tgstation.Server.Api.Rights.ChatBotRights</a></div><div class="ttdeci">ChatBotRights</div><div class="ttdoc">Rights for chat bots.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_bot_rights_8cs_source.html#l00009">ChatBotRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a691a59767073bc7dff0f17b809d07b0c"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0c">Tgstation.Server.Api.Rights.ConfigurationRights</a></div><div class="ttdeci">ConfigurationRights</div><div class="ttdoc">Rights for Models.IConfigurationFiles.</div><div class="ttdef"><b>Definition:</b> <a href="_configuration_rights_8cs_source.html#l00009">ConfigurationRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a6aac419b6a793fe07657d96ac48dee5d"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a6aac419b6a793fe07657d96ac48dee5d">Tgstation.Server.Api.Rights.DreamMakerRights</a></div><div class="ttdeci">DreamMakerRights</div><div class="ttdoc">Rights for deployment.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_maker_rights_8cs_source.html#l00009">DreamMakerRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a92ef878d1a367365148110bee95bb311"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a92ef878d1a367365148110bee95bb311">Tgstation.Server.Api.Rights.EngineRights</a></div><div class="ttdeci">EngineRights</div><div class="ttdoc">Rights for engine version management.</div><div class="ttdef"><b>Definition:</b> <a href="_engine_rights_8cs_source.html#l00009">EngineRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a95336db3db40dbae9701ef6e51240f39"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a95336db3db40dbae9701ef6e51240f39">Tgstation.Server.Api.Rights.RepositoryRights</a></div><div class="ttdeci">RepositoryRights</div><div class="ttdoc">Rights for the git repository.</div><div class="ttdef"><b>Definition:</b> <a href="_repository_rights_8cs_source.html#l00009">RepositoryRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_ac5664dd4d4a0618c0eb53d11e8067352"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#ac5664dd4d4a0618c0eb53d11e8067352">Tgstation.Server.Api.Rights.InstancePermissionSetRights</a></div><div class="ttdeci">InstancePermissionSetRights</div><div class="ttdoc">Rights for an Models.Instance.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_permission_set_rights_8cs_source.html#l00009">InstancePermissionSetRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_acf2642afce6567c03b79876139a10a49"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">Tgstation.Server.Api.Rights.DreamDaemonRights</a></div><div class="ttdeci">DreamDaemonRights</div><div class="ttdoc">Rights for managing DreamDaemon.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_rights_8cs_source.html#l00009">DreamDaemonRights.cs:10</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_af199a84ed6fe6ca557db9de91070ad79"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">Tgstation.Server.Api.Rights.InstanceManagerRights</a></div><div class="ttdeci">InstanceManagerRights</div><div class="ttdoc">Rights for managing Models.Instances.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_manager_rights_8cs_source.html#l00009">InstanceManagerRights.cs:10</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_controller_8cs_source.html#l00812">Tgstation.Server.Host.Controllers.InstanceController.CheckAccessible()</a>, <a class="el" href="_swarm_server_8cs_source.html#l00026">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00030">Tgstation.Server.Api.Models.PermissionSet.InstanceManagerRights</a>, <a class="el" href="_database_context_8cs_source.html#l00034">Tgstation.Server.Host.Database.DatabaseContext.Instances</a>, <a class="el" href="_authentication_context_8cs_source.html#l00019">Tgstation.Server.Host.Security.AuthenticationContext.PermissionSet</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00082">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a>, and <a class="el" href="_component_interfacing_controller_8cs_source.html#l00094">Tgstation.Server.Host.Controllers.ComponentInterfacingController.ValidateInstanceOnlineStatus()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a16d88c0b757913b42934e82312434633_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a16d88c0b757913b42934e82312434633_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a16d88c0b757913b42934e82312434633_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a16d88c0b757913b42934e82312434633_cgraph">
<area shape="rect" title="Get a specific Api.Models.Instance." alt="" coords="5,69,221,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5" title="Populate the InstanceResponse.Accessible property of a given instanceResponse ." alt="" coords="281,5,512,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c" title="Saves changes made to the IDatabaseContext. A Task representing the running operation." alt="" coords="292,69,501,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde" title="Corrects discrepencies between the Api.Models.Instance.Online status of IInstances in the database vs..." alt="" coords="269,134,524,189"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#ac2e926ff84623c496393880b5a8ada61" title="Get the IInstanceReference associated with given metadata ." alt="" coords="572,141,831,181"/>
</map>
</div>

</div>
</div>
<a id="aff1ddb6e7b8f7a52a29dbcc3c48b1aa3" name="aff1ddb6e7b8f7a52a29dbcc3c48b1aa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff1ddb6e7b8f7a52a29dbcc3c48b1aa3">&#9670;&#160;</a></span>GrantPermissions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; IActionResult &gt; Tgstation.Server.Host.Controllers.InstanceController.GrantPermissions </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gives the current user full permissions on a given instance <em>id</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The instance <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a> to give permissions on.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the IActionResult of the request.</dd></dl>
<p>&lt;response code="204"&gt;Granted permissions successfully.&lt;/response&gt; </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00649">649</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  650</span>        {</div>
<div class="line"><span class="lineno">  651</span>            <a class="code hl_class" href="class_i_queryable.html">IQueryable</a>&lt;Models.Instance&gt; BaseQuery() =&gt; <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  652</span>                .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a></div>
<div class="line"><span class="lineno">  653</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  654</span>                .Where(x =&gt; x.Id == <span class="keywordtype">id</span> &amp;&amp; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>);</div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>            <span class="comment">// ensure the current user has write privilege on the instance</span></div>
<div class="line"><span class="lineno">  657</span>            var usersInstancePermissionSet = await BaseQuery()</div>
<div class="line"><span class="lineno">  658</span>                .SelectMany(x =&gt; x.InstancePermissionSets)</div>
<div class="line"><span class="lineno">  659</span>                .Where(x =&gt; x.PermissionSetId == <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html#a7dd58fdca2eaeb82ceb474bc22b36a47">Id</a>)</div>
<div class="line"><span class="lineno">  660</span>                .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  661</span>            <span class="keywordflow">if</span> (usersInstancePermissionSet == <span class="keywordflow">default</span>)</div>
<div class="line"><span class="lineno">  662</span>            {</div>
<div class="line"><span class="lineno">  663</span>                <span class="comment">// does the instance actually exist?</span></div>
<div class="line"><span class="lineno">  664</span>                var instanceExists = await BaseQuery()</div>
<div class="line"><span class="lineno">  665</span>                    .AnyAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>                <span class="keywordflow">if</span> (!instanceExists)</div>
<div class="line"><span class="lineno">  668</span>                    <span class="keywordflow">return</span> this.Gone();</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>                var instanceAdminUser = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960">InstanceAdminPermissionSet</a>(<span class="keyword">null</span>);</div>
<div class="line"><span class="lineno">  671</span>                instanceAdminUser.InstanceId = id;</div>
<div class="line"><span class="lineno">  672</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a901489c5ed1c32ef2c745ecd93440892">InstancePermissionSets</a>.Add(instanceAdminUser);</div>
<div class="line"><span class="lineno">  673</span>            }</div>
<div class="line"><span class="lineno">  674</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  675</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960">InstanceAdminPermissionSet</a>(usersInstancePermissionSet);</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span>            await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  678</span> </div>
<div class="line"><span class="lineno">  679</span>            <span class="keywordflow">return</span> NoContent();</div>
<div class="line"><span class="lineno">  680</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00015">Tgstation.Server.Api.Models.PermissionSet.Id</a>, <a class="el" href="_swarm_server_8cs_source.html#l00026">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_instance_controller_8cs_source.html#l00772">Tgstation.Server.Host.Controllers.InstanceController.InstanceAdminPermissionSet()</a>, <a class="el" href="_database_context_8cs_source.html#l00069">Tgstation.Server.Host.Database.DatabaseContext.InstancePermissionSets</a>, <a class="el" href="_database_context_8cs_source.html#l00034">Tgstation.Server.Host.Database.DatabaseContext.Instances</a>, <a class="el" href="_authentication_context_8cs_source.html#l00019">Tgstation.Server.Host.Security.AuthenticationContext.PermissionSet</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00082">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_aff1ddb6e7b8f7a52a29dbcc3c48b1aa3_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_aff1ddb6e7b8f7a52a29dbcc3c48b1aa3_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_aff1ddb6e7b8f7a52a29dbcc3c48b1aa3_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_aff1ddb6e7b8f7a52a29dbcc3c48b1aa3_cgraph">
<area shape="rect" title="Gives the current user full permissions on a given instance id ." alt="" coords="5,37,240,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a7505e585db1c6dd7fffda95599994960" title="Generate an InstancePermissionSet with full rights." alt="" coords="288,5,591,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c" title="Saves changes made to the IDatabaseContext. A Task representing the running operation." alt="" coords="335,69,544,109"/>
</map>
</div>

</div>
</div>
<a id="a7505e585db1c6dd7fffda95599994960" name="a7505e585db1c6dd7fffda95599994960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7505e585db1c6dd7fffda95599994960">&#9670;&#160;</a></span>InstanceAdminPermissionSet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance_permission_set.html">InstancePermissionSet</a> Tgstation.Server.Host.Controllers.InstanceController.InstanceAdminPermissionSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance_permission_set.html">InstancePermissionSet</a>?&#160;</td>
          <td class="paramname"><em>permissionSetToModify</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate an InstancePermissionSet with full rights.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">permissionSetToModify</td><td>An optional existing InstancePermissionSet to update.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>permissionSetToModify</em>  or a new InstancePermissionSet with full rights.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00772">772</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  773</span>        {</div>
<div class="line"><span class="lineno">  774</span>            permissionSetToModify ??= <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance_permission_set.html">InstancePermissionSet</a>()</div>
<div class="line"><span class="lineno">  775</span>            {</div>
<div class="line"><span class="lineno">  776</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html">PermissionSet</a> = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>,</div>
<div class="line"><span class="lineno">  777</span>                PermissionSetId = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>.Require(x =&gt; x.Id),</div>
<div class="line"><span class="lineno">  778</span>            };</div>
<div class="line"><span class="lineno">  779</span>            permissionSetToModify.EngineRights = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html">RightsHelper</a>.AllRights&lt;<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a92ef878d1a367365148110bee95bb311">EngineRights</a>&gt;();</div>
<div class="line"><span class="lineno">  780</span>            permissionSetToModify.ChatBotRights = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html">RightsHelper</a>.AllRights&lt;<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a580a36a11165b2590be342b45c31ec72">ChatBotRights</a>&gt;();</div>
<div class="line"><span class="lineno">  781</span>            permissionSetToModify.ConfigurationRights = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html">RightsHelper</a>.AllRights&lt;<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0c">ConfigurationRights</a>&gt;();</div>
<div class="line"><span class="lineno">  782</span>            permissionSetToModify.DreamDaemonRights = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html">RightsHelper</a>.AllRights&lt;<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">DreamDaemonRights</a>&gt;();</div>
<div class="line"><span class="lineno">  783</span>            permissionSetToModify.DreamMakerRights = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html">RightsHelper</a>.AllRights&lt;<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a6aac419b6a793fe07657d96ac48dee5d">DreamMakerRights</a>&gt;();</div>
<div class="line"><span class="lineno">  784</span>            permissionSetToModify.RepositoryRights = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html">RightsHelper</a>.AllRights&lt;<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a95336db3db40dbae9701ef6e51240f39">RepositoryRights</a>&gt;();</div>
<div class="line"><span class="lineno">  785</span>            permissionSetToModify.InstancePermissionSetRights = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html">RightsHelper</a>.AllRights&lt;<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#ac5664dd4d4a0618c0eb53d11e8067352">InstancePermissionSetRights</a>&gt;();</div>
<div class="line"><span class="lineno">  786</span>            <span class="keywordflow">return</span> permissionSetToModify;</div>
<div class="line"><span class="lineno">  787</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html">Tgstation.Server.Api.Models.PermissionSet</a></div><div class="ttdoc">Represents a set of server permissions.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00010">PermissionSet.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html">Tgstation.Server.Api.Rights.RightsHelper</a></div><div class="ttdoc">Helper for RightsTypes.</div><div class="ttdef"><b>Definition:</b> <a href="_rights_helper_8cs_source.html#l00011">RightsHelper.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance_permission_set_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance_permission_set.html">Tgstation.Server.Host.Models.InstancePermissionSet</a></div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_host_2_models_2_instance_permission_set_8cs_source.html#l00008">InstancePermissionSet.cs:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_authentication_context_8cs_source.html#l00019">Tgstation.Server.Host.Security.AuthenticationContext.PermissionSet</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00688">Tgstation.Server.Host.Controllers.InstanceController.CreateDefaultInstance()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00649">Tgstation.Server.Host.Controllers.InstanceController.GrantPermissions()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a7505e585db1c6dd7fffda95599994960_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a7505e585db1c6dd7fffda95599994960_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a7505e585db1c6dd7fffda95599994960_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a7505e585db1c6dd7fffda95599994960_icgraph">
<area shape="rect" title="Generate an InstancePermissionSet with full rights." alt="" coords="576,37,879,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a02be01c6c5cab421a7a0c9f01f213b30" title="Creates a default Models.Instance from initialSettings ." alt="" coords="269,5,528,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aff1ddb6e7b8f7a52a29dbcc3c48b1aa3" title="Gives the current user full permissions on a given instance id ." alt="" coords="281,69,516,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ab462ce6aa240b963c67cab7d20927060" title="Create or attach an Api.Models.Instance." alt="" coords="5,5,221,45"/>
</map>
</div>

</div>
</div>
<a id="a98360d756afee2844b21b0936cc050cc" name="a98360d756afee2844b21b0936cc050cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98360d756afee2844b21b0936cc050cc">&#9670;&#160;</a></span>List()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; IActionResult &gt; Tgstation.Server.Host.Controllers.InstanceController.List </td>
          <td>(</td>
          <td class="paramtype">[FromQuery] int?&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[FromQuery] int?&#160;</td>
          <td class="paramname"><em>pageSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>s.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>The current page.</td></tr>
    <tr><td class="paramname">pageSize</td><td>The page size.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the IActionResult of the request.</dd></dl>
<p>&lt;response code="200"&gt;Retrieved <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>s successfully.&lt;/response&gt; </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00523">523</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  527</span>        {</div>
<div class="line"><span class="lineno">  528</span>            <a class="code hl_class" href="class_i_queryable.html">IQueryable</a>&lt;Models.Instance&gt; GetBaseQuery()</div>
<div class="line"><span class="lineno">  529</span>            {</div>
<div class="line"><span class="lineno">  530</span>                var query = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  531</span>                    .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a></div>
<div class="line"><span class="lineno">  532</span>                    .AsQueryable()</div>
<div class="line"><span class="lineno">  533</span>                    .Where(x =&gt; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>);</div>
<div class="line"><span class="lineno">  534</span>                <span class="keywordflow">if</span> (!<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html#a8676d0049c53168324b9103d252710a2">InstanceManagerRights</a>!.Value.HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.List))</div>
<div class="line"><span class="lineno">  535</span>                    query = query</div>
<div class="line"><span class="lineno">  536</span>                        .Where(x =&gt; x.InstancePermissionSets.Any(y =&gt; y.PermissionSetId == <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html#a7dd58fdca2eaeb82ceb474bc22b36a47">Id</a>))</div>
<div class="line"><span class="lineno">  537</span>                        .Where(x =&gt; x.InstancePermissionSets.Any(instanceUser =&gt;</div>
<div class="line"><span class="lineno">  538</span>                            instanceUser.EngineRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a92ef878d1a367365148110bee95bb311">EngineRights</a>.None ||</div>
<div class="line"><span class="lineno">  539</span>                            instanceUser.ChatBotRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a580a36a11165b2590be342b45c31ec72">ChatBotRights</a>.None ||</div>
<div class="line"><span class="lineno">  540</span>                            instanceUser.ConfigurationRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0c">ConfigurationRights</a>.None ||</div>
<div class="line"><span class="lineno">  541</span>                            instanceUser.DreamDaemonRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">DreamDaemonRights</a>.None ||</div>
<div class="line"><span class="lineno">  542</span>                            instanceUser.DreamMakerRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a6aac419b6a793fe07657d96ac48dee5d">DreamMakerRights</a>.None ||</div>
<div class="line"><span class="lineno">  543</span>                            instanceUser.InstancePermissionSetRights != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#ac5664dd4d4a0618c0eb53d11e8067352">InstancePermissionSetRights</a>.None));</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>                <span class="comment">// Hack for EF IAsyncEnumerable BS</span></div>
<div class="line"><span class="lineno">  546</span>                <span class="keywordflow">return</span> query.Select(x =&gt; x);</div>
<div class="line"><span class="lineno">  547</span>            }</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>            var moveJobs = await GetBaseQuery()</div>
<div class="line"><span class="lineno">  550</span>                .SelectMany(x =&gt; x.Jobs)</div>
<div class="line"><span class="lineno">  551</span>                .Where(x =&gt; !x.StoppedAt.HasValue &amp;&amp; x.JobCode == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a7c8f30de4159253ce2ffec51771bed71">JobCode</a>.Move)</div>
<div class="line"><span class="lineno">  552</span>                .Include(x =&gt; x.StartedBy!)</div>
<div class="line"><span class="lineno">  553</span>                    .ThenInclude(x =&gt; x.CreatedBy)</div>
<div class="line"><span class="lineno">  554</span>                .Include(x =&gt; x.Instance)</div>
<div class="line"><span class="lineno">  555</span>                .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>            var needsUpdate = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  558</span>            var result = await Paginated&lt;Models.Instance, <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_instance_response.html">InstanceResponse</a>&gt;(</div>
<div class="line"><span class="lineno">  559</span>                () =&gt; ValueTask.FromResult(</div>
<div class="line"><span class="lineno">  560</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_results_1_1_paginatable_result.html">PaginatableResult&lt;Models.Instance&gt;</a>(</div>
<div class="line"><span class="lineno">  561</span>                        GetBaseQuery()</div>
<div class="line"><span class="lineno">  562</span>                            .OrderBy(x =&gt; x.Id))),</div>
<div class="line"><span class="lineno">  563</span>                async instance =&gt;</div>
<div class="line"><span class="lineno">  564</span>                {</div>
<div class="line"><span class="lineno">  565</span>                    needsUpdate |= <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde">ValidateInstanceOnlineStatus</a>(instance);</div>
<div class="line"><span class="lineno">  566</span>                    instance.MoveJob = moveJobs.FirstOrDefault(x =&gt; x.Instance!.Id == instance.Id)?.ToApi();</div>
<div class="line"><span class="lineno">  567</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5">CheckAccessible</a>(instance, cancellationToken);</div>
<div class="line"><span class="lineno">  568</span>                },</div>
<div class="line"><span class="lineno">  569</span>                page,</div>
<div class="line"><span class="lineno">  570</span>                pageSize,</div>
<div class="line"><span class="lineno">  571</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span>            <span class="keywordflow">if</span> (needsUpdate)</div>
<div class="line"><span class="lineno">  574</span>                await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>            <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  577</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_instance_response_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_instance_response.html">Tgstation.Server.Api.Models.Response.InstanceResponse</a></div><div class="ttdoc">Server response for Instances.</div><div class="ttdef"><b>Definition:</b> <a href="_instance_response_8cs_source.html#l00006">InstanceResponse.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_results_1_1_paginatable_result_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_results_1_1_paginatable_result.html">Tgstation.Server.Host.Controllers.Results.PaginatableResult</a></div><div class="ttdoc">Helper for returning paginated models.</div><div class="ttdef"><b>Definition:</b> <a href="_paginatable_result_8cs_source.html#l00013">PaginatableResult.cs:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_controller_8cs_source.html#l00812">Tgstation.Server.Host.Controllers.InstanceController.CheckAccessible()</a>, <a class="el" href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00015">Tgstation.Server.Api.Models.PermissionSet.Id</a>, <a class="el" href="_swarm_server_8cs_source.html#l00026">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00030">Tgstation.Server.Api.Models.PermissionSet.InstanceManagerRights</a>, <a class="el" href="_database_context_8cs_source.html#l00034">Tgstation.Server.Host.Database.DatabaseContext.Instances</a>, <a class="el" href="_authentication_context_8cs_source.html#l00019">Tgstation.Server.Host.Security.AuthenticationContext.PermissionSet</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00082">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a>, and <a class="el" href="_component_interfacing_controller_8cs_source.html#l00094">Tgstation.Server.Host.Controllers.ComponentInterfacingController.ValidateInstanceOnlineStatus()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a98360d756afee2844b21b0936cc050cc_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a98360d756afee2844b21b0936cc050cc_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a98360d756afee2844b21b0936cc050cc_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a98360d756afee2844b21b0936cc050cc_cgraph">
<area shape="rect" title="List Api.Models.Instances." alt="" coords="5,69,221,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5" title="Populate the InstanceResponse.Accessible property of a given instanceResponse ." alt="" coords="281,5,512,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c" title="Saves changes made to the IDatabaseContext. A Task representing the running operation." alt="" coords="292,69,501,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde" title="Corrects discrepencies between the Api.Models.Instance.Online status of IInstances in the database vs..." alt="" coords="269,134,524,189"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#ac2e926ff84623c496393880b5a8ada61" title="Get the IInstanceReference associated with given metadata ." alt="" coords="572,141,831,181"/>
</map>
</div>

</div>
</div>
<a id="a600268a32d5da87b3c80f97d34319366" name="a600268a32d5da87b3c80f97d34319366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a600268a32d5da87b3c80f97d34319366">&#9670;&#160;</a></span>NormalizePath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string? Tgstation.Server.Host.Controllers.InstanceController.NormalizePath </td>
          <td>(</td>
          <td class="paramtype">string?&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Normalize a given <em>path</em>  for an instance.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to normalize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The normalized <em>path</em> .</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00795">795</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  796</span>        {</div>
<div class="line"><span class="lineno">  797</span>            <span class="keywordflow">if</span> (path == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  798</span>                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  799</span> </div>
<div class="line"><span class="lineno">  800</span>            path = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(path);</div>
<div class="line"><span class="lineno">  801</span>            path = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ac62c0b1b0e346409b20c3054d4a8354a">platformIdentifier</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#a885378549e2e71bda33b550c252e6098">NormalizePath</a>(path);</div>
<div class="line"><span class="lineno">  802</span> </div>
<div class="line"><span class="lineno">  803</span>            <span class="keywordflow">return</span> path;</div>
<div class="line"><span class="lineno">  804</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a18a442b5dff16f5e7a730ec354e81d78"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath</a></div><div class="ttdeci">string ResolvePath()</div><div class="ttdoc">Retrieve the full path of the current working directory.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier_html_a885378549e2e71bda33b550c252e6098"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#a885378549e2e71bda33b550c252e6098">Tgstation.Server.Host.System.IPlatformIdentifier.NormalizePath</a></div><div class="ttdeci">string NormalizePath(string path)</div><div class="ttdoc">Normalize a path for consistency.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_controller_8cs_source.html#l00057">Tgstation.Server.Host.Controllers.InstanceController.ioManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#a885378549e2e71bda33b550c252e6098">Tgstation.Server.Host.System.IPlatformIdentifier.NormalizePath()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00062">Tgstation.Server.Host.Controllers.InstanceController.platformIdentifier</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00142">Tgstation.Server.Host.Controllers.InstanceController.Create()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00323">Tgstation.Server.Host.Controllers.InstanceController.Update()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a600268a32d5da87b3c80f97d34319366_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a600268a32d5da87b3c80f97d34319366_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a600268a32d5da87b3c80f97d34319366_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a600268a32d5da87b3c80f97d34319366_cgraph">
<area shape="rect" title="Normalize a given path &#160;for an instance." alt="" coords="5,37,221,77"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#a885378549e2e71bda33b550c252e6098" title="Normalize a path for consistency." alt="" coords="269,5,481,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="291,69,459,109"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a600268a32d5da87b3c80f97d34319366_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a600268a32d5da87b3c80f97d34319366_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a600268a32d5da87b3c80f97d34319366_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a600268a32d5da87b3c80f97d34319366_icgraph">
<area shape="rect" title="Normalize a given path &#160;for an instance." alt="" coords="269,37,485,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ab462ce6aa240b963c67cab7d20927060" title="Create or attach an Api.Models.Instance." alt="" coords="5,5,221,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a709c5985e78cdb8bde3f705869ddafb9" title="Modify an Api.Models.Instance&#39;s settings." alt="" coords="5,69,221,109"/>
</map>
</div>

</div>
</div>
<a id="a709c5985e78cdb8bde3f705869ddafb9" name="a709c5985e78cdb8bde3f705869ddafb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a709c5985e78cdb8bde3f705869ddafb9">&#9670;&#160;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; IActionResult &gt; Tgstation.Server.Host.Controllers.InstanceController.Update </td>
          <td>(</td>
          <td class="paramtype">[FromBody] <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_request_1_1_instance_update_request.html">InstanceUpdateRequest</a>&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modify an <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a>'s settings.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>The updated <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> settings.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the IActionResult of the request.</dd></dl>
<p>&lt;response code="200"&gt;Instance updated successfully.&lt;/response&gt; &lt;response code="202"&gt;Instance updated successfully and relocation job created.&lt;/response&gt; &lt;response code="410"&gt;The database entity for the requested instance could not be retrieved. The instance was likely detached.&lt;/response&gt; </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00323">323</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  324</span>        {</div>
<div class="line"><span class="lineno">  325</span>            ArgumentNullException.ThrowIfNull(model);</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>            <a class="code hl_class" href="class_i_queryable.html">IQueryable</a>&lt;Models.Instance&gt; InstanceQuery() =&gt; <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  328</span>                .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#a1bc257ebf1d31bfba7f665d61da5c4a2">Instances</a></div>
<div class="line"><span class="lineno">  329</span>                .AsQueryable()</div>
<div class="line"><span class="lineno">  330</span>                .Where(x =&gt; x.Id == model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a> &amp;&amp; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a952ce837f434c65e69d35ec886d0fc2d">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>);</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>            var moveJob = await InstanceQuery()</div>
<div class="line"><span class="lineno">  333</span>                .SelectMany(x =&gt; x.Jobs)</div>
<div class="line"><span class="lineno">  334</span>                .Where(x =&gt; !x.StoppedAt.HasValue &amp;&amp; x.JobCode == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a7c8f30de4159253ce2ffec51771bed71">JobCode</a>.Move)</div>
<div class="line"><span class="lineno">  335</span>                .Select(x =&gt; <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Job</a>(x.Id!.Value))</div>
<div class="line"><span class="lineno">  336</span>                .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>            <span class="keywordflow">if</span> (moveJob != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  339</span>            {</div>
<div class="line"><span class="lineno">  340</span>                <span class="comment">// don&#39;t allow them to cancel it if they can&#39;t start it.</span></div>
<div class="line"><span class="lineno">  341</span>                <span class="keywordflow">if</span> (!<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#acfb9937bf37b839f1d60289129c5ea77">PermissionSet</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_permission_set.html#a8676d0049c53168324b9103d252710a2">InstanceManagerRights</a>!.Value.HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.Relocate))</div>
<div class="line"><span class="lineno">  342</span>                    <span class="keywordflow">return</span> Forbid();</div>
<div class="line"><span class="lineno">  343</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34">jobManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">CancelJob</a>(moveJob, <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#a0846ac9679599a99923987863edb0d5c">User</a>, <span class="keyword">true</span>, cancellationToken); <span class="comment">// cancel it now</span></div>
<div class="line"><span class="lineno">  344</span>            }</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>            var originalModel = await InstanceQuery()</div>
<div class="line"><span class="lineno">  347</span>                .Include(x =&gt; x.RepositorySettings)</div>
<div class="line"><span class="lineno">  348</span>                .Include(x =&gt; x.ChatSettings)</div>
<div class="line"><span class="lineno">  349</span>                    .ThenInclude(x =&gt; x.Channels)</div>
<div class="line"><span class="lineno">  350</span>                .Include(x =&gt; x.DreamDaemonSettings) <span class="comment">// need these for onlining</span></div>
<div class="line"><span class="lineno">  351</span>                .FirstOrDefaultAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  352</span>            <span class="keywordflow">if</span> (originalModel == <span class="keywordflow">default</span>(Models.Instance))</div>
<div class="line"><span class="lineno">  353</span>                <span class="keywordflow">return</span> this.Gone();</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde">ValidateInstanceOnlineStatus</a>(originalModel))</div>
<div class="line"><span class="lineno">  356</span>                await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>            var userRights = (<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>)<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7">GetRight</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">RightsType</a>.InstanceManager);</div>
<div class="line"><span class="lineno">  359</span>            <span class="keywordtype">bool</span> CheckModified&lt;T&gt;(Expression&lt;Func&lt;Api.Models.Instance, T&gt;&gt; expression, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a> requiredRight)</div>
<div class="line"><span class="lineno">  360</span>            {</div>
<div class="line"><span class="lineno">  361</span>                var memberSelectorExpression = (MemberExpression)expression.Body;</div>
<div class="line"><span class="lineno">  362</span>                var property = (PropertyInfo)memberSelectorExpression.Member;</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>                var newVal = <span class="keyword">property</span>.GetValue(model);</div>
<div class="line"><span class="lineno">  365</span>                <span class="keywordflow">if</span> (newVal == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  366</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  367</span>                <span class="keywordflow">if</span> (!userRights.HasFlag(requiredRight) &amp;&amp; <span class="keyword">property</span>.GetValue(originalModel) != newVal)</div>
<div class="line"><span class="lineno">  368</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>                <span class="keyword">property</span>.SetValue(originalModel, newVal);</div>
<div class="line"><span class="lineno">  371</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  372</span>            }</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>            <span class="keywordtype">string</span>? originalModelPath = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  375</span>            <span class="keywordtype">string</span>? normalizedPath = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  376</span>            var originalOnline = originalModel.Online!.Value;</div>
<div class="line"><span class="lineno">  377</span>            <span class="keywordflow">if</span> (model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318">Path</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  378</span>            {</div>
<div class="line"><span class="lineno">  379</span>                normalizedPath = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a600268a32d5da87b3c80f97d34319366">NormalizePath</a>(model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318">Path</a>);</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>                <span class="keywordflow">if</span> (normalizedPath != originalModel.Path)</div>
<div class="line"><span class="lineno">  382</span>                {</div>
<div class="line"><span class="lineno">  383</span>                    <span class="keywordflow">if</span> (!userRights.HasFlag(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.Relocate))</div>
<div class="line"><span class="lineno">  384</span>                        <span class="keywordflow">return</span> Forbid();</div>
<div class="line"><span class="lineno">  385</span>                    <span class="keywordflow">if</span> (originalOnline &amp;&amp; model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a6f024aa440adbecbd80b053eb57badc2">Online</a> != <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  386</span>                        <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceRelocateOnline));</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>                    var dirExistsTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa">DirectoryExists</a>(model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318">Path</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  389</span>                    <span class="keywordflow">if</span> (await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#afb2e4e54c38a97b299d1fb7692cc5cdd">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">FileExists</a>(model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318">Path</a>, cancellationToken) || await dirExistsTask)</div>
<div class="line"><span class="lineno">  390</span>                        <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.InstanceAtExistingPath));</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>                    originalModelPath = originalModel.Path;</div>
<div class="line"><span class="lineno">  393</span>                    originalModel.Path = normalizedPath;</div>
<div class="line"><span class="lineno">  394</span>                }</div>
<div class="line"><span class="lineno">  395</span>            }</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>            var oldAutoUpdateInterval = originalModel.AutoUpdateInterval!.Value;</div>
<div class="line"><span class="lineno">  398</span>            var oldAutoUpdateCron = originalModel.AutoUpdateCron;</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>            var earlyOut = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a5b38d5cba6df39071299a0d0c5e71a6d">ValidateCronSetting</a>(model);</div>
<div class="line"><span class="lineno">  401</span>            <span class="keywordflow">if</span> (earlyOut != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  402</span>                <span class="keywordflow">return</span> earlyOut;</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>            var changedAutoInterval = model.AutoUpdateInterval.HasValue &amp;&amp; oldAutoUpdateInterval != model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aebe907c68112eae3f1ac2dfdf384ec5b">AutoUpdateInterval</a>;</div>
<div class="line"><span class="lineno">  405</span>            var changedAutoCron = model.AutoUpdateCron != <span class="keyword">null</span> &amp;&amp; oldAutoUpdateCron != model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aa94e263fa829683a2b8ae4cdf8d366c6">AutoUpdateCron</a>;</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>            var renamed = model.Name != <span class="keyword">null</span> &amp;&amp; originalModel.Name != model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity.html#a7e2f2eeddbc6315acbcfa00c54762183">Name</a>;</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>            <span class="keywordflow">if</span> (CheckModified(x =&gt; x.AutoUpdateInterval, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.SetAutoUpdate)</div>
<div class="line"><span class="lineno">  410</span>                || CheckModified(x =&gt; x.AutoUpdateCron, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.SetAutoUpdate)</div>
<div class="line"><span class="lineno">  411</span>                || CheckModified(x =&gt; x.ConfigurationType, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.SetConfiguration)</div>
<div class="line"><span class="lineno">  412</span>                || CheckModified(x =&gt; x.Name, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.Rename)</div>
<div class="line"><span class="lineno">  413</span>                || CheckModified(x =&gt; x.Online, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.SetOnline)</div>
<div class="line"><span class="lineno">  414</span>                || CheckModified(x =&gt; x.ChatBotLimit, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.SetChatBotLimit))</div>
<div class="line"><span class="lineno">  415</span>                <span class="keywordflow">return</span> Forbid();</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>            <span class="keywordflow">if</span> (model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#ae07e119a1bd8ddbcf2641a8f7b734c2b">ChatBotLimit</a>.HasValue)</div>
<div class="line"><span class="lineno">  418</span>            {</div>
<div class="line"><span class="lineno">  419</span>                var countOfExistingChatBots = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a></div>
<div class="line"><span class="lineno">  420</span>                    .<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad4cf2228c8dae3c2641251070fee76af">ChatBots</a></div>
<div class="line"><span class="lineno">  421</span>                    .AsQueryable()</div>
<div class="line"><span class="lineno">  422</span>                    .Where(x =&gt; x.InstanceId == originalModel.Id)</div>
<div class="line"><span class="lineno">  423</span>                    .CountAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>                <span class="keywordflow">if</span> (countOfExistingChatBots &gt; model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#ae07e119a1bd8ddbcf2641a8f7b734c2b">ChatBotLimit</a>.Value)</div>
<div class="line"><span class="lineno">  426</span>                    <span class="keywordflow">return</span> Conflict(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.ChatBotMax));</div>
<div class="line"><span class="lineno">  427</span>            }</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>            <span class="keywordflow">if</span> (changedAutoCron)</div>
<div class="line"><span class="lineno">  430</span>                model.AutoUpdateInterval = 0;</div>
<div class="line"><span class="lineno">  431</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (changedAutoInterval)</div>
<div class="line"><span class="lineno">  432</span>                model.AutoUpdateCron = String.Empty;</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>            await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>            <span class="keywordflow">if</span> (renamed)</div>
<div class="line"><span class="lineno">  437</span>            {</div>
<div class="line"><span class="lineno">  438</span>                <span class="comment">// ignoring retval because we don&#39;t care if it&#39;s offline</span></div>
<div class="line"><span class="lineno">  439</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a0e985e6b0812f8bbce17ed2e5028fd65">WithComponentInstanceNullable</a>(</div>
<div class="line"><span class="lineno">  440</span>                    async componentInstance =&gt;</div>
<div class="line"><span class="lineno">  441</span>                    {</div>
<div class="line"><span class="lineno">  442</span>                        await componentInstance.InstanceRenamed(originalModel.Name!, cancellationToken);</div>
<div class="line"><span class="lineno">  443</span>                        <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  444</span>                    },</div>
<div class="line"><span class="lineno">  445</span>                    originalModel);</div>
<div class="line"><span class="lineno">  446</span>            }</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>            var oldAutoStart = originalModel.DreamDaemonSettings!.AutoStart;</div>
<div class="line"><span class="lineno">  449</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  450</span>            {</div>
<div class="line"><span class="lineno">  451</span>                <span class="keywordflow">if</span> (originalOnline &amp;&amp; model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a6f024aa440adbecbd80b053eb57badc2">Online</a> == <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  452</span>                    await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a95dc96499f6b951fd0726fa7fe947ace">InstanceOperations</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#abca82157721193c4bb14b3628e9a083e">OfflineInstance</a>(originalModel, <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#a0846ac9679599a99923987863edb0d5c">User</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  453</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!originalOnline &amp;&amp; model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a6f024aa440adbecbd80b053eb57badc2">Online</a> == <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  454</span>                {</div>
<div class="line"><span class="lineno">  455</span>                    <span class="comment">// force autostart false here because we don&#39;t want any long running jobs right now</span></div>
<div class="line"><span class="lineno">  456</span>                    <span class="comment">// remember to document this</span></div>
<div class="line"><span class="lineno">  457</span>                    originalModel.DreamDaemonSettings.AutoStart = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  458</span>                    await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a95dc96499f6b951fd0726fa7fe947ace">InstanceOperations</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a21fcdc8c16fde3dd75ebf3780d7546cf">OnlineInstance</a>(originalModel, cancellationToken);</div>
<div class="line"><span class="lineno">  459</span>                }</div>
<div class="line"><span class="lineno">  460</span>            }</div>
<div class="line"><span class="lineno">  461</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e)</div>
<div class="line"><span class="lineno">  462</span>            {</div>
<div class="line"><span class="lineno">  463</span>                <span class="keywordflow">if</span> (e is not OperationCanceledException)</div>
<div class="line"><span class="lineno">  464</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_api_controller.html#ae5655868c2b2b913046ecf61934ce119">Logger</a>.LogError(e, <span class="stringliteral">&quot;Error changing instance online state!&quot;</span>);</div>
<div class="line"><span class="lineno">  465</span>                originalModel.Online = originalOnline;</div>
<div class="line"><span class="lineno">  466</span>                originalModel.DreamDaemonSettings.AutoStart = oldAutoStart;</div>
<div class="line"><span class="lineno">  467</span>                <span class="keywordflow">if</span> (originalModelPath != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  468</span>                    originalModel.Path = originalModelPath;</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>                <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  471</span>                await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html">DatabaseContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Save</a>(CancellationToken.None);</div>
<div class="line"><span class="lineno">  472</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  473</span>            }</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>            var api = (<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7">GetRight</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">RightsType</a>.InstanceManager) &amp; (ulong)<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.Read) != 0 ? originalModel.ToApi() : <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_instance_response.html">InstanceResponse</a></div>
<div class="line"><span class="lineno">  476</span>            {</div>
<div class="line"><span class="lineno">  477</span>                Id = originalModel.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a>,</div>
<div class="line"><span class="lineno">  478</span>            };</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>            var moving = originalModelPath != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  481</span>            <span class="keywordflow">if</span> (moving)</div>
<div class="line"><span class="lineno">  482</span>            {</div>
<div class="line"><span class="lineno">  483</span>                var description = $<span class="stringliteral">&quot;Move instance ID {originalModel.Id} from {originalModelPath} to {normalizedPath}&quot;</span>;</div>
<div class="line"><span class="lineno">  484</span>                var job = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Job</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html#afb982e4f4d1492aced7dcf14d9ba5d97">Create</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a7c8f30de4159253ce2ffec51771bed71">JobCode</a>.Move, <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html">AuthenticationContext</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#a0846ac9679599a99923987863edb0d5c">User</a>, originalModel, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#af199a84ed6fe6ca557db9de91070ad79">InstanceManagerRights</a>.Relocate);</div>
<div class="line"><span class="lineno">  485</span>                job.Description = description;</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a38f7f9669773242d177345e38be2dd34">jobManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#aefaca6d0c2762350a41adfe7daaade95">RegisterOperation</a>(</div>
<div class="line"><span class="lineno">  488</span>                    job,</div>
<div class="line"><span class="lineno">  489</span>                    (core, databaseContextFactory, paramJob, progressHandler, ct) <span class="comment">// core will be null here since the instance is offline</span></div>
<div class="line"><span class="lineno">  490</span>                        =&gt; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a95dc96499f6b951fd0726fa7fe947ace">InstanceOperations</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a8aaa4081d257b5fb39bb09ffd07383ff">MoveInstance</a>(originalModel, originalModelPath!, ct),</div>
<div class="line"><span class="lineno">  491</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  492</span>                api.MoveJob = job.ToApi();</div>
<div class="line"><span class="lineno">  493</span>            }</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>            <span class="keywordflow">if</span> (changedAutoInterval || changedAutoCron)</div>
<div class="line"><span class="lineno">  496</span>            {</div>
<div class="line"><span class="lineno">  497</span>                <span class="comment">// ignoring retval because we don&#39;t care if it&#39;s offline</span></div>
<div class="line"><span class="lineno">  498</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a0e985e6b0812f8bbce17ed2e5028fd65">WithComponentInstanceNullable</a>(</div>
<div class="line"><span class="lineno">  499</span>                    async componentInstance =&gt;</div>
<div class="line"><span class="lineno">  500</span>                    {</div>
<div class="line"><span class="lineno">  501</span>                        await componentInstance.ScheduleAutoUpdate(model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aebe907c68112eae3f1ac2dfdf384ec5b">AutoUpdateInterval</a>!.Value, model.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aa94e263fa829683a2b8ae4cdf8d366c6">AutoUpdateCron</a>);</div>
<div class="line"><span class="lineno">  502</span>                        <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  503</span>                    },</div>
<div class="line"><span class="lineno">  504</span>                    originalModel);</div>
<div class="line"><span class="lineno">  505</span>            }</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5">CheckAccessible</a>(api, cancellationToken);</div>
<div class="line"><span class="lineno">  508</span>            <span class="keywordflow">return</span> moving ? Accepted(api) : Json(api);</div>
<div class="line"><span class="lineno">  509</span>        }</div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html_a6f024aa440adbecbd80b053eb57badc2"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a6f024aa440adbecbd80b053eb57badc2">Tgstation.Server.Api.Models.Instance.Online</a></div><div class="ttdeci">bool? Online</div><div class="ttdoc">If the Instance is online.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00022">Instance.cs:22</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html_aa94e263fa829683a2b8ae4cdf8d366c6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aa94e263fa829683a2b8ae4cdf8d366c6">Tgstation.Server.Api.Models.Instance.AutoUpdateCron</a></div><div class="ttdeci">string? AutoUpdateCron</div><div class="ttdoc">A cron expression indicating when auto-updates should trigger. Must be a valid 6 part cron schedule (...</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00044">Instance.cs:44</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html_ae07e119a1bd8ddbcf2641a8f7b734c2b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#ae07e119a1bd8ddbcf2641a8f7b734c2b">Tgstation.Server.Api.Models.Instance.ChatBotLimit</a></div><div class="ttdeci">ushort? ChatBotLimit</div><div class="ttdoc">The maximum number of chat bots the Instance may contain.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00050">Instance.cs:50</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html_aebe907c68112eae3f1ac2dfdf384ec5b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aebe907c68112eae3f1ac2dfdf384ec5b">Tgstation.Server.Api.Models.Instance.AutoUpdateInterval</a></div><div class="ttdeci">uint? AutoUpdateInterval</div><div class="ttdoc">The time interval in minutes the repository is automatically pulled and compiles. 0 disables.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00036">Instance.cs:36</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller_html_a0e985e6b0812f8bbce17ed2e5028fd65"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a0e985e6b0812f8bbce17ed2e5028fd65">Tgstation.Server.Host.Controllers.ComponentInterfacingController.WithComponentInstanceNullable</a></div><div class="ttdeci">async ValueTask&lt; IActionResult?&gt; WithComponentInstanceNullable(Func&lt; IInstanceCore, ValueTask&lt; IActionResult?&gt; &gt; action, Models.Instance? instance=null)</div><div class="ttdoc">Run a given action  with the relevant IInstance.</div><div class="ttdef"><b>Definition:</b> <a href="_component_interfacing_controller_8cs_source.html#l00125">ComponentInterfacingController.cs:125</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller_html_a95dc96499f6b951fd0726fa7fe947ace"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a95dc96499f6b951fd0726fa7fe947ace">Tgstation.Server.Host.Controllers.ComponentInterfacingController.InstanceOperations</a></div><div class="ttdeci">IInstanceOperations InstanceOperations</div><div class="ttdoc">Access the IInstanceOperations instance.</div><div class="ttdef"><b>Definition:</b> <a href="_component_interfacing_controller_8cs_source.html#l00027">ComponentInterfacingController.cs:27</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context_html_ad4cf2228c8dae3c2641251070fee76af"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ad4cf2228c8dae3c2641251070fee76af">Tgstation.Server.Host.Database.DatabaseContext.ChatBots</a></div><div class="ttdeci">DbSet&lt; ChatBot &gt; ChatBots</div><div class="ttdoc">The ChatBots in the DatabaseContext.</div><div class="ttdef"><b>Definition:</b> <a href="_database_context_8cs_source.html#l00054">DatabaseContext.cs:54</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_job_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Tgstation.Server.Host.Models.Job</a></div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_host_2_models_2_job_8cs_source.html#l00014">Job.cs:16</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_job_html_afb982e4f4d1492aced7dcf14d9ba5d97"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html#afb982e4f4d1492aced7dcf14d9ba5d97">Tgstation.Server.Host.Models.Job.Create</a></div><div class="ttdeci">static Job Create(JobCode code, User? startedBy, Api.Models.Instance instance)</div><div class="ttdoc">Creates a new job for registering in the Jobs.IJobService.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context_html_ade8aeb7dd0a0e480f6f89bd5973703c7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7">Tgstation.Server.Host.Security.AuthenticationContext.GetRight</a></div><div class="ttdeci">ulong GetRight(RightsType rightsType)</div><div class="ttdoc">Get the value of a given rightsType . The value of rightsType . Note that if InstancePermissionSet is...</div><div class="ttdef"><b>Definition:</b> <a href="_authentication_context_8cs_source.html#l00068">AuthenticationContext.cs:68</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations_html_a21fcdc8c16fde3dd75ebf3780d7546cf"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a21fcdc8c16fde3dd75ebf3780d7546cf">Tgstation.Server.Host.Components.IInstanceOperations.OnlineInstance</a></div><div class="ttdeci">ValueTask OnlineInstance(Models.Instance metadata, CancellationToken cancellationToken)</div><div class="ttdoc">Online an IInstance.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations_html_a8aaa4081d257b5fb39bb09ffd07383ff"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a8aaa4081d257b5fb39bb09ffd07383ff">Tgstation.Server.Host.Components.IInstanceOperations.MoveInstance</a></div><div class="ttdeci">ValueTask MoveInstance(Models.Instance metadata, string oldPath, CancellationToken cancellationToken)</div><div class="ttdoc">Move an IInstance.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations_html_abca82157721193c4bb14b3628e9a083e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#abca82157721193c4bb14b3628e9a083e">Tgstation.Server.Host.Components.IInstanceOperations.OfflineInstance</a></div><div class="ttdeci">ValueTask OfflineInstance(Models.Instance metadata, User user, CancellationToken cancellationToken)</div><div class="ttdoc">Offline an IInstance.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager_html_a5760fe527065407b364e674d2a9eaf1d"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">Tgstation.Server.Host.Jobs.IJobManager.CancelJob</a></div><div class="ttdeci">ValueTask&lt; Job?&gt; CancelJob(Job job, User? user, bool blocking, CancellationToken cancellationToken)</div><div class="ttdoc">Cancels a give job .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager_html_aefaca6d0c2762350a41adfe7daaade95"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#aefaca6d0c2762350a41adfe7daaade95">Tgstation.Server.Host.Jobs.IJobManager.RegisterOperation</a></div><div class="ttdeci">ValueTask RegisterOperation(Job job, JobEntrypoint operation, CancellationToken cancellationToken)</div><div class="ttdoc">Registers a given Job and begins running it.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a7b02c8c3dadd90810a9eaa24712a0a20"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">Tgstation.Server.Api.Rights.RightsType</a></div><div class="ttdeci">RightsType</div><div class="ttdoc">The type of rights a model uses.</div><div class="ttdef"><b>Definition:</b> <a href="_rights_type_8cs_source.html#l00006">RightsType.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">Tgstation.Server.Host.Jobs.IJobManager.CancelJob()</a>, <a class="el" href="_database_context_8cs_source.html#l00054">Tgstation.Server.Host.Database.DatabaseContext.ChatBots</a>, <a class="el" href="_instance_controller_8cs_source.html#l00812">Tgstation.Server.Host.Controllers.InstanceController.CheckAccessible()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html#afb982e4f4d1492aced7dcf14d9ba5d97">Tgstation.Server.Host.Models.Job.Create()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa">Tgstation.Server.Host.IO.IIOManager.DirectoryExists()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62">Tgstation.Server.Host.IO.IIOManager.FileExists()</a>, <a class="el" href="_authentication_context_8cs_source.html#l00068">Tgstation.Server.Host.Security.AuthenticationContext.GetRight()</a>, <a class="el" href="_entity_id_8cs_source.html#l00013">Tgstation.Server.Api.Models.EntityId.Id</a>, <a class="el" href="_swarm_server_8cs_source.html#l00026">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_tgstation_8_server_8_api_2_models_2_permission_set_8cs_source.html#l00030">Tgstation.Server.Api.Models.PermissionSet.InstanceManagerRights</a>, <a class="el" href="_component_interfacing_controller_8cs_source.html#l00027">Tgstation.Server.Host.Controllers.ComponentInterfacingController.InstanceOperations</a>, <a class="el" href="_database_context_8cs_source.html#l00034">Tgstation.Server.Host.Database.DatabaseContext.Instances</a>, <a class="el" href="_instance_controller_8cs_source.html#l00057">Tgstation.Server.Host.Controllers.InstanceController.ioManager</a>, <a class="el" href="_instance_controller_8cs_source.html#l00052">Tgstation.Server.Host.Controllers.InstanceController.jobManager</a>, <a class="el" href="_api_controller_8cs_source.html#l00071">Tgstation.Server.Host.Controllers.ApiController.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a8aaa4081d257b5fb39bb09ffd07383ff">Tgstation.Server.Host.Components.IInstanceOperations.MoveInstance()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00795">Tgstation.Server.Host.Controllers.InstanceController.NormalizePath()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#abca82157721193c4bb14b3628e9a083e">Tgstation.Server.Host.Components.IInstanceOperations.OfflineInstance()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a21fcdc8c16fde3dd75ebf3780d7546cf">Tgstation.Server.Host.Components.IInstanceOperations.OnlineInstance()</a>, <a class="el" href="_authentication_context_8cs_source.html#l00019">Tgstation.Server.Host.Security.AuthenticationContext.PermissionSet</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#aefaca6d0c2762350a41adfe7daaade95">Tgstation.Server.Host.Jobs.IJobManager.RegisterOperation()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c">Tgstation.Server.Host.Database.DatabaseContext.Save()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00082">Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</a>, <a class="el" href="_authentication_context_8cs_source.html#l00016">Tgstation.Server.Host.Security.AuthenticationContext.User</a>, <a class="el" href="_instance_controller_8cs_source.html#l00826">Tgstation.Server.Host.Controllers.InstanceController.ValidateCronSetting()</a>, <a class="el" href="_component_interfacing_controller_8cs_source.html#l00094">Tgstation.Server.Host.Controllers.ComponentInterfacingController.ValidateInstanceOnlineStatus()</a>, and <a class="el" href="_component_interfacing_controller_8cs_source.html#l00125">Tgstation.Server.Host.Controllers.ComponentInterfacingController.WithComponentInstanceNullable()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a709c5985e78cdb8bde3f705869ddafb9_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a709c5985e78cdb8bde3f705869ddafb9_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a709c5985e78cdb8bde3f705869ddafb9_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a709c5985e78cdb8bde3f705869ddafb9_cgraph">
<area shape="rect" title="Modify an Api.Models.Instance&#39;s settings." alt="" coords="5,453,221,493"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d" title="Cancels a give job ." alt="" coords="305,5,488,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ae6de3128c5d49b91d7bb8f6f2caf0ed5" title="Populate the InstanceResponse.Accessible property of a given instanceResponse ." alt="" coords="281,69,512,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html#afb982e4f4d1492aced7dcf14d9ba5d97" title="Creates a new job for registering in the Jobs.IJobService." alt="" coords="299,133,495,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#aeae08438da658a3c0afddbb7960e4faa" title="Check that the directory at path &#160;exists." alt="" coords="307,197,486,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad4de873180481f7afa206b6282158d62" title="Check that the file at path &#160;exists." alt="" coords="313,261,481,301"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_security_1_1_authentication_context.html#ade8aeb7dd0a0e480f6f89bd5973703c7" title="Get the value of a given rightsType . The value of rightsType . Note that if InstancePermissionSet is..." alt="" coords="295,325,498,365"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a8aaa4081d257b5fb39bb09ffd07383ff" title="Move an IInstance." alt="" coords="283,389,510,429"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a600268a32d5da87b3c80f97d34319366" title="Normalize a given path &#160;for an instance." alt="" coords="289,453,505,493"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#abca82157721193c4bb14b3628e9a083e" title="Offline an IInstance." alt="" coords="283,517,511,557"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a21fcdc8c16fde3dd75ebf3780d7546cf" title="Online an IInstance." alt="" coords="282,581,511,621"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#aefaca6d0c2762350a41adfe7daaade95" title="Registers a given Job and begins running it." alt="" coords="295,645,499,685"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_database_1_1_database_context.html#ac2e88d53bf1b6ac87d175d83ed39da7c" title="Saves changes made to the IDatabaseContext. A Task representing the running operation." alt="" coords="292,709,501,749"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a5b38d5cba6df39071299a0d0c5e71a6d" title="Validates a given instance &#39;s Api.Models.Instance.AutoUpdateCron setting." alt="" coords="274,773,519,813"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#aba9306ee424759a221509c021cdf0cde" title="Corrects discrepencies between the Api.Models.Instance.Online status of IInstances in the database vs..." alt="" coords="269,838,524,893"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_component_interfacing_controller.html#a0e985e6b0812f8bbce17ed2e5028fd65" title="Run a given action &#160;with the relevant IInstance." alt="" coords="280,917,513,971"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html#a40d32838ff902da852c54215bd8e89fb" title="Check if a given rightsType &#160;is meant for an Models.Instance." alt="" coords="606,277,797,317"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_rights_1_1_rights_helper.html#ab694cd1b9b98a6be7d79f236a71b386c" title="Map a given rightsType &#160;to its respective Enum Type." alt="" coords="610,341,793,381"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#a885378549e2e71bda33b550c252e6098" title="Normalize a path for consistency." alt="" coords="595,437,807,477"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="617,501,785,541"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#ac2e926ff84623c496393880b5a8ada61" title="Get the IInstanceReference associated with given metadata ." alt="" coords="572,884,831,924"/>
</map>
</div>

</div>
</div>
<a id="a5b38d5cba6df39071299a0d0c5e71a6d" name="a5b38d5cba6df39071299a0d0c5e71a6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b38d5cba6df39071299a0d0c5e71a6d">&#9670;&#160;</a></span>ValidateCronSetting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BadRequestObjectResult? Tgstation.Server.Host.Controllers.InstanceController.ValidateCronSetting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validates a given <em>instance</em> 's <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aa94e263fa829683a2b8ae4cdf8d366c6" title="A cron expression indicating when auto-updates should trigger. Must be a valid 6 part cron schedule (...">Api.Models.Instance.AutoUpdateCron</a> setting.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> to validate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>null</code> if <em>instance</em>  has a valid <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#aa94e263fa829683a2b8ae4cdf8d366c6" title="A cron expression indicating when auto-updates should trigger. Must be a valid 6 part cron schedule (...">Api.Models.Instance.AutoUpdateCron</a> setting, a BadRequestObjectResult otherwise.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00826">826</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  827</span>        {</div>
<div class="line"><span class="lineno">  828</span>            <span class="keywordflow">if</span> (!String.IsNullOrWhiteSpace(instance.AutoUpdateCron))</div>
<div class="line"><span class="lineno">  829</span>            {</div>
<div class="line"><span class="lineno">  830</span>                <span class="keywordflow">if</span> ((instance.AutoUpdateInterval.HasValue &amp;&amp; instance.AutoUpdateInterval.Value != 0)</div>
<div class="line"><span class="lineno">  831</span>                   || (CrontabSchedule.TryParse(</div>
<div class="line"><span class="lineno">  832</span>                       instance.AutoUpdateCron,</div>
<div class="line"><span class="lineno">  833</span>                       <span class="keyword">new</span> CrontabSchedule.ParseOptions</div>
<div class="line"><span class="lineno">  834</span>                       {</div>
<div class="line"><span class="lineno">  835</span>                           IncludingSeconds = true,</div>
<div class="line"><span class="lineno">  836</span>                       }) == <span class="keyword">null</span>))</div>
<div class="line"><span class="lineno">  837</span>                    <span class="keywordflow">return</span> BadRequest(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_response_1_1_error_message_response.html">ErrorMessageResponse</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.ModelValidationFailure));</div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span>                instance.AutoUpdateInterval = 0;</div>
<div class="line"><span class="lineno">  840</span>            }</div>
<div class="line"><span class="lineno">  841</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  842</span>                instance.AutoUpdateCron = String.Empty;</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  845</span>        }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00142">Tgstation.Server.Host.Controllers.InstanceController.Create()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00323">Tgstation.Server.Host.Controllers.InstanceController.Update()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a5b38d5cba6df39071299a0d0c5e71a6d_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a5b38d5cba6df39071299a0d0c5e71a6d_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a5b38d5cba6df39071299a0d0c5e71a6d_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_a5b38d5cba6df39071299a0d0c5e71a6d_icgraph">
<area shape="rect" title="Validates a given instance &#39;s Api.Models.Instance.AutoUpdateCron setting." alt="" coords="269,37,515,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#ab462ce6aa240b963c67cab7d20927060" title="Create or attach an Api.Models.Instance." alt="" coords="5,5,221,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#a709c5985e78cdb8bde3f705869ddafb9" title="Modify an Api.Models.Instance&#39;s settings." alt="" coords="5,69,221,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4f60f72c082a222a31383dbfceb755a6" name="a4f60f72c082a222a31383dbfceb755a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f60f72c082a222a31383dbfceb755a6">&#9670;&#160;</a></span>generalConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> Tgstation.Server.Host.Controllers.InstanceController.generalConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The GeneralConfiguration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00077">77</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00142">Tgstation.Server.Host.Controllers.InstanceController.Create()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00688">Tgstation.Server.Host.Controllers.InstanceController.CreateDefaultInstance()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00099">Tgstation.Server.Host.Controllers.InstanceController.InstanceController()</a>.</p>

</div>
</div>
<a id="aa40d55750e2193d714eb1470505c47ee" name="aa40d55750e2193d714eb1470505c47ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa40d55750e2193d714eb1470505c47ee">&#9670;&#160;</a></span>InstanceAttachFileName</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const string Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName = &quot;TGS4_ALLOW_INSTANCE_ATTACH&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>File name to allow attaching instances.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00047">47</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00142">Tgstation.Server.Host.Controllers.InstanceController.Create()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00276">Tgstation.Server.Host.Controllers.InstanceController.Delete()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00259">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>.</p>

</div>
</div>
<a id="afb2e4e54c38a97b299d1fb7692cc5cdd" name="afb2e4e54c38a97b299d1fb7692cc5cdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb2e4e54c38a97b299d1fb7692cc5cdd">&#9670;&#160;</a></span>ioManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Controllers.InstanceController.ioManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00057">57</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00142">Tgstation.Server.Host.Controllers.InstanceController.Create()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00276">Tgstation.Server.Host.Controllers.InstanceController.Delete()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00099">Tgstation.Server.Host.Controllers.InstanceController.InstanceController()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00795">Tgstation.Server.Host.Controllers.InstanceController.NormalizePath()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00323">Tgstation.Server.Host.Controllers.InstanceController.Update()</a>.</p>

</div>
</div>
<a id="a38f7f9669773242d177345e38be2dd34" name="a38f7f9669773242d177345e38be2dd34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38f7f9669773242d177345e38be2dd34">&#9670;&#160;</a></span>jobManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> Tgstation.Server.Host.Controllers.InstanceController.jobManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00052">52</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00099">Tgstation.Server.Host.Controllers.InstanceController.InstanceController()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00323">Tgstation.Server.Host.Controllers.InstanceController.Update()</a>.</p>

</div>
</div>
<a id="ae45aceab65d37ece10acd7eb0fa15b85" name="ae45aceab65d37ece10acd7eb0fa15b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae45aceab65d37ece10acd7eb0fa15b85">&#9670;&#160;</a></span>permissionsUpdateNotifyee</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_permissions_update_notifyee.html">IPermissionsUpdateNotifyee</a> Tgstation.Server.Host.Controllers.InstanceController.permissionsUpdateNotifyee</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IPermissionsUpdateNotifyee for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00072">72</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00142">Tgstation.Server.Host.Controllers.InstanceController.Create()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00099">Tgstation.Server.Host.Controllers.InstanceController.InstanceController()</a>.</p>

</div>
</div>
<a id="ac62c0b1b0e346409b20c3054d4a8354a" name="ac62c0b1b0e346409b20c3054d4a8354a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac62c0b1b0e346409b20c3054d4a8354a">&#9670;&#160;</a></span>platformIdentifier</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a> Tgstation.Server.Host.Controllers.InstanceController.platformIdentifier</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IPlatformIdentifier for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00062">62</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00099">Tgstation.Server.Host.Controllers.InstanceController.InstanceController()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00795">Tgstation.Server.Host.Controllers.InstanceController.NormalizePath()</a>.</p>

</div>
</div>
<a id="a61dbab212a95b16ad876b7c5f8dd51c5" name="a61dbab212a95b16ad876b7c5f8dd51c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61dbab212a95b16ad876b7c5f8dd51c5">&#9670;&#160;</a></span>portAllocator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_port_allocator.html">IPortAllocator</a> Tgstation.Server.Host.Controllers.InstanceController.portAllocator</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IPortAllocator for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00067">67</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00688">Tgstation.Server.Host.Controllers.InstanceController.CreateDefaultInstance()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00099">Tgstation.Server.Host.Controllers.InstanceController.InstanceController()</a>.</p>

</div>
</div>
<a id="a952ce837f434c65e69d35ec886d0fc2d" name="a952ce837f434c65e69d35ec886d0fc2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a952ce837f434c65e69d35ec886d0fc2d">&#9670;&#160;</a></span>swarmConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> Tgstation.Server.Host.Controllers.InstanceController.swarmConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The SwarmConfiguration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html" title="ApiController for managing Components.Instances.">InstanceController</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_instance_controller_8cs_source.html#l00082">82</a> of file <a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_controller_8cs_source.html#l00142">Tgstation.Server.Host.Controllers.InstanceController.Create()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00688">Tgstation.Server.Host.Controllers.InstanceController.CreateDefaultInstance()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00276">Tgstation.Server.Host.Controllers.InstanceController.Delete()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00591">Tgstation.Server.Host.Controllers.InstanceController.GetId()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00649">Tgstation.Server.Host.Controllers.InstanceController.GrantPermissions()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00099">Tgstation.Server.Host.Controllers.InstanceController.InstanceController()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00523">Tgstation.Server.Host.Controllers.InstanceController.List()</a>, and <a class="el" href="_instance_controller_8cs_source.html#l00323">Tgstation.Server.Host.Controllers.InstanceController.Update()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Controllers/<a class="el" href="_instance_controller_8cs_source.html">InstanceController.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
