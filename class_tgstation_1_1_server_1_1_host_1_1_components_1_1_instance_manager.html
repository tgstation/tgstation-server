<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.InstanceManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.19.0</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.InstanceManager Class Reference<span class="mlabels"><span class="mlabel">sealed</span></span></div></div>
</div><!--header-->
<div class="contents">

<p> 
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.InstanceManager:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map">
<area shape="rect" title=" " alt="" coords="390,121,616,161"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances." alt="" coords="204,29,330,55"/>
<area shape="poly" title=" " alt="" coords="328,58,343,64,462,118,460,123,341,69,326,63"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html" title="Operations that can be performed on a given Models.Instance." alt="" coords="5,5,144,31"/>
<area shape="poly" title=" " alt="" coords="160,26,204,32,204,37,159,31"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html" title="Handler for BridgeParameters." alt="" coords="12,55,137,80"/>
<area shape="poly" title=" " alt="" coords="151,55,204,48,204,53,152,60"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html" title="Provider for IInstanceCores." alt="" coords="192,79,342,104"/>
<area shape="poly" title=" " alt="" coords="347,105,403,117,402,122,346,111"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="211,128,323,154"/>
<area shape="poly" title=" " alt="" coords="338,138,389,138,389,144,338,144"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html" title="Registers IBridgeHandlers." alt="" coords="210,177,324,203"/>
<area shape="poly" title=" " alt="" coords="338,173,402,159,403,164,340,178"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="204,227,330,252"/>
<area shape="poly" title=" " alt="" coords="326,219,341,213,460,159,462,164,343,218,328,224"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.InstanceManager:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map" id="a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map">
<area shape="rect" title=" " alt="" coords="944,899,1170,940"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances." alt="" coords="466,29,591,55"/>
<area shape="poly" title=" " alt="" coords="606,24,680,16,765,19,808,26,849,39,888,58,922,84,944,112,963,148,980,193,995,245,1019,363,1036,492,1047,620,1054,738,1058,899,1053,899,1048,739,1042,621,1030,492,1014,364,990,246,975,195,958,151,939,115,918,88,885,63,847,44,807,31,765,24,681,22,606,29"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html" title="Operations that can be performed on a given Models.Instance." alt="" coords="166,5,304,31"/>
<area shape="poly" title=" " alt="" coords="320,22,466,34,465,40,320,28"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html" title="Handler for BridgeParameters." alt="" coords="173,55,297,80"/>
<area shape="poly" title=" " alt="" coords="312,58,465,45,466,50,313,64"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html" title="Provider for IInstanceCores." alt="" coords="453,79,604,104"/>
<area shape="poly" title=" " alt="" coords="619,84,703,83,792,87,870,98,900,108,922,121,943,147,962,182,979,225,993,274,1017,386,1034,509,1046,632,1053,745,1058,899,1053,899,1048,745,1040,632,1029,509,1012,387,988,275,974,226,957,184,939,150,918,126,898,113,869,103,791,92,703,88,619,89"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,157,117,183"/>
<area shape="poly" title=" " alt="" coords="132,162,328,148,576,137,696,135,799,138,877,146,904,153,922,161,943,185,962,217,978,257,993,303,1016,409,1033,525,1045,642,1053,750,1058,898,1053,899,1047,750,1040,643,1028,526,1011,410,988,305,973,259,957,220,939,188,918,166,903,158,876,151,799,143,696,141,576,142,329,154,132,167"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="168,185,303,211"/>
<area shape="poly" title=" " alt="" coords="132,179,167,185,167,190,132,184"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html" title="Registers IBridgeHandlers." alt="" coords="471,309,586,335"/>
<area shape="poly" title=" " alt="" coords="601,316,686,315,781,319,865,331,898,341,922,355,938,372,952,396,978,459,1000,535,1018,620,1044,785,1057,898,1051,899,1039,786,1013,621,995,537,973,460,948,399,933,376,918,359,896,346,864,336,780,324,686,321,601,322"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="466,359,591,384"/>
<area shape="poly" title=" " alt="" coords="606,362,691,358,783,358,866,367,898,375,922,388,937,404,951,426,977,484,998,556,1017,635,1043,790,1056,898,1051,899,1038,791,1011,636,993,557,972,486,947,429,933,408,918,392,896,380,865,372,783,363,691,363,606,367"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html" title="Factory for creating IInstances." alt="" coords="415,179,642,220"/>
<area shape="poly" title=" " alt="" coords="657,179,724,179,795,189,830,198,863,211,894,229,922,251,940,273,956,302,984,377,1007,470,1024,571,1048,767,1057,898,1052,899,1042,767,1019,572,1001,471,979,379,951,304,935,276,918,255,891,233,861,216,828,203,794,194,724,185,657,185"/>
<area shape="poly" title=" " alt="" coords="318,196,415,196,415,202,318,201"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html" title="The service that manages everything to do with jobs." alt="" coords="438,245,619,285"/>
<area shape="poly" title=" " alt="" coords="295,213,354,229,438,246,437,252,353,234,294,218"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="445,409,612,449"/>
<area shape="poly" title=" " alt="" coords="628,409,699,405,776,409,815,417,853,429,889,446,922,468,947,500,971,549,991,609,1010,675,1039,805,1055,898,1050,899,1034,806,1005,676,986,610,966,551,943,503,918,472,886,450,851,434,814,422,776,415,699,410,628,414"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html" title="Factory for scoping usage of IDatabaseContexts. Meant for use by Components." alt="" coords="424,474,633,515"/>
<area shape="poly" title=" " alt="" coords="648,486,727,487,806,491,875,502,902,510,922,521,963,562,995,611,1019,665,1036,721,1048,775,1054,825,1059,899,1053,899,1049,825,1042,776,1031,722,1014,667,991,614,959,566,918,526,900,515,873,507,806,496,727,492,648,492"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html" title="For retrieving the Assembly&#39;s location." alt="" coords="430,539,627,580"/>
<area shape="poly" title=" " alt="" coords="642,540,710,538,784,544,856,563,890,578,922,597,957,630,985,668,1008,711,1025,754,1047,837,1057,898,1051,899,1042,838,1020,756,1003,713,981,671,953,633,918,602,888,582,854,568,783,549,710,543,643,545"/>
<area shape="poly" title=" " alt="" coords="635,264,717,268,801,278,873,293,901,304,922,317,938,337,953,363,980,430,1002,513,1020,603,1045,779,1057,899,1052,899,1040,780,1015,604,997,514,975,432,948,365,934,340,918,322,899,309,872,299,800,283,716,274,635,269"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html" title="Manages the runtime of Jobs." alt="" coords="187,252,283,278"/>
<area shape="poly" title=" " alt="" coords="299,262,437,262,437,268,299,268"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html" title="Represents a service that may take an updated Host assembly and run it, stopping the current assembly..." alt="" coords="438,604,619,645"/>
<area shape="poly" title=" " alt="" coords="634,613,703,614,778,623,853,643,888,658,922,677,950,701,974,728,1013,790,1039,851,1053,898,1048,899,1034,853,1008,793,970,731,946,704,918,682,886,663,851,648,777,628,702,619,634,618"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html" title="Factory for ISystemIdentitys." alt="" coords="428,670,629,710"/>
<area shape="poly" title=" " alt="" coords="644,686,710,692,782,704,854,724,921,755,964,787,1000,826,1028,865,1047,898,1043,900,1024,868,996,829,960,791,919,759,852,729,781,709,709,697,644,692"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html" title="For waiting asynchronously." alt="" coords="438,735,619,776"/>
<area shape="poly" title=" " alt="" coords="635,760,700,768,773,780,849,799,921,824,953,840,984,859,1034,896,1031,901,981,863,951,844,919,829,847,804,772,786,700,773,634,765"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html" title="Provides access to the server&#39;s HttpApiPort." alt="" coords="438,800,619,841"/>
<area shape="poly" title=" " alt="" coords="634,830,771,849,921,877,992,896,991,901,919,882,770,854,634,835"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html" title="Start and stop controllers for a swarm service." alt="" coords="431,866,626,906"/>
<area shape="poly" title=" " alt="" coords="641,891,944,910,944,915,640,896"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html" title="Abstraction for global::System.Console." alt="" coords="445,931,612,972"/>
<area shape="poly" title=" " alt="" coords="627,944,920,928,943,926,944,931,920,933,628,950"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html" title="For identifying the current platform." alt="" coords="430,996,627,1037"/>
<area shape="poly" title=" " alt="" coords="642,1004,776,986,919,960,997,938,998,943,921,965,776,992,643,1009"/>
<area shape="rect" title=" " alt="" coords="451,1062,606,1102"/>
<area shape="poly" title=" " alt="" coords="622,1076,689,1070,765,1058,843,1040,919,1015,952,998,983,978,1032,938,1035,942,986,982,954,1003,921,1020,845,1046,766,1063,689,1075,622,1081"/>
<area shape="rect" title=" " alt="" coords="453,1127,604,1168"/>
<area shape="poly" title=" " alt="" coords="620,1149,689,1147,766,1137,845,1118,883,1103,919,1086,961,1053,997,1013,1025,972,1043,939,1048,942,1029,975,1001,1016,965,1057,921,1090,885,1108,847,1123,767,1142,689,1152,620,1154"/>
<area shape="rect" title=" " alt="" coords="452,1192,605,1233"/>
<area shape="poly" title=" " alt="" coords="621,1222,690,1224,768,1217,847,1199,884,1184,918,1164,947,1141,971,1113,992,1082,1009,1050,1035,988,1049,940,1054,941,1040,990,1014,1052,997,1085,976,1116,951,1145,922,1169,886,1189,849,1204,769,1223,691,1229,620,1227"/>
<area shape="rect" title=" " alt="" coords="419,1257,638,1313"/>
<area shape="poly" title=" " alt="" coords="654,1300,720,1301,789,1294,857,1276,889,1262,918,1243,953,1211,981,1172,1004,1130,1021,1085,1043,1002,1052,940,1057,941,1048,1003,1026,1087,1009,1132,986,1175,957,1214,922,1247,892,1266,859,1281,790,1300,720,1307,654,1306"/>
<area shape="rect" title=" " alt="" coords="354,1336,703,1407"/>
<area shape="poly" title=" " alt="" coords="719,1387,771,1382,824,1371,874,1351,918,1323,959,1281,991,1231,1015,1176,1032,1120,1043,1065,1049,1014,1053,940,1059,940,1055,1015,1048,1066,1037,1121,1020,1178,996,1233,963,1284,922,1327,876,1356,826,1376,772,1387,719,1392"/>
<area shape="rect" title=" " alt="" coords="444,1431,613,1472"/>
<area shape="poly" title=" " alt="" coords="628,1450,710,1448,796,1442,870,1429,898,1419,918,1407,944,1373,968,1320,989,1255,1008,1182,1035,1040,1051,940,1056,941,1041,1041,1013,1184,994,1256,973,1322,949,1376,922,1411,900,1424,871,1434,796,1447,710,1454,628,1456"/>
<area shape="rect" title=" " alt="" coords="446,1496,611,1522"/>
<area shape="poly" title=" " alt="" coords="626,1509,709,1508,795,1503,870,1490,898,1480,918,1468,933,1452,947,1430,972,1369,994,1295,1012,1212,1038,1051,1051,940,1056,941,1043,1052,1017,1213,999,1296,977,1371,952,1432,937,1455,922,1473,900,1485,871,1495,795,1508,709,1513,626,1514"/>
<area shape="rect" title=" " alt="" coords="450,1545,607,1571"/>
<area shape="poly" title=" " alt="" coords="622,1555,803,1548,879,1540,904,1535,918,1528,935,1510,950,1485,977,1417,999,1334,1017,1241,1041,1062,1052,940,1057,940,1046,1062,1022,1242,1004,1335,982,1419,955,1487,939,1513,922,1533,906,1540,880,1545,803,1553,622,1560"/>
<area shape="rect" title=" " alt="" coords="439,1595,618,1636"/>
<area shape="poly" title=" " alt="" coords="634,1628,715,1637,799,1640,871,1635,899,1628,918,1617,937,1597,954,1568,984,1490,1007,1393,1024,1286,1045,1079,1053,940,1058,940,1050,1079,1030,1287,1012,1394,989,1491,959,1570,942,1600,922,1622,901,1633,872,1640,799,1646,715,1642,633,1634"/>
<area shape="rect" title=" " alt="" coords="473,1660,584,1686"/>
<area shape="poly" title=" " alt="" coords="599,1679,685,1686,779,1689,864,1682,896,1674,918,1662,938,1639,956,1608,972,1569,986,1525,1010,1421,1027,1307,1039,1192,1046,1086,1053,940,1058,941,1052,1087,1044,1192,1032,1307,1015,1422,991,1526,977,1571,961,1611,942,1642,922,1666,898,1679,865,1687,779,1694,684,1691,599,1684"/>
<area shape="rect" title=" " alt="" coords="473,1709,584,1735"/>
<area shape="poly" title=" " alt="" coords="600,1728,685,1735,780,1737,864,1730,896,1722,918,1710,939,1686,958,1652,975,1611,989,1562,1013,1451,1030,1329,1041,1207,1048,1094,1053,940,1058,940,1054,1094,1047,1207,1035,1330,1018,1452,995,1564,980,1612,963,1654,944,1689,922,1714,898,1727,865,1736,780,1743,685,1740,599,1733"/>
<area shape="rect" title=" " alt="" coords="503,1759,554,1784"/>
<area shape="poly" title=" " alt="" coords="569,1774,654,1782,758,1787,810,1786,856,1781,893,1773,918,1759,940,1733,960,1697,978,1653,993,1602,1017,1483,1033,1353,1044,1222,1050,1103,1053,940,1059,940,1055,1103,1049,1223,1039,1354,1022,1484,998,1603,983,1655,965,1700,945,1736,922,1763,895,1778,856,1787,810,1791,758,1792,654,1787,569,1779"/>
<area shape="rect" title=" " alt="" coords="506,1808,551,1834"/>
<area shape="poly" title=" " alt="" coords="566,1830,639,1849,685,1857,734,1861,783,1859,832,1851,878,1834,918,1807,942,1780,962,1741,980,1694,996,1640,1020,1514,1036,1376,1046,1237,1052,1111,1053,940,1059,940,1057,1111,1052,1238,1042,1376,1025,1514,1001,1641,985,1696,967,1744,946,1783,922,1811,880,1839,834,1856,784,1865,733,1866,684,1862,638,1854,565,1836"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a07d2074a11239986ec39b1ac492f3081" id="r_a07d2074a11239986ec39b1ac492f3081"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a07d2074a11239986ec39b1ac492f3081">InstanceManager</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>, IMetricFactory metricFactory, ICollectorRegistry collectorRegistry, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6b0a11be884eb56cdf79528acb7de75d">generalConfigurationOptions</a>, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ed022b1afe150b7a84dd8447774f8bc">swarmConfigurationOptions</a>, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a1eee56d463e0dfa4bfe9912dc04bdd69">internalConfigurationOptions</a>, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>)</td></tr>
<tr class="memdesc:a07d2074a11239986ec39b1ac492f3081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the InstanceManager class.  <br /></td></tr>
<tr class="separator:a07d2074a11239986ec39b1ac492f3081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f7ed3869c2397df900e5745be0befc" id="r_a72f7ed3869c2397df900e5745be0befc"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a72f7ed3869c2397df900e5745be0befc">DisposeAsync</a> ()</td></tr>
<tr class="separator:a72f7ed3869c2397df900e5745be0befc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a577a0e2649a7546de6b3aa7e2f37166d" id="r_a577a0e2649a7546de6b3aa7e2f37166d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html">IInstanceReference</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a577a0e2649a7546de6b3aa7e2f37166d">GetInstanceReference</a> (long instanceId)</td></tr>
<tr class="memdesc:a577a0e2649a7546de6b3aa7e2f37166d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html" title="Controller version of IInstanceCore.">IInstanceReference</a> associated with given <em>instanceId</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instanceId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">Api.Models.EntityId.Id</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> associated with the given <em>instanceId</em>  if it is online, <code>null</code> otherwise.</dd></dl>
  <br /></td></tr>
<tr class="separator:a577a0e2649a7546de6b3aa7e2f37166d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3dc0cfcb7f415f1dd8a98bfd018f90e" id="r_ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad3dc0cfcb7f415f1dd8a98bfd018f90e">MoveInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> instance, string oldPath, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> with the updated path.</td></tr>
    <tr><td class="paramname">oldPath</td><td>The old path of the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>. <em>metadata</em>  will have this set on <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318" title="The path to where the Instance is located. Can only be changed while the Instance is offline....">Api.Models.Instance.Path</a> if the operation fails.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af207019cbf73d4992ff3172c0968b163" id="r_af207019cbf73d4992ff3172c0968b163"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af207019cbf73d4992ff3172c0968b163">OfflineInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> user, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af207019cbf73d4992ff3172c0968b163"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offline an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">user</td><td>The User performing the operation.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:af207019cbf73d4992ff3172c0968b163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc85f42ec73bd6fd72085969a7c4cb5" id="r_a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">OnlineInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Online an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bcc92fca46ad404800304ce4bdd781" id="r_aa2bcc92fca46ad404800304ce4bdd781"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781">StartAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:aa2bcc92fca46ad404800304ce4bdd781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1a2f2c9fe345546fd5f8ae27fe466b" id="r_aaa1a2f2c9fe345546fd5f8ae27fe466b"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa1a2f2c9fe345546fd5f8ae27fe466b">StopAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:aaa1a2f2c9fe345546fd5f8ae27fe466b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ab3803515d1f7387db7d7bbdc2a7e0" id="r_ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html">BridgeResponse</a>?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5ab3803515d1f7387db7d7bbdc2a7e0">ProcessBridgeRequest</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html">BridgeParameters</a> parameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a set of bridge <em>parameters</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameters</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html" title="Parameters for a bridge request.">BridgeParameters</a> to handle.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html" title="A response to a bridge request.">BridgeResponse</a> for the request or <code>null</code> if the request could not be dispatched.</dd></dl>
  <br /></td></tr>
<tr class="separator:ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785c474a5d39316af850239b0c7e107b" id="r_a785c474a5d39316af850239b0c7e107b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html">IBridgeRegistration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a785c474a5d39316af850239b0c7e107b">RegisterHandler</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> bridgeHandler)</td></tr>
<tr class="memdesc:a785c474a5d39316af850239b0c7e107b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a given <em>bridgeHandler</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridgeHandler</td><td>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> to register.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A representative <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html" title="Represents a registration of an interop session.">IBridgeRegistration</a>.</dd></dl>
  <br /></td></tr>
<tr class="separator:a785c474a5d39316af850239b0c7e107b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add11622918bcaebdf64e69c29e8ac255" id="r_add11622918bcaebdf64e69c29e8ac255"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html">IInstanceCore</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#add11622918bcaebdf64e69c29e8ac255">GetInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata)</td></tr>
<tr class="memdesc:add11622918bcaebdf64e69c29e8ac255"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for a given <em>instance</em>  if it's online.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> to get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> if it is online, <code>null</code> otherwise.</dd></dl>
  <br /></td></tr>
<tr class="separator:add11622918bcaebdf64e69c29e8ac255"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a0d54ae3e93cf9a9af10411c733e77f44" id="r_a0d54ae3e93cf9a9af10411c733e77f44"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a0d54ae3e93cf9a9af10411c733e77f44">Ready</a><code> [get]</code></td></tr>
<tr class="memdesc:a0d54ae3e93cf9a9af10411c733e77f44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task that completes when the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances.">IInstanceManager</a> finishes initializing.  <br /></td></tr>
<tr class="separator:a0d54ae3e93cf9a9af10411c733e77f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager"><td colspan="2" onclick="javascript:toggleInherit('properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html">Tgstation.Server.Host.Components.IInstanceManager</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa70355ebb8437fd170e4f75e826f1ad7" id="r_aa70355ebb8437fd170e4f75e826f1ad7"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Initialize</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aa70355ebb8437fd170e4f75e826f1ad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the InstanceManager.  <br /></td></tr>
<tr class="separator:aa70355ebb8437fd170e4f75e826f1ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799f1f7613771ef7c9d9f5ff55fb8b47" id="r_a799f1f7613771ef7c9d9f5ff55fb8b47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47">PreflightChecks</a> ()</td></tr>
<tr class="memdesc:a799f1f7613771ef7c9d9f5ff55fb8b47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check we have a valid system and configuration.  <br /></td></tr>
<tr class="separator:a799f1f7613771ef7c9d9f5ff55fb8b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae64238c09aa5b3301d05109ceee5d09e" id="r_ae64238c09aa5b3301d05109ceee5d09e"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">InitializeSwarm</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ae64238c09aa5b3301d05109ceee5d09e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the connection to the TGS swarm.  <br /></td></tr>
<tr class="separator:ae64238c09aa5b3301d05109ceee5d09e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae2b48b5197337f7a311fd115951be7f6" id="r_ae2b48b5197337f7a311fd115951be7f6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a></td></tr>
<tr class="memdesc:ae2b48b5197337f7a311fd115951be7f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IInstanceFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:ae2b48b5197337f7a311fd115951be7f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59bc4b977f9b72208d553fbfa57f118e" id="r_a59bc4b977f9b72208d553fbfa57f118e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a></td></tr>
<tr class="memdesc:a59bc4b977f9b72208d553fbfa57f118e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager for the InstanceManager.  <br /></td></tr>
<tr class="separator:a59bc4b977f9b72208d553fbfa57f118e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c8e78bdae6eb6eb2ed289563c639cc" id="r_ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a></td></tr>
<tr class="memdesc:ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IDatabaseContextFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa335c25ccb65f93242424c79396a29dc" id="r_aa335c25ccb65f93242424c79396a29dc"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a></td></tr>
<tr class="memdesc:aa335c25ccb65f93242424c79396a29dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAssemblyInformationProvider for the InstanceManager.  <br /></td></tr>
<tr class="separator:aa335c25ccb65f93242424c79396a29dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cba827c550b76d41c119b62d25c4668" id="r_a4cba827c550b76d41c119b62d25c4668"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a></td></tr>
<tr class="memdesc:a4cba827c550b76d41c119b62d25c4668"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IJobService for the InstanceManager.  <br /></td></tr>
<tr class="separator:a4cba827c550b76d41c119b62d25c4668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ba10fddea5448f4c8c08f363a0e391" id="r_ac2ba10fddea5448f4c8c08f363a0e391"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a></td></tr>
<tr class="memdesc:ac2ba10fddea5448f4c8c08f363a0e391"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IServerControl for the InstanceManager.  <br /></td></tr>
<tr class="separator:ac2ba10fddea5448f4c8c08f363a0e391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a914147c0498a9b2482efe956486646fb" id="r_a914147c0498a9b2482efe956486646fb"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a></td></tr>
<tr class="memdesc:a914147c0498a9b2482efe956486646fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISystemIdentityFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:a914147c0498a9b2482efe956486646fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f992fed638980594fd5a6c45b8946b" id="r_ad6f992fed638980594fd5a6c45b8946b"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a></td></tr>
<tr class="memdesc:ad6f992fed638980594fd5a6c45b8946b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad6f992fed638980594fd5a6c45b8946b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b7e13dc94565671f962eb9fe62fd82" id="r_ad5b7e13dc94565671f962eb9fe62fd82"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a></td></tr>
<tr class="memdesc:ad5b7e13dc94565671f962eb9fe62fd82"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IServerPortProvider for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad5b7e13dc94565671f962eb9fe62fd82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7281abf42fbdf74cfbabfe9181ad301e" id="r_a7281abf42fbdf74cfbabfe9181ad301e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a></td></tr>
<tr class="memdesc:a7281abf42fbdf74cfbabfe9181ad301e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISwarmServiceController for the InstanceManager.  <br /></td></tr>
<tr class="separator:a7281abf42fbdf74cfbabfe9181ad301e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad650e598cfd489a215ab0b6dfcc13910" id="r_ad650e598cfd489a215ab0b6dfcc13910"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a></td></tr>
<tr class="memdesc:ad650e598cfd489a215ab0b6dfcc13910"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IConsole for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad650e598cfd489a215ab0b6dfcc13910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26a35317eec77d8eed96595fc85f7c4c" id="r_a26a35317eec77d8eed96595fc85f7c4c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a></td></tr>
<tr class="memdesc:a26a35317eec77d8eed96595fc85f7c4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IPlatformIdentifier for the InstanceManager.  <br /></td></tr>
<tr class="separator:a26a35317eec77d8eed96595fc85f7c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b0a11be884eb56cdf79528acb7de75d" id="r_a6b0a11be884eb56cdf79528acb7de75d"><td class="memItemLeft" align="right" valign="top">readonly IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6b0a11be884eb56cdf79528acb7de75d">generalConfigurationOptions</a></td></tr>
<tr class="memdesc:a6b0a11be884eb56cdf79528acb7de75d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IOptions&lt;TOptions&gt; of GeneralConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:a6b0a11be884eb56cdf79528acb7de75d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed022b1afe150b7a84dd8447774f8bc" id="r_a6ed022b1afe150b7a84dd8447774f8bc"><td class="memItemLeft" align="right" valign="top">readonly IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ed022b1afe150b7a84dd8447774f8bc">swarmConfigurationOptions</a></td></tr>
<tr class="memdesc:a6ed022b1afe150b7a84dd8447774f8bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IOptions&lt;TOptions&gt; of SwarmConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:a6ed022b1afe150b7a84dd8447774f8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eee56d463e0dfa4bfe9912dc04bdd69" id="r_a1eee56d463e0dfa4bfe9912dc04bdd69"><td class="memItemLeft" align="right" valign="top">readonly IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a1eee56d463e0dfa4bfe9912dc04bdd69">internalConfigurationOptions</a></td></tr>
<tr class="memdesc:a1eee56d463e0dfa4bfe9912dc04bdd69"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IOptions&lt;TOptions&gt; of InternalConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:a1eee56d463e0dfa4bfe9912dc04bdd69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a968fedca8d4cc5ff16c77c0cbc782bda" id="r_a968fedca8d4cc5ff16c77c0cbc782bda"><td class="memItemLeft" align="right" valign="top">readonly ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a></td></tr>
<tr class="memdesc:a968fedca8d4cc5ff16c77c0cbc782bda"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for the InstanceManager.  <br /></td></tr>
<tr class="separator:a968fedca8d4cc5ff16c77c0cbc782bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d96cfaae1f2de6a931a8158b2290c1" id="r_a25d96cfaae1f2de6a931a8158b2290c1"><td class="memItemLeft" align="right" valign="top">readonly Dictionary&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer</a>&lt; <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html">IInstance</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_wrapper.html">InstanceWrapper</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a></td></tr>
<tr class="memdesc:a25d96cfaae1f2de6a931a8158b2290c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of instance <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to the respective ReferenceCountingContainer&lt;TWrapped, TReference&gt; for IInstances. Also used as a <code>lock</code> object.  <br /></td></tr>
<tr class="separator:a25d96cfaae1f2de6a931a8158b2290c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4eafee41a5201cb8f671607b53cc0bd" id="r_af4eafee41a5201cb8f671607b53cc0bd"><td class="memItemLeft" align="right" valign="top">readonly Dictionary&lt; string, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a></td></tr>
<tr class="memdesc:af4eafee41a5201cb8f671607b53cc0bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5" title="Used to identify and authenticate the DreamDaemon instance.">DMApiParameters.AccessIdentifier</a>s to their respective IBridgeHandlers.  <br /></td></tr>
<tr class="separator:af4eafee41a5201cb8f671607b53cc0bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf66550ead757ef3bc6915c9b15d06b" id="r_abaf66550ead757ef3bc6915c9b15d06b"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a></td></tr>
<tr class="memdesc:abaf66550ead757ef3bc6915c9b15d06b"><td class="mdescLeft">&#160;</td><td class="mdescRight">SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineInstance(Models.Instance, User, CancellationToken).  <br /></td></tr>
<tr class="separator:abaf66550ead757ef3bc6915c9b15d06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16905d984154ab9356b3477dc257f435" id="r_a16905d984154ab9356b3477dc257f435"><td class="memItemLeft" align="right" valign="top">readonly TaskCompletionSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a></td></tr>
<tr class="memdesc:a16905d984154ab9356b3477dc257f435"><td class="mdescLeft">&#160;</td><td class="mdescRight">The TaskCompletionSource for Ready.  <br /></td></tr>
<tr class="separator:a16905d984154ab9356b3477dc257f435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fbe64a7ff3a9fc273ecc05f613ed7c" id="r_a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="memItemLeft" align="right" valign="top">readonly CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a></td></tr>
<tr class="memdesc:a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource for Initialize(CancellationToken).  <br /></td></tr>
<tr class="separator:a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb76c23570af139eb50c9091c462ecf9" id="r_aeb76c23570af139eb50c9091c462ecf9"><td class="memItemLeft" align="right" valign="top">readonly CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a></td></tr>
<tr class="memdesc:aeb76c23570af139eb50c9091c462ecf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource linked with the token given to StopAsync(CancellationToken).  <br /></td></tr>
<tr class="separator:aeb76c23570af139eb50c9091c462ecf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5740c90c4a6ff7cf2b2e84e0a07e5812" id="r_a5740c90c4a6ff7cf2b2e84e0a07e5812"><td class="memItemLeft" align="right" valign="top">readonly Gauge&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">onlineInstances</a></td></tr>
<tr class="memdesc:a5740c90c4a6ff7cf2b2e84e0a07e5812"><td class="mdescLeft">&#160;</td><td class="mdescRight">The count of online instances.  <br /></td></tr>
<tr class="separator:a5740c90c4a6ff7cf2b2e84e0a07e5812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66bf7714d6593c0793e5612b60335b8" id="r_ad66bf7714d6593c0793e5612b60335b8"><td class="memItemLeft" align="right" valign="top">readonly? string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a></td></tr>
<tr class="memdesc:ad66bf7714d6593c0793e5612b60335b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The original <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b" title="Gets or sets the IConsole window&#39;s title. Can return null if getting the console title is not support...">IConsole.Title</a> of console.  <br /></td></tr>
<tr class="separator:ad66bf7714d6593c0793e5612b60335b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da7b0a7f75cbd3bcebc0e215f9dfcef" id="r_a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="memItemLeft" align="right" valign="top">Task?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a></td></tr>
<tr class="memdesc:a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Task returned by Initialize(CancellationToken).  <br /></td></tr>
<tr class="separator:a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba869dae354db235f8518f7283a531c" id="r_a6ba869dae354db235f8518f7283a531c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a></td></tr>
<tr class="memdesc:a6ba869dae354db235f8518f7283a531c"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the InstanceManager has been DisposeAsync'd.  <br /></td></tr>
<tr class="separator:a6ba869dae354db235f8518f7283a531c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00035">35</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a07d2074a11239986ec39b1ac492f3081" name="a07d2074a11239986ec39b1ac492f3081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07d2074a11239986ec39b1ac492f3081">&#9670;&#160;</a></span>InstanceManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.InstanceManager.InstanceManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a>&#160;</td>
          <td class="paramname"><em>instanceFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>ioManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a>&#160;</td>
          <td class="paramname"><em>databaseContextFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a>&#160;</td>
          <td class="paramname"><em>assemblyInformationProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a>&#160;</td>
          <td class="paramname"><em>jobService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td>
          <td class="paramname"><em>serverControl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a>&#160;</td>
          <td class="paramname"><em>systemIdentityFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a>&#160;</td>
          <td class="paramname"><em>serverPortProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a>&#160;</td>
          <td class="paramname"><em>swarmServiceController</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a>&#160;</td>
          <td class="paramname"><em>console</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a>&#160;</td>
          <td class="paramname"><em>platformIdentifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMetricFactory&#160;</td>
          <td class="paramname"><em>metricFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ICollectorRegistry&#160;</td>
          <td class="paramname"><em>collectorRegistry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>generalConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>swarmConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>internalConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new instance of the InstanceManager class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instanceFactory</td><td>The value of instanceFactory.</td></tr>
    <tr><td class="paramname">ioManager</td><td>The value of <em>ioManager</em> .</td></tr>
    <tr><td class="paramname">databaseContextFactory</td><td>The value of <em>databaseContextFactory</em> .</td></tr>
    <tr><td class="paramname">assemblyInformationProvider</td><td>The value of assemblyInformationProvider.</td></tr>
    <tr><td class="paramname">jobService</td><td>The value of jobService.</td></tr>
    <tr><td class="paramname">serverControl</td><td>The value of serverControl.</td></tr>
    <tr><td class="paramname">systemIdentityFactory</td><td>The value of systemIdentityFactory.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The value of asyncDelayer.</td></tr>
    <tr><td class="paramname">serverPortProvider</td><td>The value of serverPortProvider.</td></tr>
    <tr><td class="paramname">swarmServiceController</td><td>The value of swarmServiceController.</td></tr>
    <tr><td class="paramname">console</td><td>The value of console.</td></tr>
    <tr><td class="paramname">platformIdentifier</td><td>The value of platformIdentifier.</td></tr>
    <tr><td class="paramname">metricFactory</td><td>The IMetricFactory used to create metrics.</td></tr>
    <tr><td class="paramname">collectorRegistry</td><td>The ICollectorRegistry to use.</td></tr>
    <tr><td class="paramname">generalConfigurationOptions</td><td>The value of generalConfigurationOptions.</td></tr>
    <tr><td class="paramname">swarmConfigurationOptions</td><td>The value of swarmConfigurationOptions.</td></tr>
    <tr><td class="paramname">internalConfigurationOptions</td><td>The value of internalConfigurationOptions.</td></tr>
    <tr><td class="paramname">logger</td><td>The value of logger.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00196">196</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  215</span>        {</div>
<div class="line"><span class="lineno">  216</span>            this.instanceFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>));</div>
<div class="line"><span class="lineno">  217</span>            this.ioManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>));</div>
<div class="line"><span class="lineno">  218</span>            this.databaseContextFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>));</div>
<div class="line"><span class="lineno">  219</span>            this.assemblyInformationProvider = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>));</div>
<div class="line"><span class="lineno">  220</span>            this.jobService = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>));</div>
<div class="line"><span class="lineno">  221</span>            this.serverControl = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>));</div>
<div class="line"><span class="lineno">  222</span>            this.systemIdentityFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>));</div>
<div class="line"><span class="lineno">  223</span>            this.asyncDelayer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>));</div>
<div class="line"><span class="lineno">  224</span>            this.serverPortProvider = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>));</div>
<div class="line"><span class="lineno">  225</span>            this.swarmServiceController = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>));</div>
<div class="line"><span class="lineno">  226</span>            this.console = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>));</div>
<div class="line"><span class="lineno">  227</span>            this.platformIdentifier = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>));</div>
<div class="line"><span class="lineno">  228</span>            ArgumentNullException.ThrowIfNull(metricFactory);</div>
<div class="line"><span class="lineno">  229</span>            ArgumentNullException.ThrowIfNull(collectorRegistry);</div>
<div class="line"><span class="lineno">  230</span>            this.generalConfigurationOptions = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6b0a11be884eb56cdf79528acb7de75d">generalConfigurationOptions</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6b0a11be884eb56cdf79528acb7de75d">generalConfigurationOptions</a>));</div>
<div class="line"><span class="lineno">  231</span>            this.swarmConfigurationOptions = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ed022b1afe150b7a84dd8447774f8bc">swarmConfigurationOptions</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ed022b1afe150b7a84dd8447774f8bc">swarmConfigurationOptions</a>));</div>
<div class="line"><span class="lineno">  232</span>            this.internalConfigurationOptions = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a1eee56d463e0dfa4bfe9912dc04bdd69">internalConfigurationOptions</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a1eee56d463e0dfa4bfe9912dc04bdd69">internalConfigurationOptions</a>));</div>
<div class="line"><span class="lineno">  233</span>            this.logger = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>));</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b">Title</a>;</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">onlineInstances</a> = metricFactory.CreateGauge(<span class="stringliteral">&quot;tgs_online_instances&quot;</span>, <span class="stringliteral">&quot;The total number of instances online&quot;</span>);</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a> = <span class="keyword">new</span> Dictionary&lt;long, ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;&gt;();</div>
<div class="line"><span class="lineno">  240</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a> = <span class="keyword">new</span> Dictionary&lt;string, IBridgeHandler&gt;();</div>
<div class="line"><span class="lineno">  241</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a> = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  242</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  243</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  244</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>            collectorRegistry.AddBeforeCollectCallback(async cancellationToken =&gt;</div>
<div class="line"><span class="lineno">  247</span>            {</div>
<div class="line"><span class="lineno">  248</span>                <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  249</span>                    <span class="keywordflow">foreach</span> (var container <span class="keywordflow">in</span> <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Values)</div>
<div class="line"><span class="lineno">  250</span>                        container.Instance.Watchdog.RunMetricsScrape();</div>
<div class="line"><span class="lineno">  251</span>            });</div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a16905d984154ab9356b3477dc257f435"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a></div><div class="ttdeci">readonly TaskCompletionSource readyTcs</div><div class="ttdoc">The TaskCompletionSource for Ready.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00143">InstanceManager.cs:143</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a1eee56d463e0dfa4bfe9912dc04bdd69"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a1eee56d463e0dfa4bfe9912dc04bdd69">Tgstation.Server.Host.Components.InstanceManager.internalConfigurationOptions</a></div><div class="ttdeci">readonly IOptions&lt; InternalConfiguration &gt; internalConfigurationOptions</div><div class="ttdoc">The IOptions&lt;TOptions&gt; of InternalConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00118">InstanceManager.cs:118</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a25d96cfaae1f2de6a931a8158b2290c1"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">Tgstation.Server.Host.Components.InstanceManager.instances</a></div><div class="ttdeci">readonly Dictionary&lt; long, ReferenceCountingContainer&lt; IInstance, InstanceWrapper &gt; &gt; instances</div><div class="ttdoc">Map of instance EntityId.Ids to the respective ReferenceCountingContainer&lt;TWrapped,...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00128">InstanceManager.cs:128</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a26a35317eec77d8eed96595fc85f7c4c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a></div><div class="ttdeci">readonly IPlatformIdentifier platformIdentifier</div><div class="ttdoc">The IPlatformIdentifier for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00103">InstanceManager.cs:103</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a4cba827c550b76d41c119b62d25c4668"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">Tgstation.Server.Host.Components.InstanceManager.jobService</a></div><div class="ttdeci">readonly IJobService jobService</div><div class="ttdoc">The IJobService for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00068">InstanceManager.cs:68</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a5740c90c4a6ff7cf2b2e84e0a07e5812"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">Tgstation.Server.Host.Components.InstanceManager.onlineInstances</a></div><div class="ttdeci">readonly Gauge onlineInstances</div><div class="ttdoc">The count of online instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00158">InstanceManager.cs:158</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a59bc4b977f9b72208d553fbfa57f118e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">Tgstation.Server.Host.Components.InstanceManager.ioManager</a></div><div class="ttdeci">readonly IIOManager ioManager</div><div class="ttdoc">The IIOManager for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00053">InstanceManager.cs:53</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a6b0a11be884eb56cdf79528acb7de75d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6b0a11be884eb56cdf79528acb7de75d">Tgstation.Server.Host.Components.InstanceManager.generalConfigurationOptions</a></div><div class="ttdeci">readonly IOptions&lt; GeneralConfiguration &gt; generalConfigurationOptions</div><div class="ttdoc">The IOptions&lt;TOptions&gt; of GeneralConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00108">InstanceManager.cs:108</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a6ed022b1afe150b7a84dd8447774f8bc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ed022b1afe150b7a84dd8447774f8bc">Tgstation.Server.Host.Components.InstanceManager.swarmConfigurationOptions</a></div><div class="ttdeci">readonly IOptions&lt; SwarmConfiguration &gt; swarmConfigurationOptions</div><div class="ttdoc">The IOptions&lt;TOptions&gt; of SwarmConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00113">InstanceManager.cs:113</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a7281abf42fbdf74cfbabfe9181ad301e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a></div><div class="ttdeci">readonly ISwarmServiceController swarmServiceController</div><div class="ttdoc">The ISwarmServiceController for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00093">InstanceManager.cs:93</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a76fbe64a7ff3a9fc273ecc05f613ed7c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a></div><div class="ttdeci">readonly CancellationTokenSource startupCancellationTokenSource</div><div class="ttdoc">The CancellationTokenSource for Initialize(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00148">InstanceManager.cs:148</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a914147c0498a9b2482efe956486646fb"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a></div><div class="ttdeci">readonly ISystemIdentityFactory systemIdentityFactory</div><div class="ttdoc">The ISystemIdentityFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00078">InstanceManager.cs:78</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a968fedca8d4cc5ff16c77c0cbc782bda"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">Tgstation.Server.Host.Components.InstanceManager.logger</a></div><div class="ttdeci">readonly ILogger&lt; InstanceManager &gt; logger</div><div class="ttdoc">The ILogger for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00123">InstanceManager.cs:123</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aa335c25ccb65f93242424c79396a29dc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a></div><div class="ttdeci">readonly IAssemblyInformationProvider assemblyInformationProvider</div><div class="ttdoc">The IAssemblyInformationProvider for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00063">InstanceManager.cs:63</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ab5c8e78bdae6eb6eb2ed289563c639cc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a></div><div class="ttdeci">readonly IDatabaseContextFactory databaseContextFactory</div><div class="ttdoc">The IDatabaseContextFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00058">InstanceManager.cs:58</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_abaf66550ead757ef3bc6915c9b15d06b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim instanceStateChangeSemaphore</div><div class="ttdoc">SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineIn...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00138">InstanceManager.cs:138</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ac2ba10fddea5448f4c8c08f363a0e391"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">Tgstation.Server.Host.Components.InstanceManager.serverControl</a></div><div class="ttdeci">readonly IServerControl serverControl</div><div class="ttdoc">The IServerControl for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00073">InstanceManager.cs:73</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad5b7e13dc94565671f962eb9fe62fd82"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a></div><div class="ttdeci">readonly IServerPortProvider serverPortProvider</div><div class="ttdoc">The IServerPortProvider for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00088">InstanceManager.cs:88</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad650e598cfd489a215ab0b6dfcc13910"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">Tgstation.Server.Host.Components.InstanceManager.console</a></div><div class="ttdeci">readonly IConsole console</div><div class="ttdoc">The IConsole for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00098">InstanceManager.cs:98</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad66bf7714d6593c0793e5612b60335b8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a></div><div class="ttdeci">readonly? string originalConsoleTitle</div><div class="ttdoc">The original IConsole.Title of console.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00163">InstanceManager.cs:163</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad6f992fed638980594fd5a6c45b8946b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a></div><div class="ttdeci">readonly IAsyncDelayer asyncDelayer</div><div class="ttdoc">The IAsyncDelayer for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00083">InstanceManager.cs:83</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ae2b48b5197337f7a311fd115951be7f6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a></div><div class="ttdeci">readonly IInstanceFactory instanceFactory</div><div class="ttdoc">The IInstanceFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00048">InstanceManager.cs:48</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aeb76c23570af139eb50c9091c462ecf9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a></div><div class="ttdeci">readonly CancellationTokenSource shutdownCancellationTokenSource</div><div class="ttdoc">The CancellationTokenSource linked with the token given to StopAsync(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00153">InstanceManager.cs:153</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_af4eafee41a5201cb8f671607b53cc0bd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a></div><div class="ttdeci">readonly Dictionary&lt; string, IBridgeHandler &gt; bridgeHandlers</div><div class="ttdoc">Map of DMApiParameters.AccessIdentifiers to their respective IBridgeHandlers.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00133">InstanceManager.cs:133</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">Tgstation.Server.Host.Utils.SemaphoreSlimContext</a></div><div class="ttdoc">Async lock context helper.</div><div class="ttdef"><b>Definition</b> <a href="_semaphore_slim_context_8cs_source.html#l00012">SemaphoreSlimContext.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html_abeb1f086e2752f6f9a4d3d175a4392af"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock</a></div><div class="ttdeci">static async ValueTask&lt; SemaphoreSlimContext &gt; Lock(SemaphoreSlim semaphore, CancellationToken cancellationToken, ILogger? logger=null)</div><div class="ttdoc">Asyncronously locks a semaphore .</div><div class="ttdef"><b>Definition</b> <a href="_semaphore_slim_context_8cs_source.html#l00021">SemaphoreSlimContext.cs:21</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console_html_a555a7fe50697f3b18c5d9081f5f58f4b"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b">Tgstation.Server.Host.IO.IConsole.Title</a></div><div class="ttdeci">string? Title</div><div class="ttdoc">Gets or sets the IConsole window's title. Can return null if getting the console title is not support...</div><div class="ttdef"><b>Definition</b> <a href="_i_console_8cs_source.html#l00014">IConsole.cs:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00063">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00083">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="_instance_manager_8cs_source.html#l00133">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, <a class="el" href="_instance_manager_8cs_source.html#l00098">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00058">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.generalConfigurationOptions</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00138">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00118">Tgstation.Server.Host.Components.InstanceManager.internalConfigurationOptions</a>, <a class="el" href="_instance_manager_8cs_source.html#l00053">Tgstation.Server.Host.Components.InstanceManager.ioManager</a>, <a class="el" href="_instance_manager_8cs_source.html#l00068">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00021">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00158">Tgstation.Server.Host.Components.InstanceManager.onlineInstances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00163">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a>, <a class="el" href="_instance_manager_8cs_source.html#l00103">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00143">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a>, <a class="el" href="_instance_manager_8cs_source.html#l00073">Tgstation.Server.Host.Components.InstanceManager.serverControl</a>, <a class="el" href="_instance_manager_8cs_source.html#l00088">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00153">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00148">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.swarmConfigurationOptions</a>, <a class="el" href="_instance_manager_8cs_source.html#l00093">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>, <a class="el" href="_instance_manager_8cs_source.html#l00078">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a>, and <a class="el" href="_i_console_8cs_source.html#l00014">Tgstation.Server.Host.IO.IConsole.Title</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a07d2074a11239986ec39b1ac492f3081_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a07d2074a11239986ec39b1ac492f3081_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a07d2074a11239986ec39b1ac492f3081_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a07d2074a11239986ec39b1ac492f3081_cgraph">
<area shape="rect" title="Initializes a new instance of the InstanceManager class." alt="" coords="5,5,232,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="280,5,469,46"/>
<area shape="poly" title=" " alt="" coords="232,23,264,23,264,28,232,28"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a72f7ed3869c2397df900e5745be0befc" name="a72f7ed3869c2397df900e5745be0befc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72f7ed3869c2397df900e5745be0befc">&#9670;&#160;</a></span>DisposeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.DisposeAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00255">255</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>        {</div>
<div class="line"><span class="lineno">  257</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  258</span>            {</div>
<div class="line"><span class="lineno">  259</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a>)</div>
<div class="line"><span class="lineno">  260</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  261</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  262</span>            }</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>            <span class="keywordflow">foreach</span> (var instanceKvp <span class="keywordflow">in</span> <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  265</span>                await instanceKvp.Value.Instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  268</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Dispose();</div>
<div class="line"><span class="lineno">  269</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Dispose();</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Server shutdown&quot;</span>);</div>
<div class="line"><span class="lineno">  272</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a6ba869dae354db235f8518f7283a531c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">Tgstation.Server.Host.Components.InstanceManager.disposed</a></div><div class="ttdeci">bool disposed</div><div class="ttdoc">If the InstanceManager has been DisposeAsync'd.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00173">InstanceManager.cs:173</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00173">Tgstation.Server.Host.Components.InstanceManager.disposed</a>, <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00138">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00153">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00148">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>.</p>

</div>
</div>
<a id="add11622918bcaebdf64e69c29e8ac255" name="add11622918bcaebdf64e69c29e8ac255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add11622918bcaebdf64e69c29e8ac255">&#9670;&#160;</a></span>GetInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html">IInstanceCore</a>? Tgstation.Server.Host.Components.InstanceManager.GetInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for a given <em>instance</em>  if it's online.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> to get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> if it is online, <code>null</code> otherwise.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html#a1d37bed2b441cbf13a1db7edfa408270">Tgstation.Server.Host.Components.IInstanceCoreProvider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00607">607</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  608</span>        {</div>
<div class="line"><span class="lineno">  609</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  610</span>            {</div>
<div class="line"><span class="lineno">  611</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(metadata.Require(x =&gt; x.Id), out var container);</div>
<div class="line"><span class="lineno">  612</span>                <span class="keywordflow">return</span> container?.Instance;</div>
<div class="line"><span class="lineno">  613</span>            }</div>
<div class="line"><span class="lineno">  614</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.instances</a>.</p>

</div>
</div>
<a id="a577a0e2649a7546de6b3aa7e2f37166d" name="a577a0e2649a7546de6b3aa7e2f37166d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a577a0e2649a7546de6b3aa7e2f37166d">&#9670;&#160;</a></span>GetInstanceReference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html">IInstanceReference</a>? Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>instanceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html" title="Controller version of IInstanceCore.">IInstanceReference</a> associated with given <em>instanceId</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instanceId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">Api.Models.EntityId.Id</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> associated with the given <em>instanceId</em>  if it is online, <code>null</code> otherwise.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#a7f8c0d636fbbad104557cf898c82ffbb">Tgstation.Server.Host.Components.IInstanceManager</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00275">275</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  276</span>        {</div>
<div class="line"><span class="lineno">  277</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  278</span>            {</div>
<div class="line"><span class="lineno">  279</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(instanceId, out var instance))</div>
<div class="line"><span class="lineno">  280</span>                    <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>                <span class="keywordflow">return</span> instance.AddReference();</div>
<div class="line"><span class="lineno">  283</span>            }</div>
<div class="line"><span class="lineno">  284</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.instances</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00287">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a577a0e2649a7546de6b3aa7e2f37166d_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a577a0e2649a7546de6b3aa7e2f37166d_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a577a0e2649a7546de6b3aa7e2f37166d_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a577a0e2649a7546de6b3aa7e2f37166d_icgraph">
<area shape="rect" title="Get the IInstanceReference associated with given instanceId .The IInstance associated with the given ..." alt="" coords="280,5,534,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad3dc0cfcb7f415f1dd8a98bfd018f90e" title="Move an IInstance.A ValueTask representing the running operation." alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="aa70355ebb8437fd170e4f75e826f1ad7" name="aa70355ebb8437fd170e4f75e826f1ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa70355ebb8437fd170e4f75e826f1ad7">&#9670;&#160;</a></span>Initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.InstanceManager.Initialize </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the InstanceManager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00621">621</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  622</span>        {</div>
<div class="line"><span class="lineno">  623</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  624</span>            {</div>
<div class="line"><span class="lineno">  625</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;{versionString}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">VersionString</a>);</div>
<div class="line"><span class="lineno">  626</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">SetTitle</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">VersionString</a>);</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47">PreflightChecks</a>();</div>
<div class="line"><span class="lineno">  629</span> </div>
<div class="line"><span class="lineno">  630</span>                <span class="comment">// To let the web server startup immediately before we do any intense work</span></div>
<div class="line"><span class="lineno">  631</span>                await Task.Yield();</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">InitializeSwarm</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  634</span> </div>
<div class="line"><span class="lineno">  635</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">List</a>&lt;Models.Instance&gt;? dbInstances = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>                async ValueTask EnumerateInstances(<a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext)</div>
<div class="line"><span class="lineno">  638</span>                    =&gt; dbInstances = await databaseContext</div>
<div class="line"><span class="lineno">  639</span>                        .Instances</div>
<div class="line"><span class="lineno">  640</span>                        .Where(x =&gt; x.Online!.Value &amp;&amp; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ed022b1afe150b7a84dd8447774f8bc">swarmConfigurationOptions</a>.Value.Identifier)</div>
<div class="line"><span class="lineno">  641</span>                        .Include(x =&gt; x.RepositorySettings)</div>
<div class="line"><span class="lineno">  642</span>                        .Include(x =&gt; x.ChatSettings)</div>
<div class="line"><span class="lineno">  643</span>                            .ThenInclude(x =&gt; x.Channels)</div>
<div class="line"><span class="lineno">  644</span>                        .Include(x =&gt; x.DreamDaemonSettings)</div>
<div class="line"><span class="lineno">  645</span>                        .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>                var instanceEnumeration = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(EnumerateInstances);</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>                var factoryStartup = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  650</span>                var jobManagerStartup = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>                await Task.WhenAll(instanceEnumeration.AsTask(), factoryStartup, jobManagerStartup);</div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>                var instanceOnliningTasks = dbInstances!.Select(</div>
<div class="line"><span class="lineno">  655</span>                    async metadata =&gt;</div>
<div class="line"><span class="lineno">  656</span>                    {</div>
<div class="line"><span class="lineno">  657</span>                        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  658</span>                        {</div>
<div class="line"><span class="lineno">  659</span>                            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">OnlineInstance</a>(metadata, cancellationToken);</div>
<div class="line"><span class="lineno">  660</span>                        }</div>
<div class="line"><span class="lineno">  661</span>                        <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  662</span>                        {</div>
<div class="line"><span class="lineno">  663</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(ex, <span class="stringliteral">&quot;Failed to online instance {instanceId}!&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  664</span>                        }</div>
<div class="line"><span class="lineno">  665</span>                    });</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>                await Task.WhenAll(instanceOnliningTasks);</div>
<div class="line"><span class="lineno">  668</span> </div>
<div class="line"><span class="lineno">  669</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Server ready!&quot;</span>);</div>
<div class="line"><span class="lineno">  670</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a>.SetResult();</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>                <span class="comment">// this needs to happen after the HTTP API opens with readyTcs otherwise it can race and cause failed bridge requests with 503&#39;s</span></div>
<div class="line"><span class="lineno">  673</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Activate</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  674</span>            }</div>
<div class="line"><span class="lineno">  675</span>            <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  676</span>            {</div>
<div class="line"><span class="lineno">  677</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(ex, <span class="stringliteral">&quot;Cancelled instance manager initialization!&quot;</span>);</div>
<div class="line"><span class="lineno">  678</span>            }</div>
<div class="line"><span class="lineno">  679</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e)</div>
<div class="line"><span class="lineno">  680</span>            {</div>
<div class="line"><span class="lineno">  681</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(e, <span class="stringliteral">&quot;Instance manager startup error!&quot;</span>);</div>
<div class="line"><span class="lineno">  682</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  683</span>                {</div>
<div class="line"><span class="lineno">  684</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Die</a>(e);</div>
<div class="line"><span class="lineno">  685</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  686</span>                }</div>
<div class="line"><span class="lineno">  687</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e2)</div>
<div class="line"><span class="lineno">  688</span>                {</div>
<div class="line"><span class="lineno">  689</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(e2, <span class="stringliteral">&quot;Failed to kill server!&quot;</span>);</div>
<div class="line"><span class="lineno">  690</span>                }</div>
<div class="line"><span class="lineno">  691</span>            }</div>
<div class="line"><span class="lineno">  692</span>        }</div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a4dc85f42ec73bd6fd72085969a7c4cb5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance</a></div><div class="ttdeci">async ValueTask OnlineInstance(Models.Instance metadata, CancellationToken cancellationToken)</div><div class="ttdoc">Online an IInstance.A ValueTask representing the running operation.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00424">InstanceManager.cs:424</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a799f1f7613771ef7c9d9f5ff55fb8b47"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks</a></div><div class="ttdeci">void PreflightChecks()</div><div class="ttdoc">Check we have a valid system and configuration.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00697">InstanceManager.cs:697</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ae64238c09aa5b3301d05109ceee5d09e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm</a></div><div class="ttdeci">async ValueTask InitializeSwarm(CancellationToken cancellationToken)</div><div class="ttdoc">Initializes the connection to the TGS swarm.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00724">InstanceManager.cs:724</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control_html_adb01d302ec13ad32897ae83be130afd0"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Tgstation.Server.Host.Core.IServerControl.Die</a></div><div class="ttdeci">ValueTask Die(Exception? exception)</div><div class="ttdoc">Kill the server with a fatal exception.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory_html_a1da664d7237dbec5a6cb9ce04b79ccc1"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext</a></div><div class="ttdeci">ValueTask UseContext(Func&lt; IDatabaseContext, ValueTask &gt; operation)</div><div class="ttdoc">Run an operation  in the scope of an IDatabaseContext.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">Tgstation.Server.Host.Database.IDatabaseContext</a></div><div class="ttdoc">Represents the database.</div><div class="ttdef"><b>Definition</b> <a href="_i_database_context_8cs_source.html#l00016">IDatabaseContext.cs:17</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console_html_abcec01af471cee5fce210b9fbcb2fa74"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle</a></div><div class="ttdeci">void SetTitle(string newTitle)</div><div class="ttdoc">Sets a newTitle  console window.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service_html_a23de62961f3d9eb3db05d4db8c409bac"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Tgstation.Server.Host.Jobs.IJobService.Activate</a></div><div class="ttdeci">void Activate(IInstanceCoreProvider instanceCoreProvider)</div><div class="ttdoc">Activate the IJobManager.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider_html_abd6db0f6e1ea9273baeacaa66ae81fa3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">Tgstation.Server.Host.System.IAssemblyInformationProvider.VersionString</a></div><div class="ttdeci">string VersionString</div><div class="ttdoc">A more verbose version of Version.</div><div class="ttdef"><b>Definition</b> <a href="_i_assembly_information_provider_8cs_source.html#l00030">IAssemblyInformationProvider.cs:30</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.ConfigurationRights.List</a></div><div class="ttdeci">@ List</div><div class="ttdoc">User may list files if the Models.Instance allows it.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Tgstation.Server.Host.Jobs.IJobService.Activate()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00063">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00098">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00058">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Tgstation.Server.Host.Core.IServerControl.Die()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00724">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_i_database_context_8cs_source.html#l00026">Tgstation.Server.Host.Database.IDatabaseContext.Instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00068">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00424">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00697">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00143">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a>, <a class="el" href="_instance_manager_8cs_source.html#l00073">Tgstation.Server.Host.Components.InstanceManager.serverControl</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.swarmConfigurationOptions</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext()</a>, and <a class="el" href="_i_assembly_information_provider_8cs_source.html#l00030">Tgstation.Server.Host.System.IAssemblyInformationProvider.VersionString</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00476">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph">
<area shape="rect" title="Initializes the InstanceManager." alt="" coords="5,201,232,242"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac" title="Activate the IJobManager." alt="" coords="308,5,490,46"/>
<area shape="poly" title=" " alt="" coords="132,199,191,129,232,90,278,57,293,49,295,54,281,61,235,94,195,133,137,203"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0" title="Kill the server with a fatal exception." alt="" coords="309,71,489,111"/>
<area shape="poly" title=" " alt="" coords="147,199,206,160,279,122,298,114,300,119,281,127,209,165,150,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e" title="Initializes the connection to the TGS swarm." alt="" coords="286,136,512,177"/>
<area shape="poly" title=" " alt="" coords="208,198,293,178,294,183,209,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="286,201,512,242"/>
<area shape="poly" title=" " alt="" coords="232,219,270,219,270,224,232,224"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47" title="Check we have a valid system and configuration." alt="" coords="286,267,512,307"/>
<area shape="poly" title=" " alt="" coords="209,240,294,260,293,265,208,245"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="315,332,483,373"/>
<area shape="poly" title=" " alt="" coords="150,240,209,279,281,317,301,325,299,330,279,321,206,283,147,245"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="280,397,518,438"/>
<area shape="poly" title=" " alt="" coords="137,241,195,310,235,349,281,382,293,388,290,393,278,387,232,353,191,314,132,244"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce" title="Create a Task that completes after a given timeSpan ." alt="" coords="589,39,769,79"/>
<area shape="poly" title=" " alt="" coords="485,133,517,121,541,105,565,90,583,82,585,87,567,95,543,110,519,125,487,138"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="572,104,787,145"/>
<area shape="poly" title=" " alt="" coords="512,141,556,136,556,141,513,146"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="566,169,792,210"/>
<area shape="poly" title=" " alt="" coords="512,206,550,202,551,207,513,211"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="585,235,774,275"/>
<area shape="poly" title=" " alt="" coords="513,232,570,239,569,245,512,238"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="571,300,787,341"/>
<area shape="poly" title=" " alt="" coords="513,298,556,303,555,308,512,303"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="569,365,789,406"/>
<area shape="poly" title=" " alt="" coords="487,305,519,318,544,334,567,350,584,357,582,362,565,355,541,338,517,323,485,310"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="840,293,1080,348"/>
<area shape="poly" title=" " alt="" coords="788,318,825,318,825,323,788,323"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph">
<area shape="rect" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ae64238c09aa5b3301d05109ceee5d09e" name="ae64238c09aa5b3301d05109ceee5d09e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae64238c09aa5b3301d05109ceee5d09e">&#9670;&#160;</a></span>InitializeSwarm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the connection to the TGS swarm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00724">724</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  725</span>        {</div>
<div class="line"><span class="lineno">  726</span>            <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a> registrationResult;</div>
<div class="line"><span class="lineno">  727</span>            <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  728</span>            {</div>
<div class="line"><span class="lineno">  729</span>                registrationResult = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Initialize</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>                <span class="keywordflow">if</span> (registrationResult == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Unauthorized)</div>
<div class="line"><span class="lineno">  732</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Swarm private key does not match the swarm controller&#39;s!&quot;</span>);</div>
<div class="line"><span class="lineno">  733</span> </div>
<div class="line"><span class="lineno">  734</span>                <span class="keywordflow">if</span> (registrationResult == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.VersionMismatch)</div>
<div class="line"><span class="lineno">  735</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Swarm controller&#39;s TGS version does not match our own!&quot;</span>);</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span>                <span class="keywordflow">if</span> (registrationResult != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Success)</div>
<div class="line"><span class="lineno">  738</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Delay</a>(TimeSpan.FromSeconds(5), cancellationToken);</div>
<div class="line"><span class="lineno">  739</span>            }</div>
<div class="line"><span class="lineno">  740</span>            <span class="keywordflow">while</span> (registrationResult != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Success &amp;&amp; !cancellationToken.IsCancellationRequested);</div>
<div class="line"><span class="lineno">  741</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller_html_ad07d54ac504afa080dab8b4e37115439"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Tgstation.Server.Host.Swarm.ISwarmServiceController.Initialize</a></div><div class="ttdeci">ValueTask&lt; SwarmRegistrationResult &gt; Initialize(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to register with the swarm controller if not one, sets up the database otherwise.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer_html_a588b00b42267c8d23088bde28d3f7fce"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay</a></div><div class="ttdeci">ValueTask Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan .</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_swarm_html_acfc07eda2ac8eff75a6eef3f90bdf3e0"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">Tgstation.Server.Host.Swarm.SwarmRegistrationResult</a></div><div class="ttdeci">SwarmRegistrationResult</div><div class="ttdoc">Result of attempting to register with a swarm controller.</div><div class="ttdef"><b>Definition</b> <a href="_swarm_registration_result_8cs_source.html#l00006">SwarmRegistrationResult.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00083">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Tgstation.Server.Host.Swarm.ISwarmServiceController.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00093">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph">
<area shape="rect" title="Initializes the connection to the TGS swarm." alt="" coords="5,39,232,79"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce" title="Create a Task that completes after a given timeSpan ." alt="" coords="297,5,478,46"/>
<area shape="poly" title=" " alt="" coords="232,42,282,36,282,41,233,48"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="280,71,495,111"/>
<area shape="poly" title=" " alt="" coords="233,70,265,74,264,79,232,75"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph">
<area shape="rect" title="Initializes the connection to the TGS swarm." alt="" coords="554,5,780,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="538,28,507,28,507,23,538,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ad3dc0cfcb7f415f1dd8a98bfd018f90e" name="ad3dc0cfcb7f415f1dd8a98bfd018f90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3dc0cfcb7f415f1dd8a98bfd018f90e">&#9670;&#160;</a></span>MoveInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.MoveInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>oldPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> with the updated path.</td></tr>
    <tr><td class="paramname">oldPath</td><td>The old path of the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>. <em>metadata</em>  will have this set on <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318" title="The path to where the Instance is located. Can only be changed while the Instance is offline....">Api.Models.Instance.Path</a> if the operation fails.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a8aaa4081d257b5fb39bb09ffd07383ff">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00287">287</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  288</span>        {</div>
<div class="line"><span class="lineno">  289</span>            ArgumentNullException.ThrowIfNull(oldPath);</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>            <span class="keyword">using </span>var lockContext = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  292</span>            <span class="keyword">using </span>var instanceReferenceCheck = this.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a577a0e2649a7546de6b3aa7e2f37166d">GetInstanceReference</a>(instance);</div>
<div class="line"><span class="lineno">  293</span>            <span class="keywordflow">if</span> (instanceReferenceCheck != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  294</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot move an online instance!&quot;</span>);</div>
<div class="line"><span class="lineno">  295</span>            var newPath = instance.Path!;</div>
<div class="line"><span class="lineno">  296</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  297</span>            {</div>
<div class="line"><span class="lineno">  298</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">MoveDirectory</a>(oldPath, newPath, cancellationToken);</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>                <span class="comment">// Delete the Game directory to clear out broken symlinks</span></div>
<div class="line"><span class="lineno">  301</span>                var instanceGameIOManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">CreateGameIOManager</a>(instance);</div>
<div class="line"><span class="lineno">  302</span>                await instanceGameIOManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">DeleteDirectory</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html">DefaultIOManager</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html#a984a32ee93a073036f63d543ad9a6cdd">CurrentDirectory</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  303</span>            }</div>
<div class="line"><span class="lineno">  304</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  305</span>            {</div>
<div class="line"><span class="lineno">  306</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(</div>
<div class="line"><span class="lineno">  307</span>                    ex,</div>
<div class="line"><span class="lineno">  308</span>                    <span class="stringliteral">&quot;Error moving instance {instanceId}!&quot;</span>,</div>
<div class="line"><span class="lineno">  309</span>                    instance.Id);</div>
<div class="line"><span class="lineno">  310</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  311</span>                {</div>
<div class="line"><span class="lineno">  312</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Reverting instance {instanceId}&#39;s path to {oldPath} in the DB...&quot;</span>, instance.Id, oldPath);</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>                    <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  315</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">UseContextTaskReturn</a>(db =&gt;</div>
<div class="line"><span class="lineno">  316</span>                    {</div>
<div class="line"><span class="lineno">  317</span>                        var targetInstance = <span class="keyword">new</span> Models.Instance</div>
<div class="line"><span class="lineno">  318</span>                        {</div>
<div class="line"><span class="lineno">  319</span>                            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Id</a> = instance.Id,</div>
<div class="line"><span class="lineno">  320</span>                        };</div>
<div class="line"><span class="lineno">  321</span>                        db.Instances.Attach(targetInstance);</div>
<div class="line"><span class="lineno">  322</span>                        targetInstance.Path = oldPath;</div>
<div class="line"><span class="lineno">  323</span>                        <span class="keywordflow">return</span> db.Save(CancellationToken.None);</div>
<div class="line"><span class="lineno">  324</span>                    });</div>
<div class="line"><span class="lineno">  325</span>                }</div>
<div class="line"><span class="lineno">  326</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> innerEx)</div>
<div class="line"><span class="lineno">  327</span>                {</div>
<div class="line"><span class="lineno">  328</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(</div>
<div class="line"><span class="lineno">  329</span>                        innerEx,</div>
<div class="line"><span class="lineno">  330</span>                        <span class="stringliteral">&quot;Error reverting database after failing to move instance {instanceId}! Attempting to detach...&quot;</span>,</div>
<div class="line"><span class="lineno">  331</span>                        instance.Id);</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  334</span>                    {</div>
<div class="line"><span class="lineno">  335</span>                        <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  336</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">WriteAllBytes</a>(</div>
<div class="line"><span class="lineno">  337</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(oldPath, <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">InstanceController</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">InstanceAttachFileName</a>),</div>
<div class="line"><span class="lineno">  338</span>                            Array.Empty&lt;<span class="keywordtype">byte</span>&gt;(),</div>
<div class="line"><span class="lineno">  339</span>                            CancellationToken.None);</div>
<div class="line"><span class="lineno">  340</span>                    }</div>
<div class="line"><span class="lineno">  341</span>                    <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> tripleEx)</div>
<div class="line"><span class="lineno">  342</span>                    {</div>
<div class="line"><span class="lineno">  343</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(</div>
<div class="line"><span class="lineno">  344</span>                            tripleEx,</div>
<div class="line"><span class="lineno">  345</span>                            <span class="stringliteral">&quot;Okay, what gamma radiation are you under? Failed to write instance attach file!&quot;</span>);</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(tripleEx, innerEx, ex);</div>
<div class="line"><span class="lineno">  348</span>                    }</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(ex, innerEx);</div>
<div class="line"><span class="lineno">  351</span>                }</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  354</span>            }</div>
<div class="line"><span class="lineno">  355</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a577a0e2649a7546de6b3aa7e2f37166d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a577a0e2649a7546de6b3aa7e2f37166d">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference</a></div><div class="ttdeci">IInstanceReference? GetInstanceReference(long instanceId)</div><div class="ttdoc">Get the IInstanceReference associated with given instanceId .The IInstance associated with the given ...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00275">InstanceManager.cs:275</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">Tgstation.Server.Host.Controllers.InstanceController</a></div><div class="ttdoc">ApiController for managing Components.Instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_controller_8cs_source.html#l00043">InstanceController.cs:44</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_aa40d55750e2193d714eb1470505c47ee"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a></div><div class="ttdeci">const string InstanceAttachFileName</div><div class="ttdoc">File name to allow attaching instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_controller_8cs_source.html#l00048">InstanceController.cs:48</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html">Tgstation.Server.Host.IO.DefaultIOManager</a></div><div class="ttdoc">IIOManager that resolves paths to Environment.CurrentDirectory.</div><div class="ttdef"><b>Definition</b> <a href="_default_i_o_manager_8cs_source.html#l00018">DefaultIOManager.cs:19</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager_html_a984a32ee93a073036f63d543ad9a6cdd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html#a984a32ee93a073036f63d543ad9a6cdd">Tgstation.Server.Host.IO.DefaultIOManager.CurrentDirectory</a></div><div class="ttdeci">const string CurrentDirectory</div><div class="ttdoc">Path to the current working directory for the IIOManager.</div><div class="ttdef"><b>Definition</b> <a href="_default_i_o_manager_8cs_source.html#l00023">DefaultIOManager.cs:23</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory_html_a88417ce87f3416974c7b7d7ef4ed5a58"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">Tgstation.Server.Host.Components.IInstanceFactory.CreateGameIOManager</a></div><div class="ttdeci">IIOManager CreateGameIOManager(Models.Instance metadata)</div><div class="ttdoc">Create an IIOManager that resolves to the &quot;Game&quot; directory of the Models.Instance defined by metadata...</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory_html_a0804dcd2b607f4e8c5b46c8c05f04926"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContextTaskReturn</a></div><div class="ttdeci">ValueTask UseContextTaskReturn(Func&lt; IDatabaseContext, Task &gt; operation)</div><div class="ttdoc">Run an operation  in the scope of an IDatabaseContext.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a9aeb8b83ea3f4b13a183b6ac55b35a70"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes</a></div><div class="ttdeci">ValueTask WriteAllBytes(string path, byte[] contents, CancellationToken cancellationToken)</div><div class="ttdoc">Writes some contents  to a file at path  overwriting previous content.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad3e0dda4b7fbad4c77f48ba3b2681dc7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">Tgstation.Server.Host.IO.IIOManager.DeleteDirectory</a></div><div class="ttdeci">Task DeleteDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Recursively delete a directory, removes and does not enter any symlinks encounterd.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad8dc6ae8e69047b801a7344b17d0cc37"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">Tgstation.Server.Host.IO.IIOManager.MoveDirectory</a></div><div class="ttdeci">Task MoveDirectory(string source, string destination, CancellationToken cancellationToken)</div><div class="ttdoc">Moves a directory at source  to destination .</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_authority_html_a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Tgstation.Server.Host.Authority.PermissionSetLookupType.Id</a></div><div class="ttdeci">@ Id</div><div class="ttdoc">Lookup the Api.Models.EntityId.Id of the Models.PermissionSet.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">Tgstation.Server.Host.Components.IInstanceFactory.CreateGameIOManager()</a>, <a class="el" href="_default_i_o_manager_8cs_source.html#l00023">Tgstation.Server.Host.IO.DefaultIOManager.CurrentDirectory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00058">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">Tgstation.Server.Host.IO.IIOManager.DeleteDirectory()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00275">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00048">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00138">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00053">Tgstation.Server.Host.Components.InstanceManager.ioManager</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00021">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">Tgstation.Server.Host.IO.IIOManager.MoveDirectory()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContextTaskReturn()</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph">
<area shape="rect" title="Move an IInstance.A ValueTask representing the running operation." alt="" coords="5,235,232,275"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="325,5,493,46"/>
<area shape="poly" title=" " alt="" coords="129,233,151,195,185,147,227,98,278,57,309,42,311,46,281,61,231,102,189,150,156,198,133,236"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58" title="Create an IIOManager that resolves to the &quot;Game&quot; directory of the Models.Instance defined by metadata..." alt="" coords="280,71,538,111"/>
<area shape="poly" title=" " alt="" coords="138,232,197,177,236,147,278,122,294,115,296,120,281,127,239,152,201,181,141,236"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7" title="Recursively delete a directory, removes and does not enter any symlinks encounterd." alt="" coords="319,136,499,177"/>
<area shape="poly" title=" " alt="" coords="165,232,279,187,306,179,307,184,281,192,167,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a577a0e2649a7546de6b3aa7e2f37166d" title="Get the IInstanceReference associated with given instanceId .The IInstance associated with the given ..." alt="" coords="282,201,536,242"/>
<area shape="poly" title=" " alt="" coords="232,239,266,235,267,241,233,245"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="314,267,504,307"/>
<area shape="poly" title=" " alt="" coords="233,265,299,272,299,278,232,270"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37" title="Moves a directory at source &#160;to destination ." alt="" coords="321,332,497,373"/>
<area shape="poly" title=" " alt="" coords="168,273,281,316,307,325,306,330,279,322,167,278"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="290,397,528,452"/>
<area shape="poly" title=" " alt="" coords="142,274,202,327,240,357,281,382,292,387,289,392,278,387,237,361,198,332,138,278"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70" title="Writes some contents &#160;to a file at path &#160;overwriting previous content." alt="" coords="324,476,494,517"/>
<area shape="poly" title=" " alt="" coords="132,275,154,315,187,366,230,418,254,442,281,462,310,477,308,481,278,467,251,446,226,422,182,369,149,318,127,277"/>
</map>
</div>

</div>
</div>
<a id="af207019cbf73d4992ff3172c0968b163" name="af207019cbf73d4992ff3172c0968b163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af207019cbf73d4992ff3172c0968b163">&#9670;&#160;</a></span>OfflineInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.OfflineInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Offline an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">user</td><td>The User performing the operation.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#abca82157721193c4bb14b3628e9a083e">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00358">358</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  359</span>        {</div>
<div class="line"><span class="lineno">  360</span>            ArgumentNullException.ThrowIfNull(metadata);</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  363</span>            {</div>
<div class="line"><span class="lineno">  364</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;</a>? container;</div>
<div class="line"><span class="lineno">  365</span>                var instanceId = metadata.Require(x =&gt; x.Id);</div>
<div class="line"><span class="lineno">  366</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  367</span>                {</div>
<div class="line"><span class="lineno">  368</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(instanceId, out container))</div>
<div class="line"><span class="lineno">  369</span>                    {</div>
<div class="line"><span class="lineno">  370</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Not offlining removed instance {instanceId}&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  371</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  372</span>                    }</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Remove(instanceId);</div>
<div class="line"><span class="lineno">  375</span>                }</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Offlining instance ID {instanceId}&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  380</span>                {</div>
<div class="line"><span class="lineno">  381</span>                    await container.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html#aa313916be969b264bc13c54b69976b17">OnZeroReferences</a>.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>                    <span class="comment">// we are the one responsible for cancelling his jobs</span></div>
<div class="line"><span class="lineno">  384</span>                    ValueTask&lt;Job?[]&gt; groupedTask = <span class="keywordflow">default</span>;</div>
<div class="line"><span class="lineno">  385</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(</div>
<div class="line"><span class="lineno">  386</span>                        async db =&gt;</div>
<div class="line"><span class="lineno">  387</span>                        {</div>
<div class="line"><span class="lineno">  388</span>                            var jobs = await db</div>
<div class="line"><span class="lineno">  389</span>                                .Jobs</div>
<div class="line"><span class="lineno">  390</span>                                .Where(x =&gt; x.Instance!.Id == metadata.Id &amp;&amp; !x.StoppedAt.HasValue)</div>
<div class="line"><span class="lineno">  391</span>                                .Select(x =&gt; <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Job</a>(x.Id!.Value))</div>
<div class="line"><span class="lineno">  392</span>                                .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>                            groupedTask = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(</div>
<div class="line"><span class="lineno">  395</span>                                jobs.Select(job =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">CancelJob</a>(job, user, <span class="keyword">true</span>, cancellationToken)),</div>
<div class="line"><span class="lineno">  396</span>                                jobs.Count);</div>
<div class="line"><span class="lineno">  397</span>                        });</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>                    await groupedTask;</div>
<div class="line"><span class="lineno">  400</span>                }</div>
<div class="line"><span class="lineno">  401</span>                <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  402</span>                {</div>
<div class="line"><span class="lineno">  403</span>                    <span class="comment">// not too late to change your mind</span></div>
<div class="line"><span class="lineno">  404</span>                    lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  405</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Add(instanceId, container);</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  408</span>                }</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  411</span>                {</div>
<div class="line"><span class="lineno">  412</span>                    <span class="comment">// at this point we can&#39;t really stop offlining the instance just because the request was cancelled</span></div>
<div class="line"><span class="lineno">  413</span>                    await container.Instance.StopAsync(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Token);</div>
<div class="line"><span class="lineno">  414</span>                }</div>
<div class="line"><span class="lineno">  415</span>                <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  416</span>                {</div>
<div class="line"><span class="lineno">  417</span>                    await container.Instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  418</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">onlineInstances</a>.Dec();</div>
<div class="line"><span class="lineno">  419</span>                }</div>
<div class="line"><span class="lineno">  420</span>            }</div>
<div class="line"><span class="lineno">  421</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">Tgstation.Server.Common.Extensions.ValueTaskExtensions</a></div><div class="ttdoc">Extension methods for the ValueTask and ValueTask&lt;TResult&gt; classes.</div><div class="ttdef"><b>Definition</b> <a href="_value_task_extensions_8cs_source.html#l00011">ValueTaskExtensions.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html_a58adbd94d764754bd3e6c566a5fe7fe3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll</a></div><div class="ttdeci">static async ValueTask WhenAll(IEnumerable&lt; ValueTask &gt; tasks)</div><div class="ttdoc">Fully await a given list of tasks .</div><div class="ttdef"><b>Definition</b> <a href="_value_task_extensions_8cs_source.html#l00099">ValueTaskExtensions.cs:99</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_job_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Tgstation.Server.Host.Models.Job</a></div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_host_2_models_2_job_8cs_source.html#l00014">Job.cs:16</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">Tgstation.Server.Host.Utils.ReferenceCountingContainer</a></div><div class="ttdoc">Wrapper for managing some TWrapped .</div><div class="ttdef"><b>Definition</b> <a href="_reference_counting_container_8cs_source.html#l00011">ReferenceCountingContainer.cs:14</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container_html_aa313916be969b264bc13c54b69976b17"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html#aa313916be969b264bc13c54b69976b17">Tgstation.Server.Host.Utils.ReferenceCountingContainer.OnZeroReferences</a></div><div class="ttdeci">Task OnZeroReferences</div><div class="ttdoc">A Task that completes when there are no TReference s active for the Instance.</div><div class="ttdef"><b>Definition</b> <a href="_reference_counting_container_8cs_source.html#l00023">ReferenceCountingContainer.cs:24</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager_html_a5760fe527065407b364e674d2a9eaf1d"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">Tgstation.Server.Host.Jobs.IJobManager.CancelJob</a></div><div class="ttdeci">ValueTask&lt; Job?&gt; CancelJob(Job job, User? user, bool blocking, CancellationToken cancellationToken)</div><div class="ttdoc">Cancels a give job .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">Tgstation.Server.Host.Jobs.IJobManager.CancelJob()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00058">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="_reference_counting_container_8cs_source.html#l00018">Tgstation.Server.Host.Utils.ReferenceCountingContainer&lt; TWrapped, TReference &gt;.Instance</a>, <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00138">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00068">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00021">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00158">Tgstation.Server.Host.Components.InstanceManager.onlineInstances</a>, <a class="el" href="_reference_counting_container_8cs_source.html#l00024">Tgstation.Server.Host.Utils.ReferenceCountingContainer&lt; TWrapped, TReference &gt;.OnZeroReferences</a>, <a class="el" href="_instance_manager_8cs_source.html#l00153">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext()</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph">
<area shape="rect" title="Offline an IInstance.A ValueTask representing the running operation." alt="" coords="5,104,232,145"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d" title="Cancels a give job ." alt="" coords="308,5,490,46"/>
<area shape="poly" title=" " alt="" coords="166,101,279,56,304,48,306,53,281,62,168,106"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="304,71,494,111"/>
<area shape="poly" title=" " alt="" coords="232,108,289,101,289,107,232,114"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="280,136,518,177"/>
<area shape="poly" title=" " alt="" coords="232,135,264,138,264,144,232,140"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="291,201,507,256"/>
<area shape="poly" title=" " alt="" coords="171,143,281,186,299,192,297,197,279,191,169,148"/>
</map>
</div>

</div>
</div>
<a id="a4dc85f42ec73bd6fd72085969a7c4cb5" name="a4dc85f42ec73bd6fd72085969a7c4cb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dc85f42ec73bd6fd72085969a7c4cb5">&#9670;&#160;</a></span>OnlineInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.OnlineInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Online an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a21fcdc8c16fde3dd75ebf3780d7546cf">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00424">424</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  425</span>        {</div>
<div class="line"><span class="lineno">  426</span>            ArgumentNullException.ThrowIfNull(metadata);</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>            var instanceId = metadata.Require(x =&gt; x.Id);</div>
<div class="line"><span class="lineno">  429</span>            <span class="keyword">using </span>var lockContext = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  430</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  431</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.ContainsKey(instanceId))</div>
<div class="line"><span class="lineno">  432</span>                {</div>
<div class="line"><span class="lineno">  433</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Aborting instance creation due to it seemingly already being online&quot;</span>);</div>
<div class="line"><span class="lineno">  434</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  435</span>                }</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Onlining instance ID {instanceId} ({instanceName}) at {instancePath}&quot;</span>, metadata.Id, metadata.Name, metadata.Path);</div>
<div class="line"><span class="lineno">  438</span>            var instance = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">CreateInstance</a>(<span class="keyword">this</span>, metadata);</div>
<div class="line"><span class="lineno">  439</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  440</span>            {</div>
<div class="line"><span class="lineno">  441</span>                await instance.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  444</span>                {</div>
<div class="line"><span class="lineno">  445</span>                    lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  446</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Add(</div>
<div class="line"><span class="lineno">  447</span>                            instanceId,</div>
<div class="line"><span class="lineno">  448</span>                            <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;</a>(instance));</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">onlineInstances</a>.Inc();</div>
<div class="line"><span class="lineno">  451</span>                }</div>
<div class="line"><span class="lineno">  452</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  453</span>                {</div>
<div class="line"><span class="lineno">  454</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(<span class="stringliteral">&quot;Unable to commit onlined instance {instanceId} into service, offlining!&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  455</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  456</span>                    {</div>
<div class="line"><span class="lineno">  457</span>                        <span class="comment">// DCT: Must always run</span></div>
<div class="line"><span class="lineno">  458</span>                        await instance.StopAsync(CancellationToken.None);</div>
<div class="line"><span class="lineno">  459</span>                    }</div>
<div class="line"><span class="lineno">  460</span>                    <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> innerEx)</div>
<div class="line"><span class="lineno">  461</span>                    {</div>
<div class="line"><span class="lineno">  462</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(innerEx, ex);</div>
<div class="line"><span class="lineno">  463</span>                    }</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  466</span>                }</div>
<div class="line"><span class="lineno">  467</span>            }</div>
<div class="line"><span class="lineno">  468</span>            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  469</span>            {</div>
<div class="line"><span class="lineno">  470</span>                await instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  471</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  472</span>            }</div>
<div class="line"><span class="lineno">  473</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory_html_aeae385f33c15060d54ff78260f30024a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">Tgstation.Server.Host.Components.IInstanceFactory.CreateInstance</a></div><div class="ttdeci">ValueTask&lt; IInstance &gt; CreateInstance(IBridgeRegistrar bridgeRegistrar, Models.Instance metadata)</div><div class="ttdoc">Create an IInstance.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">Tgstation.Server.Host.Components.IInstanceFactory.CreateInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00138">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00021">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00158">Tgstation.Server.Host.Components.InstanceManager.onlineInstances</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph">
<area shape="rect" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="5,39,232,79"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="232,43,264,39,264,44,233,48"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="298,71,488,111"/>
<area shape="poly" title=" " alt="" coords="233,70,283,76,282,81,232,75"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph">
<area shape="rect" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="554,5,780,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="538,28,507,28,507,23,538,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="a799f1f7613771ef7c9d9f5ff55fb8b47" name="a799f1f7613771ef7c9d9f5ff55fb8b47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799f1f7613771ef7c9d9f5ff55fb8b47">&#9670;&#160;</a></span>PreflightChecks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tgstation.Server.Host.Components.InstanceManager.PreflightChecks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check we have a valid system and configuration. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00697">697</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  698</span>        {</div>
<div class="line"><span class="lineno">  699</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Running as user: {username}&quot;</span>, Environment.UserName);</div>
<div class="line"><span class="lineno">  700</span> </div>
<div class="line"><span class="lineno">  701</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6b0a11be884eb56cdf79528acb7de75d">generalConfigurationOptions</a>.Value.CheckCompatibility(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>);</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>            <span class="keyword">using</span> (var systemIdentity = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">GetCurrent</a>())</div>
<div class="line"><span class="lineno">  704</span>            {</div>
<div class="line"><span class="lineno">  705</span>                <span class="keywordflow">if</span> (!systemIdentity.CanCreateSymlinks)</div>
<div class="line"><span class="lineno">  706</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException($<span class="stringliteral">&quot;The user running {Constants.CanonicalPackageName} cannot create symlinks! Please try running as an administrative user!&quot;</span>);</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#aa9bf3bd1082b7178f58cb1f36839550e">IsWindows</a> &amp;&amp; systemIdentity.IsSuperUser &amp;&amp; !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a1eee56d463e0dfa4bfe9912dc04bdd69">internalConfigurationOptions</a>.Value.UsingDocker)</div>
<div class="line"><span class="lineno">  709</span>                {</div>
<div class="line"><span class="lineno">  710</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;TGS is being run as the root account. This is not recommended.&quot;</span>);</div>
<div class="line"><span class="lineno">  711</span>                }</div>
<div class="line"><span class="lineno">  712</span>            }</div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>            <span class="comment">// This runs before the real socket is opened, ensures we don&#39;t perform reattaches unless we&#39;re fairly certain the bind won&#39;t fail</span></div>
<div class="line"><span class="lineno">  715</span>            <span class="comment">// If it does fail, DD will be killed.</span></div>
<div class="line"><span class="lineno">  716</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html">SocketExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de">BindTest</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html#af5e86a67c2cc59e14c762532275f0a2c">HttpApiPort</a>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  717</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html">Tgstation.Server.Host.Extensions.SocketExtensions</a></div><div class="ttdoc">Extension methods for the Socket class.</div><div class="ttdef"><b>Definition</b> <a href="_socket_extensions_8cs_source.html#l00012">SocketExtensions.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions_html_ad87cda4241401c1a92afb27242c2e0de"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de">Tgstation.Server.Host.Extensions.SocketExtensions.BindTest</a></div><div class="ttdeci">static void BindTest(IPlatformIdentifier platformIdentifier, ushort port, bool includeIPv6, bool udp)</div><div class="ttdoc">Attempt to exclusively bind to a given port .</div><div class="ttdef"><b>Definition</b> <a href="_socket_extensions_8cs_source.html#l00021">SocketExtensions.cs:21</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider_html_af5e86a67c2cc59e14c762532275f0a2c"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html#af5e86a67c2cc59e14c762532275f0a2c">Tgstation.Server.Host.Core.IServerPortProvider.HttpApiPort</a></div><div class="ttdeci">ushort HttpApiPort</div><div class="ttdoc">The port the server listens on.</div><div class="ttdef"><b>Definition</b> <a href="_i_server_port_provider_8cs_source.html#l00011">IServerPortProvider.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory_html_a6052301d3f6ed6eb477f74a081e2187e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">Tgstation.Server.Host.Security.ISystemIdentityFactory.GetCurrent</a></div><div class="ttdeci">ISystemIdentity GetCurrent()</div><div class="ttdoc">Retrieves a ISystemIdentity representing the user executing tgstation-server.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier_html_aa9bf3bd1082b7178f58cb1f36839550e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#aa9bf3bd1082b7178f58cb1f36839550e">Tgstation.Server.Host.System.IPlatformIdentifier.IsWindows</a></div><div class="ttdeci">bool IsWindows</div><div class="ttdoc">If the current platform is a Windows platform.</div><div class="ttdef"><b>Definition</b> <a href="_i_platform_identifier_8cs_source.html#l00014">IPlatformIdentifier.cs:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_socket_extensions_8cs_source.html#l00021">Tgstation.Server.Host.Extensions.SocketExtensions.BindTest()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.generalConfigurationOptions</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">Tgstation.Server.Host.Security.ISystemIdentityFactory.GetCurrent()</a>, <a class="el" href="_i_server_port_provider_8cs_source.html#l00011">Tgstation.Server.Host.Core.IServerPortProvider.HttpApiPort</a>, <a class="el" href="_instance_manager_8cs_source.html#l00118">Tgstation.Server.Host.Components.InstanceManager.internalConfigurationOptions</a>, <a class="el" href="_instance_manager_8cs_source.html#l00053">Tgstation.Server.Host.Components.InstanceManager.ioManager</a>, <a class="el" href="_i_platform_identifier_8cs_source.html#l00014">Tgstation.Server.Host.System.IPlatformIdentifier.IsWindows</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00103">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00088">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00078">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_cgraph">
<area shape="rect" title="Check we have a valid system and configuration." alt="" coords="5,46,232,87"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="282,13,498,54"/>
<area shape="poly" title=" " alt="" coords="232,50,266,46,267,51,233,55"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="280,78,500,119"/>
<area shape="poly" title=" " alt="" coords="233,77,264,81,264,86,232,83"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="548,5,787,61"/>
<area shape="poly" title=" " alt="" coords="498,31,533,31,533,36,498,36"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_icgraph">
<area shape="rect" title="Check we have a valid system and configuration." alt="" coords="554,5,780,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="538,28,507,28,507,23,538,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ad5ab3803515d1f7387db7d7bbdc2a7e0" name="ad5ab3803515d1f7387db7d7bbdc2a7e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ab3803515d1f7387db7d7bbdc2a7e0">&#9670;&#160;</a></span>ProcessBridgeRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html">BridgeResponse</a>?&gt; Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html">BridgeParameters</a>&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a set of bridge <em>parameters</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameters</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html" title="Parameters for a bridge request.">BridgeParameters</a> to handle.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html" title="A response to a bridge request.">BridgeResponse</a> for the request or <code>null</code> if the request could not be dispatched.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeDispatcher</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00539">539</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  540</span>        {</div>
<div class="line"><span class="lineno">  541</span>            ArgumentNullException.ThrowIfNull(parameters);</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>            var accessIdentifier = parameters.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5">AccessIdentifier</a>;</div>
<div class="line"><span class="lineno">  544</span>            <span class="keywordflow">if</span> (accessIdentifier == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  545</span>            {</div>
<div class="line"><span class="lineno">  546</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;Received invalid bridge request with null access identifier!&quot;</span>);</div>
<div class="line"><span class="lineno">  547</span>                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  548</span>            }</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>            <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>? bridgeHandler = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  551</span>            var loggedDelay = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  552</span>            <span class="keywordflow">for</span> (var i = 0; bridgeHandler == <span class="keyword">null</span> &amp;&amp; i &lt; 30; ++i)</div>
<div class="line"><span class="lineno">  553</span>            {</div>
<div class="line"><span class="lineno">  554</span>                <span class="comment">// There&#39;s a miniscule time period where we could potentially receive a bridge request and not have the registration ready when we launch DD</span></div>
<div class="line"><span class="lineno">  555</span>                <span class="comment">// This is a stopgap</span></div>
<div class="line"><span class="lineno">  556</span>                Task delayTask = Task.CompletedTask;</div>
<div class="line"><span class="lineno">  557</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  558</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.TryGetValue(accessIdentifier, out bridgeHandler))</div>
<div class="line"><span class="lineno">  559</span>                    {</div>
<div class="line"><span class="lineno">  560</span>                        <span class="keywordflow">if</span> (!loggedDelay)</div>
<div class="line"><span class="lineno">  561</span>                        {</div>
<div class="line"><span class="lineno">  562</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Received bridge request with unregistered access identifier \&quot;{aid}\&quot;. Waiting up to 3 seconds for it to be registered...&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  563</span>                            loggedDelay = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  564</span>                        }</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>                        delayTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Delay</a>(TimeSpan.FromMilliseconds(100), cancellationToken).AsTask();</div>
<div class="line"><span class="lineno">  567</span>                    }</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>                await delayTask;</div>
<div class="line"><span class="lineno">  570</span>            }</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>            <span class="keywordflow">if</span> (bridgeHandler == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  573</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  574</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.TryGetValue(accessIdentifier, out bridgeHandler))</div>
<div class="line"><span class="lineno">  575</span>                    {</div>
<div class="line"><span class="lineno">  576</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;Received invalid bridge request with access identifier: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  577</span>                        <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  578</span>                    }</div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>            <span class="keywordflow">return</span> await bridgeHandler.ProcessBridgeRequest(parameters, cancellationToken);</div>
<div class="line"><span class="lineno">  581</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters_html_af84241c8eda4d8f7deddb9c5b7eb79a5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5">Tgstation.Server.Host.Components.Interop.DMApiParameters.AccessIdentifier</a></div><div class="ttdeci">string AccessIdentifier</div><div class="ttdoc">Used to identify and authenticate the DreamDaemon instance.</div><div class="ttdef"><b>Definition</b> <a href="_d_m_api_parameters_8cs_source.html#l00015">DMApiParameters.cs:15</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeHandler</a></div><div class="ttdef"><b>Definition</b> <a href="_i_bridge_handler_8cs_source.html#l00004">IBridgeHandler.cs:5</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_d_m_api_parameters_8cs_source.html#l00015">Tgstation.Server.Host.Components.Interop.DMApiParameters.AccessIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00083">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="_instance_manager_8cs_source.html#l00133">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeDispatcher.ProcessBridgeRequest()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph">
<area shape="rect" title="Handle a set of bridge parameters .A ValueTask&lt;TResult&gt; resulting in the BridgeResponse for the reque..." alt="" coords="5,41,263,82"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce" title="Create a Task that completes after a given timeSpan ." alt="" coords="350,5,530,46"/>
<area shape="poly" title=" " alt="" coords="263,44,334,35,335,41,263,49"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5" title="Handle a set of bridge parameters ." alt="" coords="311,70,569,126"/>
<area shape="poly" title=" " alt="" coords="263,74,296,78,295,83,263,79"/>
</map>
</div>

</div>
</div>
<a id="a785c474a5d39316af850239b0c7e107b" name="a785c474a5d39316af850239b0c7e107b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a785c474a5d39316af850239b0c7e107b">&#9670;&#160;</a></span>RegisterHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html">IBridgeRegistration</a> Tgstation.Server.Host.Components.InstanceManager.RegisterHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>&#160;</td>
          <td class="paramname"><em>bridgeHandler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a given <em>bridgeHandler</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridgeHandler</td><td>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> to register.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A representative <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html" title="Represents a registration of an interop session.">IBridgeRegistration</a>.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html#aa36d6072e7a96ece183b77544c9bfe4b">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeRegistrar</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00584">584</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  585</span>        {</div>
<div class="line"><span class="lineno">  586</span>            ArgumentNullException.ThrowIfNull(bridgeHandler);</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>            var accessIdentifier = bridgeHandler.DMApiParameters.AccessIdentifier</div>
<div class="line"><span class="lineno">  589</span>                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Attempted bridge registration with null AccessIdentifier!&quot;</span>);</div>
<div class="line"><span class="lineno">  590</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  591</span>            {</div>
<div class="line"><span class="lineno">  592</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.Add(accessIdentifier, bridgeHandler);</div>
<div class="line"><span class="lineno">  593</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Registered bridge handler: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  594</span>            }</div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration.html">BridgeRegistration</a>(() =&gt;</div>
<div class="line"><span class="lineno">  597</span>            {</div>
<div class="line"><span class="lineno">  598</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  599</span>                {</div>
<div class="line"><span class="lineno">  600</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.Remove(accessIdentifier);</div>
<div class="line"><span class="lineno">  601</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Unregistered bridge handler: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  602</span>                }</div>
<div class="line"><span class="lineno">  603</span>            });</div>
<div class="line"><span class="lineno">  604</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration.html">Tgstation.Server.Host.Components.Interop.Bridge.BridgeRegistration</a></div><div class="ttdef"><b>Definition</b> <a href="_bridge_registration_8cs_source.html#l00008">BridgeRegistration.cs:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00133">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>.</p>

</div>
</div>
<a id="aa2bcc92fca46ad404800304ce4bdd781" name="aa2bcc92fca46ad404800304ce4bdd781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2bcc92fca46ad404800304ce4bdd781">&#9670;&#160;</a></span>StartAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.InstanceManager.StartAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00476">476</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  477</span>        {</div>
<div class="line"><span class="lineno">  478</span>            cancellationToken.Register(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Cancel);</div>
<div class="line"><span class="lineno">  479</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Initialize</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Token);</div>
<div class="line"><span class="lineno">  480</span>            <span class="keywordflow">return</span> Task.CompletedTask;</div>
<div class="line"><span class="lineno">  481</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a7da7b0a7f75cbd3bcebc0e215f9dfcef"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">Tgstation.Server.Host.Components.InstanceManager.startupTask</a></div><div class="ttdeci">Task? startupTask</div><div class="ttdoc">The Task returned by Initialize(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00168">InstanceManager.cs:168</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aa70355ebb8437fd170e4f75e826f1ad7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Tgstation.Server.Host.Components.InstanceManager.Initialize</a></div><div class="ttdeci">async Task Initialize(CancellationToken cancellationToken)</div><div class="ttdoc">Initializes the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00621">InstanceManager.cs:621</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00148">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00168">Tgstation.Server.Host.Components.InstanceManager.startupTask</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph">
<area shape="rect" title=" " alt="" coords="5,201,232,242"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,201,506,242"/>
<area shape="poly" title=" " alt="" coords="232,219,264,219,264,224,232,224"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac" title="Activate the IJobManager." alt="" coords="583,5,764,46"/>
<area shape="poly" title=" " alt="" coords="407,199,465,129,506,90,553,57,567,49,569,54,555,61,510,94,469,133,411,203"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0" title="Kill the server with a fatal exception." alt="" coords="583,71,763,111"/>
<area shape="poly" title=" " alt="" coords="421,199,481,160,553,122,572,114,574,119,555,127,483,165,424,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e" title="Initializes the connection to the TGS swarm." alt="" coords="560,136,786,177"/>
<area shape="poly" title=" " alt="" coords="483,198,567,178,569,183,484,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="560,201,786,242"/>
<area shape="poly" title=" " alt="" coords="506,219,545,219,545,224,506,224"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47" title="Check we have a valid system and configuration." alt="" coords="560,267,786,307"/>
<area shape="poly" title=" " alt="" coords="484,240,569,260,567,265,483,245"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="590,332,757,373"/>
<area shape="poly" title=" " alt="" coords="424,240,483,279,555,317,576,325,574,330,553,321,481,283,421,245"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="554,397,792,438"/>
<area shape="poly" title=" " alt="" coords="411,241,469,310,510,349,555,382,567,388,564,393,553,387,506,353,465,314,407,244"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce" title="Create a Task that completes after a given timeSpan ." alt="" coords="863,39,1044,79"/>
<area shape="poly" title=" " alt="" coords="759,133,791,121,815,105,839,90,857,82,859,87,842,95,818,110,794,125,761,138"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="846,104,1061,145"/>
<area shape="poly" title=" " alt="" coords="786,141,830,136,831,141,787,146"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="840,169,1067,210"/>
<area shape="poly" title=" " alt="" coords="786,206,825,202,825,207,787,211"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="859,235,1048,275"/>
<area shape="poly" title=" " alt="" coords="787,232,844,239,843,245,786,238"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="845,300,1062,341"/>
<area shape="poly" title=" " alt="" coords="787,298,830,303,830,308,786,303"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="843,365,1064,406"/>
<area shape="poly" title=" " alt="" coords="762,305,794,318,818,334,842,350,859,357,857,362,839,355,815,338,791,323,760,310"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="1115,293,1354,348"/>
<area shape="poly" title=" " alt="" coords="1062,318,1099,318,1099,323,1062,323"/>
</map>
</div>

</div>
</div>
<a id="aaa1a2f2c9fe345546fd5f8ae27fe466b" name="aaa1a2f2c9fe345546fd5f8ae27fe466b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1a2f2c9fe345546fd5f8ae27fe466b">&#9670;&#160;</a></span>StopAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.InstanceManager.StopAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00484">484</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  485</span>        {</div>
<div class="line"><span class="lineno">  486</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  487</span>            {</div>
<div class="line"><span class="lineno">  488</span>                <span class="keyword">using</span> (cancellationToken.Register(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Cancel))</div>
<div class="line"><span class="lineno">  489</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  490</span>                    {</div>
<div class="line"><span class="lineno">  491</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  492</span>                        {</div>
<div class="line"><span class="lineno">  493</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;InstanceManager was never started!&quot;</span>);</div>
<div class="line"><span class="lineno">  494</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  495</span>                        }</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Stopping instance manager...&quot;</span>);</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>                        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a>.IsCompleted)</div>
<div class="line"><span class="lineno">  500</span>                        {</div>
<div class="line"><span class="lineno">  501</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Interrupting startup task...&quot;</span>);</div>
<div class="line"><span class="lineno">  502</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Cancel();</div>
<div class="line"><span class="lineno">  503</span>                            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a>;</div>
<div class="line"><span class="lineno">  504</span>                        }</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>                        var instanceFactoryStopTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  507</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>                        async ValueTask OfflineInstanceImmediate(IInstance instance, CancellationToken cancellationToken)</div>
<div class="line"><span class="lineno">  510</span>                        {</div>
<div class="line"><span class="lineno">  511</span>                            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  512</span>                            {</div>
<div class="line"><span class="lineno">  513</span>                                await instance.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  514</span>                            }</div>
<div class="line"><span class="lineno">  515</span>                            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  516</span>                            {</div>
<div class="line"><span class="lineno">  517</span>                                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(ex, <span class="stringliteral">&quot;Instance shutdown exception!&quot;</span>);</div>
<div class="line"><span class="lineno">  518</span>                            }</div>
<div class="line"><span class="lineno">  519</span>                        }</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>                        await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Select(x =&gt; OfflineInstanceImmediate(x.Value.Instance, cancellationToken)));</div>
<div class="line"><span class="lineno">  522</span>                        await instanceFactoryStopTask;</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Shutdown</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  525</span>                    }</div>
<div class="line"><span class="lineno">  526</span>                    <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  527</span>                    {</div>
<div class="line"><span class="lineno">  528</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  529</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">SetTitle</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a>);</div>
<div class="line"><span class="lineno">  530</span>                    }</div>
<div class="line"><span class="lineno">  531</span>            }</div>
<div class="line"><span class="lineno">  532</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  533</span>            {</div>
<div class="line"><span class="lineno">  534</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(ex, <span class="stringliteral">&quot;Instance manager stop exception!&quot;</span>);</div>
<div class="line"><span class="lineno">  535</span>            }</div>
<div class="line"><span class="lineno">  536</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller_html_a6296d8313a5ce21888e6eb9f08b8379a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Tgstation.Server.Host.Swarm.ISwarmServiceController.Shutdown</a></div><div class="ttdeci">ValueTask Shutdown(CancellationToken cancellationToken)</div><div class="ttdoc">Deregister with the swarm controller or put clients into querying state.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00098">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00068">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00163">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Tgstation.Server.Host.Swarm.ISwarmServiceController.Shutdown()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00153">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00148">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00168">Tgstation.Server.Host.Components.InstanceManager.startupTask</a>, <a class="el" href="_instance_manager_8cs_source.html#l00093">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph">
<area shape="rect" title=" " alt="" coords="5,71,232,111"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="309,5,477,46"/>
<area shape="poly" title=" " alt="" coords="206,67,293,47,295,52,208,73"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a" title="Deregister with the swarm controller or put clients into querying state." alt="" coords="280,71,506,111"/>
<area shape="poly" title=" " alt="" coords="232,88,264,88,264,94,232,94"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="285,135,501,191"/>
<area shape="poly" title=" " alt="" coords="199,109,271,128,269,133,198,114"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa335c25ccb65f93242424c79396a29dc" name="aa335c25ccb65f93242424c79396a29dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa335c25ccb65f93242424c79396a29dc">&#9670;&#160;</a></span>assemblyInformationProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a> Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAssemblyInformationProvider for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00063">63</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ad6f992fed638980594fd5a6c45b8946b" name="ad6f992fed638980594fd5a6c45b8946b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f992fed638980594fd5a6c45b8946b">&#9670;&#160;</a></span>asyncDelayer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAsyncDelayer for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00083">83</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00724">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00539">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>.</p>

</div>
</div>
<a id="af4eafee41a5201cb8f671607b53cc0bd" name="af4eafee41a5201cb8f671607b53cc0bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4eafee41a5201cb8f671607b53cc0bd">&#9670;&#160;</a></span>bridgeHandlers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Dictionary&lt;string, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>&gt; Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5" title="Used to identify and authenticate the DreamDaemon instance.">DMApiParameters.AccessIdentifier</a>s to their respective IBridgeHandlers. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00133">133</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00539">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00584">Tgstation.Server.Host.Components.InstanceManager.RegisterHandler()</a>.</p>

</div>
</div>
<a id="ad650e598cfd489a215ab0b6dfcc13910" name="ad650e598cfd489a215ab0b6dfcc13910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad650e598cfd489a215ab0b6dfcc13910">&#9670;&#160;</a></span>console</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a> Tgstation.Server.Host.Components.InstanceManager.console</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IConsole for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00098">98</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="ab5c8e78bdae6eb6eb2ed289563c639cc" name="ab5c8e78bdae6eb6eb2ed289563c639cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c8e78bdae6eb6eb2ed289563c639cc">&#9670;&#160;</a></span>databaseContextFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IDatabaseContextFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00058">58</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00287">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00358">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>.</p>

</div>
</div>
<a id="a6ba869dae354db235f8518f7283a531c" name="a6ba869dae354db235f8518f7283a531c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba869dae354db235f8518f7283a531c">&#9670;&#160;</a></span>disposed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.InstanceManager.disposed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the InstanceManager has been DisposeAsync'd. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00173">173</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>.</p>

</div>
</div>
<a id="a6b0a11be884eb56cdf79528acb7de75d" name="a6b0a11be884eb56cdf79528acb7de75d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b0a11be884eb56cdf79528acb7de75d">&#9670;&#160;</a></span>generalConfigurationOptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IOptions&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a>&gt; Tgstation.Server.Host.Components.InstanceManager.generalConfigurationOptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IOptions&lt;TOptions&gt; of GeneralConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00108">108</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00697">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="ae2b48b5197337f7a311fd115951be7f6" name="ae2b48b5197337f7a311fd115951be7f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2b48b5197337f7a311fd115951be7f6">&#9670;&#160;</a></span>instanceFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a> Tgstation.Server.Host.Components.InstanceManager.instanceFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IInstanceFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00048">48</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00287">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00424">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a25d96cfaae1f2de6a931a8158b2290c1" name="a25d96cfaae1f2de6a931a8158b2290c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d96cfaae1f2de6a931a8158b2290c1">&#9670;&#160;</a></span>instances</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Dictionary&lt;long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer</a>&lt;<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html">IInstance</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_wrapper.html">InstanceWrapper</a>&gt; &gt; Tgstation.Server.Host.Components.InstanceManager.instances</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of instance <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to the respective ReferenceCountingContainer&lt;TWrapped, TReference&gt; for IInstances. Also used as a <code>lock</code> object. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00128">128</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00607">Tgstation.Server.Host.Components.InstanceManager.GetInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00275">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00358">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00424">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="abaf66550ead757ef3bc6915c9b15d06b" name="abaf66550ead757ef3bc6915c9b15d06b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaf66550ead757ef3bc6915c9b15d06b">&#9670;&#160;</a></span>instanceStateChangeSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineInstance(Models.Instance, User, CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00138">138</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00287">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00358">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00424">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>.</p>

</div>
</div>
<a id="a1eee56d463e0dfa4bfe9912dc04bdd69" name="a1eee56d463e0dfa4bfe9912dc04bdd69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eee56d463e0dfa4bfe9912dc04bdd69">&#9670;&#160;</a></span>internalConfigurationOptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IOptions&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a>&gt; Tgstation.Server.Host.Components.InstanceManager.internalConfigurationOptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IOptions&lt;TOptions&gt; of InternalConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00118">118</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00697">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="a59bc4b977f9b72208d553fbfa57f118e" name="a59bc4b977f9b72208d553fbfa57f118e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59bc4b977f9b72208d553fbfa57f118e">&#9670;&#160;</a></span>ioManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.InstanceManager.ioManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00053">53</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00287">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00697">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="a4cba827c550b76d41c119b62d25c4668" name="a4cba827c550b76d41c119b62d25c4668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cba827c550b76d41c119b62d25c4668">&#9670;&#160;</a></span>jobService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a> Tgstation.Server.Host.Components.InstanceManager.jobService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IJobService for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00068">68</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00358">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a968fedca8d4cc5ff16c77c0cbc782bda" name="a968fedca8d4cc5ff16c77c0cbc782bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968fedca8d4cc5ff16c77c0cbc782bda">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ILogger&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a>&gt; Tgstation.Server.Host.Components.InstanceManager.logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ILogger for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00123">123</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00287">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00358">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00424">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00697">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00539">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00584">Tgstation.Server.Host.Components.InstanceManager.RegisterHandler()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a5740c90c4a6ff7cf2b2e84e0a07e5812" name="a5740c90c4a6ff7cf2b2e84e0a07e5812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5740c90c4a6ff7cf2b2e84e0a07e5812">&#9670;&#160;</a></span>onlineInstances</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Gauge Tgstation.Server.Host.Components.InstanceManager.onlineInstances</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The count of online instances. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00158">158</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00358">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00424">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>.</p>

</div>
</div>
<a id="ad66bf7714d6593c0793e5612b60335b8" name="ad66bf7714d6593c0793e5612b60335b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66bf7714d6593c0793e5612b60335b8">&#9670;&#160;</a></span>originalConsoleTitle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly? string Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The original <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b" title="Gets or sets the IConsole window&#39;s title. Can return null if getting the console title is not support...">IConsole.Title</a> of console. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00163">163</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a26a35317eec77d8eed96595fc85f7c4c" name="a26a35317eec77d8eed96595fc85f7c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26a35317eec77d8eed96595fc85f7c4c">&#9670;&#160;</a></span>platformIdentifier</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a> Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IPlatformIdentifier for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00103">103</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00697">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="a16905d984154ab9356b3477dc257f435" name="a16905d984154ab9356b3477dc257f435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16905d984154ab9356b3477dc257f435">&#9670;&#160;</a></span>readyTcs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly TaskCompletionSource Tgstation.Server.Host.Components.InstanceManager.readyTcs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The TaskCompletionSource for Ready. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00143">143</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ac2ba10fddea5448f4c8c08f363a0e391" name="ac2ba10fddea5448f4c8c08f363a0e391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ba10fddea5448f4c8c08f363a0e391">&#9670;&#160;</a></span>serverControl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> Tgstation.Server.Host.Components.InstanceManager.serverControl</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IServerControl for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00073">73</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ad5b7e13dc94565671f962eb9fe62fd82" name="ad5b7e13dc94565671f962eb9fe62fd82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b7e13dc94565671f962eb9fe62fd82">&#9670;&#160;</a></span>serverPortProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a> Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IServerPortProvider for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00088">88</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00697">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="aeb76c23570af139eb50c9091c462ecf9" name="aeb76c23570af139eb50c9091c462ecf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb76c23570af139eb50c9091c462ecf9">&#9670;&#160;</a></span>shutdownCancellationTokenSource</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly CancellationTokenSource Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource linked with the token given to StopAsync(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00153">153</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00358">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a76fbe64a7ff3a9fc273ecc05f613ed7c" name="a76fbe64a7ff3a9fc273ecc05f613ed7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fbe64a7ff3a9fc273ecc05f613ed7c">&#9670;&#160;</a></span>startupCancellationTokenSource</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly CancellationTokenSource Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource for Initialize(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00148">148</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00476">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a7da7b0a7f75cbd3bcebc0e215f9dfcef" name="a7da7b0a7f75cbd3bcebc0e215f9dfcef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da7b0a7f75cbd3bcebc0e215f9dfcef">&#9670;&#160;</a></span>startupTask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task? Tgstation.Server.Host.Components.InstanceManager.startupTask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Task returned by Initialize(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00168">168</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00476">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a6ed022b1afe150b7a84dd8447774f8bc" name="a6ed022b1afe150b7a84dd8447774f8bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed022b1afe150b7a84dd8447774f8bc">&#9670;&#160;</a></span>swarmConfigurationOptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IOptions&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a>&gt; Tgstation.Server.Host.Components.InstanceManager.swarmConfigurationOptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IOptions&lt;TOptions&gt; of SwarmConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00113">113</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00621">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="a7281abf42fbdf74cfbabfe9181ad301e" name="a7281abf42fbdf74cfbabfe9181ad301e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7281abf42fbdf74cfbabfe9181ad301e">&#9670;&#160;</a></span>swarmServiceController</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a> Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISwarmServiceController for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00093">93</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00724">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00484">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a914147c0498a9b2482efe956486646fb" name="a914147c0498a9b2482efe956486646fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a914147c0498a9b2482efe956486646fb">&#9670;&#160;</a></span>systemIdentityFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a> Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISystemIdentityFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00078">78</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00697">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a0d54ae3e93cf9a9af10411c733e77f44" name="a0d54ae3e93cf9a9af10411c733e77f44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d54ae3e93cf9a9af10411c733e77f44">&#9670;&#160;</a></span>Ready</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.InstanceManager.Ready</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Task that completes when the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances.">IInstanceManager</a> finishes initializing. </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#a4ad311358f74779a6c1f2fcba4a30578">Tgstation.Server.Host.Components.IInstanceManager</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00043">43</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/<a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
