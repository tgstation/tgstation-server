<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.InstanceManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.18.0</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.InstanceManager Class Reference<span class="mlabels"><span class="mlabel">sealed</span></span></div></div>
</div><!--header-->
<div class="contents">

<p> 
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.InstanceManager:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map">
<area shape="rect" title=" " alt="" coords="390,121,616,161"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances." alt="" coords="204,29,330,55"/>
<area shape="poly" title=" " alt="" coords="328,58,343,64,462,118,460,123,341,69,326,63"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html" title="Operations that can be performed on a given Models.Instance." alt="" coords="5,5,144,31"/>
<area shape="poly" title=" " alt="" coords="160,26,204,32,204,37,159,31"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html" title="Handler for BridgeParameters." alt="" coords="12,55,137,80"/>
<area shape="poly" title=" " alt="" coords="151,55,204,48,204,53,152,60"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html" title="Provider for IInstanceCores." alt="" coords="192,79,342,104"/>
<area shape="poly" title=" " alt="" coords="347,105,403,117,402,122,346,111"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="211,128,323,154"/>
<area shape="poly" title=" " alt="" coords="338,138,389,138,389,144,338,144"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html" title="Registers IBridgeHandlers." alt="" coords="210,177,324,203"/>
<area shape="poly" title=" " alt="" coords="338,173,402,159,403,164,340,178"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="204,227,330,252"/>
<area shape="poly" title=" " alt="" coords="326,219,341,213,460,159,462,164,343,218,328,224"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.InstanceManager:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map" id="a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map">
<area shape="rect" title=" " alt="" coords="1168,901,1394,941"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances." alt="" coords="689,29,815,55"/>
<area shape="poly" title=" " alt="" coords="830,24,904,16,989,19,1032,26,1073,39,1111,58,1146,84,1168,112,1187,149,1204,194,1219,245,1243,363,1260,492,1271,621,1277,739,1282,900,1277,900,1272,740,1265,622,1254,493,1237,364,1214,246,1199,195,1182,151,1163,115,1142,88,1108,63,1071,44,1030,31,988,24,904,22,830,29"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html" title="Operations that can be performed on a given Models.Instance." alt="" coords="174,5,312,31"/>
<area shape="poly" title=" " alt="" coords="328,19,689,37,689,42,328,25"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html" title="Handler for BridgeParameters." alt="" coords="181,55,305,80"/>
<area shape="poly" title=" " alt="" coords="320,61,689,43,689,48,321,66"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html" title="Provider for IInstanceCores." alt="" coords="677,79,827,104"/>
<area shape="poly" title=" " alt="" coords="843,84,927,83,1016,87,1094,98,1124,108,1145,121,1167,147,1186,182,1203,225,1217,274,1241,386,1258,509,1269,633,1277,746,1282,900,1277,900,1271,746,1264,633,1253,510,1236,387,1212,275,1198,227,1181,185,1163,150,1142,126,1122,113,1092,103,1015,92,927,88,843,89"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,208,117,234"/>
<area shape="poly" title=" " alt="" coords="132,209,332,185,577,165,752,160,927,165,960,164,991,159,1044,148,1069,146,1093,148,1119,158,1145,178,1166,201,1184,233,1214,318,1238,421,1255,535,1275,755,1282,900,1276,900,1270,755,1250,536,1232,422,1209,319,1179,235,1161,204,1142,181,1116,163,1092,154,1069,151,1045,153,992,164,961,169,927,170,752,166,577,170,332,190,132,214"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="176,287,311,312"/>
<area shape="poly" title=" " alt="" coords="108,238,212,284,210,289,105,243"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html" title="Registers IBridgeHandlers." alt="" coords="695,180,809,206"/>
<area shape="poly" title=" " alt="" coords="824,174,898,165,984,165,1028,171,1070,183,1110,201,1145,227,1164,249,1181,279,1210,358,1233,454,1251,560,1273,764,1281,900,1276,900,1267,764,1245,560,1228,455,1205,359,1176,281,1160,252,1142,231,1107,206,1068,188,1027,176,984,170,898,170,824,179"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="689,229,815,255"/>
<area shape="poly" title=" " alt="" coords="830,233,915,229,1007,230,1090,239,1122,248,1145,261,1164,282,1180,310,1209,384,1231,475,1249,575,1272,769,1281,900,1276,900,1267,770,1244,576,1226,476,1204,386,1176,313,1159,285,1142,266,1120,253,1089,244,1007,235,915,234,830,238"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html" title="Factory for creating IInstances." alt="" coords="639,279,865,320"/>
<area shape="poly" title=" " alt="" coords="881,279,948,279,1018,288,1053,297,1086,310,1117,327,1145,348,1161,366,1176,391,1202,454,1224,532,1242,618,1268,785,1280,900,1275,900,1262,786,1237,619,1218,534,1197,456,1171,393,1157,369,1142,352,1114,331,1084,315,1051,302,1017,293,947,284,881,284"/>
<area shape="poly" title=" " alt="" coords="326,297,638,297,638,302,326,302"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html" title="The service that manages everything to do with jobs." alt="" coords="661,541,843,581"/>
<area shape="poly" title=" " alt="" coords="272,321,325,365,398,421,485,478,578,525,619,539,661,548,660,553,618,544,576,530,482,482,395,425,321,369,269,325"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="668,345,836,385"/>
<area shape="poly" title=" " alt="" coords="851,362,934,365,1020,373,1095,387,1124,398,1145,411,1160,427,1173,448,1198,504,1219,572,1238,648,1265,796,1280,899,1274,900,1260,797,1232,649,1214,574,1193,506,1169,451,1156,430,1142,415,1122,403,1094,393,1019,378,934,371,851,367"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html" title="Factory for scoping usage of IDatabaseContexts. Meant for use by Components." alt="" coords="648,410,856,451"/>
<area shape="poly" title=" " alt="" coords="872,426,951,429,1030,435,1099,448,1126,458,1145,469,1171,502,1194,550,1215,610,1234,676,1262,807,1279,900,1274,901,1257,808,1228,678,1210,612,1189,552,1166,504,1142,474,1123,463,1098,454,1030,441,950,434,872,431"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html" title="For retrieving the Assembly&#39;s location." alt="" coords="653,475,851,516"/>
<area shape="poly" title=" " alt="" coords="866,488,946,488,1027,492,1097,503,1125,512,1145,523,1187,564,1219,613,1243,667,1260,722,1271,776,1278,826,1282,900,1277,900,1273,827,1266,777,1255,724,1238,669,1214,615,1183,567,1142,527,1123,516,1096,508,1026,497,946,493,866,493"/>
<area shape="poly" title=" " alt="" coords="858,542,927,539,1002,545,1040,552,1077,563,1113,578,1145,599,1180,631,1209,670,1231,712,1249,756,1271,839,1280,900,1275,900,1266,840,1244,757,1227,714,1204,672,1176,635,1142,603,1110,583,1076,568,1039,557,1002,550,927,544,858,547"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html" title="Manages the runtime of Jobs." alt="" coords="195,548,291,574"/>
<area shape="poly" title=" " alt="" coords="307,558,661,558,661,564,307,564"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html" title="Represents a service that may take an updated Host assembly and run it, stopping the current assembly..." alt="" coords="662,606,842,647"/>
<area shape="poly" title=" " alt="" coords="858,614,926,615,1001,624,1076,644,1112,659,1145,679,1173,702,1198,730,1236,791,1262,852,1277,899,1272,901,1257,854,1232,794,1194,733,1170,706,1142,683,1110,664,1075,649,1000,629,926,620,858,619"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html" title="Factory for ISystemIdentitys." alt="" coords="652,671,852,712"/>
<area shape="poly" title=" " alt="" coords="868,688,934,693,1005,705,1077,725,1145,756,1188,788,1224,827,1252,867,1271,899,1267,902,1247,870,1219,831,1184,792,1142,760,1076,730,1004,710,933,699,867,693"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html" title="For waiting asynchronously." alt="" coords="662,737,842,777"/>
<area shape="poly" title=" " alt="" coords="858,761,924,769,997,782,1072,800,1145,825,1177,841,1208,860,1257,898,1254,902,1205,864,1174,846,1143,830,1071,805,996,787,923,774,858,766"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html" title="Provides access to the server&#39;s HttpApiPort." alt="" coords="662,802,842,843"/>
<area shape="poly" title=" " alt="" coords="858,831,995,850,1144,878,1216,897,1214,902,1143,883,994,856,857,837"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html" title="Start and stop controllers for a swarm service." alt="" coords="655,867,849,908"/>
<area shape="poly" title=" " alt="" coords="864,892,1168,911,1167,916,864,897"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html" title="Abstraction for global::System.Console." alt="" coords="668,933,836,973"/>
<area shape="poly" title=" " alt="" coords="851,946,1143,929,1167,928,1167,933,1144,934,851,951"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html" title="For identifying the current platform." alt="" coords="653,998,851,1039"/>
<area shape="poly" title=" " alt="" coords="866,1005,999,988,1143,961,1220,939,1222,944,1144,966,1000,993,866,1010"/>
<area shape="rect" title=" " alt="" coords="642,1062,862,1118"/>
<area shape="poly" title=" " alt="" coords="877,1079,1008,1058,1077,1040,1143,1016,1175,999,1206,979,1256,939,1259,944,1209,984,1178,1004,1145,1021,1078,1045,1009,1063,878,1084"/>
<area shape="rect" title=" " alt="" coords="577,1142,927,1212"/>
<area shape="poly" title=" " alt="" coords="941,1160,993,1149,1045,1134,1095,1115,1142,1090,1185,1055,1220,1014,1248,974,1267,940,1272,943,1252,976,1224,1018,1188,1059,1145,1094,1097,1119,1046,1139,994,1154,942,1165"/>
<area shape="rect" title=" " alt="" coords="668,1237,836,1277"/>
<area shape="poly" title=" " alt="" coords="851,1258,921,1254,997,1241,1073,1217,1109,1200,1142,1179,1171,1153,1195,1123,1216,1090,1234,1056,1259,991,1273,941,1278,942,1264,992,1239,1058,1221,1093,1200,1126,1175,1157,1145,1183,1112,1205,1075,1222,999,1246,922,1259,852,1263"/>
<area shape="rect" title=" " alt="" coords="670,1301,834,1327"/>
<area shape="poly" title=" " alt="" coords="843,1327,914,1331,993,1327,1033,1320,1072,1308,1108,1292,1142,1271,1179,1236,1208,1193,1231,1146,1248,1098,1269,1007,1276,941,1281,942,1274,1008,1253,1100,1236,1149,1213,1196,1183,1239,1145,1275,1111,1297,1073,1314,1034,1325,994,1332,914,1337,843,1332"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html" title="General configuration options." alt="" coords="638,1351,866,1392"/>
<area shape="poly" title=" " alt="" coords="882,1379,958,1381,1034,1378,1099,1370,1124,1362,1142,1352,1166,1332,1186,1308,1220,1255,1244,1196,1261,1135,1271,1076,1276,1022,1278,942,1283,942,1282,1022,1276,1077,1266,1137,1249,1198,1225,1257,1191,1311,1169,1335,1145,1357,1126,1367,1100,1375,1035,1384,958,1386,882,1384"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base.html" title="Base class for Response.ServerInformationResponse." alt="" coords="166,1103,320,1128"/>
<area shape="poly" title=" " alt="" coords="314,1097,372,1090,437,1092,469,1097,500,1107,529,1121,555,1142,572,1166,578,1191,575,1216,569,1241,563,1266,560,1290,564,1314,579,1338,606,1357,638,1369,636,1374,604,1362,575,1341,559,1316,554,1291,557,1265,564,1240,570,1215,573,1191,568,1168,551,1145,527,1126,498,1112,468,1102,436,1097,372,1096,314,1102"/>
<area shape="rect" title=" " alt="" coords="199,1469,287,1495"/>
<area shape="poly" title=" " alt="" coords="302,1470,552,1426,563,1415,576,1403,606,1390,637,1381,638,1386,607,1395,579,1407,567,1419,555,1431,303,1475"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html" title="Configuration for the server swarm system." alt="" coords="638,1482,866,1523"/>
<area shape="poly" title=" " alt="" coords="282,1500,312,1514,345,1524,424,1534,504,1535,580,1530,649,1521,649,1526,581,1535,504,1541,423,1540,344,1529,310,1519,279,1505"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html" title="Unstable configuration options used internally by TGS." alt="" coords="638,1417,866,1457"/>
<area shape="poly" title=" " alt="" coords="303,1487,419,1492,487,1489,553,1479,576,1468,637,1452,638,1457,578,1473,554,1484,487,1494,419,1497,303,1492"/>
<area shape="rect" title=" " alt="" coords="197,1152,289,1178"/>
<area shape="poly" title=" " alt="" coords="305,1160,373,1161,446,1165,512,1176,537,1185,555,1196,568,1214,573,1232,569,1269,564,1304,568,1321,579,1338,606,1357,638,1368,637,1373,604,1362,575,1341,563,1323,559,1305,563,1268,568,1232,563,1216,552,1200,535,1190,510,1181,446,1171,372,1166,305,1166"/>
<area shape="rect" title=" " alt="" coords="222,1287,264,1312"/>
<area shape="poly" title=" " alt="" coords="280,1300,402,1311,554,1332,578,1337,638,1349,637,1354,577,1342,553,1337,401,1316,280,1305"/>
<area shape="rect" title=" " alt="" coords="168,1336,319,1362"/>
<area shape="poly" title=" " alt="" coords="335,1350,637,1364,637,1369,334,1356"/>
<area shape="poly" title=" " alt="" coords="881,1501,959,1499,1035,1492,1100,1479,1124,1470,1142,1459,1156,1443,1170,1421,1195,1362,1217,1289,1235,1208,1261,1050,1275,941,1280,942,1267,1051,1240,1209,1222,1290,1200,1364,1175,1423,1161,1446,1145,1463,1127,1475,1101,1484,1036,1497,959,1504,882,1507"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html" title="Information about a server in the swarm." alt="" coords="193,1559,293,1584"/>
<area shape="poly" title=" " alt="" coords="309,1569,424,1563,489,1555,553,1542,576,1532,637,1517,638,1522,578,1537,554,1547,490,1561,424,1569,309,1575"/>
<area shape="poly" title=" " alt="" coords="882,1439,958,1438,1035,1432,1099,1421,1124,1412,1142,1402,1168,1368,1192,1317,1213,1252,1231,1181,1259,1040,1274,941,1279,942,1264,1041,1236,1182,1218,1253,1197,1318,1173,1371,1145,1406,1126,1417,1101,1426,1035,1438,959,1443,882,1444"/>
<area shape="rect" title=" " alt="" coords="674,1547,830,1572"/>
<area shape="poly" title=" " alt="" coords="845,1554,1027,1542,1103,1533,1128,1527,1142,1520,1158,1502,1173,1477,1199,1411,1221,1329,1239,1238,1264,1062,1275,941,1281,942,1269,1062,1245,1239,1227,1330,1204,1413,1177,1480,1162,1505,1145,1525,1130,1532,1104,1538,1027,1548,846,1559"/>
<area shape="rect" title=" " alt="" coords="662,1597,842,1637"/>
<area shape="poly" title=" " alt="" coords="858,1629,939,1636,1022,1639,1095,1633,1122,1625,1142,1615,1161,1594,1178,1566,1207,1488,1230,1392,1248,1286,1269,1080,1276,942,1281,942,1274,1080,1253,1286,1235,1393,1212,1490,1183,1568,1165,1597,1145,1619,1124,1630,1096,1638,1023,1644,938,1641,857,1634"/>
<area shape="rect" title=" " alt="" coords="697,1661,807,1687"/>
<area shape="poly" title=" " alt="" coords="823,1679,908,1686,1003,1688,1087,1681,1120,1673,1142,1660,1162,1638,1180,1607,1195,1568,1210,1524,1233,1420,1250,1307,1262,1192,1270,1087,1276,942,1282,942,1275,1087,1268,1193,1255,1307,1238,1421,1215,1525,1201,1570,1184,1609,1166,1641,1145,1665,1122,1678,1088,1686,1003,1694,908,1691,823,1685"/>
<area shape="rect" title=" " alt="" coords="696,1711,808,1736"/>
<area shape="poly" title=" " alt="" coords="824,1729,909,1736,1003,1738,1088,1731,1120,1722,1142,1710,1163,1686,1182,1652,1198,1611,1213,1563,1237,1452,1253,1330,1265,1208,1272,1095,1277,941,1282,942,1277,1095,1270,1208,1259,1330,1242,1453,1218,1564,1203,1613,1186,1654,1167,1689,1145,1714,1122,1727,1089,1736,1004,1743,909,1741,823,1734"/>
<area shape="rect" title=" " alt="" coords="727,1760,777,1786"/>
<area shape="poly" title=" " alt="" coords="793,1775,878,1783,982,1787,1033,1786,1079,1781,1117,1773,1142,1759,1164,1733,1184,1697,1201,1653,1216,1602,1240,1483,1257,1354,1267,1223,1273,1104,1277,942,1282,942,1279,1104,1273,1224,1262,1354,1245,1484,1221,1603,1206,1655,1189,1700,1168,1736,1145,1763,1118,1778,1080,1787,1034,1791,982,1793,877,1788,792,1780"/>
<area shape="rect" title=" " alt="" coords="729,1809,775,1835"/>
<area shape="poly" title=" " alt="" coords="790,1832,863,1850,909,1857,958,1861,1007,1860,1056,1851,1102,1834,1142,1807,1165,1780,1186,1741,1204,1694,1219,1640,1243,1514,1260,1376,1270,1238,1275,1112,1277,942,1282,942,1280,1112,1275,1238,1265,1377,1249,1515,1224,1641,1209,1696,1191,1744,1170,1783,1145,1811,1104,1839,1058,1856,1008,1865,958,1866,908,1863,862,1855,789,1837"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a07d2074a11239986ec39b1ac492f3081" id="r_a07d2074a11239986ec39b1ac492f3081"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a07d2074a11239986ec39b1ac492f3081">InstanceManager</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>, IMetricFactory metricFactory, ICollectorRegistry collectorRegistry, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt; generalConfigurationOptions, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt; swarmConfigurationOptions, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> &gt; internalConfigurationOptions, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>)</td></tr>
<tr class="memdesc:a07d2074a11239986ec39b1ac492f3081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the InstanceManager class.  <br /></td></tr>
<tr class="separator:a07d2074a11239986ec39b1ac492f3081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f7ed3869c2397df900e5745be0befc" id="r_a72f7ed3869c2397df900e5745be0befc"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a72f7ed3869c2397df900e5745be0befc">DisposeAsync</a> ()</td></tr>
<tr class="separator:a72f7ed3869c2397df900e5745be0befc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace09fda238b33ebe9c75aa9ca8678466" id="r_ace09fda238b33ebe9c75aa9ca8678466"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html">IInstanceReference</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ace09fda238b33ebe9c75aa9ca8678466">GetInstanceReference</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> metadata)</td></tr>
<tr class="memdesc:ace09fda238b33ebe9c75aa9ca8678466"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html" title="Controller version of IInstanceCore.">IInstanceReference</a> associated with given <em>metadata</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> associated with the given <em>metadata</em>  if it is online, <code>null</code> otherwise.</dd></dl>
  <br /></td></tr>
<tr class="separator:ace09fda238b33ebe9c75aa9ca8678466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3dc0cfcb7f415f1dd8a98bfd018f90e" id="r_ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad3dc0cfcb7f415f1dd8a98bfd018f90e">MoveInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> instance, string oldPath, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> with the updated path.</td></tr>
    <tr><td class="paramname">oldPath</td><td>The old path of the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>. <em>metadata</em>  will have this set on <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318" title="The path to where the Instance is located. Can only be changed while the Instance is offline....">Api.Models.Instance.Path</a> if the operation fails.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af207019cbf73d4992ff3172c0968b163" id="r_af207019cbf73d4992ff3172c0968b163"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af207019cbf73d4992ff3172c0968b163">OfflineInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> user, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af207019cbf73d4992ff3172c0968b163"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offline an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">user</td><td>The User performing the operation.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:af207019cbf73d4992ff3172c0968b163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc85f42ec73bd6fd72085969a7c4cb5" id="r_a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">OnlineInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Online an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bcc92fca46ad404800304ce4bdd781" id="r_aa2bcc92fca46ad404800304ce4bdd781"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781">StartAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:aa2bcc92fca46ad404800304ce4bdd781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1a2f2c9fe345546fd5f8ae27fe466b" id="r_aaa1a2f2c9fe345546fd5f8ae27fe466b"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa1a2f2c9fe345546fd5f8ae27fe466b">StopAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:aaa1a2f2c9fe345546fd5f8ae27fe466b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ab3803515d1f7387db7d7bbdc2a7e0" id="r_ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html">BridgeResponse</a>?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5ab3803515d1f7387db7d7bbdc2a7e0">ProcessBridgeRequest</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html">BridgeParameters</a> parameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a set of bridge <em>parameters</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameters</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html" title="Parameters for a bridge request.">BridgeParameters</a> to handle.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html" title="A response to a bridge request.">BridgeResponse</a> for the request or <code>null</code> if the request could not be dispatched.</dd></dl>
  <br /></td></tr>
<tr class="separator:ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785c474a5d39316af850239b0c7e107b" id="r_a785c474a5d39316af850239b0c7e107b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html">IBridgeRegistration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a785c474a5d39316af850239b0c7e107b">RegisterHandler</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> bridgeHandler)</td></tr>
<tr class="memdesc:a785c474a5d39316af850239b0c7e107b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a given <em>bridgeHandler</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridgeHandler</td><td>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> to register.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A representative <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html" title="Represents a registration of an interop session.">IBridgeRegistration</a>.</dd></dl>
  <br /></td></tr>
<tr class="separator:a785c474a5d39316af850239b0c7e107b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add11622918bcaebdf64e69c29e8ac255" id="r_add11622918bcaebdf64e69c29e8ac255"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html">IInstanceCore</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#add11622918bcaebdf64e69c29e8ac255">GetInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata)</td></tr>
<tr class="memdesc:add11622918bcaebdf64e69c29e8ac255"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for a given <em>instance</em>  if it's online.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> to get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> if it is online, <code>null</code> otherwise.</dd></dl>
  <br /></td></tr>
<tr class="separator:add11622918bcaebdf64e69c29e8ac255"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a0d54ae3e93cf9a9af10411c733e77f44" id="r_a0d54ae3e93cf9a9af10411c733e77f44"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a0d54ae3e93cf9a9af10411c733e77f44">Ready</a><code> [get]</code></td></tr>
<tr class="memdesc:a0d54ae3e93cf9a9af10411c733e77f44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task that completes when the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances.">IInstanceManager</a> finishes initializing.  <br /></td></tr>
<tr class="separator:a0d54ae3e93cf9a9af10411c733e77f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager"><td colspan="2" onclick="javascript:toggleInherit('properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html">Tgstation.Server.Host.Components.IInstanceManager</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa70355ebb8437fd170e4f75e826f1ad7" id="r_aa70355ebb8437fd170e4f75e826f1ad7"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Initialize</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aa70355ebb8437fd170e4f75e826f1ad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the InstanceManager.  <br /></td></tr>
<tr class="separator:aa70355ebb8437fd170e4f75e826f1ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799f1f7613771ef7c9d9f5ff55fb8b47" id="r_a799f1f7613771ef7c9d9f5ff55fb8b47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47">PreflightChecks</a> ()</td></tr>
<tr class="memdesc:a799f1f7613771ef7c9d9f5ff55fb8b47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check we have a valid system and configuration.  <br /></td></tr>
<tr class="separator:a799f1f7613771ef7c9d9f5ff55fb8b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae64238c09aa5b3301d05109ceee5d09e" id="r_ae64238c09aa5b3301d05109ceee5d09e"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">InitializeSwarm</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ae64238c09aa5b3301d05109ceee5d09e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the connection to the TGS swarm.  <br /></td></tr>
<tr class="separator:ae64238c09aa5b3301d05109ceee5d09e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae2b48b5197337f7a311fd115951be7f6" id="r_ae2b48b5197337f7a311fd115951be7f6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a></td></tr>
<tr class="memdesc:ae2b48b5197337f7a311fd115951be7f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IInstanceFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:ae2b48b5197337f7a311fd115951be7f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59bc4b977f9b72208d553fbfa57f118e" id="r_a59bc4b977f9b72208d553fbfa57f118e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a></td></tr>
<tr class="memdesc:a59bc4b977f9b72208d553fbfa57f118e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager for the InstanceManager.  <br /></td></tr>
<tr class="separator:a59bc4b977f9b72208d553fbfa57f118e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c8e78bdae6eb6eb2ed289563c639cc" id="r_ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a></td></tr>
<tr class="memdesc:ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IDatabaseContextFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa335c25ccb65f93242424c79396a29dc" id="r_aa335c25ccb65f93242424c79396a29dc"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a></td></tr>
<tr class="memdesc:aa335c25ccb65f93242424c79396a29dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAssemblyInformationProvider for the InstanceManager.  <br /></td></tr>
<tr class="separator:aa335c25ccb65f93242424c79396a29dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cba827c550b76d41c119b62d25c4668" id="r_a4cba827c550b76d41c119b62d25c4668"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a></td></tr>
<tr class="memdesc:a4cba827c550b76d41c119b62d25c4668"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IJobService for the InstanceManager.  <br /></td></tr>
<tr class="separator:a4cba827c550b76d41c119b62d25c4668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ba10fddea5448f4c8c08f363a0e391" id="r_ac2ba10fddea5448f4c8c08f363a0e391"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a></td></tr>
<tr class="memdesc:ac2ba10fddea5448f4c8c08f363a0e391"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IServerControl for the InstanceManager.  <br /></td></tr>
<tr class="separator:ac2ba10fddea5448f4c8c08f363a0e391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a914147c0498a9b2482efe956486646fb" id="r_a914147c0498a9b2482efe956486646fb"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a></td></tr>
<tr class="memdesc:a914147c0498a9b2482efe956486646fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISystemIdentityFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:a914147c0498a9b2482efe956486646fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f992fed638980594fd5a6c45b8946b" id="r_ad6f992fed638980594fd5a6c45b8946b"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a></td></tr>
<tr class="memdesc:ad6f992fed638980594fd5a6c45b8946b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad6f992fed638980594fd5a6c45b8946b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b7e13dc94565671f962eb9fe62fd82" id="r_ad5b7e13dc94565671f962eb9fe62fd82"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a></td></tr>
<tr class="memdesc:ad5b7e13dc94565671f962eb9fe62fd82"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IServerPortProvider for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad5b7e13dc94565671f962eb9fe62fd82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7281abf42fbdf74cfbabfe9181ad301e" id="r_a7281abf42fbdf74cfbabfe9181ad301e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a></td></tr>
<tr class="memdesc:a7281abf42fbdf74cfbabfe9181ad301e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISwarmServiceController for the InstanceManager.  <br /></td></tr>
<tr class="separator:a7281abf42fbdf74cfbabfe9181ad301e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad650e598cfd489a215ab0b6dfcc13910" id="r_ad650e598cfd489a215ab0b6dfcc13910"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a></td></tr>
<tr class="memdesc:ad650e598cfd489a215ab0b6dfcc13910"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IConsole for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad650e598cfd489a215ab0b6dfcc13910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26a35317eec77d8eed96595fc85f7c4c" id="r_a26a35317eec77d8eed96595fc85f7c4c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a></td></tr>
<tr class="memdesc:a26a35317eec77d8eed96595fc85f7c4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IPlatformIdentifier for the InstanceManager.  <br /></td></tr>
<tr class="separator:a26a35317eec77d8eed96595fc85f7c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a968fedca8d4cc5ff16c77c0cbc782bda" id="r_a968fedca8d4cc5ff16c77c0cbc782bda"><td class="memItemLeft" align="right" valign="top">readonly ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a></td></tr>
<tr class="memdesc:a968fedca8d4cc5ff16c77c0cbc782bda"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for the InstanceManager.  <br /></td></tr>
<tr class="separator:a968fedca8d4cc5ff16c77c0cbc782bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d96cfaae1f2de6a931a8158b2290c1" id="r_a25d96cfaae1f2de6a931a8158b2290c1"><td class="memItemLeft" align="right" valign="top">readonly Dictionary&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer</a>&lt; <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html">IInstance</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_wrapper.html">InstanceWrapper</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a></td></tr>
<tr class="memdesc:a25d96cfaae1f2de6a931a8158b2290c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of instance <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to the respective ReferenceCountingContainer&lt;TWrapped, TReference&gt; for IInstances. Also used as a <code>lock</code> object.  <br /></td></tr>
<tr class="separator:a25d96cfaae1f2de6a931a8158b2290c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4eafee41a5201cb8f671607b53cc0bd" id="r_af4eafee41a5201cb8f671607b53cc0bd"><td class="memItemLeft" align="right" valign="top">readonly Dictionary&lt; string, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a></td></tr>
<tr class="memdesc:af4eafee41a5201cb8f671607b53cc0bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5" title="Used to identify and authenticate the DreamDaemon instance.">DMApiParameters.AccessIdentifier</a>s to their respective IBridgeHandlers.  <br /></td></tr>
<tr class="separator:af4eafee41a5201cb8f671607b53cc0bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf66550ead757ef3bc6915c9b15d06b" id="r_abaf66550ead757ef3bc6915c9b15d06b"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a></td></tr>
<tr class="memdesc:abaf66550ead757ef3bc6915c9b15d06b"><td class="mdescLeft">&#160;</td><td class="mdescRight">SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineInstance(Models.Instance, User, CancellationToken).  <br /></td></tr>
<tr class="separator:abaf66550ead757ef3bc6915c9b15d06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2d14e2052d1ad81104ec0e5afa218e" id="r_aaa2d14e2052d1ad81104ec0e5afa218e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa2d14e2052d1ad81104ec0e5afa218e">generalConfiguration</a></td></tr>
<tr class="memdesc:aaa2d14e2052d1ad81104ec0e5afa218e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The GeneralConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:aaa2d14e2052d1ad81104ec0e5afa218e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eaeb3190a96e2d25bdb58dedb00e07f" id="r_a9eaeb3190a96e2d25bdb58dedb00e07f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a9eaeb3190a96e2d25bdb58dedb00e07f">swarmConfiguration</a></td></tr>
<tr class="memdesc:a9eaeb3190a96e2d25bdb58dedb00e07f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SwarmConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:a9eaeb3190a96e2d25bdb58dedb00e07f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f795602aaedbd15ead5c52c3592483d" id="r_a4f795602aaedbd15ead5c52c3592483d"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4f795602aaedbd15ead5c52c3592483d">internalConfiguration</a></td></tr>
<tr class="memdesc:a4f795602aaedbd15ead5c52c3592483d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The InternalConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:a4f795602aaedbd15ead5c52c3592483d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16905d984154ab9356b3477dc257f435" id="r_a16905d984154ab9356b3477dc257f435"><td class="memItemLeft" align="right" valign="top">readonly TaskCompletionSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a></td></tr>
<tr class="memdesc:a16905d984154ab9356b3477dc257f435"><td class="mdescLeft">&#160;</td><td class="mdescRight">The TaskCompletionSource for Ready.  <br /></td></tr>
<tr class="separator:a16905d984154ab9356b3477dc257f435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fbe64a7ff3a9fc273ecc05f613ed7c" id="r_a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="memItemLeft" align="right" valign="top">readonly CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a></td></tr>
<tr class="memdesc:a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource for Initialize(CancellationToken).  <br /></td></tr>
<tr class="separator:a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb76c23570af139eb50c9091c462ecf9" id="r_aeb76c23570af139eb50c9091c462ecf9"><td class="memItemLeft" align="right" valign="top">readonly CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a></td></tr>
<tr class="memdesc:aeb76c23570af139eb50c9091c462ecf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource linked with the token given to StopAsync(CancellationToken).  <br /></td></tr>
<tr class="separator:aeb76c23570af139eb50c9091c462ecf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5740c90c4a6ff7cf2b2e84e0a07e5812" id="r_a5740c90c4a6ff7cf2b2e84e0a07e5812"><td class="memItemLeft" align="right" valign="top">readonly Gauge&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">onlineInstances</a></td></tr>
<tr class="memdesc:a5740c90c4a6ff7cf2b2e84e0a07e5812"><td class="mdescLeft">&#160;</td><td class="mdescRight">The count of online instances.  <br /></td></tr>
<tr class="separator:a5740c90c4a6ff7cf2b2e84e0a07e5812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66bf7714d6593c0793e5612b60335b8" id="r_ad66bf7714d6593c0793e5612b60335b8"><td class="memItemLeft" align="right" valign="top">readonly? string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a></td></tr>
<tr class="memdesc:ad66bf7714d6593c0793e5612b60335b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The original <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b" title="Gets or sets the IConsole window&#39;s title. Can return null if getting the console title is not support...">IConsole.Title</a> of console.  <br /></td></tr>
<tr class="separator:ad66bf7714d6593c0793e5612b60335b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da7b0a7f75cbd3bcebc0e215f9dfcef" id="r_a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="memItemLeft" align="right" valign="top">Task?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a></td></tr>
<tr class="memdesc:a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Task returned by Initialize(CancellationToken).  <br /></td></tr>
<tr class="separator:a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba869dae354db235f8518f7283a531c" id="r_a6ba869dae354db235f8518f7283a531c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a></td></tr>
<tr class="memdesc:a6ba869dae354db235f8518f7283a531c"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the InstanceManager has been DisposeAsync'd.  <br /></td></tr>
<tr class="separator:a6ba869dae354db235f8518f7283a531c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00035">35</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a07d2074a11239986ec39b1ac492f3081" name="a07d2074a11239986ec39b1ac492f3081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07d2074a11239986ec39b1ac492f3081">&#9670;&#160;</a></span>InstanceManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.InstanceManager.InstanceManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a>&#160;</td>
          <td class="paramname"><em>instanceFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>ioManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a>&#160;</td>
          <td class="paramname"><em>databaseContextFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a>&#160;</td>
          <td class="paramname"><em>assemblyInformationProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a>&#160;</td>
          <td class="paramname"><em>jobService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td>
          <td class="paramname"><em>serverControl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a>&#160;</td>
          <td class="paramname"><em>systemIdentityFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a>&#160;</td>
          <td class="paramname"><em>serverPortProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a>&#160;</td>
          <td class="paramname"><em>swarmServiceController</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a>&#160;</td>
          <td class="paramname"><em>console</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a>&#160;</td>
          <td class="paramname"><em>platformIdentifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMetricFactory&#160;</td>
          <td class="paramname"><em>metricFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ICollectorRegistry&#160;</td>
          <td class="paramname"><em>collectorRegistry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>generalConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>swarmConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>internalConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new instance of the InstanceManager class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instanceFactory</td><td>The value of instanceFactory.</td></tr>
    <tr><td class="paramname">ioManager</td><td>The value of <em>ioManager</em> .</td></tr>
    <tr><td class="paramname">databaseContextFactory</td><td>The value of <em>databaseContextFactory</em> .</td></tr>
    <tr><td class="paramname">assemblyInformationProvider</td><td>The value of assemblyInformationProvider.</td></tr>
    <tr><td class="paramname">jobService</td><td>The value of jobService.</td></tr>
    <tr><td class="paramname">serverControl</td><td>The value of serverControl.</td></tr>
    <tr><td class="paramname">systemIdentityFactory</td><td>The value of systemIdentityFactory.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The value of asyncDelayer.</td></tr>
    <tr><td class="paramname">serverPortProvider</td><td>The value of serverPortProvider.</td></tr>
    <tr><td class="paramname">swarmServiceController</td><td>The value of swarmServiceController.</td></tr>
    <tr><td class="paramname">console</td><td>The value of console.</td></tr>
    <tr><td class="paramname">platformIdentifier</td><td>The value of platformIdentifier.</td></tr>
    <tr><td class="paramname">metricFactory</td><td>The IMetricFactory used to create metrics.</td></tr>
    <tr><td class="paramname">collectorRegistry</td><td>The ICollectorRegistry to use.</td></tr>
    <tr><td class="paramname">generalConfigurationOptions</td><td>The IOptions&lt;TOptions&gt; containing the value of generalConfiguration.</td></tr>
    <tr><td class="paramname">swarmConfigurationOptions</td><td>The IOptions&lt;TOptions&gt; containing the value of swarmConfiguration.</td></tr>
    <tr><td class="paramname">internalConfigurationOptions</td><td>The IOptions&lt;TOptions&gt; containing the value of internalConfiguration.</td></tr>
    <tr><td class="paramname">logger</td><td>The value of logger.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00196">196</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  215</span>        {</div>
<div class="line"><span class="lineno">  216</span>            this.instanceFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>));</div>
<div class="line"><span class="lineno">  217</span>            this.ioManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>));</div>
<div class="line"><span class="lineno">  218</span>            this.databaseContextFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>));</div>
<div class="line"><span class="lineno">  219</span>            this.assemblyInformationProvider = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>));</div>
<div class="line"><span class="lineno">  220</span>            this.jobService = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>));</div>
<div class="line"><span class="lineno">  221</span>            this.serverControl = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>));</div>
<div class="line"><span class="lineno">  222</span>            this.systemIdentityFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>));</div>
<div class="line"><span class="lineno">  223</span>            this.asyncDelayer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>));</div>
<div class="line"><span class="lineno">  224</span>            this.serverPortProvider = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>));</div>
<div class="line"><span class="lineno">  225</span>            this.swarmServiceController = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>));</div>
<div class="line"><span class="lineno">  226</span>            this.console = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>));</div>
<div class="line"><span class="lineno">  227</span>            this.platformIdentifier = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>));</div>
<div class="line"><span class="lineno">  228</span>            ArgumentNullException.ThrowIfNull(metricFactory);</div>
<div class="line"><span class="lineno">  229</span>            ArgumentNullException.ThrowIfNull(collectorRegistry);</div>
<div class="line"><span class="lineno">  230</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa2d14e2052d1ad81104ec0e5afa218e">generalConfiguration</a> = generalConfigurationOptions?.Value ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(generalConfigurationOptions));</div>
<div class="line"><span class="lineno">  231</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a9eaeb3190a96e2d25bdb58dedb00e07f">swarmConfiguration</a> = swarmConfigurationOptions?.Value ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(swarmConfigurationOptions));</div>
<div class="line"><span class="lineno">  232</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4f795602aaedbd15ead5c52c3592483d">internalConfiguration</a> = internalConfigurationOptions?.Value ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(internalConfigurationOptions));</div>
<div class="line"><span class="lineno">  233</span>            this.logger = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>));</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b">Title</a>;</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">onlineInstances</a> = metricFactory.CreateGauge(<span class="stringliteral">&quot;tgs_online_instances&quot;</span>, <span class="stringliteral">&quot;The total number of instances online&quot;</span>);</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a> = <span class="keyword">new</span> Dictionary&lt;long, ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;&gt;();</div>
<div class="line"><span class="lineno">  240</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a> = <span class="keyword">new</span> Dictionary&lt;string, IBridgeHandler&gt;();</div>
<div class="line"><span class="lineno">  241</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a> = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  242</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  243</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  244</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>            collectorRegistry.AddBeforeCollectCallback(async cancellationToken =&gt;</div>
<div class="line"><span class="lineno">  247</span>            {</div>
<div class="line"><span class="lineno">  248</span>                <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  249</span>                    <span class="keywordflow">foreach</span> (var container <span class="keywordflow">in</span> <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Values)</div>
<div class="line"><span class="lineno">  250</span>                        container.Instance.Watchdog.RunMetricsScrape();</div>
<div class="line"><span class="lineno">  251</span>            });</div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a16905d984154ab9356b3477dc257f435"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a></div><div class="ttdeci">readonly TaskCompletionSource readyTcs</div><div class="ttdoc">The TaskCompletionSource for Ready.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00143">InstanceManager.cs:143</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a25d96cfaae1f2de6a931a8158b2290c1"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">Tgstation.Server.Host.Components.InstanceManager.instances</a></div><div class="ttdeci">readonly Dictionary&lt; long, ReferenceCountingContainer&lt; IInstance, InstanceWrapper &gt; &gt; instances</div><div class="ttdoc">Map of instance EntityId.Ids to the respective ReferenceCountingContainer&lt;TWrapped,...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00113">InstanceManager.cs:113</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a26a35317eec77d8eed96595fc85f7c4c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a></div><div class="ttdeci">readonly IPlatformIdentifier platformIdentifier</div><div class="ttdoc">The IPlatformIdentifier for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00103">InstanceManager.cs:103</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a4cba827c550b76d41c119b62d25c4668"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">Tgstation.Server.Host.Components.InstanceManager.jobService</a></div><div class="ttdeci">readonly IJobService jobService</div><div class="ttdoc">The IJobService for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00068">InstanceManager.cs:68</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a4f795602aaedbd15ead5c52c3592483d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4f795602aaedbd15ead5c52c3592483d">Tgstation.Server.Host.Components.InstanceManager.internalConfiguration</a></div><div class="ttdeci">readonly InternalConfiguration internalConfiguration</div><div class="ttdoc">The InternalConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00138">InstanceManager.cs:138</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a5740c90c4a6ff7cf2b2e84e0a07e5812"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">Tgstation.Server.Host.Components.InstanceManager.onlineInstances</a></div><div class="ttdeci">readonly Gauge onlineInstances</div><div class="ttdoc">The count of online instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00158">InstanceManager.cs:158</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a59bc4b977f9b72208d553fbfa57f118e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">Tgstation.Server.Host.Components.InstanceManager.ioManager</a></div><div class="ttdeci">readonly IIOManager ioManager</div><div class="ttdoc">The IIOManager for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00053">InstanceManager.cs:53</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a7281abf42fbdf74cfbabfe9181ad301e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a></div><div class="ttdeci">readonly ISwarmServiceController swarmServiceController</div><div class="ttdoc">The ISwarmServiceController for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00093">InstanceManager.cs:93</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a76fbe64a7ff3a9fc273ecc05f613ed7c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a></div><div class="ttdeci">readonly CancellationTokenSource startupCancellationTokenSource</div><div class="ttdoc">The CancellationTokenSource for Initialize(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00148">InstanceManager.cs:148</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a914147c0498a9b2482efe956486646fb"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a></div><div class="ttdeci">readonly ISystemIdentityFactory systemIdentityFactory</div><div class="ttdoc">The ISystemIdentityFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00078">InstanceManager.cs:78</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a968fedca8d4cc5ff16c77c0cbc782bda"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">Tgstation.Server.Host.Components.InstanceManager.logger</a></div><div class="ttdeci">readonly ILogger&lt; InstanceManager &gt; logger</div><div class="ttdoc">The ILogger for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00108">InstanceManager.cs:108</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a9eaeb3190a96e2d25bdb58dedb00e07f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a9eaeb3190a96e2d25bdb58dedb00e07f">Tgstation.Server.Host.Components.InstanceManager.swarmConfiguration</a></div><div class="ttdeci">readonly SwarmConfiguration swarmConfiguration</div><div class="ttdoc">The SwarmConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00133">InstanceManager.cs:133</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aa335c25ccb65f93242424c79396a29dc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a></div><div class="ttdeci">readonly IAssemblyInformationProvider assemblyInformationProvider</div><div class="ttdoc">The IAssemblyInformationProvider for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00063">InstanceManager.cs:63</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aaa2d14e2052d1ad81104ec0e5afa218e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa2d14e2052d1ad81104ec0e5afa218e">Tgstation.Server.Host.Components.InstanceManager.generalConfiguration</a></div><div class="ttdeci">readonly GeneralConfiguration generalConfiguration</div><div class="ttdoc">The GeneralConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00128">InstanceManager.cs:128</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ab5c8e78bdae6eb6eb2ed289563c639cc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a></div><div class="ttdeci">readonly IDatabaseContextFactory databaseContextFactory</div><div class="ttdoc">The IDatabaseContextFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00058">InstanceManager.cs:58</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_abaf66550ead757ef3bc6915c9b15d06b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim instanceStateChangeSemaphore</div><div class="ttdoc">SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineIn...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00123">InstanceManager.cs:123</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ac2ba10fddea5448f4c8c08f363a0e391"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">Tgstation.Server.Host.Components.InstanceManager.serverControl</a></div><div class="ttdeci">readonly IServerControl serverControl</div><div class="ttdoc">The IServerControl for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00073">InstanceManager.cs:73</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad5b7e13dc94565671f962eb9fe62fd82"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a></div><div class="ttdeci">readonly IServerPortProvider serverPortProvider</div><div class="ttdoc">The IServerPortProvider for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00088">InstanceManager.cs:88</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad650e598cfd489a215ab0b6dfcc13910"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">Tgstation.Server.Host.Components.InstanceManager.console</a></div><div class="ttdeci">readonly IConsole console</div><div class="ttdoc">The IConsole for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00098">InstanceManager.cs:98</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad66bf7714d6593c0793e5612b60335b8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a></div><div class="ttdeci">readonly? string originalConsoleTitle</div><div class="ttdoc">The original IConsole.Title of console.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00163">InstanceManager.cs:163</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad6f992fed638980594fd5a6c45b8946b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a></div><div class="ttdeci">readonly IAsyncDelayer asyncDelayer</div><div class="ttdoc">The IAsyncDelayer for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00083">InstanceManager.cs:83</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ae2b48b5197337f7a311fd115951be7f6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a></div><div class="ttdeci">readonly IInstanceFactory instanceFactory</div><div class="ttdoc">The IInstanceFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00048">InstanceManager.cs:48</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aeb76c23570af139eb50c9091c462ecf9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a></div><div class="ttdeci">readonly CancellationTokenSource shutdownCancellationTokenSource</div><div class="ttdoc">The CancellationTokenSource linked with the token given to StopAsync(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00153">InstanceManager.cs:153</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_af4eafee41a5201cb8f671607b53cc0bd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a></div><div class="ttdeci">readonly Dictionary&lt; string, IBridgeHandler &gt; bridgeHandlers</div><div class="ttdoc">Map of DMApiParameters.AccessIdentifiers to their respective IBridgeHandlers.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00118">InstanceManager.cs:118</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">Tgstation.Server.Host.Utils.SemaphoreSlimContext</a></div><div class="ttdoc">Async lock context helper.</div><div class="ttdef"><b>Definition</b> <a href="_semaphore_slim_context_8cs_source.html#l00012">SemaphoreSlimContext.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html_abeb1f086e2752f6f9a4d3d175a4392af"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock</a></div><div class="ttdeci">static async ValueTask&lt; SemaphoreSlimContext &gt; Lock(SemaphoreSlim semaphore, CancellationToken cancellationToken, ILogger? logger=null)</div><div class="ttdoc">Asyncronously locks a semaphore .</div><div class="ttdef"><b>Definition</b> <a href="_semaphore_slim_context_8cs_source.html#l00021">SemaphoreSlimContext.cs:21</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console_html_a555a7fe50697f3b18c5d9081f5f58f4b"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b">Tgstation.Server.Host.IO.IConsole.Title</a></div><div class="ttdeci">string? Title</div><div class="ttdoc">Gets or sets the IConsole window's title. Can return null if getting the console title is not support...</div><div class="ttdef"><b>Definition</b> <a href="_i_console_8cs_source.html#l00014">IConsole.cs:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00063">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00083">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="_instance_manager_8cs_source.html#l00118">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, <a class="el" href="_instance_manager_8cs_source.html#l00098">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00058">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.generalConfiguration</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00138">Tgstation.Server.Host.Components.InstanceManager.internalConfiguration</a>, <a class="el" href="_instance_manager_8cs_source.html#l00053">Tgstation.Server.Host.Components.InstanceManager.ioManager</a>, <a class="el" href="_instance_manager_8cs_source.html#l00068">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00021">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00158">Tgstation.Server.Host.Components.InstanceManager.onlineInstances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00163">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a>, <a class="el" href="_instance_manager_8cs_source.html#l00103">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00143">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a>, <a class="el" href="_instance_manager_8cs_source.html#l00073">Tgstation.Server.Host.Components.InstanceManager.serverControl</a>, <a class="el" href="_instance_manager_8cs_source.html#l00088">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00153">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00148">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00133">Tgstation.Server.Host.Components.InstanceManager.swarmConfiguration</a>, <a class="el" href="_instance_manager_8cs_source.html#l00093">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>, <a class="el" href="_instance_manager_8cs_source.html#l00078">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a>, and <a class="el" href="_i_console_8cs_source.html#l00014">Tgstation.Server.Host.IO.IConsole.Title</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a07d2074a11239986ec39b1ac492f3081_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a07d2074a11239986ec39b1ac492f3081_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a07d2074a11239986ec39b1ac492f3081_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a07d2074a11239986ec39b1ac492f3081_cgraph">
<area shape="rect" title="Initializes a new instance of the InstanceManager class." alt="" coords="5,5,232,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="280,5,469,46"/>
<area shape="poly" title=" " alt="" coords="232,23,264,23,264,28,232,28"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a72f7ed3869c2397df900e5745be0befc" name="a72f7ed3869c2397df900e5745be0befc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72f7ed3869c2397df900e5745be0befc">&#9670;&#160;</a></span>DisposeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.DisposeAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00255">255</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>        {</div>
<div class="line"><span class="lineno">  257</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  258</span>            {</div>
<div class="line"><span class="lineno">  259</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a>)</div>
<div class="line"><span class="lineno">  260</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  261</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  262</span>            }</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>            <span class="keywordflow">foreach</span> (var instanceKvp <span class="keywordflow">in</span> <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  265</span>                await instanceKvp.Value.Instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  268</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Dispose();</div>
<div class="line"><span class="lineno">  269</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Dispose();</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Server shutdown&quot;</span>);</div>
<div class="line"><span class="lineno">  272</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a6ba869dae354db235f8518f7283a531c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">Tgstation.Server.Host.Components.InstanceManager.disposed</a></div><div class="ttdeci">bool disposed</div><div class="ttdoc">If the InstanceManager has been DisposeAsync'd.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00173">InstanceManager.cs:173</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00173">Tgstation.Server.Host.Components.InstanceManager.disposed</a>, <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00153">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00148">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>.</p>

</div>
</div>
<a id="add11622918bcaebdf64e69c29e8ac255" name="add11622918bcaebdf64e69c29e8ac255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add11622918bcaebdf64e69c29e8ac255">&#9670;&#160;</a></span>GetInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html">IInstanceCore</a>? Tgstation.Server.Host.Components.InstanceManager.GetInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for a given <em>instance</em>  if it's online.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> to get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> if it is online, <code>null</code> otherwise.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html#a1d37bed2b441cbf13a1db7edfa408270">Tgstation.Server.Host.Components.IInstanceCoreProvider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00610">610</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  611</span>        {</div>
<div class="line"><span class="lineno">  612</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  613</span>            {</div>
<div class="line"><span class="lineno">  614</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(metadata.Require(x =&gt; x.Id), out var container);</div>
<div class="line"><span class="lineno">  615</span>                <span class="keywordflow">return</span> container?.Instance;</div>
<div class="line"><span class="lineno">  616</span>            }</div>
<div class="line"><span class="lineno">  617</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.instances</a>.</p>

</div>
</div>
<a id="ace09fda238b33ebe9c75aa9ca8678466" name="ace09fda238b33ebe9c75aa9ca8678466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace09fda238b33ebe9c75aa9ca8678466">&#9670;&#160;</a></span>GetInstanceReference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html">IInstanceReference</a>? Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api::Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html" title="Controller version of IInstanceCore.">IInstanceReference</a> associated with given <em>metadata</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> associated with the given <em>metadata</em>  if it is online, <code>null</code> otherwise.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#ac2e926ff84623c496393880b5a8ada61">Tgstation.Server.Host.Components.IInstanceManager</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00275">275</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  276</span>        {</div>
<div class="line"><span class="lineno">  277</span>            ArgumentNullException.ThrowIfNull(metadata);</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  280</span>            {</div>
<div class="line"><span class="lineno">  281</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(metadata.Require(x =&gt; x.Id), out var instance))</div>
<div class="line"><span class="lineno">  282</span>                    <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>                <span class="keywordflow">return</span> instance.AddReference();</div>
<div class="line"><span class="lineno">  285</span>            }</div>
<div class="line"><span class="lineno">  286</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.instances</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00289">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ace09fda238b33ebe9c75aa9ca8678466_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ace09fda238b33ebe9c75aa9ca8678466_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ace09fda238b33ebe9c75aa9ca8678466_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ace09fda238b33ebe9c75aa9ca8678466_icgraph">
<area shape="rect" title="Get the IInstanceReference associated with given metadata .The IInstance associated with the given me..." alt="" coords="280,5,534,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad3dc0cfcb7f415f1dd8a98bfd018f90e" title="Move an IInstance.A ValueTask representing the running operation." alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="aa70355ebb8437fd170e4f75e826f1ad7" name="aa70355ebb8437fd170e4f75e826f1ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa70355ebb8437fd170e4f75e826f1ad7">&#9670;&#160;</a></span>Initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.InstanceManager.Initialize </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the InstanceManager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00624">624</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  625</span>        {</div>
<div class="line"><span class="lineno">  626</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  627</span>            {</div>
<div class="line"><span class="lineno">  628</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;{versionString}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">VersionString</a>);</div>
<div class="line"><span class="lineno">  629</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">SetTitle</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">VersionString</a>);</div>
<div class="line"><span class="lineno">  630</span> </div>
<div class="line"><span class="lineno">  631</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47">PreflightChecks</a>();</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>                <span class="comment">// To let the web server startup immediately before we do any intense work</span></div>
<div class="line"><span class="lineno">  634</span>                await Task.Yield();</div>
<div class="line"><span class="lineno">  635</span> </div>
<div class="line"><span class="lineno">  636</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">InitializeSwarm</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  637</span> </div>
<div class="line"><span class="lineno">  638</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">List</a>&lt;Models.Instance&gt;? dbInstances = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  639</span> </div>
<div class="line"><span class="lineno">  640</span>                async ValueTask EnumerateInstances(<a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext)</div>
<div class="line"><span class="lineno">  641</span>                    =&gt; dbInstances = await databaseContext</div>
<div class="line"><span class="lineno">  642</span>                        .Instances</div>
<div class="line"><span class="lineno">  643</span>                        .AsQueryable()</div>
<div class="line"><span class="lineno">  644</span>                        .Where(x =&gt; x.Online!.Value &amp;&amp; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a9eaeb3190a96e2d25bdb58dedb00e07f">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>)</div>
<div class="line"><span class="lineno">  645</span>                        .Include(x =&gt; x.RepositorySettings)</div>
<div class="line"><span class="lineno">  646</span>                        .Include(x =&gt; x.ChatSettings)</div>
<div class="line"><span class="lineno">  647</span>                            .ThenInclude(x =&gt; x.Channels)</div>
<div class="line"><span class="lineno">  648</span>                        .Include(x =&gt; x.DreamDaemonSettings)</div>
<div class="line"><span class="lineno">  649</span>                        .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>                var instanceEnumeration = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(EnumerateInstances);</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>                var factoryStartup = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  654</span>                var jobManagerStartup = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>                await Task.WhenAll(instanceEnumeration.AsTask(), factoryStartup, jobManagerStartup);</div>
<div class="line"><span class="lineno">  657</span> </div>
<div class="line"><span class="lineno">  658</span>                var instanceOnliningTasks = dbInstances!.Select(</div>
<div class="line"><span class="lineno">  659</span>                    async metadata =&gt;</div>
<div class="line"><span class="lineno">  660</span>                    {</div>
<div class="line"><span class="lineno">  661</span>                        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  662</span>                        {</div>
<div class="line"><span class="lineno">  663</span>                            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">OnlineInstance</a>(metadata, cancellationToken);</div>
<div class="line"><span class="lineno">  664</span>                        }</div>
<div class="line"><span class="lineno">  665</span>                        <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  666</span>                        {</div>
<div class="line"><span class="lineno">  667</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(ex, <span class="stringliteral">&quot;Failed to online instance {instanceId}!&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  668</span>                        }</div>
<div class="line"><span class="lineno">  669</span>                    });</div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>                await Task.WhenAll(instanceOnliningTasks);</div>
<div class="line"><span class="lineno">  672</span> </div>
<div class="line"><span class="lineno">  673</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Server ready!&quot;</span>);</div>
<div class="line"><span class="lineno">  674</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a>.SetResult();</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>                <span class="comment">// this needs to happen after the HTTP API opens with readyTcs otherwise it can race and cause failed bridge requests with 503&#39;s</span></div>
<div class="line"><span class="lineno">  677</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Activate</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  678</span>            }</div>
<div class="line"><span class="lineno">  679</span>            <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  680</span>            {</div>
<div class="line"><span class="lineno">  681</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(ex, <span class="stringliteral">&quot;Cancelled instance manager initialization!&quot;</span>);</div>
<div class="line"><span class="lineno">  682</span>            }</div>
<div class="line"><span class="lineno">  683</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e)</div>
<div class="line"><span class="lineno">  684</span>            {</div>
<div class="line"><span class="lineno">  685</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(e, <span class="stringliteral">&quot;Instance manager startup error!&quot;</span>);</div>
<div class="line"><span class="lineno">  686</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  687</span>                {</div>
<div class="line"><span class="lineno">  688</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Die</a>(e);</div>
<div class="line"><span class="lineno">  689</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  690</span>                }</div>
<div class="line"><span class="lineno">  691</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e2)</div>
<div class="line"><span class="lineno">  692</span>                {</div>
<div class="line"><span class="lineno">  693</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(e2, <span class="stringliteral">&quot;Failed to kill server!&quot;</span>);</div>
<div class="line"><span class="lineno">  694</span>                }</div>
<div class="line"><span class="lineno">  695</span>            }</div>
<div class="line"><span class="lineno">  696</span>        }</div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server_html_af98e4f47f1aa632ead02ed80695ce836"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a></div><div class="ttdeci">string? Identifier</div><div class="ttdoc">The server's identifier.</div><div class="ttdef"><b>Definition</b> <a href="_swarm_server_8cs_source.html#l00027">SwarmServer.cs:27</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a4dc85f42ec73bd6fd72085969a7c4cb5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance</a></div><div class="ttdeci">async ValueTask OnlineInstance(Models.Instance metadata, CancellationToken cancellationToken)</div><div class="ttdoc">Online an IInstance.A ValueTask representing the running operation.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00427">InstanceManager.cs:427</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a799f1f7613771ef7c9d9f5ff55fb8b47"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks</a></div><div class="ttdeci">void PreflightChecks()</div><div class="ttdoc">Check we have a valid system and configuration.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00701">InstanceManager.cs:701</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ae64238c09aa5b3301d05109ceee5d09e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm</a></div><div class="ttdeci">async ValueTask InitializeSwarm(CancellationToken cancellationToken)</div><div class="ttdoc">Initializes the connection to the TGS swarm.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00728">InstanceManager.cs:728</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control_html_adb01d302ec13ad32897ae83be130afd0"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Tgstation.Server.Host.Core.IServerControl.Die</a></div><div class="ttdeci">ValueTask Die(Exception? exception)</div><div class="ttdoc">Kill the server with a fatal exception.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory_html_a1da664d7237dbec5a6cb9ce04b79ccc1"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext</a></div><div class="ttdeci">ValueTask UseContext(Func&lt; IDatabaseContext, ValueTask &gt; operation)</div><div class="ttdoc">Run an operation  in the scope of an IDatabaseContext.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">Tgstation.Server.Host.Database.IDatabaseContext</a></div><div class="ttdoc">Represents the database.</div><div class="ttdef"><b>Definition</b> <a href="_i_database_context_8cs_source.html#l00016">IDatabaseContext.cs:17</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console_html_abcec01af471cee5fce210b9fbcb2fa74"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle</a></div><div class="ttdeci">void SetTitle(string newTitle)</div><div class="ttdoc">Sets a newTitle  console window.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service_html_a23de62961f3d9eb3db05d4db8c409bac"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Tgstation.Server.Host.Jobs.IJobService.Activate</a></div><div class="ttdeci">void Activate(IInstanceCoreProvider instanceCoreProvider)</div><div class="ttdoc">Activate the IJobManager.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider_html_abd6db0f6e1ea9273baeacaa66ae81fa3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">Tgstation.Server.Host.System.IAssemblyInformationProvider.VersionString</a></div><div class="ttdeci">string VersionString</div><div class="ttdoc">A more verbose version of Version.</div><div class="ttdef"><b>Definition</b> <a href="_i_assembly_information_provider_8cs_source.html#l00030">IAssemblyInformationProvider.cs:30</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.ConfigurationRights.List</a></div><div class="ttdeci">@ List</div><div class="ttdoc">User may list files if the Models.Instance allows it.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Tgstation.Server.Host.Jobs.IJobService.Activate()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00063">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00098">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00058">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Tgstation.Server.Host.Core.IServerControl.Die()</a>, <a class="el" href="_swarm_server_8cs_source.html#l00027">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00728">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_i_database_context_8cs_source.html#l00026">Tgstation.Server.Host.Database.IDatabaseContext.Instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00068">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00427">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00701">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00143">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a>, <a class="el" href="_instance_manager_8cs_source.html#l00073">Tgstation.Server.Host.Components.InstanceManager.serverControl</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00133">Tgstation.Server.Host.Components.InstanceManager.swarmConfiguration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext()</a>, and <a class="el" href="_i_assembly_information_provider_8cs_source.html#l00030">Tgstation.Server.Host.System.IAssemblyInformationProvider.VersionString</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00479">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph">
<area shape="rect" title="Initializes the InstanceManager." alt="" coords="5,201,232,242"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac" title="Activate the IJobManager." alt="" coords="308,5,490,46"/>
<area shape="poly" title=" " alt="" coords="132,199,191,129,232,90,278,57,293,49,295,54,281,61,235,94,195,133,137,203"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0" title="Kill the server with a fatal exception." alt="" coords="309,71,489,111"/>
<area shape="poly" title=" " alt="" coords="147,199,206,160,279,122,298,114,300,119,281,127,209,165,150,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e" title="Initializes the connection to the TGS swarm." alt="" coords="286,136,512,177"/>
<area shape="poly" title=" " alt="" coords="208,198,293,178,294,183,209,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="286,201,512,242"/>
<area shape="poly" title=" " alt="" coords="232,219,270,219,270,224,232,224"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47" title="Check we have a valid system and configuration." alt="" coords="286,267,512,307"/>
<area shape="poly" title=" " alt="" coords="209,240,294,260,293,265,208,245"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="315,332,483,373"/>
<area shape="poly" title=" " alt="" coords="150,240,209,279,281,317,301,325,299,330,279,321,206,283,147,245"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="280,397,518,438"/>
<area shape="poly" title=" " alt="" coords="137,241,195,310,235,349,281,382,293,388,290,393,278,387,232,353,191,314,132,244"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce" title="Create a Task that completes after a given timeSpan ." alt="" coords="604,5,784,46"/>
<area shape="poly" title=" " alt="" coords="494,133,516,121,532,106,540,90,548,73,564,57,588,44,591,49,568,61,552,76,544,92,536,109,520,125,497,138"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="586,71,801,111"/>
<area shape="poly" title=" " alt="" coords="493,133,583,113,585,118,494,138"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="581,136,807,177"/>
<area shape="poly" title=" " alt="" coords="493,198,583,178,585,183,494,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="599,201,788,242"/>
<area shape="poly" title=" " alt="" coords="512,219,583,219,583,224,512,224"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="586,267,802,307"/>
<area shape="poly" title=" " alt="" coords="512,284,570,284,570,290,512,290"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a6b72da3c30d5bc5ad7bbad3d5a95970e" title="Validates the current ConfigVersion&#39;s compatibility and provides migration instructions." alt="" coords="566,332,821,373"/>
<area shape="poly" title=" " alt="" coords="494,305,585,325,583,331,493,311"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="584,397,804,438"/>
<area shape="poly" title=" " alt="" coords="497,306,520,318,536,334,544,351,552,367,568,382,577,388,574,392,564,386,548,370,540,354,532,338,516,322,494,310"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="869,255,1109,311"/>
<area shape="poly" title=" " alt="" coords="802,283,854,282,854,287,802,288"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a661fd448a209ac58937b887023156ac7" title="Check if a given path &#160;is at the root level of the filesystem." alt="" coords="903,335,1075,375"/>
<area shape="poly" title=" " alt="" coords="822,351,888,351,888,357,822,356"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph">
<area shape="rect" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ae64238c09aa5b3301d05109ceee5d09e" name="ae64238c09aa5b3301d05109ceee5d09e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae64238c09aa5b3301d05109ceee5d09e">&#9670;&#160;</a></span>InitializeSwarm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the connection to the TGS swarm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00728">728</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  729</span>        {</div>
<div class="line"><span class="lineno">  730</span>            <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a> registrationResult;</div>
<div class="line"><span class="lineno">  731</span>            <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  732</span>            {</div>
<div class="line"><span class="lineno">  733</span>                registrationResult = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Initialize</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  734</span> </div>
<div class="line"><span class="lineno">  735</span>                <span class="keywordflow">if</span> (registrationResult == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Unauthorized)</div>
<div class="line"><span class="lineno">  736</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Swarm private key does not match the swarm controller&#39;s!&quot;</span>);</div>
<div class="line"><span class="lineno">  737</span> </div>
<div class="line"><span class="lineno">  738</span>                <span class="keywordflow">if</span> (registrationResult == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.VersionMismatch)</div>
<div class="line"><span class="lineno">  739</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Swarm controller&#39;s TGS version does not match our own!&quot;</span>);</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>                <span class="keywordflow">if</span> (registrationResult != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Success)</div>
<div class="line"><span class="lineno">  742</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Delay</a>(TimeSpan.FromSeconds(5), cancellationToken);</div>
<div class="line"><span class="lineno">  743</span>            }</div>
<div class="line"><span class="lineno">  744</span>            <span class="keywordflow">while</span> (registrationResult != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Success &amp;&amp; !cancellationToken.IsCancellationRequested);</div>
<div class="line"><span class="lineno">  745</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller_html_ad07d54ac504afa080dab8b4e37115439"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Tgstation.Server.Host.Swarm.ISwarmServiceController.Initialize</a></div><div class="ttdeci">ValueTask&lt; SwarmRegistrationResult &gt; Initialize(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to register with the swarm controller if not one, sets up the database otherwise.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer_html_a588b00b42267c8d23088bde28d3f7fce"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay</a></div><div class="ttdeci">ValueTask Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan .</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_swarm_html_acfc07eda2ac8eff75a6eef3f90bdf3e0"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">Tgstation.Server.Host.Swarm.SwarmRegistrationResult</a></div><div class="ttdeci">SwarmRegistrationResult</div><div class="ttdoc">Result of attempting to register with a swarm controller.</div><div class="ttdef"><b>Definition</b> <a href="_swarm_registration_result_8cs_source.html#l00006">SwarmRegistrationResult.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00083">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Tgstation.Server.Host.Swarm.ISwarmServiceController.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00093">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph">
<area shape="rect" title="Initializes the connection to the TGS swarm." alt="" coords="5,39,232,79"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce" title="Create a Task that completes after a given timeSpan ." alt="" coords="297,5,478,46"/>
<area shape="poly" title=" " alt="" coords="232,42,282,36,282,41,233,48"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="280,71,495,111"/>
<area shape="poly" title=" " alt="" coords="233,70,265,74,264,79,232,75"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph">
<area shape="rect" title="Initializes the connection to the TGS swarm." alt="" coords="554,5,780,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="538,28,507,28,507,23,538,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ad3dc0cfcb7f415f1dd8a98bfd018f90e" name="ad3dc0cfcb7f415f1dd8a98bfd018f90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3dc0cfcb7f415f1dd8a98bfd018f90e">&#9670;&#160;</a></span>MoveInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.MoveInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>oldPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> with the updated path.</td></tr>
    <tr><td class="paramname">oldPath</td><td>The old path of the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>. <em>metadata</em>  will have this set on <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318" title="The path to where the Instance is located. Can only be changed while the Instance is offline....">Api.Models.Instance.Path</a> if the operation fails.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a8aaa4081d257b5fb39bb09ffd07383ff">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00289">289</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span>        {</div>
<div class="line"><span class="lineno">  291</span>            ArgumentNullException.ThrowIfNull(oldPath);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>            <span class="keyword">using </span>var lockContext = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  294</span>            <span class="keyword">using </span>var instanceReferenceCheck = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ace09fda238b33ebe9c75aa9ca8678466">GetInstanceReference</a>(instance);</div>
<div class="line"><span class="lineno">  295</span>            <span class="keywordflow">if</span> (instanceReferenceCheck != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  296</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot move an online instance!&quot;</span>);</div>
<div class="line"><span class="lineno">  297</span>            var newPath = instance.Path!;</div>
<div class="line"><span class="lineno">  298</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  299</span>            {</div>
<div class="line"><span class="lineno">  300</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">MoveDirectory</a>(oldPath, newPath, cancellationToken);</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>                <span class="comment">// Delete the Game directory to clear out broken symlinks</span></div>
<div class="line"><span class="lineno">  303</span>                var instanceGameIOManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">CreateGameIOManager</a>(instance);</div>
<div class="line"><span class="lineno">  304</span>                await instanceGameIOManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">DeleteDirectory</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html">DefaultIOManager</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html#a984a32ee93a073036f63d543ad9a6cdd">CurrentDirectory</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  305</span>            }</div>
<div class="line"><span class="lineno">  306</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  307</span>            {</div>
<div class="line"><span class="lineno">  308</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(</div>
<div class="line"><span class="lineno">  309</span>                    ex,</div>
<div class="line"><span class="lineno">  310</span>                    <span class="stringliteral">&quot;Error moving instance {instanceId}!&quot;</span>,</div>
<div class="line"><span class="lineno">  311</span>                    instance.Id);</div>
<div class="line"><span class="lineno">  312</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  313</span>                {</div>
<div class="line"><span class="lineno">  314</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Reverting instance {instanceId}&#39;s path to {oldPath} in the DB...&quot;</span>, instance.Id, oldPath);</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>                    <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  317</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">UseContextTaskReturn</a>(db =&gt;</div>
<div class="line"><span class="lineno">  318</span>                    {</div>
<div class="line"><span class="lineno">  319</span>                        var targetInstance = <span class="keyword">new</span> Models.Instance</div>
<div class="line"><span class="lineno">  320</span>                        {</div>
<div class="line"><span class="lineno">  321</span>                            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Id</a> = instance.Id,</div>
<div class="line"><span class="lineno">  322</span>                        };</div>
<div class="line"><span class="lineno">  323</span>                        db.Instances.Attach(targetInstance);</div>
<div class="line"><span class="lineno">  324</span>                        targetInstance.Path = oldPath;</div>
<div class="line"><span class="lineno">  325</span>                        <span class="keywordflow">return</span> db.Save(CancellationToken.None);</div>
<div class="line"><span class="lineno">  326</span>                    });</div>
<div class="line"><span class="lineno">  327</span>                }</div>
<div class="line"><span class="lineno">  328</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> innerEx)</div>
<div class="line"><span class="lineno">  329</span>                {</div>
<div class="line"><span class="lineno">  330</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(</div>
<div class="line"><span class="lineno">  331</span>                        innerEx,</div>
<div class="line"><span class="lineno">  332</span>                        <span class="stringliteral">&quot;Error reverting database after failing to move instance {instanceId}! Attempting to detach...&quot;</span>,</div>
<div class="line"><span class="lineno">  333</span>                        instance.Id);</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  336</span>                    {</div>
<div class="line"><span class="lineno">  337</span>                        <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  338</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">WriteAllBytes</a>(</div>
<div class="line"><span class="lineno">  339</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(oldPath, <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">InstanceController</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">InstanceAttachFileName</a>),</div>
<div class="line"><span class="lineno">  340</span>                            Array.Empty&lt;<span class="keywordtype">byte</span>&gt;(),</div>
<div class="line"><span class="lineno">  341</span>                            CancellationToken.None);</div>
<div class="line"><span class="lineno">  342</span>                    }</div>
<div class="line"><span class="lineno">  343</span>                    <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> tripleEx)</div>
<div class="line"><span class="lineno">  344</span>                    {</div>
<div class="line"><span class="lineno">  345</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(</div>
<div class="line"><span class="lineno">  346</span>                            tripleEx,</div>
<div class="line"><span class="lineno">  347</span>                            <span class="stringliteral">&quot;Okay, what gamma radiation are you under? Failed to write instance attach file!&quot;</span>);</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(tripleEx, innerEx, ex);</div>
<div class="line"><span class="lineno">  350</span>                    }</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(ex, innerEx);</div>
<div class="line"><span class="lineno">  353</span>                }</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  356</span>            }</div>
<div class="line"><span class="lineno">  357</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ace09fda238b33ebe9c75aa9ca8678466"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ace09fda238b33ebe9c75aa9ca8678466">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference</a></div><div class="ttdeci">IInstanceReference? GetInstanceReference(Api.Models.Instance metadata)</div><div class="ttdoc">Get the IInstanceReference associated with given metadata .The IInstance associated with the given me...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00275">InstanceManager.cs:275</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">Tgstation.Server.Host.Controllers.InstanceController</a></div><div class="ttdoc">ApiController for managing Components.Instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_controller_8cs_source.html#l00043">InstanceController.cs:44</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_aa40d55750e2193d714eb1470505c47ee"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a></div><div class="ttdeci">const string InstanceAttachFileName</div><div class="ttdoc">File name to allow attaching instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_controller_8cs_source.html#l00048">InstanceController.cs:48</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html">Tgstation.Server.Host.IO.DefaultIOManager</a></div><div class="ttdoc">IIOManager that resolves paths to Environment.CurrentDirectory.</div><div class="ttdef"><b>Definition</b> <a href="_default_i_o_manager_8cs_source.html#l00017">DefaultIOManager.cs:18</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager_html_a984a32ee93a073036f63d543ad9a6cdd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html#a984a32ee93a073036f63d543ad9a6cdd">Tgstation.Server.Host.IO.DefaultIOManager.CurrentDirectory</a></div><div class="ttdeci">const string CurrentDirectory</div><div class="ttdoc">Path to the current working directory for the IIOManager.</div><div class="ttdef"><b>Definition</b> <a href="_default_i_o_manager_8cs_source.html#l00022">DefaultIOManager.cs:22</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory_html_a88417ce87f3416974c7b7d7ef4ed5a58"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">Tgstation.Server.Host.Components.IInstanceFactory.CreateGameIOManager</a></div><div class="ttdeci">IIOManager CreateGameIOManager(Models.Instance metadata)</div><div class="ttdoc">Create an IIOManager that resolves to the &quot;Game&quot; directory of the Models.Instance defined by metadata...</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory_html_a0804dcd2b607f4e8c5b46c8c05f04926"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContextTaskReturn</a></div><div class="ttdeci">ValueTask UseContextTaskReturn(Func&lt; IDatabaseContext, Task &gt; operation)</div><div class="ttdoc">Run an operation  in the scope of an IDatabaseContext.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a9aeb8b83ea3f4b13a183b6ac55b35a70"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes</a></div><div class="ttdeci">ValueTask WriteAllBytes(string path, byte[] contents, CancellationToken cancellationToken)</div><div class="ttdoc">Writes some contents  to a file at path  overwriting previous content.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad3e0dda4b7fbad4c77f48ba3b2681dc7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">Tgstation.Server.Host.IO.IIOManager.DeleteDirectory</a></div><div class="ttdeci">Task DeleteDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Recursively delete a directory, removes and does not enter any symlinks encounterd.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad8dc6ae8e69047b801a7344b17d0cc37"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">Tgstation.Server.Host.IO.IIOManager.MoveDirectory</a></div><div class="ttdeci">Task MoveDirectory(string source, string destination, CancellationToken cancellationToken)</div><div class="ttdoc">Moves a directory at source  to destination .</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_authority_html_a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Tgstation.Server.Host.Authority.PermissionSetLookupType.Id</a></div><div class="ttdeci">@ Id</div><div class="ttdoc">Lookup the Api.Models.EntityId.Id of the Models.PermissionSet.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">Tgstation.Server.Host.Components.IInstanceFactory.CreateGameIOManager()</a>, <a class="el" href="_default_i_o_manager_8cs_source.html#l00022">Tgstation.Server.Host.IO.DefaultIOManager.CurrentDirectory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00058">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">Tgstation.Server.Host.IO.IIOManager.DeleteDirectory()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00275">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00048">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00053">Tgstation.Server.Host.Components.InstanceManager.ioManager</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00021">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">Tgstation.Server.Host.IO.IIOManager.MoveDirectory()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContextTaskReturn()</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph">
<area shape="rect" title="Move an IInstance.A ValueTask representing the running operation." alt="" coords="5,235,232,275"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="325,5,493,46"/>
<area shape="poly" title=" " alt="" coords="129,233,151,195,185,147,227,98,278,57,309,42,311,46,281,61,231,102,189,150,156,198,133,236"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58" title="Create an IIOManager that resolves to the &quot;Game&quot; directory of the Models.Instance defined by metadata..." alt="" coords="280,71,538,111"/>
<area shape="poly" title=" " alt="" coords="138,232,197,177,236,147,278,122,294,115,296,120,281,127,239,152,201,181,141,236"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7" title="Recursively delete a directory, removes and does not enter any symlinks encounterd." alt="" coords="319,136,499,177"/>
<area shape="poly" title=" " alt="" coords="165,232,279,187,306,179,307,184,281,192,167,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ace09fda238b33ebe9c75aa9ca8678466" title="Get the IInstanceReference associated with given metadata .The IInstance associated with the given me..." alt="" coords="282,201,536,242"/>
<area shape="poly" title=" " alt="" coords="232,239,266,235,267,241,233,245"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="314,267,504,307"/>
<area shape="poly" title=" " alt="" coords="233,265,299,272,299,278,232,270"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37" title="Moves a directory at source &#160;to destination ." alt="" coords="321,332,497,373"/>
<area shape="poly" title=" " alt="" coords="168,273,281,316,307,325,306,330,279,322,167,278"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="290,397,528,452"/>
<area shape="poly" title=" " alt="" coords="142,274,202,327,240,357,281,382,292,387,289,392,278,387,237,361,198,332,138,278"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70" title="Writes some contents &#160;to a file at path &#160;overwriting previous content." alt="" coords="324,476,494,517"/>
<area shape="poly" title=" " alt="" coords="132,275,154,315,187,366,230,418,254,442,281,462,310,477,308,481,278,467,251,446,226,422,182,369,149,318,127,277"/>
</map>
</div>

</div>
</div>
<a id="af207019cbf73d4992ff3172c0968b163" name="af207019cbf73d4992ff3172c0968b163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af207019cbf73d4992ff3172c0968b163">&#9670;&#160;</a></span>OfflineInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.OfflineInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Offline an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">user</td><td>The User performing the operation.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#abca82157721193c4bb14b3628e9a083e">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00360">360</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  361</span>        {</div>
<div class="line"><span class="lineno">  362</span>            ArgumentNullException.ThrowIfNull(metadata);</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  365</span>            {</div>
<div class="line"><span class="lineno">  366</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;</a>? container;</div>
<div class="line"><span class="lineno">  367</span>                var instanceId = metadata.Require(x =&gt; x.Id);</div>
<div class="line"><span class="lineno">  368</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  369</span>                {</div>
<div class="line"><span class="lineno">  370</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(instanceId, out container))</div>
<div class="line"><span class="lineno">  371</span>                    {</div>
<div class="line"><span class="lineno">  372</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Not offlining removed instance {instanceId}&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  373</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  374</span>                    }</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Remove(instanceId);</div>
<div class="line"><span class="lineno">  377</span>                }</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Offlining instance ID {instanceId}&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  382</span>                {</div>
<div class="line"><span class="lineno">  383</span>                    await container.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html#aa313916be969b264bc13c54b69976b17">OnZeroReferences</a>.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>                    <span class="comment">// we are the one responsible for cancelling his jobs</span></div>
<div class="line"><span class="lineno">  386</span>                    ValueTask&lt;Job?[]&gt; groupedTask = <span class="keywordflow">default</span>;</div>
<div class="line"><span class="lineno">  387</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(</div>
<div class="line"><span class="lineno">  388</span>                        async db =&gt;</div>
<div class="line"><span class="lineno">  389</span>                        {</div>
<div class="line"><span class="lineno">  390</span>                            var jobs = await db</div>
<div class="line"><span class="lineno">  391</span>                                .Jobs</div>
<div class="line"><span class="lineno">  392</span>                                .AsQueryable()</div>
<div class="line"><span class="lineno">  393</span>                                .Where(x =&gt; x.Instance!.Id == metadata.Id &amp;&amp; !x.StoppedAt.HasValue)</div>
<div class="line"><span class="lineno">  394</span>                                .Select(x =&gt; <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Job</a>(x.Id!.Value))</div>
<div class="line"><span class="lineno">  395</span>                                .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>                            groupedTask = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(</div>
<div class="line"><span class="lineno">  398</span>                                jobs.Select(job =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">CancelJob</a>(job, user, <span class="keyword">true</span>, cancellationToken)),</div>
<div class="line"><span class="lineno">  399</span>                                jobs.Count);</div>
<div class="line"><span class="lineno">  400</span>                        });</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>                    await groupedTask;</div>
<div class="line"><span class="lineno">  403</span>                }</div>
<div class="line"><span class="lineno">  404</span>                <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  405</span>                {</div>
<div class="line"><span class="lineno">  406</span>                    <span class="comment">// not too late to change your mind</span></div>
<div class="line"><span class="lineno">  407</span>                    lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  408</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Add(instanceId, container);</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  411</span>                }</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  414</span>                {</div>
<div class="line"><span class="lineno">  415</span>                    <span class="comment">// at this point we can&#39;t really stop offlining the instance just because the request was cancelled</span></div>
<div class="line"><span class="lineno">  416</span>                    await container.Instance.StopAsync(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Token);</div>
<div class="line"><span class="lineno">  417</span>                }</div>
<div class="line"><span class="lineno">  418</span>                <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  419</span>                {</div>
<div class="line"><span class="lineno">  420</span>                    await container.Instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  421</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">onlineInstances</a>.Dec();</div>
<div class="line"><span class="lineno">  422</span>                }</div>
<div class="line"><span class="lineno">  423</span>            }</div>
<div class="line"><span class="lineno">  424</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">Tgstation.Server.Common.Extensions.ValueTaskExtensions</a></div><div class="ttdoc">Extension methods for the ValueTask and ValueTask&lt;TResult&gt; classes.</div><div class="ttdef"><b>Definition</b> <a href="_value_task_extensions_8cs_source.html#l00011">ValueTaskExtensions.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html_a58adbd94d764754bd3e6c566a5fe7fe3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll</a></div><div class="ttdeci">static async ValueTask WhenAll(IEnumerable&lt; ValueTask &gt; tasks)</div><div class="ttdoc">Fully await a given list of tasks .</div><div class="ttdef"><b>Definition</b> <a href="_value_task_extensions_8cs_source.html#l00099">ValueTaskExtensions.cs:99</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_job_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Tgstation.Server.Host.Models.Job</a></div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_host_2_models_2_job_8cs_source.html#l00014">Job.cs:16</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">Tgstation.Server.Host.Utils.ReferenceCountingContainer</a></div><div class="ttdoc">Wrapper for managing some TWrapped .</div><div class="ttdef"><b>Definition</b> <a href="_reference_counting_container_8cs_source.html#l00011">ReferenceCountingContainer.cs:14</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container_html_aa313916be969b264bc13c54b69976b17"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html#aa313916be969b264bc13c54b69976b17">Tgstation.Server.Host.Utils.ReferenceCountingContainer.OnZeroReferences</a></div><div class="ttdeci">Task OnZeroReferences</div><div class="ttdoc">A Task that completes when there are no TReference s active for the Instance.</div><div class="ttdef"><b>Definition</b> <a href="_reference_counting_container_8cs_source.html#l00023">ReferenceCountingContainer.cs:24</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager_html_a5760fe527065407b364e674d2a9eaf1d"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">Tgstation.Server.Host.Jobs.IJobManager.CancelJob</a></div><div class="ttdeci">ValueTask&lt; Job?&gt; CancelJob(Job job, User? user, bool blocking, CancellationToken cancellationToken)</div><div class="ttdoc">Cancels a give job .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">Tgstation.Server.Host.Jobs.IJobManager.CancelJob()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00058">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="_reference_counting_container_8cs_source.html#l00018">Tgstation.Server.Host.Utils.ReferenceCountingContainer&lt; TWrapped, TReference &gt;.Instance</a>, <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00068">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00021">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00158">Tgstation.Server.Host.Components.InstanceManager.onlineInstances</a>, <a class="el" href="_reference_counting_container_8cs_source.html#l00024">Tgstation.Server.Host.Utils.ReferenceCountingContainer&lt; TWrapped, TReference &gt;.OnZeroReferences</a>, <a class="el" href="_instance_manager_8cs_source.html#l00153">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext()</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph">
<area shape="rect" title="Offline an IInstance.A ValueTask representing the running operation." alt="" coords="5,104,232,145"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d" title="Cancels a give job ." alt="" coords="308,5,490,46"/>
<area shape="poly" title=" " alt="" coords="166,101,279,56,304,48,306,53,281,62,168,106"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="304,71,494,111"/>
<area shape="poly" title=" " alt="" coords="232,108,289,101,289,107,232,114"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="280,136,518,177"/>
<area shape="poly" title=" " alt="" coords="232,135,264,138,264,144,232,140"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="291,201,507,256"/>
<area shape="poly" title=" " alt="" coords="171,143,281,186,299,192,297,197,279,191,169,148"/>
</map>
</div>

</div>
</div>
<a id="a4dc85f42ec73bd6fd72085969a7c4cb5" name="a4dc85f42ec73bd6fd72085969a7c4cb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dc85f42ec73bd6fd72085969a7c4cb5">&#9670;&#160;</a></span>OnlineInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.OnlineInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Online an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a21fcdc8c16fde3dd75ebf3780d7546cf">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00427">427</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  428</span>        {</div>
<div class="line"><span class="lineno">  429</span>            ArgumentNullException.ThrowIfNull(metadata);</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>            var instanceId = metadata.Require(x =&gt; x.Id);</div>
<div class="line"><span class="lineno">  432</span>            <span class="keyword">using </span>var lockContext = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  433</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  434</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.ContainsKey(instanceId))</div>
<div class="line"><span class="lineno">  435</span>                {</div>
<div class="line"><span class="lineno">  436</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Aborting instance creation due to it seemingly already being online&quot;</span>);</div>
<div class="line"><span class="lineno">  437</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  438</span>                }</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Onlining instance ID {instanceId} ({instanceName}) at {instancePath}&quot;</span>, metadata.Id, metadata.Name, metadata.Path);</div>
<div class="line"><span class="lineno">  441</span>            var instance = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">CreateInstance</a>(<span class="keyword">this</span>, metadata);</div>
<div class="line"><span class="lineno">  442</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  443</span>            {</div>
<div class="line"><span class="lineno">  444</span>                await instance.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  447</span>                {</div>
<div class="line"><span class="lineno">  448</span>                    lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  449</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Add(</div>
<div class="line"><span class="lineno">  450</span>                            instanceId,</div>
<div class="line"><span class="lineno">  451</span>                            <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;</a>(instance));</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a5740c90c4a6ff7cf2b2e84e0a07e5812">onlineInstances</a>.Inc();</div>
<div class="line"><span class="lineno">  454</span>                }</div>
<div class="line"><span class="lineno">  455</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  456</span>                {</div>
<div class="line"><span class="lineno">  457</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(<span class="stringliteral">&quot;Unable to commit onlined instance {instanceId} into service, offlining!&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  458</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  459</span>                    {</div>
<div class="line"><span class="lineno">  460</span>                        <span class="comment">// DCT: Must always run</span></div>
<div class="line"><span class="lineno">  461</span>                        await instance.StopAsync(CancellationToken.None);</div>
<div class="line"><span class="lineno">  462</span>                    }</div>
<div class="line"><span class="lineno">  463</span>                    <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> innerEx)</div>
<div class="line"><span class="lineno">  464</span>                    {</div>
<div class="line"><span class="lineno">  465</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(innerEx, ex);</div>
<div class="line"><span class="lineno">  466</span>                    }</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  469</span>                }</div>
<div class="line"><span class="lineno">  470</span>            }</div>
<div class="line"><span class="lineno">  471</span>            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  472</span>            {</div>
<div class="line"><span class="lineno">  473</span>                await instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  474</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  475</span>            }</div>
<div class="line"><span class="lineno">  476</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory_html_aeae385f33c15060d54ff78260f30024a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">Tgstation.Server.Host.Components.IInstanceFactory.CreateInstance</a></div><div class="ttdeci">ValueTask&lt; IInstance &gt; CreateInstance(IBridgeRegistrar bridgeRegistrar, Models.Instance metadata)</div><div class="ttdoc">Create an IInstance.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">Tgstation.Server.Host.Components.IInstanceFactory.CreateInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00123">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00021">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00158">Tgstation.Server.Host.Components.InstanceManager.onlineInstances</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph">
<area shape="rect" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="5,39,232,79"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="232,43,264,39,264,44,233,48"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="298,71,488,111"/>
<area shape="poly" title=" " alt="" coords="233,70,283,76,282,81,232,75"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph">
<area shape="rect" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="554,5,780,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="538,28,507,28,507,23,538,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="a799f1f7613771ef7c9d9f5ff55fb8b47" name="a799f1f7613771ef7c9d9f5ff55fb8b47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799f1f7613771ef7c9d9f5ff55fb8b47">&#9670;&#160;</a></span>PreflightChecks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tgstation.Server.Host.Components.InstanceManager.PreflightChecks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check we have a valid system and configuration. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00701">701</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  702</span>        {</div>
<div class="line"><span class="lineno">  703</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Running as user: {username}&quot;</span>, Environment.UserName);</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa2d14e2052d1ad81104ec0e5afa218e">generalConfiguration</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a6b72da3c30d5bc5ad7bbad3d5a95970e">CheckCompatibility</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>);</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>            <span class="keyword">using</span> (var systemIdentity = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">GetCurrent</a>())</div>
<div class="line"><span class="lineno">  708</span>            {</div>
<div class="line"><span class="lineno">  709</span>                <span class="keywordflow">if</span> (!systemIdentity.CanCreateSymlinks)</div>
<div class="line"><span class="lineno">  710</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException($<span class="stringliteral">&quot;The user running {Constants.CanonicalPackageName} cannot create symlinks! Please try running as an administrative user!&quot;</span>);</div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#aa9bf3bd1082b7178f58cb1f36839550e">IsWindows</a> &amp;&amp; systemIdentity.IsSuperUser &amp;&amp; !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4f795602aaedbd15ead5c52c3592483d">internalConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html#a1f50fda278b5586a9bc01c4f50f83f77">UsingDocker</a>)</div>
<div class="line"><span class="lineno">  713</span>                {</div>
<div class="line"><span class="lineno">  714</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;TGS is being run as the root account. This is not recommended.&quot;</span>);</div>
<div class="line"><span class="lineno">  715</span>                }</div>
<div class="line"><span class="lineno">  716</span>            }</div>
<div class="line"><span class="lineno">  717</span> </div>
<div class="line"><span class="lineno">  718</span>            <span class="comment">// This runs before the real socket is opened, ensures we don&#39;t perform reattaches unless we&#39;re fairly certain the bind won&#39;t fail</span></div>
<div class="line"><span class="lineno">  719</span>            <span class="comment">// If it does fail, DD will be killed.</span></div>
<div class="line"><span class="lineno">  720</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html">SocketExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de">BindTest</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html#af5e86a67c2cc59e14c762532275f0a2c">HttpApiPort</a>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  721</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration_html_a6b72da3c30d5bc5ad7bbad3d5a95970e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a6b72da3c30d5bc5ad7bbad3d5a95970e">Tgstation.Server.Host.Configuration.GeneralConfiguration.CheckCompatibility</a></div><div class="ttdeci">void CheckCompatibility(ILogger logger, IIOManager ioManager)</div><div class="ttdoc">Validates the current ConfigVersion's compatibility and provides migration instructions.</div><div class="ttdef"><b>Definition</b> <a href="_general_configuration_8cs_source.html#l00198">GeneralConfiguration.cs:198</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration_html_a1f50fda278b5586a9bc01c4f50f83f77"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html#a1f50fda278b5586a9bc01c4f50f83f77">Tgstation.Server.Host.Configuration.InternalConfiguration.UsingDocker</a></div><div class="ttdeci">bool UsingDocker</div><div class="ttdoc">If the server is running inside of a Docker container.</div><div class="ttdef"><b>Definition</b> <a href="_internal_configuration_8cs_source.html#l00031">InternalConfiguration.cs:31</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html">Tgstation.Server.Host.Extensions.SocketExtensions</a></div><div class="ttdoc">Extension methods for the Socket class.</div><div class="ttdef"><b>Definition</b> <a href="_socket_extensions_8cs_source.html#l00012">SocketExtensions.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions_html_ad87cda4241401c1a92afb27242c2e0de"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de">Tgstation.Server.Host.Extensions.SocketExtensions.BindTest</a></div><div class="ttdeci">static void BindTest(IPlatformIdentifier platformIdentifier, ushort port, bool includeIPv6, bool udp)</div><div class="ttdoc">Attempt to exclusively bind to a given port .</div><div class="ttdef"><b>Definition</b> <a href="_socket_extensions_8cs_source.html#l00021">SocketExtensions.cs:21</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider_html_af5e86a67c2cc59e14c762532275f0a2c"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html#af5e86a67c2cc59e14c762532275f0a2c">Tgstation.Server.Host.Core.IServerPortProvider.HttpApiPort</a></div><div class="ttdeci">ushort HttpApiPort</div><div class="ttdoc">The port the server listens on.</div><div class="ttdef"><b>Definition</b> <a href="_i_server_port_provider_8cs_source.html#l00011">IServerPortProvider.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory_html_a6052301d3f6ed6eb477f74a081e2187e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">Tgstation.Server.Host.Security.ISystemIdentityFactory.GetCurrent</a></div><div class="ttdeci">ISystemIdentity GetCurrent()</div><div class="ttdoc">Retrieves a ISystemIdentity representing the user executing tgstation-server.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier_html_aa9bf3bd1082b7178f58cb1f36839550e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#aa9bf3bd1082b7178f58cb1f36839550e">Tgstation.Server.Host.System.IPlatformIdentifier.IsWindows</a></div><div class="ttdeci">bool IsWindows</div><div class="ttdoc">If the current platform is a Windows platform.</div><div class="ttdef"><b>Definition</b> <a href="_i_platform_identifier_8cs_source.html#l00014">IPlatformIdentifier.cs:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_socket_extensions_8cs_source.html#l00021">Tgstation.Server.Host.Extensions.SocketExtensions.BindTest()</a>, <a class="el" href="_general_configuration_8cs_source.html#l00198">Tgstation.Server.Host.Configuration.GeneralConfiguration.CheckCompatibility()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00128">Tgstation.Server.Host.Components.InstanceManager.generalConfiguration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">Tgstation.Server.Host.Security.ISystemIdentityFactory.GetCurrent()</a>, <a class="el" href="_i_server_port_provider_8cs_source.html#l00011">Tgstation.Server.Host.Core.IServerPortProvider.HttpApiPort</a>, <a class="el" href="_instance_manager_8cs_source.html#l00138">Tgstation.Server.Host.Components.InstanceManager.internalConfiguration</a>, <a class="el" href="_instance_manager_8cs_source.html#l00053">Tgstation.Server.Host.Components.InstanceManager.ioManager</a>, <a class="el" href="_i_platform_identifier_8cs_source.html#l00014">Tgstation.Server.Host.System.IPlatformIdentifier.IsWindows</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00103">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00088">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00078">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a>, and <a class="el" href="_internal_configuration_8cs_source.html#l00031">Tgstation.Server.Host.Configuration.InternalConfiguration.UsingDocker</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_cgraph">
<area shape="rect" title="Check we have a valid system and configuration." alt="" coords="5,84,232,124"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="299,16,516,56"/>
<area shape="poly" title=" " alt="" coords="207,80,303,58,304,63,209,85"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a6b72da3c30d5bc5ad7bbad3d5a95970e" title="Validates the current ConfigVersion&#39;s compatibility and provides migration instructions." alt="" coords="280,84,535,124"/>
<area shape="poly" title=" " alt="" coords="232,101,264,101,264,107,232,107"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="297,149,518,190"/>
<area shape="poly" title=" " alt="" coords="212,122,300,142,299,147,211,127"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="583,5,822,61"/>
<area shape="poly" title=" " alt="" coords="516,32,568,32,568,37,516,38"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a661fd448a209ac58937b887023156ac7" title="Check if a given path &#160;is at the root level of the filesystem." alt="" coords="617,85,788,126"/>
<area shape="poly" title=" " alt="" coords="535,102,601,102,601,107,535,107"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a799f1f7613771ef7c9d9f5ff55fb8b47_icgraph">
<area shape="rect" title="Check we have a valid system and configuration." alt="" coords="554,5,780,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="538,28,507,28,507,23,538,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ad5ab3803515d1f7387db7d7bbdc2a7e0" name="ad5ab3803515d1f7387db7d7bbdc2a7e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ab3803515d1f7387db7d7bbdc2a7e0">&#9670;&#160;</a></span>ProcessBridgeRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html">BridgeResponse</a>?&gt; Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html">BridgeParameters</a>&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a set of bridge <em>parameters</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameters</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html" title="Parameters for a bridge request.">BridgeParameters</a> to handle.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html" title="A response to a bridge request.">BridgeResponse</a> for the request or <code>null</code> if the request could not be dispatched.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeDispatcher</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00542">542</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  543</span>        {</div>
<div class="line"><span class="lineno">  544</span>            ArgumentNullException.ThrowIfNull(parameters);</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>            var accessIdentifier = parameters.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5">AccessIdentifier</a>;</div>
<div class="line"><span class="lineno">  547</span>            <span class="keywordflow">if</span> (accessIdentifier == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  548</span>            {</div>
<div class="line"><span class="lineno">  549</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;Received invalid bridge request with null access identifier!&quot;</span>);</div>
<div class="line"><span class="lineno">  550</span>                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  551</span>            }</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>            <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>? bridgeHandler = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  554</span>            var loggedDelay = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  555</span>            <span class="keywordflow">for</span> (var i = 0; bridgeHandler == <span class="keyword">null</span> &amp;&amp; i &lt; 30; ++i)</div>
<div class="line"><span class="lineno">  556</span>            {</div>
<div class="line"><span class="lineno">  557</span>                <span class="comment">// There&#39;s a miniscule time period where we could potentially receive a bridge request and not have the registration ready when we launch DD</span></div>
<div class="line"><span class="lineno">  558</span>                <span class="comment">// This is a stopgap</span></div>
<div class="line"><span class="lineno">  559</span>                Task delayTask = Task.CompletedTask;</div>
<div class="line"><span class="lineno">  560</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  561</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.TryGetValue(accessIdentifier, out bridgeHandler))</div>
<div class="line"><span class="lineno">  562</span>                    {</div>
<div class="line"><span class="lineno">  563</span>                        <span class="keywordflow">if</span> (!loggedDelay)</div>
<div class="line"><span class="lineno">  564</span>                        {</div>
<div class="line"><span class="lineno">  565</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Received bridge request with unregistered access identifier \&quot;{aid}\&quot;. Waiting up to 3 seconds for it to be registered...&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  566</span>                            loggedDelay = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  567</span>                        }</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>                        delayTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Delay</a>(TimeSpan.FromMilliseconds(100), cancellationToken).AsTask();</div>
<div class="line"><span class="lineno">  570</span>                    }</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>                await delayTask;</div>
<div class="line"><span class="lineno">  573</span>            }</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>            <span class="keywordflow">if</span> (bridgeHandler == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  576</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  577</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.TryGetValue(accessIdentifier, out bridgeHandler))</div>
<div class="line"><span class="lineno">  578</span>                    {</div>
<div class="line"><span class="lineno">  579</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;Received invalid bridge request with access identifier: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  580</span>                        <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  581</span>                    }</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>            <span class="keywordflow">return</span> await bridgeHandler.ProcessBridgeRequest(parameters, cancellationToken);</div>
<div class="line"><span class="lineno">  584</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters_html_af84241c8eda4d8f7deddb9c5b7eb79a5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5">Tgstation.Server.Host.Components.Interop.DMApiParameters.AccessIdentifier</a></div><div class="ttdeci">string AccessIdentifier</div><div class="ttdoc">Used to identify and authenticate the DreamDaemon instance.</div><div class="ttdef"><b>Definition</b> <a href="_d_m_api_parameters_8cs_source.html#l00015">DMApiParameters.cs:15</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeHandler</a></div><div class="ttdef"><b>Definition</b> <a href="_i_bridge_handler_8cs_source.html#l00004">IBridgeHandler.cs:5</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_d_m_api_parameters_8cs_source.html#l00015">Tgstation.Server.Host.Components.Interop.DMApiParameters.AccessIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00083">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="_instance_manager_8cs_source.html#l00118">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeDispatcher.ProcessBridgeRequest()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph">
<area shape="rect" title="Handle a set of bridge parameters .A ValueTask&lt;TResult&gt; resulting in the BridgeResponse for the reque..." alt="" coords="5,41,263,82"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce" title="Create a Task that completes after a given timeSpan ." alt="" coords="350,5,530,46"/>
<area shape="poly" title=" " alt="" coords="263,44,334,35,335,41,263,49"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5" title="Handle a set of bridge parameters ." alt="" coords="311,70,569,126"/>
<area shape="poly" title=" " alt="" coords="263,74,296,78,295,83,263,79"/>
</map>
</div>

</div>
</div>
<a id="a785c474a5d39316af850239b0c7e107b" name="a785c474a5d39316af850239b0c7e107b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a785c474a5d39316af850239b0c7e107b">&#9670;&#160;</a></span>RegisterHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html">IBridgeRegistration</a> Tgstation.Server.Host.Components.InstanceManager.RegisterHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>&#160;</td>
          <td class="paramname"><em>bridgeHandler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a given <em>bridgeHandler</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridgeHandler</td><td>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> to register.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A representative <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html" title="Represents a registration of an interop session.">IBridgeRegistration</a>.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html#aa36d6072e7a96ece183b77544c9bfe4b">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeRegistrar</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00587">587</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  588</span>        {</div>
<div class="line"><span class="lineno">  589</span>            ArgumentNullException.ThrowIfNull(bridgeHandler);</div>
<div class="line"><span class="lineno">  590</span> </div>
<div class="line"><span class="lineno">  591</span>            var accessIdentifier = bridgeHandler.DMApiParameters.AccessIdentifier</div>
<div class="line"><span class="lineno">  592</span>                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Attempted bridge registration with null AccessIdentifier!&quot;</span>);</div>
<div class="line"><span class="lineno">  593</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  594</span>            {</div>
<div class="line"><span class="lineno">  595</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.Add(accessIdentifier, bridgeHandler);</div>
<div class="line"><span class="lineno">  596</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Registered bridge handler: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  597</span>            }</div>
<div class="line"><span class="lineno">  598</span> </div>
<div class="line"><span class="lineno">  599</span>            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration.html">BridgeRegistration</a>(() =&gt;</div>
<div class="line"><span class="lineno">  600</span>            {</div>
<div class="line"><span class="lineno">  601</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  602</span>                {</div>
<div class="line"><span class="lineno">  603</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.Remove(accessIdentifier);</div>
<div class="line"><span class="lineno">  604</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Unregistered bridge handler: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  605</span>                }</div>
<div class="line"><span class="lineno">  606</span>            });</div>
<div class="line"><span class="lineno">  607</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration.html">Tgstation.Server.Host.Components.Interop.Bridge.BridgeRegistration</a></div><div class="ttdef"><b>Definition</b> <a href="_bridge_registration_8cs_source.html#l00008">BridgeRegistration.cs:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00118">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>.</p>

</div>
</div>
<a id="aa2bcc92fca46ad404800304ce4bdd781" name="aa2bcc92fca46ad404800304ce4bdd781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2bcc92fca46ad404800304ce4bdd781">&#9670;&#160;</a></span>StartAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.InstanceManager.StartAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00479">479</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  480</span>        {</div>
<div class="line"><span class="lineno">  481</span>            cancellationToken.Register(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Cancel);</div>
<div class="line"><span class="lineno">  482</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Initialize</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Token);</div>
<div class="line"><span class="lineno">  483</span>            <span class="keywordflow">return</span> Task.CompletedTask;</div>
<div class="line"><span class="lineno">  484</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a7da7b0a7f75cbd3bcebc0e215f9dfcef"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">Tgstation.Server.Host.Components.InstanceManager.startupTask</a></div><div class="ttdeci">Task? startupTask</div><div class="ttdoc">The Task returned by Initialize(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00168">InstanceManager.cs:168</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aa70355ebb8437fd170e4f75e826f1ad7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Tgstation.Server.Host.Components.InstanceManager.Initialize</a></div><div class="ttdeci">async Task Initialize(CancellationToken cancellationToken)</div><div class="ttdoc">Initializes the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00624">InstanceManager.cs:624</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00148">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00168">Tgstation.Server.Host.Components.InstanceManager.startupTask</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph">
<area shape="rect" title=" " alt="" coords="5,201,232,242"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,201,506,242"/>
<area shape="poly" title=" " alt="" coords="232,219,264,219,264,224,232,224"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac" title="Activate the IJobManager." alt="" coords="583,5,764,46"/>
<area shape="poly" title=" " alt="" coords="407,199,465,129,506,90,553,57,567,49,569,54,555,61,510,94,469,133,411,203"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0" title="Kill the server with a fatal exception." alt="" coords="583,71,763,111"/>
<area shape="poly" title=" " alt="" coords="421,199,481,160,553,122,572,114,574,119,555,127,483,165,424,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e" title="Initializes the connection to the TGS swarm." alt="" coords="560,136,786,177"/>
<area shape="poly" title=" " alt="" coords="483,198,567,178,569,183,484,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="560,201,786,242"/>
<area shape="poly" title=" " alt="" coords="506,219,545,219,545,224,506,224"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a799f1f7613771ef7c9d9f5ff55fb8b47" title="Check we have a valid system and configuration." alt="" coords="560,267,786,307"/>
<area shape="poly" title=" " alt="" coords="484,240,569,260,567,265,483,245"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="590,332,757,373"/>
<area shape="poly" title=" " alt="" coords="424,240,483,279,555,317,576,325,574,330,553,321,481,283,421,245"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="554,397,792,438"/>
<area shape="poly" title=" " alt="" coords="411,241,469,310,510,349,555,382,567,388,564,393,553,387,506,353,465,314,407,244"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#a588b00b42267c8d23088bde28d3f7fce" title="Create a Task that completes after a given timeSpan ." alt="" coords="878,5,1058,46"/>
<area shape="poly" title=" " alt="" coords="768,133,791,121,806,106,814,90,822,73,839,57,862,44,865,49,842,61,827,76,819,92,810,109,794,125,771,138"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="860,71,1076,111"/>
<area shape="poly" title=" " alt="" coords="768,133,858,113,859,118,769,138"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="855,136,1081,177"/>
<area shape="poly" title=" " alt="" coords="768,198,858,178,859,183,769,203"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#abeb1f086e2752f6f9a4d3d175a4392af" title="Asyncronously locks a semaphore ." alt="" coords="873,201,1063,242"/>
<area shape="poly" title=" " alt="" coords="787,219,858,219,858,224,787,224"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="860,267,1076,307"/>
<area shape="poly" title=" " alt="" coords="787,284,844,284,844,290,787,290"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a6b72da3c30d5bc5ad7bbad3d5a95970e" title="Validates the current ConfigVersion&#39;s compatibility and provides migration instructions." alt="" coords="840,332,1096,373"/>
<area shape="poly" title=" " alt="" coords="769,305,859,325,858,331,768,311"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="858,397,1078,438"/>
<area shape="poly" title=" " alt="" coords="771,306,794,318,810,334,819,351,827,367,842,382,851,388,848,392,839,386,822,370,814,354,806,338,791,322,768,310"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="1144,255,1383,311"/>
<area shape="poly" title=" " alt="" coords="1077,283,1128,282,1128,287,1077,288"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a661fd448a209ac58937b887023156ac7" title="Check if a given path &#160;is at the root level of the filesystem." alt="" coords="1178,335,1349,375"/>
<area shape="poly" title=" " alt="" coords="1096,351,1162,351,1162,357,1096,356"/>
</map>
</div>

</div>
</div>
<a id="aaa1a2f2c9fe345546fd5f8ae27fe466b" name="aaa1a2f2c9fe345546fd5f8ae27fe466b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1a2f2c9fe345546fd5f8ae27fe466b">&#9670;&#160;</a></span>StopAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.InstanceManager.StopAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00487">487</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  488</span>        {</div>
<div class="line"><span class="lineno">  489</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  490</span>            {</div>
<div class="line"><span class="lineno">  491</span>                <span class="keyword">using</span> (cancellationToken.Register(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Cancel))</div>
<div class="line"><span class="lineno">  492</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  493</span>                    {</div>
<div class="line"><span class="lineno">  494</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  495</span>                        {</div>
<div class="line"><span class="lineno">  496</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;InstanceManager was never started!&quot;</span>);</div>
<div class="line"><span class="lineno">  497</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  498</span>                        }</div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Stopping instance manager...&quot;</span>);</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>                        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a>.IsCompleted)</div>
<div class="line"><span class="lineno">  503</span>                        {</div>
<div class="line"><span class="lineno">  504</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Interrupting startup task...&quot;</span>);</div>
<div class="line"><span class="lineno">  505</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Cancel();</div>
<div class="line"><span class="lineno">  506</span>                            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a>;</div>
<div class="line"><span class="lineno">  507</span>                        }</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>                        var instanceFactoryStopTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  510</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>                        async ValueTask OfflineInstanceImmediate(IInstance instance, CancellationToken cancellationToken)</div>
<div class="line"><span class="lineno">  513</span>                        {</div>
<div class="line"><span class="lineno">  514</span>                            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  515</span>                            {</div>
<div class="line"><span class="lineno">  516</span>                                await instance.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  517</span>                            }</div>
<div class="line"><span class="lineno">  518</span>                            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  519</span>                            {</div>
<div class="line"><span class="lineno">  520</span>                                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(ex, <span class="stringliteral">&quot;Instance shutdown exception!&quot;</span>);</div>
<div class="line"><span class="lineno">  521</span>                            }</div>
<div class="line"><span class="lineno">  522</span>                        }</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>                        await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Select(x =&gt; OfflineInstanceImmediate(x.Value.Instance, cancellationToken)));</div>
<div class="line"><span class="lineno">  525</span>                        await instanceFactoryStopTask;</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Shutdown</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  528</span>                    }</div>
<div class="line"><span class="lineno">  529</span>                    <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  530</span>                    {</div>
<div class="line"><span class="lineno">  531</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  532</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">SetTitle</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a>);</div>
<div class="line"><span class="lineno">  533</span>                    }</div>
<div class="line"><span class="lineno">  534</span>            }</div>
<div class="line"><span class="lineno">  535</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  536</span>            {</div>
<div class="line"><span class="lineno">  537</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(ex, <span class="stringliteral">&quot;Instance manager stop exception!&quot;</span>);</div>
<div class="line"><span class="lineno">  538</span>            }</div>
<div class="line"><span class="lineno">  539</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller_html_a6296d8313a5ce21888e6eb9f08b8379a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Tgstation.Server.Host.Swarm.ISwarmServiceController.Shutdown</a></div><div class="ttdeci">ValueTask Shutdown(CancellationToken cancellationToken)</div><div class="ttdoc">Deregister with the swarm controller or put clients into querying state.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00098">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00048">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00113">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00068">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_instance_manager_8cs_source.html#l00108">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00163">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Tgstation.Server.Host.Swarm.ISwarmServiceController.Shutdown()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00153">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00148">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00168">Tgstation.Server.Host.Components.InstanceManager.startupTask</a>, <a class="el" href="_instance_manager_8cs_source.html#l00093">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph">
<area shape="rect" title=" " alt="" coords="5,71,232,111"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="309,5,477,46"/>
<area shape="poly" title=" " alt="" coords="206,67,293,47,295,52,208,73"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a" title="Deregister with the swarm controller or put clients into querying state." alt="" coords="280,71,506,111"/>
<area shape="poly" title=" " alt="" coords="232,88,264,88,264,94,232,94"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="285,135,501,191"/>
<area shape="poly" title=" " alt="" coords="199,109,271,128,269,133,198,114"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa335c25ccb65f93242424c79396a29dc" name="aa335c25ccb65f93242424c79396a29dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa335c25ccb65f93242424c79396a29dc">&#9670;&#160;</a></span>assemblyInformationProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a> Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAssemblyInformationProvider for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00063">63</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ad6f992fed638980594fd5a6c45b8946b" name="ad6f992fed638980594fd5a6c45b8946b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f992fed638980594fd5a6c45b8946b">&#9670;&#160;</a></span>asyncDelayer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAsyncDelayer for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00083">83</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00728">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00542">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>.</p>

</div>
</div>
<a id="af4eafee41a5201cb8f671607b53cc0bd" name="af4eafee41a5201cb8f671607b53cc0bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4eafee41a5201cb8f671607b53cc0bd">&#9670;&#160;</a></span>bridgeHandlers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Dictionary&lt;string, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>&gt; Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5" title="Used to identify and authenticate the DreamDaemon instance.">DMApiParameters.AccessIdentifier</a>s to their respective IBridgeHandlers. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00118">118</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00542">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00587">Tgstation.Server.Host.Components.InstanceManager.RegisterHandler()</a>.</p>

</div>
</div>
<a id="ad650e598cfd489a215ab0b6dfcc13910" name="ad650e598cfd489a215ab0b6dfcc13910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad650e598cfd489a215ab0b6dfcc13910">&#9670;&#160;</a></span>console</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a> Tgstation.Server.Host.Components.InstanceManager.console</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IConsole for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00098">98</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="ab5c8e78bdae6eb6eb2ed289563c639cc" name="ab5c8e78bdae6eb6eb2ed289563c639cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c8e78bdae6eb6eb2ed289563c639cc">&#9670;&#160;</a></span>databaseContextFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IDatabaseContextFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00058">58</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00289">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00360">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>.</p>

</div>
</div>
<a id="a6ba869dae354db235f8518f7283a531c" name="a6ba869dae354db235f8518f7283a531c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba869dae354db235f8518f7283a531c">&#9670;&#160;</a></span>disposed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.InstanceManager.disposed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the InstanceManager has been DisposeAsync'd. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00173">173</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>.</p>

</div>
</div>
<a id="aaa2d14e2052d1ad81104ec0e5afa218e" name="aaa2d14e2052d1ad81104ec0e5afa218e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa2d14e2052d1ad81104ec0e5afa218e">&#9670;&#160;</a></span>generalConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> Tgstation.Server.Host.Components.InstanceManager.generalConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The GeneralConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00128">128</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00701">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="ae2b48b5197337f7a311fd115951be7f6" name="ae2b48b5197337f7a311fd115951be7f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2b48b5197337f7a311fd115951be7f6">&#9670;&#160;</a></span>instanceFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a> Tgstation.Server.Host.Components.InstanceManager.instanceFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IInstanceFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00048">48</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00289">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00427">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a25d96cfaae1f2de6a931a8158b2290c1" name="a25d96cfaae1f2de6a931a8158b2290c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d96cfaae1f2de6a931a8158b2290c1">&#9670;&#160;</a></span>instances</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Dictionary&lt;long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer</a>&lt;<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html">IInstance</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_wrapper.html">InstanceWrapper</a>&gt; &gt; Tgstation.Server.Host.Components.InstanceManager.instances</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of instance <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to the respective ReferenceCountingContainer&lt;TWrapped, TReference&gt; for IInstances. Also used as a <code>lock</code> object. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00113">113</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00610">Tgstation.Server.Host.Components.InstanceManager.GetInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00275">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00360">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00427">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="abaf66550ead757ef3bc6915c9b15d06b" name="abaf66550ead757ef3bc6915c9b15d06b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaf66550ead757ef3bc6915c9b15d06b">&#9670;&#160;</a></span>instanceStateChangeSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineInstance(Models.Instance, User, CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00123">123</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00289">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00360">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00427">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>.</p>

</div>
</div>
<a id="a4f795602aaedbd15ead5c52c3592483d" name="a4f795602aaedbd15ead5c52c3592483d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f795602aaedbd15ead5c52c3592483d">&#9670;&#160;</a></span>internalConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> Tgstation.Server.Host.Components.InstanceManager.internalConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The InternalConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00138">138</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00701">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="a59bc4b977f9b72208d553fbfa57f118e" name="a59bc4b977f9b72208d553fbfa57f118e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59bc4b977f9b72208d553fbfa57f118e">&#9670;&#160;</a></span>ioManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.InstanceManager.ioManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00053">53</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00289">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00701">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="a4cba827c550b76d41c119b62d25c4668" name="a4cba827c550b76d41c119b62d25c4668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cba827c550b76d41c119b62d25c4668">&#9670;&#160;</a></span>jobService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a> Tgstation.Server.Host.Components.InstanceManager.jobService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IJobService for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00068">68</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00360">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a968fedca8d4cc5ff16c77c0cbc782bda" name="a968fedca8d4cc5ff16c77c0cbc782bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968fedca8d4cc5ff16c77c0cbc782bda">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ILogger&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a>&gt; Tgstation.Server.Host.Components.InstanceManager.logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ILogger for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00108">108</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00289">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00360">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00427">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00701">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00542">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00587">Tgstation.Server.Host.Components.InstanceManager.RegisterHandler()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a5740c90c4a6ff7cf2b2e84e0a07e5812" name="a5740c90c4a6ff7cf2b2e84e0a07e5812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5740c90c4a6ff7cf2b2e84e0a07e5812">&#9670;&#160;</a></span>onlineInstances</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Gauge Tgstation.Server.Host.Components.InstanceManager.onlineInstances</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The count of online instances. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00158">158</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00360">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00427">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>.</p>

</div>
</div>
<a id="ad66bf7714d6593c0793e5612b60335b8" name="ad66bf7714d6593c0793e5612b60335b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66bf7714d6593c0793e5612b60335b8">&#9670;&#160;</a></span>originalConsoleTitle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly? string Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The original <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b" title="Gets or sets the IConsole window&#39;s title. Can return null if getting the console title is not support...">IConsole.Title</a> of console. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00163">163</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a26a35317eec77d8eed96595fc85f7c4c" name="a26a35317eec77d8eed96595fc85f7c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26a35317eec77d8eed96595fc85f7c4c">&#9670;&#160;</a></span>platformIdentifier</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a> Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IPlatformIdentifier for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00103">103</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00701">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="a16905d984154ab9356b3477dc257f435" name="a16905d984154ab9356b3477dc257f435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16905d984154ab9356b3477dc257f435">&#9670;&#160;</a></span>readyTcs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly TaskCompletionSource Tgstation.Server.Host.Components.InstanceManager.readyTcs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The TaskCompletionSource for Ready. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00143">143</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ac2ba10fddea5448f4c8c08f363a0e391" name="ac2ba10fddea5448f4c8c08f363a0e391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ba10fddea5448f4c8c08f363a0e391">&#9670;&#160;</a></span>serverControl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> Tgstation.Server.Host.Components.InstanceManager.serverControl</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IServerControl for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00073">73</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ad5b7e13dc94565671f962eb9fe62fd82" name="ad5b7e13dc94565671f962eb9fe62fd82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b7e13dc94565671f962eb9fe62fd82">&#9670;&#160;</a></span>serverPortProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a> Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IServerPortProvider for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00088">88</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00701">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<a id="aeb76c23570af139eb50c9091c462ecf9" name="aeb76c23570af139eb50c9091c462ecf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb76c23570af139eb50c9091c462ecf9">&#9670;&#160;</a></span>shutdownCancellationTokenSource</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly CancellationTokenSource Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource linked with the token given to StopAsync(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00153">153</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00360">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a76fbe64a7ff3a9fc273ecc05f613ed7c" name="a76fbe64a7ff3a9fc273ecc05f613ed7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fbe64a7ff3a9fc273ecc05f613ed7c">&#9670;&#160;</a></span>startupCancellationTokenSource</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly CancellationTokenSource Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource for Initialize(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00148">148</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00255">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00479">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a7da7b0a7f75cbd3bcebc0e215f9dfcef" name="a7da7b0a7f75cbd3bcebc0e215f9dfcef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da7b0a7f75cbd3bcebc0e215f9dfcef">&#9670;&#160;</a></span>startupTask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task? Tgstation.Server.Host.Components.InstanceManager.startupTask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Task returned by Initialize(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00168">168</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00479">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a9eaeb3190a96e2d25bdb58dedb00e07f" name="a9eaeb3190a96e2d25bdb58dedb00e07f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eaeb3190a96e2d25bdb58dedb00e07f">&#9670;&#160;</a></span>swarmConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> Tgstation.Server.Host.Components.InstanceManager.swarmConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The SwarmConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00133">133</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00624">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="a7281abf42fbdf74cfbabfe9181ad301e" name="a7281abf42fbdf74cfbabfe9181ad301e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7281abf42fbdf74cfbabfe9181ad301e">&#9670;&#160;</a></span>swarmServiceController</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a> Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISwarmServiceController for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00093">93</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00728">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00487">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a914147c0498a9b2482efe956486646fb" name="a914147c0498a9b2482efe956486646fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a914147c0498a9b2482efe956486646fb">&#9670;&#160;</a></span>systemIdentityFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a> Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISystemIdentityFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00078">78</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00196">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00701">Tgstation.Server.Host.Components.InstanceManager.PreflightChecks()</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a0d54ae3e93cf9a9af10411c733e77f44" name="a0d54ae3e93cf9a9af10411c733e77f44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d54ae3e93cf9a9af10411c733e77f44">&#9670;&#160;</a></span>Ready</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.InstanceManager.Ready</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Task that completes when the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances.">IInstanceManager</a> finishes initializing. </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#a4ad311358f74779a6c1f2fcba4a30578">Tgstation.Server.Host.Components.IInstanceManager</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00043">43</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/<a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
