<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.InstanceManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.11.0</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.InstanceManager Class Reference<span class="mlabels"><span class="mlabel">sealed</span></span></div></div>
</div><!--header-->
<div class="contents">

<p> 
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.InstanceManager:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_instance_manager_inherit__map">
<area shape="rect" title=" " alt="" coords="390,121,616,161"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances." alt="" coords="204,29,330,55"/>
<area shape="poly" title=" " alt="" coords="328,58,343,64,462,118,460,123,341,69,326,63"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html" title="Operations that can be performed on a given Models.Instance." alt="" coords="5,5,144,31"/>
<area shape="poly" title=" " alt="" coords="160,26,204,32,204,37,159,31"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html" title="Handler for BridgeParameters." alt="" coords="12,55,137,80"/>
<area shape="poly" title=" " alt="" coords="151,55,204,48,204,53,152,60"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html" title="Provider for IInstanceCores." alt="" coords="192,79,342,104"/>
<area shape="poly" title=" " alt="" coords="347,105,403,117,402,122,346,111"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="211,128,323,154"/>
<area shape="poly" title=" " alt="" coords="338,138,389,138,389,144,338,144"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html" title="Registers IBridgeHandlers." alt="" coords="210,177,324,203"/>
<area shape="poly" title=" " alt="" coords="338,173,402,159,403,164,340,178"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="204,227,330,252"/>
<area shape="poly" title=" " alt="" coords="326,219,341,213,460,159,462,164,343,218,328,224"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.InstanceManager:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map" id="a_tgstation_8_server_8_host_8_components_8_instance_manager_coll__map">
<area shape="rect" title=" " alt="" coords="1151,867,1377,908"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances." alt="" coords="672,29,798,55"/>
<area shape="poly" title=" " alt="" coords="812,24,887,16,972,19,1014,26,1056,39,1094,58,1129,84,1150,111,1169,146,1185,189,1200,238,1223,351,1240,475,1252,598,1259,712,1265,867,1260,867,1254,712,1247,599,1235,475,1218,352,1195,240,1180,190,1164,148,1145,113,1125,88,1091,63,1054,44,1013,32,971,24,887,22,813,29"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html" title="Operations that can be performed on a given Models.Instance." alt="" coords="174,5,312,31"/>
<area shape="poly" title=" " alt="" coords="328,20,672,36,672,42,327,25"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html" title="Handler for BridgeParameters." alt="" coords="181,55,305,80"/>
<area shape="poly" title=" " alt="" coords="321,61,672,43,672,48,321,66"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html" title="Provider for IInstanceCores." alt="" coords="660,79,810,104"/>
<area shape="poly" title=" " alt="" coords="826,84,910,83,998,87,1077,98,1107,108,1128,121,1149,146,1167,179,1184,220,1198,267,1221,374,1239,491,1251,609,1258,718,1265,866,1259,867,1253,718,1245,610,1233,492,1216,375,1193,268,1179,222,1163,182,1145,149,1125,126,1105,113,1075,104,998,92,909,88,826,89"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,208,117,234"/>
<area shape="poly" title=" " alt="" coords="131,208,324,185,560,165,735,160,910,165,943,163,974,159,1027,147,1051,145,1076,148,1102,157,1128,176,1148,199,1166,229,1195,309,1218,408,1236,517,1257,727,1264,866,1259,867,1252,727,1231,518,1213,409,1190,311,1161,231,1144,202,1125,180,1099,162,1075,153,1051,150,1027,153,975,164,944,169,910,170,735,166,560,170,325,190,132,214"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="176,287,311,312"/>
<area shape="poly" title=" " alt="" coords="108,238,212,284,210,289,105,243"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html" title="Registers IBridgeHandlers." alt="" coords="678,180,792,206"/>
<area shape="poly" title=" " alt="" coords="806,174,880,164,966,164,1010,170,1053,182,1093,200,1128,226,1147,247,1163,275,1191,349,1214,441,1232,541,1255,736,1264,867,1259,867,1249,736,1226,542,1209,442,1186,351,1158,277,1142,250,1125,229,1090,205,1051,187,1009,176,966,170,880,170,806,179"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="672,229,798,255"/>
<area shape="poly" title=" " alt="" coords="813,233,898,228,991,228,1073,237,1105,246,1128,259,1146,278,1162,305,1190,375,1212,461,1230,557,1254,741,1264,867,1259,867,1248,742,1225,557,1207,463,1185,377,1157,307,1142,282,1125,263,1103,251,1072,242,990,233,898,233,813,238"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html" title="Factory for creating IInstances." alt="" coords="622,279,848,320"/>
<area shape="poly" title=" " alt="" coords="863,275,930,273,1001,280,1035,289,1069,300,1100,317,1128,338,1144,355,1158,378,1184,438,1205,513,1224,595,1250,756,1263,866,1258,867,1245,756,1218,596,1200,514,1179,440,1153,380,1140,358,1125,341,1097,321,1066,305,1034,294,1000,286,930,279,864,281"/>
<area shape="poly" title=" " alt="" coords="327,297,622,297,622,302,327,302"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html" title="The service that manages everything to do with jobs." alt="" coords="644,540,826,581"/>
<area shape="poly" title=" " alt="" coords="271,321,320,365,390,421,472,478,561,525,602,539,644,549,643,554,601,544,559,530,469,482,386,425,317,369,267,325"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="651,345,819,385"/>
<area shape="poly" title=" " alt="" coords="834,357,916,356,1002,360,1078,371,1107,380,1128,392,1143,407,1156,428,1181,482,1202,548,1220,622,1248,766,1263,867,1257,867,1243,766,1215,623,1197,550,1176,483,1151,430,1139,411,1125,396,1105,385,1076,376,1002,365,916,362,834,362"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html" title="Factory for scoping usage of IDatabaseContexts. Meant for use by Components." alt="" coords="631,410,839,451"/>
<area shape="poly" title=" " alt="" coords="854,410,922,408,995,415,1031,424,1065,435,1098,451,1128,472,1171,516,1203,568,1228,625,1245,683,1256,739,1262,791,1266,867,1260,867,1257,791,1250,740,1239,684,1223,626,1199,570,1167,519,1125,476,1096,456,1063,440,1029,429,994,421,922,413,855,415"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html" title="For retrieving the Assembly&#39;s location." alt="" coords="636,475,834,516"/>
<area shape="poly" title=" " alt="" coords="849,489,929,490,1010,496,1080,507,1108,516,1128,527,1167,563,1197,607,1221,656,1238,705,1258,799,1264,867,1259,867,1253,800,1233,707,1216,658,1193,610,1163,567,1125,531,1106,521,1079,512,1009,501,928,496,849,495"/>
<area shape="poly" title=" " alt="" coords="841,545,910,544,985,551,1060,570,1095,585,1128,605,1160,633,1186,666,1208,703,1226,740,1250,812,1262,866,1257,867,1245,813,1221,742,1204,705,1182,669,1156,637,1125,610,1093,590,1058,575,984,556,909,549,841,550"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html" title="Manages the runtime of Jobs." alt="" coords="195,548,291,574"/>
<area shape="poly" title=" " alt="" coords="307,558,644,558,644,563,307,563"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html" title="Represents a service that may take an updated Host assembly and run it, stopping the current assembly..." alt="" coords="645,606,825,646"/>
<area shape="poly" title=" " alt="" coords="841,618,909,621,983,631,1058,652,1094,667,1128,685,1153,704,1176,727,1213,777,1240,826,1258,866,1253,868,1236,829,1209,780,1172,730,1150,708,1125,690,1092,671,1057,657,982,637,908,626,841,623"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html" title="Factory for ISystemIdentitys." alt="" coords="635,671,835,712"/>
<area shape="poly" title=" " alt="" coords="851,693,916,700,987,713,1059,732,1128,760,1165,783,1199,811,1249,865,1245,869,1195,815,1162,787,1125,765,1058,737,986,718,916,705,851,698"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html" title="For waiting asynchronously." alt="" coords="645,736,825,777"/>
<area shape="poly" title=" " alt="" coords="841,765,978,786,1054,802,1127,822,1179,842,1225,864,1223,869,1177,847,1126,827,1053,807,977,791,840,770"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html" title="Provides access to the server&#39;s HttpApiPort." alt="" coords="645,802,825,842"/>
<area shape="poly" title=" " alt="" coords="841,831,1127,865,1151,868,1150,873,1126,870,840,836"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html" title="Start and stop controllers for a swarm service." alt="" coords="638,867,832,908"/>
<area shape="poly" title=" " alt="" coords="847,885,1150,885,1150,890,847,890"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html" title="Abstraction for global::System.Console." alt="" coords="651,932,819,973"/>
<area shape="poly" title=" " alt="" coords="834,940,1126,905,1150,902,1151,907,1127,910,834,945"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html" title="For identifying the current platform." alt="" coords="636,998,834,1038"/>
<area shape="poly" title=" " alt="" coords="849,1005,983,984,1055,969,1126,949,1178,929,1224,906,1227,911,1180,934,1128,954,1057,974,984,989,850,1010"/>
<area shape="rect" title=" " alt="" coords="625,1062,845,1118"/>
<area shape="poly" title=" " alt="" coords="860,1082,923,1074,992,1060,1060,1041,1125,1013,1162,990,1196,961,1245,906,1249,910,1200,965,1166,994,1128,1018,1062,1046,993,1066,924,1079,861,1087"/>
<area shape="rect" title=" " alt="" coords="560,1141,910,1212"/>
<area shape="poly" title=" " alt="" coords="924,1164,976,1154,1028,1139,1079,1119,1125,1092,1150,1073,1172,1050,1209,998,1236,948,1253,907,1258,909,1240,950,1213,1001,1176,1053,1153,1077,1128,1097,1081,1124,1030,1144,978,1159,925,1169"/>
<area shape="rect" title=" " alt="" coords="651,1236,819,1277"/>
<area shape="poly" title=" " alt="" coords="834,1261,904,1258,981,1247,1057,1223,1092,1206,1125,1184,1157,1154,1183,1119,1205,1080,1222,1040,1246,964,1257,908,1262,909,1251,965,1227,1042,1210,1082,1188,1122,1161,1158,1128,1189,1095,1211,1059,1228,982,1252,905,1263,835,1266"/>
<area shape="rect" title=" " alt="" coords="653,1301,817,1327"/>
<area shape="poly" title=" " alt="" coords="817,1327,889,1334,971,1331,1012,1325,1052,1314,1090,1297,1125,1275,1165,1235,1196,1188,1220,1136,1237,1082,1248,1029,1255,980,1260,908,1265,909,1260,981,1253,1030,1242,1083,1225,1137,1201,1190,1169,1239,1128,1279,1093,1302,1054,1319,1013,1330,971,1337,889,1339,816,1333"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html" title="General configuration options." alt="" coords="621,1351,849,1392"/>
<area shape="poly" title=" " alt="" coords="864,1380,941,1383,1017,1381,1082,1372,1107,1365,1125,1355,1151,1323,1175,1273,1196,1211,1214,1142,1242,1005,1257,908,1262,909,1247,1006,1219,1143,1201,1212,1179,1275,1155,1326,1128,1359,1109,1370,1083,1378,1018,1386,941,1388,864,1385"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_server_information_base.html" title="Base class for Response.ServerInformationResponse." alt="" coords="166,1111,320,1136"/>
<area shape="poly" title=" " alt="" coords="321,1105,375,1101,433,1105,490,1120,515,1134,538,1152,555,1175,560,1199,558,1223,552,1247,546,1270,544,1293,548,1316,562,1338,589,1357,621,1369,619,1374,587,1362,558,1341,543,1318,538,1293,541,1269,547,1245,552,1222,554,1199,550,1177,534,1156,512,1138,488,1125,432,1110,375,1107,322,1111"/>
<area shape="rect" title=" " alt="" coords="199,1463,287,1488"/>
<area shape="poly" title=" " alt="" coords="302,1463,430,1439,535,1414,559,1402,620,1386,621,1391,561,1407,537,1419,431,1444,303,1468"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html" title="Configuration for the server swarm system." alt="" coords="621,1482,849,1523"/>
<area shape="poly" title=" " alt="" coords="282,1493,312,1507,345,1517,415,1527,487,1530,557,1526,620,1520,621,1525,557,1532,487,1535,415,1532,344,1522,310,1512,279,1498"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html" title="Unstable configuration options used internally by TGS." alt="" coords="621,1417,849,1457"/>
<area shape="poly" title=" " alt="" coords="303,1476,412,1478,536,1472,625,1455,626,1460,537,1477,412,1483,303,1481"/>
<area shape="rect" title=" " alt="" coords="197,1160,289,1186"/>
<area shape="poly" title=" " alt="" coords="305,1170,368,1171,437,1177,498,1188,521,1196,538,1207,550,1223,555,1240,551,1274,548,1307,552,1322,562,1338,589,1357,621,1368,620,1373,587,1361,558,1341,547,1325,542,1307,546,1273,550,1241,546,1226,535,1211,519,1201,496,1193,436,1182,368,1176,305,1175"/>
<area shape="rect" title=" " alt="" coords="222,1295,264,1320"/>
<area shape="poly" title=" " alt="" coords="280,1308,537,1338,621,1350,620,1356,536,1343,280,1314"/>
<area shape="rect" title=" " alt="" coords="168,1344,319,1370"/>
<area shape="poly" title=" " alt="" coords="334,1357,620,1365,620,1371,334,1362"/>
<area shape="poly" title=" " alt="" coords="865,1502,942,1500,1018,1493,1083,1480,1107,1471,1125,1460,1140,1443,1155,1420,1180,1356,1202,1278,1220,1191,1246,1023,1258,908,1263,908,1251,1024,1226,1192,1208,1279,1185,1358,1159,1422,1144,1446,1128,1465,1110,1476,1084,1486,1019,1498,942,1505,865,1507"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html" title="Information about a server in the swarm." alt="" coords="193,1552,293,1578"/>
<area shape="poly" title=" " alt="" coords="309,1558,415,1549,536,1536,621,1520,622,1526,537,1541,416,1554,309,1563"/>
<area shape="poly" title=" " alt="" coords="864,1440,941,1439,1018,1435,1082,1423,1107,1415,1125,1404,1139,1389,1152,1368,1177,1312,1199,1242,1217,1165,1244,1014,1258,908,1263,909,1249,1015,1222,1166,1204,1244,1182,1314,1157,1371,1143,1393,1128,1409,1109,1420,1084,1429,1018,1440,941,1445,864,1445"/>
<area shape="rect" title=" " alt="" coords="657,1547,813,1572"/>
<area shape="poly" title=" " alt="" coords="828,1554,1010,1543,1086,1534,1111,1528,1125,1522,1142,1502,1157,1476,1185,1405,1207,1318,1225,1221,1248,1034,1259,908,1264,908,1254,1035,1230,1222,1212,1319,1190,1407,1162,1478,1146,1506,1128,1526,1113,1533,1087,1539,1010,1549,829,1559"/>
<area shape="rect" title=" " alt="" coords="645,1597,825,1637"/>
<area shape="poly" title=" " alt="" coords="841,1629,922,1636,1006,1639,1078,1633,1105,1625,1125,1615,1145,1593,1162,1563,1178,1525,1192,1481,1216,1380,1233,1268,1245,1156,1253,1052,1259,908,1265,909,1258,1052,1250,1156,1238,1269,1221,1381,1198,1483,1183,1527,1167,1565,1149,1596,1128,1619,1107,1630,1079,1638,1006,1644,922,1641,840,1634"/>
<area shape="rect" title=" " alt="" coords="679,1661,791,1687"/>
<area shape="poly" title=" " alt="" coords="807,1680,892,1686,986,1688,1071,1681,1103,1673,1125,1660,1145,1637,1164,1604,1180,1564,1195,1517,1218,1408,1235,1289,1247,1170,1254,1060,1260,908,1265,909,1259,1060,1252,1170,1241,1290,1224,1409,1200,1518,1185,1566,1169,1607,1150,1640,1128,1665,1105,1678,1072,1686,986,1694,892,1692,806,1685"/>
<area shape="rect" title=" " alt="" coords="710,1711,760,1736"/>
<area shape="poly" title=" " alt="" coords="776,1726,861,1734,965,1738,1016,1737,1062,1732,1100,1723,1125,1710,1147,1684,1166,1649,1183,1606,1198,1556,1222,1440,1239,1313,1250,1185,1256,1068,1260,908,1265,908,1261,1068,1255,1185,1244,1313,1227,1441,1203,1557,1188,1608,1171,1652,1151,1688,1128,1714,1101,1728,1063,1737,1017,1742,965,1743,860,1739,775,1731"/>
<area shape="rect" title=" " alt="" coords="712,1760,758,1786"/>
<area shape="poly" title=" " alt="" coords="773,1782,846,1801,892,1808,941,1812,990,1810,1039,1802,1085,1785,1125,1758,1148,1731,1168,1693,1186,1647,1201,1594,1225,1470,1242,1335,1252,1200,1258,1076,1260,908,1265,908,1263,1076,1257,1200,1247,1336,1231,1471,1206,1595,1191,1649,1173,1696,1152,1734,1128,1762,1087,1790,1040,1807,991,1816,940,1817,891,1813,845,1806,772,1788"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae4bc9f6851f7c488f2205ddb5f9bfbb0" id="r_ae4bc9f6851f7c488f2205ddb5f9bfbb0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae4bc9f6851f7c488f2205ddb5f9bfbb0">InstanceManager</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt; generalConfigurationOptions, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt; swarmConfigurationOptions, IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> &gt; internalConfigurationOptions, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>)</td></tr>
<tr class="memdesc:ae4bc9f6851f7c488f2205ddb5f9bfbb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the InstanceManager class.  <br /></td></tr>
<tr class="separator:ae4bc9f6851f7c488f2205ddb5f9bfbb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f7ed3869c2397df900e5745be0befc" id="r_a72f7ed3869c2397df900e5745be0befc"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a72f7ed3869c2397df900e5745be0befc">DisposeAsync</a> ()</td></tr>
<tr class="separator:a72f7ed3869c2397df900e5745be0befc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace09fda238b33ebe9c75aa9ca8678466" id="r_ace09fda238b33ebe9c75aa9ca8678466"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html">IInstanceReference</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ace09fda238b33ebe9c75aa9ca8678466">GetInstanceReference</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> metadata)</td></tr>
<tr class="memdesc:ace09fda238b33ebe9c75aa9ca8678466"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html" title="Controller version of IInstanceCore.">IInstanceReference</a> associated with given <em>metadata</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> associated with the given <em>metadata</em>  if it is online, <code>null</code> otherwise.</dd></dl>
  <br /></td></tr>
<tr class="separator:ace09fda238b33ebe9c75aa9ca8678466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3dc0cfcb7f415f1dd8a98bfd018f90e" id="r_ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad3dc0cfcb7f415f1dd8a98bfd018f90e">MoveInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> instance, string oldPath, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> with the updated path.</td></tr>
    <tr><td class="paramname">oldPath</td><td>The old path of the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>. <em>metadata</em>  will have this set on <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318" title="The path to where the Instance is located. Can only be changed while the Instance is offline....">Api.Models.Instance.Path</a> if the operation fails.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:ad3dc0cfcb7f415f1dd8a98bfd018f90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af207019cbf73d4992ff3172c0968b163" id="r_af207019cbf73d4992ff3172c0968b163"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af207019cbf73d4992ff3172c0968b163">OfflineInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> user, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af207019cbf73d4992ff3172c0968b163"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offline an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">user</td><td>The User performing the operation.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:af207019cbf73d4992ff3172c0968b163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc85f42ec73bd6fd72085969a7c4cb5" id="r_a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">OnlineInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Online an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
  <br /></td></tr>
<tr class="separator:a4dc85f42ec73bd6fd72085969a7c4cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bcc92fca46ad404800304ce4bdd781" id="r_aa2bcc92fca46ad404800304ce4bdd781"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781">StartAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:aa2bcc92fca46ad404800304ce4bdd781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1a2f2c9fe345546fd5f8ae27fe466b" id="r_aaa1a2f2c9fe345546fd5f8ae27fe466b"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa1a2f2c9fe345546fd5f8ae27fe466b">StopAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:aaa1a2f2c9fe345546fd5f8ae27fe466b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ab3803515d1f7387db7d7bbdc2a7e0" id="r_ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="memItemLeft" align="right" valign="top">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html">BridgeResponse</a>?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5ab3803515d1f7387db7d7bbdc2a7e0">ProcessBridgeRequest</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html">BridgeParameters</a> parameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a set of bridge <em>parameters</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameters</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html" title="Parameters for a bridge request.">BridgeParameters</a> to handle.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html" title="A response to a bridge request.">BridgeResponse</a> for the request or <code>null</code> if the request could not be dispatched.</dd></dl>
  <br /></td></tr>
<tr class="separator:ad5ab3803515d1f7387db7d7bbdc2a7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785c474a5d39316af850239b0c7e107b" id="r_a785c474a5d39316af850239b0c7e107b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html">IBridgeRegistration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a785c474a5d39316af850239b0c7e107b">RegisterHandler</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> bridgeHandler)</td></tr>
<tr class="memdesc:a785c474a5d39316af850239b0c7e107b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a given <em>bridgeHandler</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridgeHandler</td><td>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> to register.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A representative <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html" title="Represents a registration of an interop session.">IBridgeRegistration</a>.</dd></dl>
  <br /></td></tr>
<tr class="separator:a785c474a5d39316af850239b0c7e107b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add11622918bcaebdf64e69c29e8ac255" id="r_add11622918bcaebdf64e69c29e8ac255"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html">IInstanceCore</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#add11622918bcaebdf64e69c29e8ac255">GetInstance</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models.Instance</a> metadata)</td></tr>
<tr class="memdesc:add11622918bcaebdf64e69c29e8ac255"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for a given <em>instance</em>  if it's online.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> to get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> if it is online, <code>null</code> otherwise.</dd></dl>
  <br /></td></tr>
<tr class="separator:add11622918bcaebdf64e69c29e8ac255"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a0d54ae3e93cf9a9af10411c733e77f44" id="r_a0d54ae3e93cf9a9af10411c733e77f44"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a0d54ae3e93cf9a9af10411c733e77f44">Ready</a><code> [get]</code></td></tr>
<tr class="memdesc:a0d54ae3e93cf9a9af10411c733e77f44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task that completes when the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances.">IInstanceManager</a> finishes initializing.  <br /></td></tr>
<tr class="separator:a0d54ae3e93cf9a9af10411c733e77f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager"><td colspan="2" onclick="javascript:toggleInherit('properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html">Tgstation.Server.Host.Components.IInstanceManager</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa70355ebb8437fd170e4f75e826f1ad7" id="r_aa70355ebb8437fd170e4f75e826f1ad7"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Initialize</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aa70355ebb8437fd170e4f75e826f1ad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the InstanceManager.  <br /></td></tr>
<tr class="separator:aa70355ebb8437fd170e4f75e826f1ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e875f6dd7bf0458e6d54e0dcf7bfe44" id="r_a3e875f6dd7bf0458e6d54e0dcf7bfe44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a3e875f6dd7bf0458e6d54e0dcf7bfe44">CheckSystemCompatibility</a> ()</td></tr>
<tr class="memdesc:a3e875f6dd7bf0458e6d54e0dcf7bfe44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check we have a valid system and configuration.  <br /></td></tr>
<tr class="separator:a3e875f6dd7bf0458e6d54e0dcf7bfe44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae64238c09aa5b3301d05109ceee5d09e" id="r_ae64238c09aa5b3301d05109ceee5d09e"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">InitializeSwarm</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ae64238c09aa5b3301d05109ceee5d09e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the connection to the TGS swarm.  <br /></td></tr>
<tr class="separator:ae64238c09aa5b3301d05109ceee5d09e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae2b48b5197337f7a311fd115951be7f6" id="r_ae2b48b5197337f7a311fd115951be7f6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a></td></tr>
<tr class="memdesc:ae2b48b5197337f7a311fd115951be7f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IInstanceFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:ae2b48b5197337f7a311fd115951be7f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59bc4b977f9b72208d553fbfa57f118e" id="r_a59bc4b977f9b72208d553fbfa57f118e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a></td></tr>
<tr class="memdesc:a59bc4b977f9b72208d553fbfa57f118e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager for the InstanceManager.  <br /></td></tr>
<tr class="separator:a59bc4b977f9b72208d553fbfa57f118e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c8e78bdae6eb6eb2ed289563c639cc" id="r_ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a></td></tr>
<tr class="memdesc:ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IDatabaseContextFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:ab5c8e78bdae6eb6eb2ed289563c639cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa335c25ccb65f93242424c79396a29dc" id="r_aa335c25ccb65f93242424c79396a29dc"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a></td></tr>
<tr class="memdesc:aa335c25ccb65f93242424c79396a29dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAssemblyInformationProvider for the InstanceManager.  <br /></td></tr>
<tr class="separator:aa335c25ccb65f93242424c79396a29dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cba827c550b76d41c119b62d25c4668" id="r_a4cba827c550b76d41c119b62d25c4668"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a></td></tr>
<tr class="memdesc:a4cba827c550b76d41c119b62d25c4668"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IJobService for the InstanceManager.  <br /></td></tr>
<tr class="separator:a4cba827c550b76d41c119b62d25c4668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ba10fddea5448f4c8c08f363a0e391" id="r_ac2ba10fddea5448f4c8c08f363a0e391"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a></td></tr>
<tr class="memdesc:ac2ba10fddea5448f4c8c08f363a0e391"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IServerControl for the InstanceManager.  <br /></td></tr>
<tr class="separator:ac2ba10fddea5448f4c8c08f363a0e391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a914147c0498a9b2482efe956486646fb" id="r_a914147c0498a9b2482efe956486646fb"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a></td></tr>
<tr class="memdesc:a914147c0498a9b2482efe956486646fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISystemIdentityFactory for the InstanceManager.  <br /></td></tr>
<tr class="separator:a914147c0498a9b2482efe956486646fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f992fed638980594fd5a6c45b8946b" id="r_ad6f992fed638980594fd5a6c45b8946b"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a></td></tr>
<tr class="memdesc:ad6f992fed638980594fd5a6c45b8946b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad6f992fed638980594fd5a6c45b8946b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b7e13dc94565671f962eb9fe62fd82" id="r_ad5b7e13dc94565671f962eb9fe62fd82"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a></td></tr>
<tr class="memdesc:ad5b7e13dc94565671f962eb9fe62fd82"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IServerPortProvider for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad5b7e13dc94565671f962eb9fe62fd82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7281abf42fbdf74cfbabfe9181ad301e" id="r_a7281abf42fbdf74cfbabfe9181ad301e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a></td></tr>
<tr class="memdesc:a7281abf42fbdf74cfbabfe9181ad301e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISwarmServiceController for the InstanceManager.  <br /></td></tr>
<tr class="separator:a7281abf42fbdf74cfbabfe9181ad301e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad650e598cfd489a215ab0b6dfcc13910" id="r_ad650e598cfd489a215ab0b6dfcc13910"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a></td></tr>
<tr class="memdesc:ad650e598cfd489a215ab0b6dfcc13910"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IConsole for the InstanceManager.  <br /></td></tr>
<tr class="separator:ad650e598cfd489a215ab0b6dfcc13910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26a35317eec77d8eed96595fc85f7c4c" id="r_a26a35317eec77d8eed96595fc85f7c4c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a></td></tr>
<tr class="memdesc:a26a35317eec77d8eed96595fc85f7c4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IPlatformIdentifier for the InstanceManager.  <br /></td></tr>
<tr class="separator:a26a35317eec77d8eed96595fc85f7c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a968fedca8d4cc5ff16c77c0cbc782bda" id="r_a968fedca8d4cc5ff16c77c0cbc782bda"><td class="memItemLeft" align="right" valign="top">readonly ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a></td></tr>
<tr class="memdesc:a968fedca8d4cc5ff16c77c0cbc782bda"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for the InstanceManager.  <br /></td></tr>
<tr class="separator:a968fedca8d4cc5ff16c77c0cbc782bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d96cfaae1f2de6a931a8158b2290c1" id="r_a25d96cfaae1f2de6a931a8158b2290c1"><td class="memItemLeft" align="right" valign="top">readonly Dictionary&lt; long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer</a>&lt; <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html">IInstance</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_wrapper.html">InstanceWrapper</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a></td></tr>
<tr class="memdesc:a25d96cfaae1f2de6a931a8158b2290c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of instance <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to the respective ReferenceCountingContainer&lt;TWrapped, TReference&gt; for IInstances. Also used as a <code>lock</code> object.  <br /></td></tr>
<tr class="separator:a25d96cfaae1f2de6a931a8158b2290c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4eafee41a5201cb8f671607b53cc0bd" id="r_af4eafee41a5201cb8f671607b53cc0bd"><td class="memItemLeft" align="right" valign="top">readonly Dictionary&lt; string, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a></td></tr>
<tr class="memdesc:af4eafee41a5201cb8f671607b53cc0bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5" title="Used to identify and authenticate the DreamDaemon instance.">DMApiParameters.AccessIdentifier</a>s to their respective IBridgeHandlers.  <br /></td></tr>
<tr class="separator:af4eafee41a5201cb8f671607b53cc0bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf66550ead757ef3bc6915c9b15d06b" id="r_abaf66550ead757ef3bc6915c9b15d06b"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a></td></tr>
<tr class="memdesc:abaf66550ead757ef3bc6915c9b15d06b"><td class="mdescLeft">&#160;</td><td class="mdescRight">SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineInstance(Models.Instance, User, CancellationToken).  <br /></td></tr>
<tr class="separator:abaf66550ead757ef3bc6915c9b15d06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2d14e2052d1ad81104ec0e5afa218e" id="r_aaa2d14e2052d1ad81104ec0e5afa218e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa2d14e2052d1ad81104ec0e5afa218e">generalConfiguration</a></td></tr>
<tr class="memdesc:aaa2d14e2052d1ad81104ec0e5afa218e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The GeneralConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:aaa2d14e2052d1ad81104ec0e5afa218e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eaeb3190a96e2d25bdb58dedb00e07f" id="r_a9eaeb3190a96e2d25bdb58dedb00e07f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a9eaeb3190a96e2d25bdb58dedb00e07f">swarmConfiguration</a></td></tr>
<tr class="memdesc:a9eaeb3190a96e2d25bdb58dedb00e07f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SwarmConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:a9eaeb3190a96e2d25bdb58dedb00e07f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f795602aaedbd15ead5c52c3592483d" id="r_a4f795602aaedbd15ead5c52c3592483d"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4f795602aaedbd15ead5c52c3592483d">internalConfiguration</a></td></tr>
<tr class="memdesc:a4f795602aaedbd15ead5c52c3592483d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The InternalConfiguration for the InstanceManager.  <br /></td></tr>
<tr class="separator:a4f795602aaedbd15ead5c52c3592483d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16905d984154ab9356b3477dc257f435" id="r_a16905d984154ab9356b3477dc257f435"><td class="memItemLeft" align="right" valign="top">readonly TaskCompletionSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a></td></tr>
<tr class="memdesc:a16905d984154ab9356b3477dc257f435"><td class="mdescLeft">&#160;</td><td class="mdescRight">The TaskCompletionSource for Ready.  <br /></td></tr>
<tr class="separator:a16905d984154ab9356b3477dc257f435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fbe64a7ff3a9fc273ecc05f613ed7c" id="r_a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="memItemLeft" align="right" valign="top">readonly CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a></td></tr>
<tr class="memdesc:a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource for Initialize(CancellationToken).  <br /></td></tr>
<tr class="separator:a76fbe64a7ff3a9fc273ecc05f613ed7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb76c23570af139eb50c9091c462ecf9" id="r_aeb76c23570af139eb50c9091c462ecf9"><td class="memItemLeft" align="right" valign="top">readonly CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a></td></tr>
<tr class="memdesc:aeb76c23570af139eb50c9091c462ecf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource linked with the token given to StopAsync(CancellationToken).  <br /></td></tr>
<tr class="separator:aeb76c23570af139eb50c9091c462ecf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66bf7714d6593c0793e5612b60335b8" id="r_ad66bf7714d6593c0793e5612b60335b8"><td class="memItemLeft" align="right" valign="top">readonly? string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a></td></tr>
<tr class="memdesc:ad66bf7714d6593c0793e5612b60335b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The original <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b" title="Gets or sets the IConsole window&#39;s title. Can return null if getting the console title is not support...">IConsole.Title</a> of console.  <br /></td></tr>
<tr class="separator:ad66bf7714d6593c0793e5612b60335b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da7b0a7f75cbd3bcebc0e215f9dfcef" id="r_a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="memItemLeft" align="right" valign="top">Task?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a></td></tr>
<tr class="memdesc:a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Task returned by Initialize(CancellationToken).  <br /></td></tr>
<tr class="separator:a7da7b0a7f75cbd3bcebc0e215f9dfcef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba869dae354db235f8518f7283a531c" id="r_a6ba869dae354db235f8518f7283a531c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a></td></tr>
<tr class="memdesc:a6ba869dae354db235f8518f7283a531c"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the InstanceManager has been DisposeAsync'd.  <br /></td></tr>
<tr class="separator:a6ba869dae354db235f8518f7283a531c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00033">33</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae4bc9f6851f7c488f2205ddb5f9bfbb0" name="ae4bc9f6851f7c488f2205ddb5f9bfbb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4bc9f6851f7c488f2205ddb5f9bfbb0">&#9670;&#160;</a></span>InstanceManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.InstanceManager.InstanceManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a>&#160;</td>
          <td class="paramname"><em>instanceFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>ioManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a>&#160;</td>
          <td class="paramname"><em>databaseContextFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a>&#160;</td>
          <td class="paramname"><em>assemblyInformationProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a>&#160;</td>
          <td class="paramname"><em>jobService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td>
          <td class="paramname"><em>serverControl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a>&#160;</td>
          <td class="paramname"><em>systemIdentityFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a>&#160;</td>
          <td class="paramname"><em>serverPortProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a>&#160;</td>
          <td class="paramname"><em>swarmServiceController</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a>&#160;</td>
          <td class="paramname"><em>console</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a>&#160;</td>
          <td class="paramname"><em>platformIdentifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>generalConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>swarmConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> &gt;&#160;</td>
          <td class="paramname"><em>internalConfigurationOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new instance of the InstanceManager class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instanceFactory</td><td>The value of instanceFactory.</td></tr>
    <tr><td class="paramname">ioManager</td><td>The value of <em>ioManager</em> .</td></tr>
    <tr><td class="paramname">databaseContextFactory</td><td>The value of <em>databaseContextFactory</em> .</td></tr>
    <tr><td class="paramname">assemblyInformationProvider</td><td>The value of assemblyInformationProvider.</td></tr>
    <tr><td class="paramname">jobService</td><td>The value of jobService.</td></tr>
    <tr><td class="paramname">serverControl</td><td>The value of serverControl.</td></tr>
    <tr><td class="paramname">systemIdentityFactory</td><td>The value of systemIdentityFactory.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The value of asyncDelayer.</td></tr>
    <tr><td class="paramname">serverPortProvider</td><td>The value of serverPortProvider.</td></tr>
    <tr><td class="paramname">swarmServiceController</td><td>The value of swarmServiceController.</td></tr>
    <tr><td class="paramname">console</td><td>The value of console.</td></tr>
    <tr><td class="paramname">platformIdentifier</td><td>The value of platformIdentifier.</td></tr>
    <tr><td class="paramname">generalConfigurationOptions</td><td>The IOptions&lt;TOptions&gt; containing the value of generalConfiguration.</td></tr>
    <tr><td class="paramname">swarmConfigurationOptions</td><td>The IOptions&lt;TOptions&gt; containing the value of swarmConfiguration.</td></tr>
    <tr><td class="paramname">internalConfigurationOptions</td><td>The IOptions&lt;TOptions&gt; containing the value of internalConfiguration.</td></tr>
    <tr><td class="paramname">logger</td><td>The value of logger.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00187">187</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  204</span>        {</div>
<div class="line"><span class="lineno">  205</span>            this.instanceFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>));</div>
<div class="line"><span class="lineno">  206</span>            this.ioManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>));</div>
<div class="line"><span class="lineno">  207</span>            this.databaseContextFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>));</div>
<div class="line"><span class="lineno">  208</span>            this.assemblyInformationProvider = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>));</div>
<div class="line"><span class="lineno">  209</span>            this.jobService = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>));</div>
<div class="line"><span class="lineno">  210</span>            this.serverControl = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>));</div>
<div class="line"><span class="lineno">  211</span>            this.systemIdentityFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>));</div>
<div class="line"><span class="lineno">  212</span>            this.asyncDelayer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>));</div>
<div class="line"><span class="lineno">  213</span>            this.serverPortProvider = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>));</div>
<div class="line"><span class="lineno">  214</span>            this.swarmServiceController = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>));</div>
<div class="line"><span class="lineno">  215</span>            this.console = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>));</div>
<div class="line"><span class="lineno">  216</span>            this.platformIdentifier = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>));</div>
<div class="line"><span class="lineno">  217</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa2d14e2052d1ad81104ec0e5afa218e">generalConfiguration</a> = generalConfigurationOptions?.Value ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(generalConfigurationOptions));</div>
<div class="line"><span class="lineno">  218</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a9eaeb3190a96e2d25bdb58dedb00e07f">swarmConfiguration</a> = swarmConfigurationOptions?.Value ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(swarmConfigurationOptions));</div>
<div class="line"><span class="lineno">  219</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4f795602aaedbd15ead5c52c3592483d">internalConfiguration</a> = internalConfigurationOptions?.Value ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(internalConfigurationOptions));</div>
<div class="line"><span class="lineno">  220</span>            this.logger = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>));</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a> = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b">Title</a>;</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a> = <span class="keyword">new</span> Dictionary&lt;long, ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;&gt;();</div>
<div class="line"><span class="lineno">  225</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a> = <span class="keyword">new</span> Dictionary&lt;string, IBridgeHandler&gt;();</div>
<div class="line"><span class="lineno">  226</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a> = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  227</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  228</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  229</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  230</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a16905d984154ab9356b3477dc257f435"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a></div><div class="ttdeci">readonly TaskCompletionSource readyTcs</div><div class="ttdoc">The TaskCompletionSource for Ready.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00141">InstanceManager.cs:141</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a25d96cfaae1f2de6a931a8158b2290c1"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">Tgstation.Server.Host.Components.InstanceManager.instances</a></div><div class="ttdeci">readonly Dictionary&lt; long, ReferenceCountingContainer&lt; IInstance, InstanceWrapper &gt; &gt; instances</div><div class="ttdoc">Map of instance EntityId.Ids to the respective ReferenceCountingContainer&lt;TWrapped,...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00111">InstanceManager.cs:111</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a26a35317eec77d8eed96595fc85f7c4c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a></div><div class="ttdeci">readonly IPlatformIdentifier platformIdentifier</div><div class="ttdoc">The IPlatformIdentifier for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00101">InstanceManager.cs:101</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a4cba827c550b76d41c119b62d25c4668"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">Tgstation.Server.Host.Components.InstanceManager.jobService</a></div><div class="ttdeci">readonly IJobService jobService</div><div class="ttdoc">The IJobService for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00066">InstanceManager.cs:66</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a4f795602aaedbd15ead5c52c3592483d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4f795602aaedbd15ead5c52c3592483d">Tgstation.Server.Host.Components.InstanceManager.internalConfiguration</a></div><div class="ttdeci">readonly InternalConfiguration internalConfiguration</div><div class="ttdoc">The InternalConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00136">InstanceManager.cs:136</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a59bc4b977f9b72208d553fbfa57f118e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">Tgstation.Server.Host.Components.InstanceManager.ioManager</a></div><div class="ttdeci">readonly IIOManager ioManager</div><div class="ttdoc">The IIOManager for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00051">InstanceManager.cs:51</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a7281abf42fbdf74cfbabfe9181ad301e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a></div><div class="ttdeci">readonly ISwarmServiceController swarmServiceController</div><div class="ttdoc">The ISwarmServiceController for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00091">InstanceManager.cs:91</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a76fbe64a7ff3a9fc273ecc05f613ed7c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a></div><div class="ttdeci">readonly CancellationTokenSource startupCancellationTokenSource</div><div class="ttdoc">The CancellationTokenSource for Initialize(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00146">InstanceManager.cs:146</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a914147c0498a9b2482efe956486646fb"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a></div><div class="ttdeci">readonly ISystemIdentityFactory systemIdentityFactory</div><div class="ttdoc">The ISystemIdentityFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00076">InstanceManager.cs:76</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a968fedca8d4cc5ff16c77c0cbc782bda"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">Tgstation.Server.Host.Components.InstanceManager.logger</a></div><div class="ttdeci">readonly ILogger&lt; InstanceManager &gt; logger</div><div class="ttdoc">The ILogger for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00106">InstanceManager.cs:106</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a9eaeb3190a96e2d25bdb58dedb00e07f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a9eaeb3190a96e2d25bdb58dedb00e07f">Tgstation.Server.Host.Components.InstanceManager.swarmConfiguration</a></div><div class="ttdeci">readonly SwarmConfiguration swarmConfiguration</div><div class="ttdoc">The SwarmConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00131">InstanceManager.cs:131</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aa335c25ccb65f93242424c79396a29dc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a></div><div class="ttdeci">readonly IAssemblyInformationProvider assemblyInformationProvider</div><div class="ttdoc">The IAssemblyInformationProvider for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00061">InstanceManager.cs:61</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aaa2d14e2052d1ad81104ec0e5afa218e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa2d14e2052d1ad81104ec0e5afa218e">Tgstation.Server.Host.Components.InstanceManager.generalConfiguration</a></div><div class="ttdeci">readonly GeneralConfiguration generalConfiguration</div><div class="ttdoc">The GeneralConfiguration for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00126">InstanceManager.cs:126</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ab5c8e78bdae6eb6eb2ed289563c639cc"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a></div><div class="ttdeci">readonly IDatabaseContextFactory databaseContextFactory</div><div class="ttdoc">The IDatabaseContextFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00056">InstanceManager.cs:56</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_abaf66550ead757ef3bc6915c9b15d06b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim instanceStateChangeSemaphore</div><div class="ttdoc">SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineIn...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00121">InstanceManager.cs:121</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ac2ba10fddea5448f4c8c08f363a0e391"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">Tgstation.Server.Host.Components.InstanceManager.serverControl</a></div><div class="ttdeci">readonly IServerControl serverControl</div><div class="ttdoc">The IServerControl for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00071">InstanceManager.cs:71</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad5b7e13dc94565671f962eb9fe62fd82"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a></div><div class="ttdeci">readonly IServerPortProvider serverPortProvider</div><div class="ttdoc">The IServerPortProvider for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00086">InstanceManager.cs:86</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad650e598cfd489a215ab0b6dfcc13910"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">Tgstation.Server.Host.Components.InstanceManager.console</a></div><div class="ttdeci">readonly IConsole console</div><div class="ttdoc">The IConsole for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00096">InstanceManager.cs:96</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad66bf7714d6593c0793e5612b60335b8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a></div><div class="ttdeci">readonly? string originalConsoleTitle</div><div class="ttdoc">The original IConsole.Title of console.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00156">InstanceManager.cs:156</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ad6f992fed638980594fd5a6c45b8946b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a></div><div class="ttdeci">readonly IAsyncDelayer asyncDelayer</div><div class="ttdoc">The IAsyncDelayer for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00081">InstanceManager.cs:81</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ae2b48b5197337f7a311fd115951be7f6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a></div><div class="ttdeci">readonly IInstanceFactory instanceFactory</div><div class="ttdoc">The IInstanceFactory for the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00046">InstanceManager.cs:46</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aeb76c23570af139eb50c9091c462ecf9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a></div><div class="ttdeci">readonly CancellationTokenSource shutdownCancellationTokenSource</div><div class="ttdoc">The CancellationTokenSource linked with the token given to StopAsync(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00151">InstanceManager.cs:151</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_af4eafee41a5201cb8f671607b53cc0bd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a></div><div class="ttdeci">readonly Dictionary&lt; string, IBridgeHandler &gt; bridgeHandlers</div><div class="ttdoc">Map of DMApiParameters.AccessIdentifiers to their respective IBridgeHandlers.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00116">InstanceManager.cs:116</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console_html_a555a7fe50697f3b18c5d9081f5f58f4b"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b">Tgstation.Server.Host.IO.IConsole.Title</a></div><div class="ttdeci">string? Title</div><div class="ttdoc">Gets or sets the IConsole window's title. Can return null if getting the console title is not support...</div><div class="ttdef"><b>Definition</b> <a href="_i_console_8cs_source.html#l00014">IConsole.cs:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00061">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00081">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="_instance_manager_8cs_source.html#l00116">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, <a class="el" href="_instance_manager_8cs_source.html#l00096">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00056">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00126">Tgstation.Server.Host.Components.InstanceManager.generalConfiguration</a>, <a class="el" href="_instance_manager_8cs_source.html#l00046">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00111">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00121">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00136">Tgstation.Server.Host.Components.InstanceManager.internalConfiguration</a>, <a class="el" href="_instance_manager_8cs_source.html#l00051">Tgstation.Server.Host.Components.InstanceManager.ioManager</a>, <a class="el" href="_instance_manager_8cs_source.html#l00066">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00156">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a>, <a class="el" href="_instance_manager_8cs_source.html#l00101">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00141">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a>, <a class="el" href="_instance_manager_8cs_source.html#l00071">Tgstation.Server.Host.Components.InstanceManager.serverControl</a>, <a class="el" href="_instance_manager_8cs_source.html#l00086">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00151">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00146">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00131">Tgstation.Server.Host.Components.InstanceManager.swarmConfiguration</a>, <a class="el" href="_instance_manager_8cs_source.html#l00091">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>, <a class="el" href="_instance_manager_8cs_source.html#l00076">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a>, and <a class="el" href="_i_console_8cs_source.html#l00014">Tgstation.Server.Host.IO.IConsole.Title</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3e875f6dd7bf0458e6d54e0dcf7bfe44" name="a3e875f6dd7bf0458e6d54e0dcf7bfe44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e875f6dd7bf0458e6d54e0dcf7bfe44">&#9670;&#160;</a></span>CheckSystemCompatibility()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check we have a valid system and configuration. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00676">676</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  677</span>        {</div>
<div class="line"><span class="lineno">  678</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Running as user: {username}&quot;</span>, Environment.UserName);</div>
<div class="line"><span class="lineno">  679</span> </div>
<div class="line"><span class="lineno">  680</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aaa2d14e2052d1ad81104ec0e5afa218e">generalConfiguration</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a0dff52d3ac52e100397122e63e1337ee">CheckCompatibility</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>);</div>
<div class="line"><span class="lineno">  681</span> </div>
<div class="line"><span class="lineno">  682</span>            <span class="keyword">using</span> (var systemIdentity = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a914147c0498a9b2482efe956486646fb">systemIdentityFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">GetCurrent</a>())</div>
<div class="line"><span class="lineno">  683</span>            {</div>
<div class="line"><span class="lineno">  684</span>                <span class="keywordflow">if</span> (!systemIdentity.CanCreateSymlinks)</div>
<div class="line"><span class="lineno">  685</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException($<span class="stringliteral">&quot;The user running {Constants.CanonicalPackageName} cannot create symlinks! Please try running as an administrative user!&quot;</span>);</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#aa9bf3bd1082b7178f58cb1f36839550e">IsWindows</a> &amp;&amp; systemIdentity.IsSuperUser &amp;&amp; !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4f795602aaedbd15ead5c52c3592483d">internalConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html#a1f50fda278b5586a9bc01c4f50f83f77">UsingDocker</a>)</div>
<div class="line"><span class="lineno">  688</span>                {</div>
<div class="line"><span class="lineno">  689</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;TGS is being run as the root account. This is not recommended.&quot;</span>);</div>
<div class="line"><span class="lineno">  690</span>                }</div>
<div class="line"><span class="lineno">  691</span>            }</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>            <span class="comment">// This runs before the real socket is opened, ensures we don&#39;t perform reattaches unless we&#39;re fairly certain the bind won&#39;t fail</span></div>
<div class="line"><span class="lineno">  694</span>            <span class="comment">// If it does fail, DD will be killed.</span></div>
<div class="line"><span class="lineno">  695</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html">SocketExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de">BindTest</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a26a35317eec77d8eed96595fc85f7c4c">platformIdentifier</a>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad5b7e13dc94565671f962eb9fe62fd82">serverPortProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html#af5e86a67c2cc59e14c762532275f0a2c">HttpApiPort</a>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  696</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration_html_a0dff52d3ac52e100397122e63e1337ee"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a0dff52d3ac52e100397122e63e1337ee">Tgstation.Server.Host.Configuration.GeneralConfiguration.CheckCompatibility</a></div><div class="ttdeci">void CheckCompatibility(ILogger logger)</div><div class="ttdoc">Validates the current ConfigVersion's compatibility and provides migration instructions.</div><div class="ttdef"><b>Definition</b> <a href="_general_configuration_8cs_source.html#l00168">GeneralConfiguration.cs:168</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration_html_a1f50fda278b5586a9bc01c4f50f83f77"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html#a1f50fda278b5586a9bc01c4f50f83f77">Tgstation.Server.Host.Configuration.InternalConfiguration.UsingDocker</a></div><div class="ttdeci">bool UsingDocker</div><div class="ttdoc">If the server is running inside of a Docker container.</div><div class="ttdef"><b>Definition</b> <a href="_internal_configuration_8cs_source.html#l00031">InternalConfiguration.cs:31</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html">Tgstation.Server.Host.Extensions.SocketExtensions</a></div><div class="ttdoc">Extension methods for the Socket class.</div><div class="ttdef"><b>Definition</b> <a href="_socket_extensions_8cs_source.html#l00012">SocketExtensions.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions_html_ad87cda4241401c1a92afb27242c2e0de"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de">Tgstation.Server.Host.Extensions.SocketExtensions.BindTest</a></div><div class="ttdeci">static void BindTest(IPlatformIdentifier platformIdentifier, ushort port, bool includeIPv6, bool udp)</div><div class="ttdoc">Attempt to exclusively bind to a given port .</div><div class="ttdef"><b>Definition</b> <a href="_socket_extensions_8cs_source.html#l00021">SocketExtensions.cs:21</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider_html_af5e86a67c2cc59e14c762532275f0a2c"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html#af5e86a67c2cc59e14c762532275f0a2c">Tgstation.Server.Host.Core.IServerPortProvider.HttpApiPort</a></div><div class="ttdeci">ushort HttpApiPort</div><div class="ttdoc">The port the server listens on.</div><div class="ttdef"><b>Definition</b> <a href="_i_server_port_provider_8cs_source.html#l00011">IServerPortProvider.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory_html_a6052301d3f6ed6eb477f74a081e2187e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">Tgstation.Server.Host.Security.ISystemIdentityFactory.GetCurrent</a></div><div class="ttdeci">ISystemIdentity GetCurrent()</div><div class="ttdoc">Retrieves a ISystemIdentity representing the user executing tgstation-server.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier_html_aa9bf3bd1082b7178f58cb1f36839550e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html#aa9bf3bd1082b7178f58cb1f36839550e">Tgstation.Server.Host.System.IPlatformIdentifier.IsWindows</a></div><div class="ttdeci">bool IsWindows</div><div class="ttdoc">If the current platform is a Windows platform.</div><div class="ttdef"><b>Definition</b> <a href="_i_platform_identifier_8cs_source.html#l00014">IPlatformIdentifier.cs:14</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_socket_extensions_8cs_source.html#l00021">Tgstation.Server.Host.Extensions.SocketExtensions.BindTest()</a>, <a class="el" href="_general_configuration_8cs_source.html#l00168">Tgstation.Server.Host.Configuration.GeneralConfiguration.CheckCompatibility()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00126">Tgstation.Server.Host.Components.InstanceManager.generalConfiguration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e">Tgstation.Server.Host.Security.ISystemIdentityFactory.GetCurrent()</a>, <a class="el" href="_i_server_port_provider_8cs_source.html#l00011">Tgstation.Server.Host.Core.IServerPortProvider.HttpApiPort</a>, <a class="el" href="_instance_manager_8cs_source.html#l00136">Tgstation.Server.Host.Components.InstanceManager.internalConfiguration</a>, <a class="el" href="_i_platform_identifier_8cs_source.html#l00014">Tgstation.Server.Host.System.IPlatformIdentifier.IsWindows</a>, <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00101">Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00086">Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00076">Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</a>, and <a class="el" href="_internal_configuration_8cs_source.html#l00031">Tgstation.Server.Host.Configuration.InternalConfiguration.UsingDocker</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a3e875f6dd7bf0458e6d54e0dcf7bfe44_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a3e875f6dd7bf0458e6d54e0dcf7bfe44_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a3e875f6dd7bf0458e6d54e0dcf7bfe44_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a3e875f6dd7bf0458e6d54e0dcf7bfe44_cgraph">
<area shape="rect" title="Check we have a valid system and configuration." alt="" coords="5,78,285,119"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="352,13,569,54"/>
<area shape="poly" title=" " alt="" coords="246,75,343,55,344,60,247,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a0dff52d3ac52e100397122e63e1337ee" title="Validates the current ConfigVersion&#39;s compatibility and provides migration instructions." alt="" coords="333,78,588,119"/>
<area shape="poly" title=" " alt="" coords="285,96,317,96,317,101,285,101"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="350,144,571,184"/>
<area shape="poly" title=" " alt="" coords="247,117,344,137,343,142,246,122"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="636,5,875,61"/>
<area shape="poly" title=" " alt="" coords="569,31,621,31,621,36,569,36"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a3e875f6dd7bf0458e6d54e0dcf7bfe44_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a3e875f6dd7bf0458e6d54e0dcf7bfe44_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a3e875f6dd7bf0458e6d54e0dcf7bfe44_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a3e875f6dd7bf0458e6d54e0dcf7bfe44_icgraph">
<area shape="rect" title="Check we have a valid system and configuration." alt="" coords="554,5,833,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="539,28,507,28,507,23,539,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="a72f7ed3869c2397df900e5745be0befc" name="a72f7ed3869c2397df900e5745be0befc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72f7ed3869c2397df900e5745be0befc">&#9670;&#160;</a></span>DisposeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.DisposeAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00233">233</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  234</span>        {</div>
<div class="line"><span class="lineno">  235</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  236</span>            {</div>
<div class="line"><span class="lineno">  237</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a>)</div>
<div class="line"><span class="lineno">  238</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  239</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">disposed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  240</span>            }</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>            <span class="keywordflow">foreach</span> (var instanceKvp <span class="keywordflow">in</span> <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  243</span>                await instanceKvp.Value.Instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  246</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Dispose();</div>
<div class="line"><span class="lineno">  247</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Dispose();</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Server shutdown&quot;</span>);</div>
<div class="line"><span class="lineno">  250</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a6ba869dae354db235f8518f7283a531c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a6ba869dae354db235f8518f7283a531c">Tgstation.Server.Host.Components.InstanceManager.disposed</a></div><div class="ttdeci">bool disposed</div><div class="ttdoc">If the InstanceManager has been DisposeAsync'd.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00166">InstanceManager.cs:166</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00166">Tgstation.Server.Host.Components.InstanceManager.disposed</a>, <a class="el" href="_instance_manager_8cs_source.html#l00111">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00121">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00151">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00146">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>.</p>

</div>
</div>
<a id="add11622918bcaebdf64e69c29e8ac255" name="add11622918bcaebdf64e69c29e8ac255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add11622918bcaebdf64e69c29e8ac255">&#9670;&#160;</a></span>GetInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html">IInstanceCore</a>? Tgstation.Server.Host.Components.InstanceManager.GetInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for a given <em>instance</em>  if it's online.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> to get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core.html" title="For interacting with the instance services.">IInstanceCore</a> if it is online, <code>null</code> otherwise.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_core_provider.html#a1d37bed2b441cbf13a1db7edfa408270">Tgstation.Server.Host.Components.IInstanceCoreProvider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00585">585</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  586</span>        {</div>
<div class="line"><span class="lineno">  587</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  588</span>            {</div>
<div class="line"><span class="lineno">  589</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(metadata.Require(x =&gt; x.Id), out var container);</div>
<div class="line"><span class="lineno">  590</span>                <span class="keywordflow">return</span> container?.Instance;</div>
<div class="line"><span class="lineno">  591</span>            }</div>
<div class="line"><span class="lineno">  592</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00111">Tgstation.Server.Host.Components.InstanceManager.instances</a>.</p>

</div>
</div>
<a id="ace09fda238b33ebe9c75aa9ca8678466" name="ace09fda238b33ebe9c75aa9ca8678466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace09fda238b33ebe9c75aa9ca8678466">&#9670;&#160;</a></span>GetInstanceReference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html">IInstanceReference</a>? Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api::Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_reference.html" title="Controller version of IInstanceCore.">IInstanceReference</a> associated with given <em>metadata</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> associated with the given <em>metadata</em>  if it is online, <code>null</code> otherwise.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#ac2e926ff84623c496393880b5a8ada61">Tgstation.Server.Host.Components.IInstanceManager</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00253">253</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  254</span>        {</div>
<div class="line"><span class="lineno">  255</span>            ArgumentNullException.ThrowIfNull(metadata);</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  258</span>            {</div>
<div class="line"><span class="lineno">  259</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(metadata.Require(x =&gt; x.Id), out var instance))</div>
<div class="line"><span class="lineno">  260</span>                    <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>                <span class="keywordflow">return</span> instance.AddReference();</div>
<div class="line"><span class="lineno">  263</span>            }</div>
<div class="line"><span class="lineno">  264</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00111">Tgstation.Server.Host.Components.InstanceManager.instances</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00267">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ace09fda238b33ebe9c75aa9ca8678466_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ace09fda238b33ebe9c75aa9ca8678466_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ace09fda238b33ebe9c75aa9ca8678466_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ace09fda238b33ebe9c75aa9ca8678466_icgraph">
<area shape="rect" title="Get the IInstanceReference associated with given metadata .The IInstance associated with the given me..." alt="" coords="280,5,534,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad3dc0cfcb7f415f1dd8a98bfd018f90e" title="Move an IInstance.A ValueTask representing the running operation." alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="aa70355ebb8437fd170e4f75e826f1ad7" name="aa70355ebb8437fd170e4f75e826f1ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa70355ebb8437fd170e4f75e826f1ad7">&#9670;&#160;</a></span>Initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.InstanceManager.Initialize </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the InstanceManager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00599">599</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  600</span>        {</div>
<div class="line"><span class="lineno">  601</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  602</span>            {</div>
<div class="line"><span class="lineno">  603</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;{versionString}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">VersionString</a>);</div>
<div class="line"><span class="lineno">  604</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">SetTitle</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa335c25ccb65f93242424c79396a29dc">assemblyInformationProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">VersionString</a>);</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a3e875f6dd7bf0458e6d54e0dcf7bfe44">CheckSystemCompatibility</a>();</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>                <span class="comment">// To let the web server startup immediately before we do any intense work</span></div>
<div class="line"><span class="lineno">  609</span>                await Task.Yield();</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">InitializeSwarm</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  612</span> </div>
<div class="line"><span class="lineno">  613</span>                <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">List</a>&lt;Models.Instance&gt;? dbInstances = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  614</span> </div>
<div class="line"><span class="lineno">  615</span>                async ValueTask EnumerateInstances(<a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">IDatabaseContext</a> databaseContext)</div>
<div class="line"><span class="lineno">  616</span>                    =&gt; dbInstances = await databaseContext</div>
<div class="line"><span class="lineno">  617</span>                        .Instances</div>
<div class="line"><span class="lineno">  618</span>                        .AsQueryable()</div>
<div class="line"><span class="lineno">  619</span>                        .Where(x =&gt; x.Online!.Value &amp;&amp; x.SwarmIdentifer == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a9eaeb3190a96e2d25bdb58dedb00e07f">swarmConfiguration</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Identifier</a>)</div>
<div class="line"><span class="lineno">  620</span>                        .Include(x =&gt; x.RepositorySettings)</div>
<div class="line"><span class="lineno">  621</span>                        .Include(x =&gt; x.ChatSettings)</div>
<div class="line"><span class="lineno">  622</span>                            .ThenInclude(x =&gt; x.Channels)</div>
<div class="line"><span class="lineno">  623</span>                        .Include(x =&gt; x.DreamDaemonSettings)</div>
<div class="line"><span class="lineno">  624</span>                        .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>                var instanceEnumeration = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(EnumerateInstances);</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>                var factoryStartup = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  629</span>                var jobManagerStartup = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  630</span> </div>
<div class="line"><span class="lineno">  631</span>                await Task.WhenAll(instanceEnumeration.AsTask(), factoryStartup, jobManagerStartup);</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>                var instanceOnliningTasks = dbInstances!.Select(</div>
<div class="line"><span class="lineno">  634</span>                    async metadata =&gt;</div>
<div class="line"><span class="lineno">  635</span>                    {</div>
<div class="line"><span class="lineno">  636</span>                        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  637</span>                        {</div>
<div class="line"><span class="lineno">  638</span>                            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">OnlineInstance</a>(metadata, cancellationToken);</div>
<div class="line"><span class="lineno">  639</span>                        }</div>
<div class="line"><span class="lineno">  640</span>                        <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  641</span>                        {</div>
<div class="line"><span class="lineno">  642</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(ex, <span class="stringliteral">&quot;Failed to online instance {instanceId}!&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  643</span>                        }</div>
<div class="line"><span class="lineno">  644</span>                    });</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>                await Task.WhenAll(instanceOnliningTasks);</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Server ready!&quot;</span>);</div>
<div class="line"><span class="lineno">  649</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a16905d984154ab9356b3477dc257f435">readyTcs</a>.SetResult();</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>                <span class="comment">// this needs to happen after the HTTP API opens with readyTcs otherwise it can race and cause failed bridge requests with 503&#39;s</span></div>
<div class="line"><span class="lineno">  652</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Activate</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  653</span>            }</div>
<div class="line"><span class="lineno">  654</span>            <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  655</span>            {</div>
<div class="line"><span class="lineno">  656</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(ex, <span class="stringliteral">&quot;Cancelled instance manager initialization!&quot;</span>);</div>
<div class="line"><span class="lineno">  657</span>            }</div>
<div class="line"><span class="lineno">  658</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e)</div>
<div class="line"><span class="lineno">  659</span>            {</div>
<div class="line"><span class="lineno">  660</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(e, <span class="stringliteral">&quot;Instance manager startup error!&quot;</span>);</div>
<div class="line"><span class="lineno">  661</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  662</span>                {</div>
<div class="line"><span class="lineno">  663</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ac2ba10fddea5448f4c8c08f363a0e391">serverControl</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Die</a>(e);</div>
<div class="line"><span class="lineno">  664</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  665</span>                }</div>
<div class="line"><span class="lineno">  666</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> e2)</div>
<div class="line"><span class="lineno">  667</span>                {</div>
<div class="line"><span class="lineno">  668</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(e2, <span class="stringliteral">&quot;Failed to kill server!&quot;</span>);</div>
<div class="line"><span class="lineno">  669</span>                }</div>
<div class="line"><span class="lineno">  670</span>            }</div>
<div class="line"><span class="lineno">  671</span>        }</div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server_html_af98e4f47f1aa632ead02ed80695ce836"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_swarm_server.html#af98e4f47f1aa632ead02ed80695ce836">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a></div><div class="ttdeci">string? Identifier</div><div class="ttdoc">The server's identifier.</div><div class="ttdef"><b>Definition</b> <a href="_swarm_server_8cs_source.html#l00026">SwarmServer.cs:26</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a3e875f6dd7bf0458e6d54e0dcf7bfe44"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a3e875f6dd7bf0458e6d54e0dcf7bfe44">Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility</a></div><div class="ttdeci">void CheckSystemCompatibility()</div><div class="ttdoc">Check we have a valid system and configuration.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00676">InstanceManager.cs:676</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a4dc85f42ec73bd6fd72085969a7c4cb5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance</a></div><div class="ttdeci">async ValueTask OnlineInstance(Models.Instance metadata, CancellationToken cancellationToken)</div><div class="ttdoc">Online an IInstance.A ValueTask representing the running operation.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00404">InstanceManager.cs:404</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ae64238c09aa5b3301d05109ceee5d09e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm</a></div><div class="ttdeci">async ValueTask InitializeSwarm(CancellationToken cancellationToken)</div><div class="ttdoc">Initializes the connection to the TGS swarm.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00703">InstanceManager.cs:703</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control_html_adb01d302ec13ad32897ae83be130afd0"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Tgstation.Server.Host.Core.IServerControl.Die</a></div><div class="ttdeci">ValueTask Die(Exception? exception)</div><div class="ttdoc">Kill the server with a fatal exception.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory_html_a1da664d7237dbec5a6cb9ce04b79ccc1"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext</a></div><div class="ttdeci">ValueTask UseContext(Func&lt; IDatabaseContext, ValueTask &gt; operation)</div><div class="ttdoc">Run an operation  in the scope of an IDatabaseContext.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context.html">Tgstation.Server.Host.Database.IDatabaseContext</a></div><div class="ttdoc">Represents the database.</div><div class="ttdef"><b>Definition</b> <a href="_i_database_context_8cs_source.html#l00016">IDatabaseContext.cs:17</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console_html_abcec01af471cee5fce210b9fbcb2fa74"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle</a></div><div class="ttdeci">void SetTitle(string newTitle)</div><div class="ttdoc">Sets a newTitle  console window.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service_html_a23de62961f3d9eb3db05d4db8c409bac"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Tgstation.Server.Host.Jobs.IJobService.Activate</a></div><div class="ttdeci">void Activate(IInstanceCoreProvider instanceCoreProvider)</div><div class="ttdoc">Activate the IJobManager.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider_html_abd6db0f6e1ea9273baeacaa66ae81fa3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#abd6db0f6e1ea9273baeacaa66ae81fa3">Tgstation.Server.Host.System.IAssemblyInformationProvider.VersionString</a></div><div class="ttdeci">string VersionString</div><div class="ttdoc">A more verbose version of Version.</div><div class="ttdef"><b>Definition</b> <a href="_i_assembly_information_provider_8cs_source.html#l00030">IAssemblyInformationProvider.cs:30</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a691a59767073bc7dff0f17b809d07b0ca4ee29ca12c7d126654bd0e5275de6135">Tgstation.Server.Api.Rights.ConfigurationRights.List</a></div><div class="ttdeci">@ List</div><div class="ttdoc">User may list files if the Models.Instance allows it.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac">Tgstation.Server.Host.Jobs.IJobService.Activate()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00061">Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</a>, <a class="el" href="_instance_manager_8cs_source.html#l00676">Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00096">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00056">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0">Tgstation.Server.Host.Core.IServerControl.Die()</a>, <a class="el" href="_swarm_server_8cs_source.html#l00026">Tgstation.Server.Api.Models.Internal.SwarmServer.Identifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00703">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00046">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_i_database_context_8cs_source.html#l00026">Tgstation.Server.Host.Database.IDatabaseContext.Instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00066">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00404">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00141">Tgstation.Server.Host.Components.InstanceManager.readyTcs</a>, <a class="el" href="_instance_manager_8cs_source.html#l00071">Tgstation.Server.Host.Components.InstanceManager.serverControl</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00131">Tgstation.Server.Host.Components.InstanceManager.swarmConfiguration</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext()</a>, and <a class="el" href="_i_assembly_information_provider_8cs_source.html#l00030">Tgstation.Server.Host.System.IAssemblyInformationProvider.VersionString</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00454">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_cgraph">
<area shape="rect" title="Initializes the InstanceManager." alt="" coords="5,274,232,315"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac" title="Activate the IJobManager." alt="" coords="329,78,510,119"/>
<area shape="poly" title=" " alt="" coords="132,272,190,202,231,163,278,130,313,114,315,119,281,134,235,167,194,205,136,276"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a3e875f6dd7bf0458e6d54e0dcf7bfe44" title="Check we have a valid system and configuration." alt="" coords="280,144,559,184"/>
<area shape="poly" title=" " alt="" coords="146,271,206,233,279,195,300,187,302,192,281,200,208,237,149,276"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0" title="Kill the server with a fatal exception." alt="" coords="329,209,510,250"/>
<area shape="poly" title=" " alt="" coords="215,271,313,249,314,255,216,276"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e" title="Initializes the connection to the TGS swarm." alt="" coords="306,274,533,315"/>
<area shape="poly" title=" " alt="" coords="232,292,291,292,291,297,232,297"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="306,340,533,380"/>
<area shape="poly" title=" " alt="" coords="216,313,308,333,307,338,215,318"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="336,405,503,446"/>
<area shape="poly" title=" " alt="" coords="149,313,208,352,281,389,321,403,320,408,279,394,206,356,146,318"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="300,470,539,511"/>
<area shape="poly" title=" " alt="" coords="136,313,194,384,235,422,281,455,294,461,292,466,278,459,231,426,190,387,132,317"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="627,13,843,54"/>
<area shape="poly" title=" " alt="" coords="534,141,557,128,573,113,581,97,589,81,605,64,615,58,618,63,609,69,593,84,585,100,577,117,561,133,537,145"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a0dff52d3ac52e100397122e63e1337ee" title="Validates the current ConfigVersion&#39;s compatibility and provides migration instructions." alt="" coords="607,78,862,119"/>
<area shape="poly" title=" " alt="" coords="520,140,618,120,619,125,521,146"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="625,144,845,184"/>
<area shape="poly" title=" " alt="" coords="560,161,609,161,609,167,560,167"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="910,5,1150,61"/>
<area shape="poly" title=" " alt="" coords="843,31,895,31,895,36,843,36"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977" title="Create a Task that completes after a given timeSpan ." alt="" coords="645,209,825,250"/>
<area shape="poly" title=" " alt="" coords="520,271,629,248,630,253,521,276"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="627,274,842,315"/>
<area shape="poly" title=" " alt="" coords="533,292,612,292,612,297,533,297"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="622,340,848,380"/>
<area shape="poly" title=" " alt="" coords="533,357,606,357,606,363,533,363"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="640,405,829,446"/>
<area shape="poly" title=" " alt="" coords="521,378,625,400,624,405,520,383"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa70355ebb8437fd170e4f75e826f1ad7_icgraph">
<area shape="rect" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ae64238c09aa5b3301d05109ceee5d09e" name="ae64238c09aa5b3301d05109ceee5d09e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae64238c09aa5b3301d05109ceee5d09e">&#9670;&#160;</a></span>InitializeSwarm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the connection to the TGS swarm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00703">703</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  704</span>        {</div>
<div class="line"><span class="lineno">  705</span>            <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a> registrationResult;</div>
<div class="line"><span class="lineno">  706</span>            <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  707</span>            {</div>
<div class="line"><span class="lineno">  708</span>                registrationResult = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Initialize</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  709</span> </div>
<div class="line"><span class="lineno">  710</span>                <span class="keywordflow">if</span> (registrationResult == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Unauthorized)</div>
<div class="line"><span class="lineno">  711</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Swarm private key does not match the swarm controller&#39;s!&quot;</span>);</div>
<div class="line"><span class="lineno">  712</span> </div>
<div class="line"><span class="lineno">  713</span>                <span class="keywordflow">if</span> (registrationResult == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.VersionMismatch)</div>
<div class="line"><span class="lineno">  714</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Swarm controller&#39;s TGS version does not match our own!&quot;</span>);</div>
<div class="line"><span class="lineno">  715</span> </div>
<div class="line"><span class="lineno">  716</span>                <span class="keywordflow">if</span> (registrationResult != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Success)</div>
<div class="line"><span class="lineno">  717</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977">Delay</a>(TimeSpan.FromSeconds(5), cancellationToken);</div>
<div class="line"><span class="lineno">  718</span>            }</div>
<div class="line"><span class="lineno">  719</span>            <span class="keywordflow">while</span> (registrationResult != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">SwarmRegistrationResult</a>.Success &amp;&amp; !cancellationToken.IsCancellationRequested);</div>
<div class="line"><span class="lineno">  720</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller_html_ad07d54ac504afa080dab8b4e37115439"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Tgstation.Server.Host.Swarm.ISwarmServiceController.Initialize</a></div><div class="ttdeci">ValueTask&lt; SwarmRegistrationResult &gt; Initialize(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to register with the swarm controller if not one, sets up the database otherwise.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer_html_aeb604334bd297d47506dc23e0d115977"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay</a></div><div class="ttdeci">Task Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan .</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_swarm_html_acfc07eda2ac8eff75a6eef3f90bdf3e0"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_swarm.html#acfc07eda2ac8eff75a6eef3f90bdf3e0">Tgstation.Server.Host.Swarm.SwarmRegistrationResult</a></div><div class="ttdeci">SwarmRegistrationResult</div><div class="ttdoc">Result of attempting to register with a swarm controller.</div><div class="ttdef"><b>Definition</b> <a href="_swarm_registration_result_8cs_source.html#l00006">SwarmRegistrationResult.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00081">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439">Tgstation.Server.Host.Swarm.ISwarmServiceController.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00091">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_cgraph">
<area shape="rect" title="Initializes the connection to the TGS swarm." alt="" coords="5,39,232,79"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977" title="Create a Task that completes after a given timeSpan ." alt="" coords="297,5,478,46"/>
<area shape="poly" title=" " alt="" coords="232,42,282,36,282,41,233,48"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="280,71,495,111"/>
<area shape="poly" title=" " alt="" coords="233,70,265,74,264,79,232,75"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ae64238c09aa5b3301d05109ceee5d09e_icgraph">
<area shape="rect" title="Initializes the connection to the TGS swarm." alt="" coords="554,5,780,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="538,28,507,28,507,23,538,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ad3dc0cfcb7f415f1dd8a98bfd018f90e" name="ad3dc0cfcb7f415f1dd8a98bfd018f90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3dc0cfcb7f415f1dd8a98bfd018f90e">&#9670;&#160;</a></span>MoveInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.MoveInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>oldPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a> with the updated path.</td></tr>
    <tr><td class="paramname">oldPath</td><td>The old path of the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>. <em>metadata</em>  will have this set on <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html#a833e5307625344be5429bcccca5b4318" title="The path to where the Instance is located. Can only be changed while the Instance is offline....">Api.Models.Instance.Path</a> if the operation fails.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a8aaa4081d257b5fb39bb09ffd07383ff">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00267">267</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  268</span>        {</div>
<div class="line"><span class="lineno">  269</span>            ArgumentNullException.ThrowIfNull(oldPath);</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>            <span class="keyword">using </span>var lockContext = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  272</span>            <span class="keyword">using </span>var instanceReferenceCheck = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ace09fda238b33ebe9c75aa9ca8678466">GetInstanceReference</a>(instance);</div>
<div class="line"><span class="lineno">  273</span>            <span class="keywordflow">if</span> (instanceReferenceCheck != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  274</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot move an online instance!&quot;</span>);</div>
<div class="line"><span class="lineno">  275</span>            var newPath = instance.Path!;</div>
<div class="line"><span class="lineno">  276</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  277</span>            {</div>
<div class="line"><span class="lineno">  278</span>                await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">MoveDirectory</a>(oldPath, newPath, cancellationToken);</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>                <span class="comment">// Delete the Game directory to clear out broken symlinks</span></div>
<div class="line"><span class="lineno">  281</span>                var instanceGameIOManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">CreateGameIOManager</a>(instance);</div>
<div class="line"><span class="lineno">  282</span>                await instanceGameIOManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">DeleteDirectory</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html">DefaultIOManager</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html#a984a32ee93a073036f63d543ad9a6cdd">CurrentDirectory</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  283</span>            }</div>
<div class="line"><span class="lineno">  284</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  285</span>            {</div>
<div class="line"><span class="lineno">  286</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(</div>
<div class="line"><span class="lineno">  287</span>                    ex,</div>
<div class="line"><span class="lineno">  288</span>                    <span class="stringliteral">&quot;Error moving instance {instanceId}!&quot;</span>,</div>
<div class="line"><span class="lineno">  289</span>                    instance.Id);</div>
<div class="line"><span class="lineno">  290</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  291</span>                {</div>
<div class="line"><span class="lineno">  292</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Reverting instance {instanceId}&#39;s path to {oldPath} in the DB...&quot;</span>, instance.Id, oldPath);</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>                    <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  295</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">UseContextTaskReturn</a>(db =&gt;</div>
<div class="line"><span class="lineno">  296</span>                    {</div>
<div class="line"><span class="lineno">  297</span>                        var targetInstance = <span class="keyword">new</span> Models.Instance</div>
<div class="line"><span class="lineno">  298</span>                        {</div>
<div class="line"><span class="lineno">  299</span>                            <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Id</a> = instance.Id,</div>
<div class="line"><span class="lineno">  300</span>                        };</div>
<div class="line"><span class="lineno">  301</span>                        db.Instances.Attach(targetInstance);</div>
<div class="line"><span class="lineno">  302</span>                        targetInstance.Path = oldPath;</div>
<div class="line"><span class="lineno">  303</span>                        <span class="keywordflow">return</span> db.Save(CancellationToken.None);</div>
<div class="line"><span class="lineno">  304</span>                    });</div>
<div class="line"><span class="lineno">  305</span>                }</div>
<div class="line"><span class="lineno">  306</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> innerEx)</div>
<div class="line"><span class="lineno">  307</span>                {</div>
<div class="line"><span class="lineno">  308</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(</div>
<div class="line"><span class="lineno">  309</span>                        innerEx,</div>
<div class="line"><span class="lineno">  310</span>                        <span class="stringliteral">&quot;Error reverting database after failing to move instance {instanceId}! Attempting to detach...&quot;</span>,</div>
<div class="line"><span class="lineno">  311</span>                        instance.Id);</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  314</span>                    {</div>
<div class="line"><span class="lineno">  315</span>                        <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  316</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">WriteAllBytes</a>(</div>
<div class="line"><span class="lineno">  317</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a59bc4b977f9b72208d553fbfa57f118e">ioManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(oldPath, <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">InstanceController</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">InstanceAttachFileName</a>),</div>
<div class="line"><span class="lineno">  318</span>                            Array.Empty&lt;<span class="keywordtype">byte</span>&gt;(),</div>
<div class="line"><span class="lineno">  319</span>                            CancellationToken.None);</div>
<div class="line"><span class="lineno">  320</span>                    }</div>
<div class="line"><span class="lineno">  321</span>                    <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> tripleEx)</div>
<div class="line"><span class="lineno">  322</span>                    {</div>
<div class="line"><span class="lineno">  323</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(</div>
<div class="line"><span class="lineno">  324</span>                            tripleEx,</div>
<div class="line"><span class="lineno">  325</span>                            <span class="stringliteral">&quot;Okay, what gamma radiation are you under? Failed to write instance attach file!&quot;</span>);</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(tripleEx, innerEx, ex);</div>
<div class="line"><span class="lineno">  328</span>                    }</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(ex, innerEx);</div>
<div class="line"><span class="lineno">  331</span>                }</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  334</span>            }</div>
<div class="line"><span class="lineno">  335</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_ace09fda238b33ebe9c75aa9ca8678466"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ace09fda238b33ebe9c75aa9ca8678466">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference</a></div><div class="ttdeci">IInstanceReference? GetInstanceReference(Api.Models.Instance metadata)</div><div class="ttdoc">Get the IInstanceReference associated with given metadata .The IInstance associated with the given me...</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00253">InstanceManager.cs:253</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html">Tgstation.Server.Host.Controllers.InstanceController</a></div><div class="ttdoc">ApiController for managing Components.Instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_controller_8cs_source.html#l00042">InstanceController.cs:43</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller_html_aa40d55750e2193d714eb1470505c47ee"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_controllers_1_1_instance_controller.html#aa40d55750e2193d714eb1470505c47ee">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a></div><div class="ttdeci">const string InstanceAttachFileName</div><div class="ttdoc">File name to allow attaching instances.</div><div class="ttdef"><b>Definition</b> <a href="_instance_controller_8cs_source.html#l00047">InstanceController.cs:47</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html">Tgstation.Server.Host.IO.DefaultIOManager</a></div><div class="ttdoc">IIOManager that resolves paths to Environment.CurrentDirectory.</div><div class="ttdef"><b>Definition</b> <a href="_default_i_o_manager_8cs_source.html#l00016">DefaultIOManager.cs:17</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager_html_a984a32ee93a073036f63d543ad9a6cdd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_default_i_o_manager.html#a984a32ee93a073036f63d543ad9a6cdd">Tgstation.Server.Host.IO.DefaultIOManager.CurrentDirectory</a></div><div class="ttdeci">const string CurrentDirectory</div><div class="ttdoc">Path to the current working directory for the IIOManager.</div><div class="ttdef"><b>Definition</b> <a href="_default_i_o_manager_8cs_source.html#l00021">DefaultIOManager.cs:21</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">Tgstation.Server.Host.Utils.SemaphoreSlimContext</a></div><div class="ttdoc">Async lock context helper.</div><div class="ttdef"><b>Definition</b> <a href="_semaphore_slim_context_8cs_source.html#l00010">SemaphoreSlimContext.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html_a29773d588476671bbe480f096d839c91"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock</a></div><div class="ttdeci">static async ValueTask&lt; SemaphoreSlimContext &gt; Lock(SemaphoreSlim semaphore, CancellationToken cancellationToken)</div><div class="ttdoc">Asyncronously locks a semaphore .</div><div class="ttdef"><b>Definition</b> <a href="_semaphore_slim_context_8cs_source.html#l00018">SemaphoreSlimContext.cs:18</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory_html_a88417ce87f3416974c7b7d7ef4ed5a58"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">Tgstation.Server.Host.Components.IInstanceFactory.CreateGameIOManager</a></div><div class="ttdeci">IIOManager CreateGameIOManager(Models.Instance metadata)</div><div class="ttdoc">Create an IIOManager that resolves to the &quot;Game&quot; directory of the Models.Instance defined by metadata...</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory_html_a0804dcd2b607f4e8c5b46c8c05f04926"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContextTaskReturn</a></div><div class="ttdeci">ValueTask UseContextTaskReturn(Func&lt; IDatabaseContext, Task &gt; operation)</div><div class="ttdoc">Run an operation  in the scope of an IDatabaseContext.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a9aeb8b83ea3f4b13a183b6ac55b35a70"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes</a></div><div class="ttdeci">ValueTask WriteAllBytes(string path, byte[] contents, CancellationToken cancellationToken)</div><div class="ttdoc">Writes some contents  to a file at path  overwriting previous content.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad3e0dda4b7fbad4c77f48ba3b2681dc7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">Tgstation.Server.Host.IO.IIOManager.DeleteDirectory</a></div><div class="ttdeci">Task DeleteDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Recursively delete a directory, removes and does not enter any symlinks encounterd.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_ad8dc6ae8e69047b801a7344b17d0cc37"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">Tgstation.Server.Host.IO.IIOManager.MoveDirectory</a></div><div class="ttdeci">Task MoveDirectory(string source, string destination, CancellationToken cancellationToken)</div><div class="ttdoc">Moves a directory at source  to destination .</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_authority_html_a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_authority.html#a6055c0b2bf09442f677be3ed1eb725d5a490aa6e856ccf208a054389e47ce0d06">Tgstation.Server.Host.Authority.PermissionSetLookupType.Id</a></div><div class="ttdeci">@ Id</div><div class="ttdoc">Lookup the Api.Models.EntityId.Id of the Models.PermissionSet.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58">Tgstation.Server.Host.Components.IInstanceFactory.CreateGameIOManager()</a>, <a class="el" href="_default_i_o_manager_8cs_source.html#l00021">Tgstation.Server.Host.IO.DefaultIOManager.CurrentDirectory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00056">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7">Tgstation.Server.Host.IO.IIOManager.DeleteDirectory()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00253">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference()</a>, <a class="el" href="_instance_controller_8cs_source.html#l00047">Tgstation.Server.Host.Controllers.InstanceController.InstanceAttachFileName</a>, <a class="el" href="_instance_manager_8cs_source.html#l00046">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00121">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00051">Tgstation.Server.Host.Components.InstanceManager.ioManager</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37">Tgstation.Server.Host.IO.IIOManager.MoveDirectory()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContextTaskReturn()</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70">Tgstation.Server.Host.IO.IIOManager.WriteAllBytes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad3dc0cfcb7f415f1dd8a98bfd018f90e_cgraph">
<area shape="rect" title="Move an IInstance.A ValueTask representing the running operation." alt="" coords="5,235,232,275"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="325,5,493,46"/>
<area shape="poly" title=" " alt="" coords="129,233,151,195,185,147,227,98,278,57,309,42,311,46,281,61,231,102,189,150,156,198,133,236"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#a88417ce87f3416974c7b7d7ef4ed5a58" title="Create an IIOManager that resolves to the &quot;Game&quot; directory of the Models.Instance defined by metadata..." alt="" coords="280,71,538,111"/>
<area shape="poly" title=" " alt="" coords="138,232,197,177,236,147,278,122,294,115,296,120,281,127,239,152,201,181,141,236"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad3e0dda4b7fbad4c77f48ba3b2681dc7" title="Recursively delete a directory, removes and does not enter any symlinks encounterd." alt="" coords="319,136,499,177"/>
<area shape="poly" title=" " alt="" coords="165,232,279,187,306,179,307,184,281,192,167,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ace09fda238b33ebe9c75aa9ca8678466" title="Get the IInstanceReference associated with given metadata .The IInstance associated with the given me..." alt="" coords="282,201,536,242"/>
<area shape="poly" title=" " alt="" coords="232,239,266,235,267,241,233,245"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="314,267,504,307"/>
<area shape="poly" title=" " alt="" coords="233,265,299,272,299,278,232,270"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#ad8dc6ae8e69047b801a7344b17d0cc37" title="Moves a directory at source &#160;to destination ." alt="" coords="321,332,497,373"/>
<area shape="poly" title=" " alt="" coords="168,273,281,316,307,325,306,330,279,322,167,278"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a0804dcd2b607f4e8c5b46c8c05f04926" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="290,397,528,452"/>
<area shape="poly" title=" " alt="" coords="142,274,202,327,240,357,281,382,292,387,289,392,278,387,237,361,198,332,138,278"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a9aeb8b83ea3f4b13a183b6ac55b35a70" title="Writes some contents &#160;to a file at path &#160;overwriting previous content." alt="" coords="324,476,494,517"/>
<area shape="poly" title=" " alt="" coords="132,275,154,315,187,366,230,418,254,442,281,462,310,477,308,481,278,467,251,446,226,422,182,369,149,318,127,277"/>
</map>
</div>

</div>
</div>
<a id="af207019cbf73d4992ff3172c0968b163" name="af207019cbf73d4992ff3172c0968b163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af207019cbf73d4992ff3172c0968b163">&#9670;&#160;</a></span>OfflineInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.OfflineInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a>&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Offline an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">user</td><td>The User performing the operation.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#abca82157721193c4bb14b3628e9a083e">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00338">338</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  339</span>        {</div>
<div class="line"><span class="lineno">  340</span>            ArgumentNullException.ThrowIfNull(metadata);</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  343</span>            {</div>
<div class="line"><span class="lineno">  344</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;</a>? container;</div>
<div class="line"><span class="lineno">  345</span>                var instanceId = metadata.Require(x =&gt; x.Id);</div>
<div class="line"><span class="lineno">  346</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  347</span>                {</div>
<div class="line"><span class="lineno">  348</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.TryGetValue(instanceId, out container))</div>
<div class="line"><span class="lineno">  349</span>                    {</div>
<div class="line"><span class="lineno">  350</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Not offlining removed instance {instanceId}&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  351</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  352</span>                    }</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Remove(instanceId);</div>
<div class="line"><span class="lineno">  355</span>                }</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Offlining instance ID {instanceId}&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  360</span>                {</div>
<div class="line"><span class="lineno">  361</span>                    await container.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html#aa313916be969b264bc13c54b69976b17">OnZeroReferences</a>.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>                    <span class="comment">// we are the one responsible for cancelling his jobs</span></div>
<div class="line"><span class="lineno">  364</span>                    ValueTask&lt;Job?[]&gt; groupedTask = <span class="keywordflow">default</span>;</div>
<div class="line"><span class="lineno">  365</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ab5c8e78bdae6eb6eb2ed289563c639cc">databaseContextFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">UseContext</a>(</div>
<div class="line"><span class="lineno">  366</span>                        async db =&gt;</div>
<div class="line"><span class="lineno">  367</span>                        {</div>
<div class="line"><span class="lineno">  368</span>                            var jobs = await db</div>
<div class="line"><span class="lineno">  369</span>                                .Jobs</div>
<div class="line"><span class="lineno">  370</span>                                .AsQueryable()</div>
<div class="line"><span class="lineno">  371</span>                                .Where(x =&gt; x.Instance!.Id == metadata.Id &amp;&amp; !x.StoppedAt.HasValue)</div>
<div class="line"><span class="lineno">  372</span>                                .Select(x =&gt; <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Job</a>(x.Id!.Value))</div>
<div class="line"><span class="lineno">  373</span>                                .ToListAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>                            groupedTask = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(</div>
<div class="line"><span class="lineno">  376</span>                                jobs.Select(job =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">CancelJob</a>(job, user, <span class="keyword">true</span>, cancellationToken)),</div>
<div class="line"><span class="lineno">  377</span>                                jobs.Count);</div>
<div class="line"><span class="lineno">  378</span>                        });</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>                    await groupedTask;</div>
<div class="line"><span class="lineno">  381</span>                }</div>
<div class="line"><span class="lineno">  382</span>                <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  383</span>                {</div>
<div class="line"><span class="lineno">  384</span>                    <span class="comment">// not too late to change your mind</span></div>
<div class="line"><span class="lineno">  385</span>                    lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  386</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Add(instanceId, container);</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  389</span>                }</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  392</span>                {</div>
<div class="line"><span class="lineno">  393</span>                    <span class="comment">// at this point we can&#39;t really stop offlining the instance just because the request was cancelled</span></div>
<div class="line"><span class="lineno">  394</span>                    await container.Instance.StopAsync(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Token);</div>
<div class="line"><span class="lineno">  395</span>                }</div>
<div class="line"><span class="lineno">  396</span>                <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  397</span>                {</div>
<div class="line"><span class="lineno">  398</span>                    await container.Instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  399</span>                }</div>
<div class="line"><span class="lineno">  400</span>            }</div>
<div class="line"><span class="lineno">  401</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">Tgstation.Server.Common.Extensions.ValueTaskExtensions</a></div><div class="ttdoc">Extension methods for the ValueTask and ValueTask&lt;TResult&gt; classes.</div><div class="ttdef"><b>Definition</b> <a href="_value_task_extensions_8cs_source.html#l00011">ValueTaskExtensions.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions_html_a58adbd94d764754bd3e6c566a5fe7fe3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll</a></div><div class="ttdeci">static async ValueTask WhenAll(IEnumerable&lt; ValueTask &gt; tasks)</div><div class="ttdoc">Fully await a given list of tasks .</div><div class="ttdef"><b>Definition</b> <a href="_value_task_extensions_8cs_source.html#l00099">ValueTaskExtensions.cs:99</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_job_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_job.html">Tgstation.Server.Host.Models.Job</a></div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_host_2_models_2_job_8cs_source.html#l00014">Job.cs:16</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">Tgstation.Server.Host.Utils.ReferenceCountingContainer</a></div><div class="ttdoc">Wrapper for managing some TWrapped .</div><div class="ttdef"><b>Definition</b> <a href="_reference_counting_container_8cs_source.html#l00011">ReferenceCountingContainer.cs:14</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container_html_aa313916be969b264bc13c54b69976b17"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html#aa313916be969b264bc13c54b69976b17">Tgstation.Server.Host.Utils.ReferenceCountingContainer.OnZeroReferences</a></div><div class="ttdeci">Task OnZeroReferences</div><div class="ttdoc">A Task that completes when there are no TReference s active for the Instance.</div><div class="ttdef"><b>Definition</b> <a href="_reference_counting_container_8cs_source.html#l00023">ReferenceCountingContainer.cs:24</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager_html_a5760fe527065407b364e674d2a9eaf1d"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">Tgstation.Server.Host.Jobs.IJobManager.CancelJob</a></div><div class="ttdeci">ValueTask&lt; Job?&gt; CancelJob(Job job, User? user, bool blocking, CancellationToken cancellationToken)</div><div class="ttdoc">Cancels a give job .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d">Tgstation.Server.Host.Jobs.IJobManager.CancelJob()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00056">Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</a>, <a class="el" href="_reference_counting_container_8cs_source.html#l00018">Tgstation.Server.Host.Utils.ReferenceCountingContainer&lt; TWrapped, TReference &gt;.Instance</a>, <a class="el" href="_instance_manager_8cs_source.html#l00111">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00121">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_instance_manager_8cs_source.html#l00066">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_reference_counting_container_8cs_source.html#l00024">Tgstation.Server.Host.Utils.ReferenceCountingContainer&lt; TWrapped, TReference &gt;.OnZeroReferences</a>, <a class="el" href="_instance_manager_8cs_source.html#l00151">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1">Tgstation.Server.Host.Database.IDatabaseContextFactory.UseContext()</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_af207019cbf73d4992ff3172c0968b163_cgraph">
<area shape="rect" title="Offline an IInstance.A ValueTask representing the running operation." alt="" coords="5,104,232,145"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a5760fe527065407b364e674d2a9eaf1d" title="Cancels a give job ." alt="" coords="308,5,490,46"/>
<area shape="poly" title=" " alt="" coords="166,101,279,56,304,48,306,53,281,62,168,106"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="304,71,494,111"/>
<area shape="poly" title=" " alt="" coords="232,108,289,101,289,107,232,114"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="280,136,518,177"/>
<area shape="poly" title=" " alt="" coords="232,135,264,138,264,144,232,140"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="291,201,507,256"/>
<area shape="poly" title=" " alt="" coords="171,143,281,186,299,192,297,197,279,191,169,148"/>
</map>
</div>

</div>
</div>
<a id="a4dc85f42ec73bd6fd72085969a7c4cb5" name="a4dc85f42ec73bd6fd72085969a7c4cb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dc85f42ec73bd6fd72085969a7c4cb5">&#9670;&#160;</a></span>OnlineInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.InstanceManager.OnlineInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html">Models::Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Online an <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_instance.html" title="Represents an Api.Models.Instance in the database.">Models.Instance</a> of the desired <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html" title="Component version of IInstanceCore.">IInstance</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_operations.html#a21fcdc8c16fde3dd75ebf3780d7546cf">Tgstation.Server.Host.Components.IInstanceOperations</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00404">404</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  405</span>        {</div>
<div class="line"><span class="lineno">  406</span>            ArgumentNullException.ThrowIfNull(metadata);</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>            var instanceId = metadata.Require(x =&gt; x.Id);</div>
<div class="line"><span class="lineno">  409</span>            <span class="keyword">using </span>var lockContext = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#abaf66550ead757ef3bc6915c9b15d06b">instanceStateChangeSemaphore</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  410</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  411</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.ContainsKey(instanceId))</div>
<div class="line"><span class="lineno">  412</span>                {</div>
<div class="line"><span class="lineno">  413</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Aborting instance creation due to it seemingly already being online&quot;</span>);</div>
<div class="line"><span class="lineno">  414</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  415</span>                }</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogInformation(<span class="stringliteral">&quot;Onlining instance ID {instanceId} ({instanceName}) at {instancePath}&quot;</span>, metadata.Id, metadata.Name, metadata.Path);</div>
<div class="line"><span class="lineno">  418</span>            var instance = await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">CreateInstance</a>(<span class="keyword">this</span>, metadata);</div>
<div class="line"><span class="lineno">  419</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  420</span>            {</div>
<div class="line"><span class="lineno">  421</span>                await instance.StartAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  424</span>                {</div>
<div class="line"><span class="lineno">  425</span>                    lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>)</div>
<div class="line"><span class="lineno">  426</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Add(</div>
<div class="line"><span class="lineno">  427</span>                            instanceId,</div>
<div class="line"><span class="lineno">  428</span>                            <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer&lt;IInstance, InstanceWrapper&gt;</a>(instance));</div>
<div class="line"><span class="lineno">  429</span>                }</div>
<div class="line"><span class="lineno">  430</span>                <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  431</span>                {</div>
<div class="line"><span class="lineno">  432</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(<span class="stringliteral">&quot;Unable to commit onlined instance {instanceId} into service, offlining!&quot;</span>, metadata.Id);</div>
<div class="line"><span class="lineno">  433</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  434</span>                    {</div>
<div class="line"><span class="lineno">  435</span>                        <span class="comment">// DCT: Must always run</span></div>
<div class="line"><span class="lineno">  436</span>                        await instance.StopAsync(CancellationToken.None);</div>
<div class="line"><span class="lineno">  437</span>                    }</div>
<div class="line"><span class="lineno">  438</span>                    <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> innerEx)</div>
<div class="line"><span class="lineno">  439</span>                    {</div>
<div class="line"><span class="lineno">  440</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> AggregateException(innerEx, ex);</div>
<div class="line"><span class="lineno">  441</span>                    }</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>                    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  444</span>                }</div>
<div class="line"><span class="lineno">  445</span>            }</div>
<div class="line"><span class="lineno">  446</span>            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  447</span>            {</div>
<div class="line"><span class="lineno">  448</span>                await instance.DisposeAsync();</div>
<div class="line"><span class="lineno">  449</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  450</span>            }</div>
<div class="line"><span class="lineno">  451</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory_html_aeae385f33c15060d54ff78260f30024a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">Tgstation.Server.Host.Components.IInstanceFactory.CreateInstance</a></div><div class="ttdeci">ValueTask&lt; IInstance &gt; CreateInstance(IBridgeRegistrar bridgeRegistrar, Models.Instance metadata)</div><div class="ttdoc">Create an IInstance.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a">Tgstation.Server.Host.Components.IInstanceFactory.CreateInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00046">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00111">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00121">Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_cgraph">
<area shape="rect" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="5,39,232,79"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="232,43,264,39,264,44,233,48"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="298,71,488,111"/>
<area shape="poly" title=" " alt="" coords="233,70,283,76,282,81,232,75"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_a4dc85f42ec73bd6fd72085969a7c4cb5_icgraph">
<area shape="rect" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="554,5,780,46"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,5,506,46"/>
<area shape="poly" title=" " alt="" coords="538,28,507,28,507,23,538,23"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa2bcc92fca46ad404800304ce4bdd781" title=" " alt="" coords="5,5,232,46"/>
<area shape="poly" title=" " alt="" coords="264,28,232,28,232,23,264,23"/>
</map>
</div>

</div>
</div>
<a id="ad5ab3803515d1f7387db7d7bbdc2a7e0" name="ad5ab3803515d1f7387db7d7bbdc2a7e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ab3803515d1f7387db7d7bbdc2a7e0">&#9670;&#160;</a></span>ProcessBridgeRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html">BridgeResponse</a>?&gt; Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html">BridgeParameters</a>&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a set of bridge <em>parameters</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameters</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_parameters.html" title="Parameters for a bridge request.">BridgeParameters</a> to handle.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A ValueTask&lt;TResult&gt; resulting in the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_response.html" title="A response to a bridge request.">BridgeResponse</a> for the request or <code>null</code> if the request could not be dispatched.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeDispatcher</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00517">517</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  518</span>        {</div>
<div class="line"><span class="lineno">  519</span>            ArgumentNullException.ThrowIfNull(parameters);</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>            var accessIdentifier = parameters.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5">AccessIdentifier</a>;</div>
<div class="line"><span class="lineno">  522</span>            <span class="keywordflow">if</span> (accessIdentifier == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  523</span>            {</div>
<div class="line"><span class="lineno">  524</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;Received invalid bridge request with null access identifier!&quot;</span>);</div>
<div class="line"><span class="lineno">  525</span>                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  526</span>            }</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>            <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>? bridgeHandler = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  529</span>            var loggedDelay = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  530</span>            <span class="keywordflow">for</span> (var i = 0; bridgeHandler == <span class="keyword">null</span> &amp;&amp; i &lt; 30; ++i)</div>
<div class="line"><span class="lineno">  531</span>            {</div>
<div class="line"><span class="lineno">  532</span>                <span class="comment">// There&#39;s a miniscule time period where we could potentially receive a bridge request and not have the registration ready when we launch DD</span></div>
<div class="line"><span class="lineno">  533</span>                <span class="comment">// This is a stopgap</span></div>
<div class="line"><span class="lineno">  534</span>                Task delayTask = Task.CompletedTask;</div>
<div class="line"><span class="lineno">  535</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  536</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.TryGetValue(accessIdentifier, out bridgeHandler))</div>
<div class="line"><span class="lineno">  537</span>                    {</div>
<div class="line"><span class="lineno">  538</span>                        <span class="keywordflow">if</span> (!loggedDelay)</div>
<div class="line"><span class="lineno">  539</span>                        {</div>
<div class="line"><span class="lineno">  540</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Received bridge request with unregistered access identifier \&quot;{aid}\&quot;. Waiting up to 3 seconds for it to be registered...&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  541</span>                            loggedDelay = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  542</span>                        }</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>                        delayTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad6f992fed638980594fd5a6c45b8946b">asyncDelayer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977">Delay</a>(TimeSpan.FromMilliseconds(100), cancellationToken);</div>
<div class="line"><span class="lineno">  545</span>                    }</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>                await delayTask;</div>
<div class="line"><span class="lineno">  548</span>            }</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>            <span class="keywordflow">if</span> (bridgeHandler == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  551</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  552</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.TryGetValue(accessIdentifier, out bridgeHandler))</div>
<div class="line"><span class="lineno">  553</span>                    {</div>
<div class="line"><span class="lineno">  554</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;Received invalid bridge request with access identifier: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  555</span>                        <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  556</span>                    }</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>            <span class="keywordflow">return</span> await bridgeHandler.ProcessBridgeRequest(parameters, cancellationToken);</div>
<div class="line"><span class="lineno">  559</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters_html_af84241c8eda4d8f7deddb9c5b7eb79a5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5">Tgstation.Server.Host.Components.Interop.DMApiParameters.AccessIdentifier</a></div><div class="ttdeci">string AccessIdentifier</div><div class="ttdoc">Used to identify and authenticate the DreamDaemon instance.</div><div class="ttdef"><b>Definition</b> <a href="_d_m_api_parameters_8cs_source.html#l00015">DMApiParameters.cs:15</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeHandler</a></div><div class="ttdef"><b>Definition</b> <a href="_i_bridge_handler_8cs_source.html#l00004">IBridgeHandler.cs:5</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_d_m_api_parameters_8cs_source.html#l00015">Tgstation.Server.Host.Components.Interop.DMApiParameters.AccessIdentifier</a>, <a class="el" href="_instance_manager_8cs_source.html#l00081">Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</a>, <a class="el" href="_instance_manager_8cs_source.html#l00116">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977">Tgstation.Server.Host.Utils.IAsyncDelayer.Delay()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeDispatcher.ProcessBridgeRequest()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_ad5ab3803515d1f7387db7d7bbdc2a7e0_cgraph">
<area shape="rect" title="Handle a set of bridge parameters .A ValueTask&lt;TResult&gt; resulting in the BridgeResponse for the reque..." alt="" coords="5,41,263,82"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977" title="Create a Task that completes after a given timeSpan ." alt="" coords="350,5,530,46"/>
<area shape="poly" title=" " alt="" coords="263,44,334,35,335,41,263,49"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_dispatcher.html#a90328b9e6ef2235d53add3132f64f7a5" title="Handle a set of bridge parameters ." alt="" coords="311,70,569,126"/>
<area shape="poly" title=" " alt="" coords="263,74,296,78,295,83,263,79"/>
</map>
</div>

</div>
</div>
<a id="a785c474a5d39316af850239b0c7e107b" name="a785c474a5d39316af850239b0c7e107b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a785c474a5d39316af850239b0c7e107b">&#9670;&#160;</a></span>RegisterHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html">IBridgeRegistration</a> Tgstation.Server.Host.Components.InstanceManager.RegisterHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>&#160;</td>
          <td class="paramname"><em>bridgeHandler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a given <em>bridgeHandler</em> .<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridgeHandler</td><td>The <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a> to register.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A representative <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registration.html" title="Represents a registration of an interop session.">IBridgeRegistration</a>.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_registrar.html#aa36d6072e7a96ece183b77544c9bfe4b">Tgstation.Server.Host.Components.Interop.Bridge.IBridgeRegistrar</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00562">562</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  563</span>        {</div>
<div class="line"><span class="lineno">  564</span>            ArgumentNullException.ThrowIfNull(bridgeHandler);</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>            var accessIdentifier = bridgeHandler.DMApiParameters.AccessIdentifier</div>
<div class="line"><span class="lineno">  567</span>                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Attempted bridge registration with null AccessIdentifier!&quot;</span>);</div>
<div class="line"><span class="lineno">  568</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  569</span>            {</div>
<div class="line"><span class="lineno">  570</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.Add(accessIdentifier, bridgeHandler);</div>
<div class="line"><span class="lineno">  571</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Registered bridge handler: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  572</span>            }</div>
<div class="line"><span class="lineno">  573</span> </div>
<div class="line"><span class="lineno">  574</span>            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration.html">BridgeRegistration</a>(() =&gt;</div>
<div class="line"><span class="lineno">  575</span>            {</div>
<div class="line"><span class="lineno">  576</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>)</div>
<div class="line"><span class="lineno">  577</span>                {</div>
<div class="line"><span class="lineno">  578</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#af4eafee41a5201cb8f671607b53cc0bd">bridgeHandlers</a>.Remove(accessIdentifier);</div>
<div class="line"><span class="lineno">  579</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Unregistered bridge handler: {accessIdentifier}&quot;</span>, accessIdentifier);</div>
<div class="line"><span class="lineno">  580</span>                }</div>
<div class="line"><span class="lineno">  581</span>            });</div>
<div class="line"><span class="lineno">  582</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_bridge_registration.html">Tgstation.Server.Host.Components.Interop.Bridge.BridgeRegistration</a></div><div class="ttdef"><b>Definition</b> <a href="_bridge_registration_8cs_source.html#l00008">BridgeRegistration.cs:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00116">Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>.</p>

</div>
</div>
<a id="aa2bcc92fca46ad404800304ce4bdd781" name="aa2bcc92fca46ad404800304ce4bdd781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2bcc92fca46ad404800304ce4bdd781">&#9670;&#160;</a></span>StartAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.InstanceManager.StartAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00454">454</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  455</span>        {</div>
<div class="line"><span class="lineno">  456</span>            cancellationToken.Register(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Cancel);</div>
<div class="line"><span class="lineno">  457</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Initialize</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Token);</div>
<div class="line"><span class="lineno">  458</span>            <span class="keywordflow">return</span> Task.CompletedTask;</div>
<div class="line"><span class="lineno">  459</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_a7da7b0a7f75cbd3bcebc0e215f9dfcef"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">Tgstation.Server.Host.Components.InstanceManager.startupTask</a></div><div class="ttdeci">Task? startupTask</div><div class="ttdoc">The Task returned by Initialize(CancellationToken).</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00161">InstanceManager.cs:161</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_html_aa70355ebb8437fd170e4f75e826f1ad7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7">Tgstation.Server.Host.Components.InstanceManager.Initialize</a></div><div class="ttdeci">async Task Initialize(CancellationToken cancellationToken)</div><div class="ttdoc">Initializes the InstanceManager.</div><div class="ttdef"><b>Definition</b> <a href="_instance_manager_8cs_source.html#l00599">InstanceManager.cs:599</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00146">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00161">Tgstation.Server.Host.Components.InstanceManager.startupTask</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aa2bcc92fca46ad404800304ce4bdd781_cgraph">
<area shape="rect" title=" " alt="" coords="5,274,232,315"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aa70355ebb8437fd170e4f75e826f1ad7" title="Initializes the InstanceManager." alt="" coords="280,274,506,315"/>
<area shape="poly" title=" " alt="" coords="232,292,264,292,264,297,232,297"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html#a23de62961f3d9eb3db05d4db8c409bac" title="Activate the IJobManager." alt="" coords="603,78,784,119"/>
<area shape="poly" title=" " alt="" coords="406,272,464,202,506,163,553,130,587,114,589,119,555,134,509,167,468,205,410,276"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a3e875f6dd7bf0458e6d54e0dcf7bfe44" title="Check we have a valid system and configuration." alt="" coords="554,144,833,184"/>
<area shape="poly" title=" " alt="" coords="421,271,480,233,553,195,574,187,576,192,555,200,483,237,424,276"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#adb01d302ec13ad32897ae83be130afd0" title="Kill the server with a fatal exception." alt="" coords="604,209,784,250"/>
<area shape="poly" title=" " alt="" coords="489,271,587,249,589,255,490,276"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae64238c09aa5b3301d05109ceee5d09e" title="Initializes the connection to the TGS swarm." alt="" coords="581,274,807,315"/>
<area shape="poly" title=" " alt="" coords="506,292,565,292,565,297,506,297"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4dc85f42ec73bd6fd72085969a7c4cb5" title="Online an IInstance.A ValueTask representing the running operation." alt="" coords="581,340,807,380"/>
<area shape="poly" title=" " alt="" coords="490,313,583,333,582,338,489,318"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="610,405,777,446"/>
<area shape="poly" title=" " alt="" coords="424,313,483,352,555,389,596,403,594,408,553,394,480,356,421,318"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#a1da664d7237dbec5a6cb9ce04b79ccc1" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="575,470,813,511"/>
<area shape="poly" title=" " alt="" coords="410,313,468,384,509,422,555,455,568,461,566,466,553,459,506,426,464,387,406,317"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_extensions_1_1_socket_extensions.html#ad87cda4241401c1a92afb27242c2e0de" title="Attempt to exclusively bind to a given port ." alt="" coords="901,13,1117,54"/>
<area shape="poly" title=" " alt="" coords="809,141,832,128,847,113,855,97,863,81,880,64,889,58,892,63,883,69,868,84,860,100,851,117,835,133,811,145"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html#a0dff52d3ac52e100397122e63e1337ee" title="Validates the current ConfigVersion&#39;s compatibility and provides migration instructions." alt="" coords="881,78,1137,119"/>
<area shape="poly" title=" " alt="" coords="795,140,892,120,893,125,796,146"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html#a6052301d3f6ed6eb477f74a081e2187e" title="Retrieves a ISystemIdentity representing the user executing tgstation&#45;server." alt="" coords="899,144,1119,184"/>
<area shape="poly" title=" " alt="" coords="834,161,883,161,883,167,834,167"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_system_1_1_process_executor.html#a744541bf587f773df0ccfa64ff4ae7ec" title="Runs a given action &#160;making sure to not launch any processes while its running." alt="" coords="1185,5,1424,61"/>
<area shape="poly" title=" " alt="" coords="1118,31,1169,31,1169,36,1118,36"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html#aeb604334bd297d47506dc23e0d115977" title="Create a Task that completes after a given timeSpan ." alt="" coords="919,209,1099,250"/>
<area shape="poly" title=" " alt="" coords="795,271,903,248,904,253,796,276"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#ad07d54ac504afa080dab8b4e37115439" title="Attempt to register with the swarm controller if not one, sets up the database otherwise." alt="" coords="901,274,1117,315"/>
<area shape="poly" title=" " alt="" coords="807,292,886,292,886,297,807,297"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html#aeae385f33c15060d54ff78260f30024a" title="Create an IInstance." alt="" coords="896,340,1122,380"/>
<area shape="poly" title=" " alt="" coords="807,357,880,357,880,363,807,363"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="914,405,1104,446"/>
<area shape="poly" title=" " alt="" coords="796,378,900,400,899,405,795,383"/>
</map>
</div>

</div>
</div>
<a id="aaa1a2f2c9fe345546fd5f8ae27fe466b" name="aaa1a2f2c9fe345546fd5f8ae27fe466b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1a2f2c9fe345546fd5f8ae27fe466b">&#9670;&#160;</a></span>StopAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.InstanceManager.StopAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00462">462</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  463</span>        {</div>
<div class="line"><span class="lineno">  464</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  465</span>            {</div>
<div class="line"><span class="lineno">  466</span>                <span class="keyword">using</span> (cancellationToken.Register(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#aeb76c23570af139eb50c9091c462ecf9">shutdownCancellationTokenSource</a>.Cancel))</div>
<div class="line"><span class="lineno">  467</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  468</span>                    {</div>
<div class="line"><span class="lineno">  469</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  470</span>                        {</div>
<div class="line"><span class="lineno">  471</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogWarning(<span class="stringliteral">&quot;InstanceManager was never started!&quot;</span>);</div>
<div class="line"><span class="lineno">  472</span>                            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  473</span>                        }</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>                        <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogDebug(<span class="stringliteral">&quot;Stopping instance manager...&quot;</span>);</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>                        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a>.IsCompleted)</div>
<div class="line"><span class="lineno">  478</span>                        {</div>
<div class="line"><span class="lineno">  479</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogTrace(<span class="stringliteral">&quot;Interrupting startup task...&quot;</span>);</div>
<div class="line"><span class="lineno">  480</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a76fbe64a7ff3a9fc273ecc05f613ed7c">startupCancellationTokenSource</a>.Cancel();</div>
<div class="line"><span class="lineno">  481</span>                            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7da7b0a7f75cbd3bcebc0e215f9dfcef">startupTask</a>;</div>
<div class="line"><span class="lineno">  482</span>                        }</div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span>                        var instanceFactoryStopTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ae2b48b5197337f7a311fd115951be7f6">instanceFactory</a>.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  485</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a4cba827c550b76d41c119b62d25c4668">jobService</a>.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>                        async ValueTask OfflineInstanceImmediate(IInstance instance, CancellationToken cancellationToken)</div>
<div class="line"><span class="lineno">  488</span>                        {</div>
<div class="line"><span class="lineno">  489</span>                            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  490</span>                            {</div>
<div class="line"><span class="lineno">  491</span>                                await instance.StopAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  492</span>                            }</div>
<div class="line"><span class="lineno">  493</span>                            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  494</span>                            {</div>
<div class="line"><span class="lineno">  495</span>                                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogError(ex, <span class="stringliteral">&quot;Instance shutdown exception!&quot;</span>);</div>
<div class="line"><span class="lineno">  496</span>                            }</div>
<div class="line"><span class="lineno">  497</span>                        }</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>                        await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html">ValueTaskExtensions</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3">WhenAll</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a25d96cfaae1f2de6a931a8158b2290c1">instances</a>.Select(x =&gt; OfflineInstanceImmediate(x.Value.Instance, cancellationToken)));</div>
<div class="line"><span class="lineno">  500</span>                        await instanceFactoryStopTask;</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>                        await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a7281abf42fbdf74cfbabfe9181ad301e">swarmServiceController</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Shutdown</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  503</span>                    }</div>
<div class="line"><span class="lineno">  504</span>                    <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  505</span>                    {</div>
<div class="line"><span class="lineno">  506</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  507</span>                            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad650e598cfd489a215ab0b6dfcc13910">console</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">SetTitle</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#ad66bf7714d6593c0793e5612b60335b8">originalConsoleTitle</a>);</div>
<div class="line"><span class="lineno">  508</span>                    }</div>
<div class="line"><span class="lineno">  509</span>            }</div>
<div class="line"><span class="lineno">  510</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_exception.html">Exception</a> ex)</div>
<div class="line"><span class="lineno">  511</span>            {</div>
<div class="line"><span class="lineno">  512</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html#a968fedca8d4cc5ff16c77c0cbc782bda">logger</a>.LogCritical(ex, <span class="stringliteral">&quot;Instance manager stop exception!&quot;</span>);</div>
<div class="line"><span class="lineno">  513</span>            }</div>
<div class="line"><span class="lineno">  514</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller_html_a6296d8313a5ce21888e6eb9f08b8379a"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Tgstation.Server.Host.Swarm.ISwarmServiceController.Shutdown</a></div><div class="ttdeci">ValueTask Shutdown(CancellationToken cancellationToken)</div><div class="ttdoc">Deregister with the swarm controller or put clients into querying state.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_instance_manager_8cs_source.html#l00096">Tgstation.Server.Host.Components.InstanceManager.console</a>, <a class="el" href="_instance_manager_8cs_source.html#l00046">Tgstation.Server.Host.Components.InstanceManager.instanceFactory</a>, <a class="el" href="_instance_manager_8cs_source.html#l00111">Tgstation.Server.Host.Components.InstanceManager.instances</a>, <a class="el" href="_instance_manager_8cs_source.html#l00066">Tgstation.Server.Host.Components.InstanceManager.jobService</a>, <a class="el" href="_instance_manager_8cs_source.html#l00106">Tgstation.Server.Host.Components.InstanceManager.logger</a>, <a class="el" href="_instance_manager_8cs_source.html#l00156">Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74">Tgstation.Server.Host.IO.IConsole.SetTitle()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a">Tgstation.Server.Host.Swarm.ISwarmServiceController.Shutdown()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00151">Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00146">Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</a>, <a class="el" href="_instance_manager_8cs_source.html#l00161">Tgstation.Server.Host.Components.InstanceManager.startupTask</a>, <a class="el" href="_instance_manager_8cs_source.html#l00091">Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</a>, and <a class="el" href="_value_task_extensions_8cs_source.html#l00099">Tgstation.Server.Common.Extensions.ValueTaskExtensions.WhenAll()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager_aaa1a2f2c9fe345546fd5f8ae27fe466b_cgraph">
<area shape="rect" title=" " alt="" coords="5,71,232,111"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#abcec01af471cee5fce210b9fbcb2fa74" title="Sets a newTitle &#160;console window." alt="" coords="309,5,477,46"/>
<area shape="poly" title=" " alt="" coords="206,67,293,47,295,52,208,73"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html#a6296d8313a5ce21888e6eb9f08b8379a" title="Deregister with the swarm controller or put clients into querying state." alt="" coords="280,71,506,111"/>
<area shape="poly" title=" " alt="" coords="232,88,264,88,264,94,232,94"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_common_1_1_extensions_1_1_value_task_extensions.html#a58adbd94d764754bd3e6c566a5fe7fe3" title="Fully await a given list of tasks ." alt="" coords="285,135,501,191"/>
<area shape="poly" title=" " alt="" coords="199,109,271,128,269,133,198,114"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa335c25ccb65f93242424c79396a29dc" name="aa335c25ccb65f93242424c79396a29dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa335c25ccb65f93242424c79396a29dc">&#9670;&#160;</a></span>assemblyInformationProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a> Tgstation.Server.Host.Components.InstanceManager.assemblyInformationProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAssemblyInformationProvider for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00061">61</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ad6f992fed638980594fd5a6c45b8946b" name="ad6f992fed638980594fd5a6c45b8946b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f992fed638980594fd5a6c45b8946b">&#9670;&#160;</a></span>asyncDelayer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> Tgstation.Server.Host.Components.InstanceManager.asyncDelayer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAsyncDelayer for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00081">81</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00703">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00517">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>.</p>

</div>
</div>
<a id="af4eafee41a5201cb8f671607b53cc0bd" name="af4eafee41a5201cb8f671607b53cc0bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4eafee41a5201cb8f671607b53cc0bd">&#9670;&#160;</a></span>bridgeHandlers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Dictionary&lt;string, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_bridge_1_1_i_bridge_handler.html">IBridgeHandler</a>&gt; Tgstation.Server.Host.Components.InstanceManager.bridgeHandlers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_d_m_api_parameters.html#af84241c8eda4d8f7deddb9c5b7eb79a5" title="Used to identify and authenticate the DreamDaemon instance.">DMApiParameters.AccessIdentifier</a>s to their respective IBridgeHandlers. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00116">116</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00517">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00562">Tgstation.Server.Host.Components.InstanceManager.RegisterHandler()</a>.</p>

</div>
</div>
<a id="ad650e598cfd489a215ab0b6dfcc13910" name="ad650e598cfd489a215ab0b6dfcc13910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad650e598cfd489a215ab0b6dfcc13910">&#9670;&#160;</a></span>console</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html">IConsole</a> Tgstation.Server.Host.Components.InstanceManager.console</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IConsole for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00096">96</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="ab5c8e78bdae6eb6eb2ed289563c639cc" name="ab5c8e78bdae6eb6eb2ed289563c639cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c8e78bdae6eb6eb2ed289563c639cc">&#9670;&#160;</a></span>databaseContextFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html">IDatabaseContextFactory</a> Tgstation.Server.Host.Components.InstanceManager.databaseContextFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IDatabaseContextFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00056">56</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00267">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00338">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>.</p>

</div>
</div>
<a id="a6ba869dae354db235f8518f7283a531c" name="a6ba869dae354db235f8518f7283a531c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba869dae354db235f8518f7283a531c">&#9670;&#160;</a></span>disposed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.InstanceManager.disposed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the InstanceManager has been DisposeAsync'd. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00166">166</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00233">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>.</p>

</div>
</div>
<a id="aaa2d14e2052d1ad81104ec0e5afa218e" name="aaa2d14e2052d1ad81104ec0e5afa218e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa2d14e2052d1ad81104ec0e5afa218e">&#9670;&#160;</a></span>generalConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_general_configuration.html">GeneralConfiguration</a> Tgstation.Server.Host.Components.InstanceManager.generalConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The GeneralConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00126">126</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00676">Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ae2b48b5197337f7a311fd115951be7f6" name="ae2b48b5197337f7a311fd115951be7f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2b48b5197337f7a311fd115951be7f6">&#9670;&#160;</a></span>instanceFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_factory.html">IInstanceFactory</a> Tgstation.Server.Host.Components.InstanceManager.instanceFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IInstanceFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00046">46</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00267">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00404">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a25d96cfaae1f2de6a931a8158b2290c1" name="a25d96cfaae1f2de6a931a8158b2290c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d96cfaae1f2de6a931a8158b2290c1">&#9670;&#160;</a></span>instances</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly Dictionary&lt;long, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_reference_counting_container.html">ReferenceCountingContainer</a>&lt;<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance.html">IInstance</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_wrapper.html">InstanceWrapper</a>&gt; &gt; Tgstation.Server.Host.Components.InstanceManager.instances</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of instance <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570" title="The ID of the entity.">EntityId.Id</a>s to the respective ReferenceCountingContainer&lt;TWrapped, TReference&gt; for IInstances. Also used as a <code>lock</code> object. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00111">111</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00233">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00585">Tgstation.Server.Host.Components.InstanceManager.GetInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00253">Tgstation.Server.Host.Components.InstanceManager.GetInstanceReference()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00338">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00404">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="abaf66550ead757ef3bc6915c9b15d06b" name="abaf66550ead757ef3bc6915c9b15d06b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaf66550ead757ef3bc6915c9b15d06b">&#9670;&#160;</a></span>instanceStateChangeSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.InstanceManager.instanceStateChangeSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SemaphoreSlim used to guard calls to OnlineInstance(Models.Instance, CancellationToken) and OfflineInstance(Models.Instance, User, CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00121">121</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00233">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00267">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00338">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00404">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>.</p>

</div>
</div>
<a id="a4f795602aaedbd15ead5c52c3592483d" name="a4f795602aaedbd15ead5c52c3592483d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f795602aaedbd15ead5c52c3592483d">&#9670;&#160;</a></span>internalConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_internal_configuration.html">InternalConfiguration</a> Tgstation.Server.Host.Components.InstanceManager.internalConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The InternalConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00136">136</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00676">Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="a59bc4b977f9b72208d553fbfa57f118e" name="a59bc4b977f9b72208d553fbfa57f118e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59bc4b977f9b72208d553fbfa57f118e">&#9670;&#160;</a></span>ioManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.InstanceManager.ioManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00051">51</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00267">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>.</p>

</div>
</div>
<a id="a4cba827c550b76d41c119b62d25c4668" name="a4cba827c550b76d41c119b62d25c4668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cba827c550b76d41c119b62d25c4668">&#9670;&#160;</a></span>jobService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_service.html">IJobService</a> Tgstation.Server.Host.Components.InstanceManager.jobService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IJobService for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00066">66</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00338">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a968fedca8d4cc5ff16c77c0cbc782bda" name="a968fedca8d4cc5ff16c77c0cbc782bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968fedca8d4cc5ff16c77c0cbc782bda">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ILogger&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance_manager.html">InstanceManager</a>&gt; Tgstation.Server.Host.Components.InstanceManager.logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ILogger for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00106">106</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00676">Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00233">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00267">Tgstation.Server.Host.Components.InstanceManager.MoveInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00338">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00404">Tgstation.Server.Host.Components.InstanceManager.OnlineInstance()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00517">Tgstation.Server.Host.Components.InstanceManager.ProcessBridgeRequest()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00562">Tgstation.Server.Host.Components.InstanceManager.RegisterHandler()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="ad66bf7714d6593c0793e5612b60335b8" name="ad66bf7714d6593c0793e5612b60335b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66bf7714d6593c0793e5612b60335b8">&#9670;&#160;</a></span>originalConsoleTitle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly? string Tgstation.Server.Host.Components.InstanceManager.originalConsoleTitle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The original <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_console.html#a555a7fe50697f3b18c5d9081f5f58f4b" title="Gets or sets the IConsole window&#39;s title. Can return null if getting the console title is not support...">IConsole.Title</a> of console. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00156">156</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a26a35317eec77d8eed96595fc85f7c4c" name="a26a35317eec77d8eed96595fc85f7c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26a35317eec77d8eed96595fc85f7c4c">&#9670;&#160;</a></span>platformIdentifier</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_platform_identifier.html">IPlatformIdentifier</a> Tgstation.Server.Host.Components.InstanceManager.platformIdentifier</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IPlatformIdentifier for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00101">101</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00676">Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="a16905d984154ab9356b3477dc257f435" name="a16905d984154ab9356b3477dc257f435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16905d984154ab9356b3477dc257f435">&#9670;&#160;</a></span>readyTcs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly TaskCompletionSource Tgstation.Server.Host.Components.InstanceManager.readyTcs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The TaskCompletionSource for Ready. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00141">141</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ac2ba10fddea5448f4c8c08f363a0e391" name="ac2ba10fddea5448f4c8c08f363a0e391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ba10fddea5448f4c8c08f363a0e391">&#9670;&#160;</a></span>serverControl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> Tgstation.Server.Host.Components.InstanceManager.serverControl</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IServerControl for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00071">71</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="ad5b7e13dc94565671f962eb9fe62fd82" name="ad5b7e13dc94565671f962eb9fe62fd82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b7e13dc94565671f962eb9fe62fd82">&#9670;&#160;</a></span>serverPortProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_port_provider.html">IServerPortProvider</a> Tgstation.Server.Host.Components.InstanceManager.serverPortProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IServerPortProvider for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00086">86</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00676">Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="aeb76c23570af139eb50c9091c462ecf9" name="aeb76c23570af139eb50c9091c462ecf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb76c23570af139eb50c9091c462ecf9">&#9670;&#160;</a></span>shutdownCancellationTokenSource</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly CancellationTokenSource Tgstation.Server.Host.Components.InstanceManager.shutdownCancellationTokenSource</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource linked with the token given to StopAsync(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00151">151</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00233">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00338">Tgstation.Server.Host.Components.InstanceManager.OfflineInstance()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a76fbe64a7ff3a9fc273ecc05f613ed7c" name="a76fbe64a7ff3a9fc273ecc05f613ed7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fbe64a7ff3a9fc273ecc05f613ed7c">&#9670;&#160;</a></span>startupCancellationTokenSource</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly CancellationTokenSource Tgstation.Server.Host.Components.InstanceManager.startupCancellationTokenSource</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource for Initialize(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00146">146</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00233">Tgstation.Server.Host.Components.InstanceManager.DisposeAsync()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00454">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a7da7b0a7f75cbd3bcebc0e215f9dfcef" name="a7da7b0a7f75cbd3bcebc0e215f9dfcef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da7b0a7f75cbd3bcebc0e215f9dfcef">&#9670;&#160;</a></span>startupTask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task? Tgstation.Server.Host.Components.InstanceManager.startupTask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Task returned by Initialize(CancellationToken). </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00161">161</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00454">Tgstation.Server.Host.Components.InstanceManager.StartAsync()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a9eaeb3190a96e2d25bdb58dedb00e07f" name="a9eaeb3190a96e2d25bdb58dedb00e07f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eaeb3190a96e2d25bdb58dedb00e07f">&#9670;&#160;</a></span>swarmConfiguration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_configuration_1_1_swarm_configuration.html">SwarmConfiguration</a> Tgstation.Server.Host.Components.InstanceManager.swarmConfiguration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The SwarmConfiguration for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00131">131</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00599">Tgstation.Server.Host.Components.InstanceManager.Initialize()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<a id="a7281abf42fbdf74cfbabfe9181ad301e" name="a7281abf42fbdf74cfbabfe9181ad301e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7281abf42fbdf74cfbabfe9181ad301e">&#9670;&#160;</a></span>swarmServiceController</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_swarm_1_1_i_swarm_service_controller.html">ISwarmServiceController</a> Tgstation.Server.Host.Components.InstanceManager.swarmServiceController</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISwarmServiceController for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00091">91</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00703">Tgstation.Server.Host.Components.InstanceManager.InitializeSwarm()</a>, <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00462">Tgstation.Server.Host.Components.InstanceManager.StopAsync()</a>.</p>

</div>
</div>
<a id="a914147c0498a9b2482efe956486646fb" name="a914147c0498a9b2482efe956486646fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a914147c0498a9b2482efe956486646fb">&#9670;&#160;</a></span>systemIdentityFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_security_1_1_i_system_identity_factory.html">ISystemIdentityFactory</a> Tgstation.Server.Host.Components.InstanceManager.systemIdentityFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISystemIdentityFactory for the InstanceManager. </p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00076">76</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_instance_manager_8cs_source.html#l00676">Tgstation.Server.Host.Components.InstanceManager.CheckSystemCompatibility()</a>, and <a class="el" href="_instance_manager_8cs_source.html#l00187">Tgstation.Server.Host.Components.InstanceManager.InstanceManager()</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a0d54ae3e93cf9a9af10411c733e77f44" name="a0d54ae3e93cf9a9af10411c733e77f44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d54ae3e93cf9a9af10411c733e77f44">&#9670;&#160;</a></span>Ready</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.InstanceManager.Ready</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Task that completes when the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html" title="For managing IInstances.">IInstanceManager</a> finishes initializing. </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_instance_manager.html#a4ad311358f74779a6c1f2fcba4a30578">Tgstation.Server.Host.Components.IInstanceManager</a>.</p>

<p class="definition">Definition at line <a class="el" href="_instance_manager_8cs_source.html#l00041">41</a> of file <a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/<a class="el" href="_instance_manager_8cs_source.html">InstanceManager.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
