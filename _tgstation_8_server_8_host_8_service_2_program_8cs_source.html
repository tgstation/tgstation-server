<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: src/Tgstation.Server.Host.Service/Program.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;6.15.0</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a01d946a2e1b048dc542232ffcdcf572.html">Tgstation.Server.Host.Service</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">Program.cs</div></div>
</div><!--header-->
<div class="contents">
<a href="_tgstation_8_server_8_host_8_service_2_program_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="keyword">using </span>System;</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="keyword">using </span>System.Collections.Specialized;</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="keyword">using </span>System.Configuration.Install;</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="keyword">using </span>System.IO;</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">using </span>System.Reflection;</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="keyword">using </span>System.Runtime.Versioning;</div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="keyword">using </span>System.ServiceProcess;</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="keyword">using </span>System.Threading;</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="keyword">using </span>System.Threading.Tasks;</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="keyword">using </span>McMaster.Extensions.CommandLineUtils;</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="keyword">using </span>Microsoft.Extensions.Hosting.WindowsServices;</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="keyword">using </span>Microsoft.Extensions.Logging;</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">using </span><a class="code hl_namespace" href="namespace_tgstation_1_1_server_1_1_host_1_1_common.html">Tgstation.Server.Host.Common</a>;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="keyword">using </span><a class="code hl_namespace" href="namespace_tgstation_1_1_server_1_1_host_1_1_watchdog.html">Tgstation.Server.Host.Watchdog</a>;</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_tgstation_1_1_server_1_1_host_1_1_service.html">Tgstation.Server.Host.Service</a></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>{</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    [SupportedOSPlatform(<span class="stringliteral">&quot;windows&quot;</span>)]</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    <span class="keyword">sealed</span> <span class="keyword">class </span><a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_program.html">Program</a></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    {</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#pragma warning disable SA1401 </span><span class="comment">// Fields should be private</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>        <span class="keyword">internal</span> <span class="keyword">static</span> <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_i_watchdog_factory.html">IWatchdogFactory</a> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory.html">WatchdogFactory</a> = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory.html">WatchdogFactory</a>();</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#pragma warning restore SA1401 </span><span class="comment">// Fields should be private</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        [Option(ShortName = <span class="stringliteral">&quot;u&quot;</span>, Description = <span class="stringliteral">&quot;Uninstalls ANY installed tgstation-server service &gt;=v4.0.0&quot;</span>)]</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> Uninstall { <span class="keyword">get</span>; }</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>        [Option(ShortName = <span class="stringliteral">&quot;x&quot;</span>, Description = <span class="stringliteral">&quot;If the service has to stop, detach any running DreamDaemon processes beforehand. Only supported on versions &gt;=5.13.0&quot;</span>)]</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> Detach { <span class="keyword">get</span>; }</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        [Option(ShortName = <span class="stringliteral">&quot;r&quot;</span>, Description = <span class="stringliteral">&quot;Stop and restart the tgstation-server service&quot;</span>)]</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49a51cfbcff36da74a9fc47f3a5140f99f2">Restart</a> { <span class="keyword">get</span>; }</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        [Option(ShortName = <span class="stringliteral">&quot;i&quot;</span>, Description = <span class="stringliteral">&quot;Installs this executable as the tgstation-server Windows service&quot;</span>)]</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> Install { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        [Option(ShortName = <span class="stringliteral">&quot;f&quot;</span>, Description = <span class="stringliteral">&quot;Automatically agree to uninstall prompts&quot;</span>)]</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="namespace_tgstation_1_1_server_1_1_host_1_1_setup.html#ada83b66b0eb589bb855302d25c41e4dea9eb6b78a99cdb6ffd3d40d18621d9f80">Force</a> { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        [Option(ShortName = <span class="stringliteral">&quot;s&quot;</span>, Description = <span class="stringliteral">&quot;Suppresses console output from the host watchdog&quot;</span>)]</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> Silent { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        [Option(ShortName = <span class="stringliteral">&quot;c&quot;</span>, Description = <span class="stringliteral">&quot;Runs the TGS setup wizard&quot;</span>)]</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> Configure { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        [Option(ShortName = <span class="stringliteral">&quot;p&quot;</span>, Description = <span class="stringliteral">&quot;Arguments passed to main host process&quot;</span>)]</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <span class="keyword">public</span> <span class="keywordtype">string</span>? PassthroughArgs { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>        <span class="keyword">static</span> Task&lt;int&gt; Main(<span class="keywordtype">string</span>[] args) =&gt; CommandLineApplication.ExecuteAsync&lt;<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_program.html">Program</a>&gt;(args);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <span class="keyword">public</span> async Task OnExecuteAsync()</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        {</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>            var standardRun = !Install &amp;&amp; !Uninstall &amp;&amp; !Configure;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>            <span class="keywordflow">if</span> (standardRun)</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>                <span class="keywordflow">if</span> (!Silent &amp;&amp; !WindowsServiceHelpers.IsWindowsService())</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>                {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                    var result = NativeMethods.MessageBox(</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>                        <span class="keywordflow">default</span>,</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>                        <span class="stringliteral">&quot;You are running the TGS windows service executable directly. It should only be run by the service control manager. Would you like to install and configure the service in this location?&quot;</span>,</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>                        <span class="stringliteral">&quot;TGS Service&quot;</span>,</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>                        NativeMethods.MessageBoxButtons.YesNo);</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>                    <span class="keywordflow">if</span> (result != NativeMethods.DialogResult.Yes)</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>                    Install = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>                    Configure = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>                }</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>                    <span class="keyword">using</span> (var service = <span class="keyword">new</span> ServerService(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory.html">WatchdogFactory</a>, GetPassthroughArgs(), LogLevel.Trace))</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                    {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                        service.Run();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                    }</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>            <span class="keywordflow">if</span> (Configure)</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                await RunConfigure(CancellationToken.None); <span class="comment">// DCT: None available</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            <span class="keywordtype">bool</span> stopped = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>            <span class="keywordflow">if</span> (Uninstall)</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>            {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>                <span class="keywordflow">foreach</span> (ServiceController sc <span class="keywordflow">in</span> ServiceController.GetServices())</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>                {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>                    <span class="keywordtype">bool</span> match;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>                    <span class="keyword">using</span> (sc)</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                    {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>                        match = sc.ServiceName == ServerService.Name;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                        <span class="keywordflow">if</span> (match)</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>                            RestartService(sc);</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>                    }</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>                    <span class="keywordflow">if</span> (match)</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>                        InvokeSC(ServerService.Name);</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                }</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>                stopped = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>            }</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>            <span class="keywordflow">if</span> (Install)</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>                stopped |= RunServiceInstall();</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>            <span class="keywordflow">if</span> (Restart)</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>                <span class="keywordflow">foreach</span> (ServiceController sc <span class="keywordflow">in</span> ServiceController.GetServices())</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>                    <span class="keyword">using</span> (sc)</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>                        <span class="keywordflow">if</span> (sc.ServiceName == ServerService.Name)</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>                        {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>                            <span class="keywordflow">if</span> (!stopped)</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>                                RestartService(sc);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>                            sc.Start();</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>                        }</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        <span class="keywordtype">void</span> InvokeSC(<span class="keywordtype">string</span>? serviceToUninstall)</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        {</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>            <span class="keyword">using </span>var installer = <span class="keyword">new</span> ServiceInstaller();</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>            <span class="keywordflow">if</span> (serviceToUninstall != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>            {</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>                installer.Context = <span class="keyword">new</span> InstallContext($<span class="stringliteral">&quot;old-{serviceToUninstall}-uninstall.log&quot;</span>, <span class="keyword">null</span>);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>                installer.ServiceName = serviceToUninstall;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>                installer.Uninstall(<span class="keyword">null</span>);</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>            }</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>            var fullPathToAssembly = Path.GetFullPath(</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>                Assembly.GetExecutingAssembly().Location);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>            var assemblyDirectory = Path.GetDirectoryName(fullPathToAssembly);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>            <span class="keywordflow">if</span> (assemblyDirectory == <span class="keyword">null</span>)</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException($<span class="stringliteral">&quot;Failed to resolve directory name of {assemblyDirectory}&quot;</span>);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>            var assemblyNameWithoutExtension = Path.GetFileNameWithoutExtension(fullPathToAssembly);</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>            var exePath = Path.Combine(assemblyDirectory, $<span class="stringliteral">&quot;{assemblyNameWithoutExtension}.exe&quot;</span>);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>            var programDataDirectory = Path.Combine(</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>                Environment.GetFolderPath(</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>                    Environment.SpecialFolder.CommonApplicationData,</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>                    Environment.SpecialFolderOption.DoNotVerify),</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_server.html">Server</a>.Common.Constants.CanonicalPackageName);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>            <span class="keyword">using </span>var processInstaller = <span class="keyword">new</span> ServiceProcessInstaller();</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>            processInstaller.Account = ServiceAccount.LocalSystem;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            <span class="comment">// Mimicing Tgstation.Server.Host.Service.Wix here, which is the source of truth for this data</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>            installer.Context = <span class="keyword">new</span> InstallContext(</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>                Path.Combine(programDataDirectory, $<span class="stringliteral">&quot;tgs-install-{Guid.NewGuid()}.log&quot;</span>),</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>                [</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>                    $<span class="stringliteral">&quot;assemblypath=\&quot;{exePath}\&quot;{(String.IsNullOrWhiteSpace(PassthroughArgs) ? String.Empty : $&quot;</span> -p=\<span class="stringliteral">&quot;{PassthroughArgs}\&quot;&quot;</span>)}<span class="stringliteral">&quot;,</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="stringliteral">                ]);</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="stringliteral">            installer.Description = $&quot;</span>{<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_server.html">Server</a>.Common.Constants.CanonicalPackageName} running as a Windows service.<span class="stringliteral">&quot;;</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span><span class="stringliteral">            installer.DisplayName = Server.Common.Constants.CanonicalPackageName;</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="stringliteral">            installer.StartType = ServiceStartMode.Automatic;</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="stringliteral">            installer.ServicesDependedOn = new string[] { &quot;</span>Tcpip<span class="stringliteral">&quot;, &quot;</span>Dhcp<span class="stringliteral">&quot;, &quot;</span>Dnscache<span class="stringliteral">&quot; };</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="stringliteral">            installer.ServiceName = ServerService.Name;</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="stringliteral">            installer.Parent = processInstaller;</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="stringliteral">            var state = new ListDictionary();</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="stringliteral">            try</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="stringliteral">            {</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="stringliteral">                installer.Install(state);</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="stringliteral">                installer.Commit(state);</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="stringliteral">            }</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="stringliteral">            catch</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="stringliteral">            {</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="stringliteral">                installer.Rollback(state);</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="stringliteral">                throw;</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span><span class="stringliteral">            }</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="stringliteral">        }</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        bool RunServiceInstall()</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>            // First check if the service already exists</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            bool serviceStopped = false;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            if (Force || !WindowsServiceHelpers.IsWindowsService())</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>                foreach (ServiceController sc in ServiceController.GetServices())</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                    using (sc)</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>                    {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>                        var serviceName = sc.ServiceName;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>                        if (serviceName == ServerService.Name || serviceName == &quot;tgstation-server-4<span class="stringliteral">&quot;)</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span><span class="stringliteral">                        {</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="stringliteral">                            NativeMethods.DialogResult result = !Force</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="stringliteral">                                ? NativeMethods.MessageBox(</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="stringliteral">                                    default,</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="stringliteral">                                    $&quot;</span>You already have another TGS service installed ({sc.ServiceName}). Would you like to uninstall it now? Pressing \<span class="stringliteral">&quot;No\&quot; will cancel this install.&quot;</span>,</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                                    <span class="stringliteral">&quot;TGS Service&quot;</span>,</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                                    NativeMethods.MessageBoxButtons.YesNo)</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                                : NativeMethods.DialogResult.Yes;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>                            <span class="keywordflow">if</span> (result != NativeMethods.DialogResult.Yes)</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                                <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// is this needed after exit?</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>                            <span class="comment">// Stop it first to give it some cleanup time</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                            RestartService(sc);</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                            <span class="comment">// And remove it</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                            InvokeSC(sc.ServiceName);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                        }</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                    }</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>            InvokeSC(<span class="keyword">null</span>);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span> </div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>            <span class="keywordflow">return</span> serviceStopped;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        <span class="keywordtype">void</span> RestartService(ServiceController serviceController)</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            <span class="keywordflow">if</span> (serviceController.Status != ServiceControllerStatus.Running)</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            var stop = !Detach;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>            <span class="keywordflow">if</span> (!stop)</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            {</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                var serviceControllerCommand = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands.html">PipeCommands</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands.html#a06c8d3400eeb8207d35f8f3bae86cfb5">GetServiceCommandId</a>(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands.html">PipeCommands</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands.html#a5118c73a97fc1f6e3484c59c40ceec12">CommandDetachingShutdown</a>);</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                serviceController.ExecuteCommand(serviceControllerCommand!.Value);</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                serviceController.WaitForStatus(ServiceControllerStatus.Stopped, TimeSpan.FromSeconds(30));</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                <span class="keywordflow">if</span> (serviceController.Status != ServiceControllerStatus.Stopped)</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                    stop = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>            }</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>            <span class="keywordflow">if</span> (stop)</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>            {</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                serviceController.Stop();</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                serviceController.WaitForStatus(ServiceControllerStatus.Stopped);</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            }</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        }</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        async ValueTask RunConfigure(CancellationToken cancellationToken)</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>            <span class="keyword">using </span>var loggerFactory = LoggerFactory.Create(builder =&gt;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>            {</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>                <span class="keywordflow">if</span> (!Silent)</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>                    builder.AddConsole();</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>            });</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>            var watchdog = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory.html">WatchdogFactory</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory.html#ad1ffef58b23302061a59e4332c031e79">CreateWatchdog</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_noop_signal_checker.html">NoopSignalChecker</a>(), loggerFactory);</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>            await watchdog.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_i_watchdog.html#aba34e712e0cdbbd747feba6fb9f83176">RunAsync</a>(<span class="keyword">true</span>, GetPassthroughArgs(), cancellationToken);</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        }</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        <span class="keywordtype">string</span>[] GetPassthroughArgs() =&gt; PassthroughArgs?.Split(<span class="charliteral">&#39; &#39;</span>, StringSplitOptions.RemoveEmptyEntries) ?? Array.Empty&lt;<span class="keywordtype">string</span>&gt;();</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    }</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>}</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands.html">Tgstation.Server.Host.Common.PipeCommands</a></div><div class="ttdoc">Values able to be passed via the update file path.</div><div class="ttdef"><b>Definition</b> <a href="_pipe_commands_8cs_source.html#l00006">PipeCommands.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands_html_a06c8d3400eeb8207d35f8f3bae86cfb5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands.html#a06c8d3400eeb8207d35f8f3bae86cfb5">Tgstation.Server.Host.Common.PipeCommands.GetServiceCommandId</a></div><div class="ttdeci">static ? int GetServiceCommandId(string command)</div><div class="ttdoc">Gets the int value of a given command .</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands_html_a5118c73a97fc1f6e3484c59c40ceec12"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_common_1_1_pipe_commands.html#a5118c73a97fc1f6e3484c59c40ceec12">Tgstation.Server.Host.Common.PipeCommands.CommandDetachingShutdown</a></div><div class="ttdeci">const string CommandDetachingShutdown</div><div class="ttdoc">Stops the server ASAP, detaching the watchdog for any running instances.</div><div class="ttdef"><b>Definition</b> <a href="_pipe_commands_8cs_source.html#l00021">PipeCommands.cs:21</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_program_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_program.html">Tgstation.Server.Host.Program</a></div><div class="ttdoc">Entrypoint for the Process.</div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_host_2_program_8cs_source.html#l00019">Program.cs:20</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_server_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_server.html">Tgstation.Server.Host.Server</a></div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00025">Server.cs:26</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_noop_signal_checker_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_noop_signal_checker.html">Tgstation.Server.Host.Watchdog.NoopSignalChecker</a></div><div class="ttdoc">No-op ISignalChecker.</div><div class="ttdef"><b>Definition</b> <a href="_noop_signal_checker_8cs_source.html#l00010">NoopSignalChecker.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory.html">Tgstation.Server.Host.Watchdog.WatchdogFactory</a></div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_host_8_watchdog_2_watchdog_factory_8cs_source.html#l00008">WatchdogFactory.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory_html_ad1ffef58b23302061a59e4332c031e79"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_watchdog_factory.html#ad1ffef58b23302061a59e4332c031e79">Tgstation.Server.Host.Watchdog.WatchdogFactory.CreateWatchdog</a></div><div class="ttdeci">IWatchdog CreateWatchdog(ISignalChecker signalChecker, ILoggerFactory loggerFactory)</div><div class="ttdoc">Create a IWatchdog.A new IWatchdog.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_i_watchdog_factory_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_i_watchdog_factory.html">Tgstation.Server.Host.Watchdog.IWatchdogFactory</a></div><div class="ttdoc">Factory for creating IWatchdogs.</div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_host_8_watchdog_2_i_watchdog_factory_8cs_source.html#l00008">IWatchdogFactory.cs:9</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_i_watchdog_html_aba34e712e0cdbbd747feba6fb9f83176"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_watchdog_1_1_i_watchdog.html#aba34e712e0cdbbd747feba6fb9f83176">Tgstation.Server.Host.Watchdog.IWatchdog.RunAsync</a></div><div class="ttdeci">ValueTask&lt; bool &gt; RunAsync(bool runConfigure, string[] args, CancellationToken cancellationToken)</div><div class="ttdoc">Run the IWatchdog.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_acf2642afce6567c03b79876139a10a49a51cfbcff36da74a9fc47f3a5140f99f2"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49a51cfbcff36da74a9fc47f3a5140f99f2">Tgstation.Server.Api.Rights.DreamDaemonRights.Restart</a></div><div class="ttdeci">@ Restart</div><div class="ttdoc">User can immediately restart the Watchdog.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_common_html"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_common.html">Tgstation.Server.Host.Common</a></div><div class="ttdef"><b>Definition</b> <a href="_tgstation_8_server_8_host_8_common_2_dotnet_helper_8cs_source.html#l00008">DotnetHelper.cs:9</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_service_html"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_service.html">Tgstation.Server.Host.Service</a></div><div class="ttdef"><b>Definition</b> <a href="_installation_extensions_8cs_source.html#l00001">InstallationExtensions.cs:2</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_setup_html_ada83b66b0eb589bb855302d25c41e4dea9eb6b78a99cdb6ffd3d40d18621d9f80"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_setup.html#ada83b66b0eb589bb855302d25c41e4dea9eb6b78a99cdb6ffd3d40d18621d9f80">Tgstation.Server.Host.Setup.SetupWizardMode.Force</a></div><div class="ttdeci">@ Force</div><div class="ttdoc">Force run the wizard.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_watchdog_html"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_watchdog.html">Tgstation.Server.Host.Watchdog</a></div><div class="ttdef"><b>Definition</b> <a href="_bootstrap_settings_8cs_source.html#l00006">BootstrapSettings.cs:7</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
